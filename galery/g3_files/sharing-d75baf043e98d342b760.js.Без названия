(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[969],{74267:(e,t,r)=>{"use strict";r.d(t,{Be:()=>s,Pn:()=>o,m7:()=>a,mC:()=>i,t8:()=>n});var o="/photoapp/v3/account/",n="/photoapp/v3/experiences/onboarding/",i={WEB:"WEB",ANDROID:"ANDROID",IOS:"IOS"},a=20,s=[429]},84956:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const o={CALL_STATUSES:{ERROR:"ERROR",PENDING:"PENDING",STALE:"STALE",SUCCESS:"SUCCESS"},COLLECTION_TYPES:{DAILY_MEMORY:"DAILY_MEMORY",AMAZON_COLLECTION:"AMAZON_COLLECTION",RECENT:"RECENT",YOURS:"YOURS",FAMILY_VAULT:"FAMILY_VAULT",FAVORITE:"FAVORITE",FOLDER:"FOLDER",ALBUM:"ALBUM",GROUP:"GROUP",THIS_DAY:"THIS_DAY",THING:"THING",PERSON:"PERSON",LOCATION:"LOCATION",SINGLE_PHOTO:"SINGLE_PHOTO",TIME:"TIME",ALL:"ALL"},DEVICE_TYPES:{FIRE_TV:"FIRE_TV",ECHO_SHOW:"ECHO_SHOW",ECHO_SPOT:"ECHO_SPOT"},EVENT_TAGS:{ALBUM:"Album",FIRE_TV:"FireTV",GROUP:"Group",LOCATION:"Place",MULTIMODAL:"Multimodal",PERSON:"Person"},DAILY_MEMORIES_COLLECTION_ID:"dailyMemory-default",PATH_SCREENSAVER:"screensaver",PATH_WALLPAPER:"wallpaper",PROVIDER_ID_AMAZON_PHOTOS:"AMAZON_PHOTOS",PROVIDER_ID_FACEBOOK:"FACEBOOK",SELECTED_ONLY:"SELECTED_ONLY",PREVIEW_ITEMS_MAX:4,DEVICE_SETTINGS_MAXIMUM:20}},5566:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var o={aol:"aol",gmail:"gmail",mailto:"mailto",outlook:"outlook",yahoo:"yahoo"}},74169:(e,t,r)=>{"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{D$:()=>d,DS:()=>p,O_:()=>y,T:()=>h,Vb:()=>g,jO:()=>m,wS:()=>f});var{photosBootstrap:o={}}=window,{Config:n={}}=o,{protocol:i,hostname:a}=window.location,s="amazon.",c=a.split(s).pop(),l="".concat(i,"//photos.").concat(s).concat(c),{urls:u={}}=n,d="https://dcupkcmoyuvm5.cloudfront.net",p=_objectSpread(_objectSpread({},u),{},{subDomain:l}),{browser:h={},device:m={},emailRegex:v,isBeta:g,isGamma:f,isProd:y,phoneNumberRegex:A}=n;_objectSpread(_objectSpread({},n),{},{urls:p})},49709:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>h,Cs:()=>l,El:()=>d,Hq:()=>i,Jj:()=>c,Y$:()=>o,Yi:()=>n,_v:()=>u,ab:()=>s,bD:()=>p,wT:()=>a});var o="featured_members",n=63,i=6,a=5e3,s={HEART:"LIKE",COMMENT:"COMMENT",LAUGH:"LAUGH",SURPRISE:"SURPRISE"},c="QUICK_REACTION",l="ALLOW_ALEXA_COMMUNICATIONS_GROUPS",u={ALBUM_ADDABLE:"ALBUM_CONTENT_ADDABLE",CONTENT_ADDABLE:"CONTENT_ADDABLE",PRIVACY_LEVEL:"UNHIDDEN",KIND_FILTER:"ALEXA_COMMUNICATIONS"},d={HEART:"LIKE",LAUGH:"LAUGH",SURPRISE:"SURPRISE"},p=300,h="https://m.media-amazon.com/images/G/01/digital/photos/group-coverphoto.jpg"},49404:(e,t,r)=>{"use strict";r.d(t,{I:()=>getAccessibilityLabelForGridDisplayType,o:()=>n});var o=r(21572),n={gridLarge:"grid-lg",gridMedium:"grid-med",gridSmall:"grid-sm",mosaic:"mosaic"},i={[n.gridLarge]:"amazon-photos-accessibility-grid-layout-large",[n.gridMedium]:"amazon-photos-accessibility-grid-layout-medium",[n.gridSmall]:"amazon-photos-accessibility-grid-layout-small",[n.mosaic]:"amazon-photos-accessibility-grid-layout-mosaic"};function getAccessibilityLabelForGridDisplayType(e){return(0,o.A)(i[e])}},95655:(e,t,r)=>{"use strict";r.d(t,{C3:()=>o,MD:()=>n,mm:()=>i});var o={Book:"book",Print:"print",Poster:"poster",WallArt:"wall_art",TableTop:"table_top",Card:"card"},n=2500,i={shop:"shop",book:"hardcover-photo-book-8x11-details",print:"prints",poster:"prints",wallArt:"wall-decor",card:"photogifts"}},76202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var o=function(e){return e[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.SUCCEEDED=2]="SUCCEEDED",e[e.FAILED=3]="FAILED",e}({})},75758:(e,t,r)=>{"use strict";r.d(t,{GL:()=>s,QG:()=>a,UP:()=>o,V8:()=>n,u_:()=>i});var o="GROUP",n="GROUP_SHARE_LINK",i="SHARE_V1",a="SINGLE_NODE",s="REACTION"},83325:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,x:()=>n});var o={FAST:3e3,MEDIUM:5e3,SLOW:7e3},n={DISSOLVE:"dissolve",NONE:"none",PAN_AND_ZOOM:"panAndZoom"}},97042:(e,t,r)=>{"use strict";r.d(t,{$:()=>y,HN:()=>b,LA:()=>S,Mc:()=>a,QD:()=>f,R0:()=>E,T4:()=>o,aB:()=>P,bR:()=>O,e:()=>I,e9:()=>T,el:()=>_,u8:()=>w,vs:()=>A,wn:()=>i,yp:()=>n});var o=5368709120,n=107374182400,i=1099511627776,a=2199023255552,s=3298534883328,c=4398046511104,l=5497558138880,u=6597069766656,d=7696581394432,p=8796093022208,h=9895604649984,m=0xa0000000000,v=21990232555520,g=32985348833280,f={banyan:"BANYAN",brFree:"BRFREE-0000",compensatory100GB:"COMPENSATORY_1Y_100GB",compensatory1TB:"COMPENSATORY_1Y_1TB",employee:"EMPLOYEE_1Y_1TB",fire:"FIRE-0000",permanent5TB:"PERMANENT_5TB",promoExperiment2021:"EXPERIMENTAL_10GB",photosPlus:"PHOTOS_PLUS_25GB",printing:"PRINTING-0000",testPermanent1TB:"TEST_PERMANENT_1TB",test5GB:"TEST-0000",sony:"WORLD_WIDE_SONY_ALBUMS_1Y_10GB"},y={[n]:{photos:5e4,videos:14},[i]:{photos:5e5,videos:140},[a]:{photos:1e6,videos:280},[s]:{photos:15e5,videos:420},[c]:{photos:2e6,videos:560},[l]:{photos:25e5,videos:700},[u]:{photos:3e6,videos:840},[d]:{photos:35e5,videos:980},[p]:{photos:4e6,videos:1120},[h]:{photos:45e5,videos:1260},[m]:{photos:5e6,videos:1400},[v]:{photos:1e7,videos:2800},[g]:{photos:15e6,videos:4200}},A={[n]:"100GB",[i]:"1TB",[a]:"2TB",[s]:"3TB",[c]:"4TB",[l]:"5TB",[u]:"6TB",[d]:"7TB",[p]:"8TB",[h]:"9TB",[m]:"10TB",[v]:"20TB",[g]:"30TB"},_="AMAZON",P="APPLE",b="GOOGLE",S=function(e){return e.APPLE="APPLE",e.GOOGLE="GOOGLE",e}({}),I="CDSPB00001",O={year:"amazon-photos-storage-price-per-year-slash",p1y:"amazon-photos-storage-price-per-year-slash",month:"amazon-photos-storage-price-per-month-slash",p1m:"amazon-photos-storage-price-per-month-slash",day:"amazon-photos-storage-price-per-week-slash",p7d:"amazon-photos-storage-price-per-week-slash"},E="P1M",T="P1Y",w={initialPurchase:"initialPurchase",upgrade:"upgrade",downgrade:"downgrade",unknown:"unknown"}},3754:(e,t,r)=>{"use strict";r.d(t,{Hz:()=>o,b0:()=>i,uk:()=>n});var o="1000",n="lcf",i="time"},62534:(e,t,r)=>{"use strict";r(99766),r(9087),r(95165),r(97075),r(7531),r(85039),r(54300),r(6328),r(68583),r(8301),r(39638),r(4040),r(68305),r(20341),r(74701),r(78604),r(99650),r(32820),r(20062),r(60521),r(18772),r(75417),r(35890);window.assetsEndpoint&&(r.p=window.assetsEndpoint),window.React=r(96540)},56716:(e,t,r)=>{"use strict";r(62534);var o=r(96540),n=r(5338),i=r(1683),a=r(13489),s=r(47589),c=r(71086),l=r(97463),u=r(35994),d=r(71468),p=r(24903),h=r(16073),m=r(29386),v=r(62410),g=r(44303),f=r(26977),y=r(4917),A=r(59816),_=r(67361),P=r(18252),b=r(41716),S=r(80009),I=r(39740),O=r(59452),E={GroupShareView:y.A,GroupShareViewSPV:y.A,SharedLanding:A.A,SharedLandingSPV:A.A,ShareLanding:_.n,ShareLandingSPV:_.n,SharedAlbumLanding:O.b,SharedAlbumLandingSPV:O.b,404:f.A};(0,m.A)(E);var T=(0,s.A)(P.A);document.addEventListener("DOMContentLoaded",(()=>{var{photosBootstrap:e={}}=window,{applicationTarget:t}=e;if(!t)throw new Error("Server configuration invalid or not found");(0,S.A)(e),(0,I.A)(),(0,b.A)(),p.de.run(h.A);var{Config:r={}}=e,{routeConfig:s}=r,m=(0,g.A)(s,E),f=o.createElement(d.Kq,{store:p.Sp},o.createElement(v.A,null,o.createElement(T,null,m)));(0,n.H)(t).render(f);var y=c.A.getProperty("route.props.query.ref")||c.A.getProperty("route.props.query.ref_")||c.A.getProperty("route.props.query._ref"),A=l.A.getProperty("authenticated"),_=l.A.getProperty("customerId");y||(y=A?"authenticated":_?"recognized":"non-authenticated"),i.A.log("AppLaunched",{eventTag:y},c.A.getPageContext()),c.A.setData({appLaunchTimestamp:Date.now()}),a.A.log({name:"ClientLaunch"}),u.A.emit("appLaunched"),-1!==window.location.search.indexOf("exposeFlux")&&(window._Flux=u.A)}))},39740:(e,t,r)=>{"use strict";r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=r(85704),n=r(73725),i=r(50248),a=r(97463),s=r(74169);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={sessionSampleRate:1,sessionEventLimit:0,allowCookies:!0,enableXRay:!0,telemetries:["performance","errors","http"],disableAutoPageView:!0},l="us-east-1",u="us-east-1",d="eu-west-1",p="us-west-2",h="https://dataplane.rum.us-west-2.amazonaws.com",m="https://dataplane.rum.us-east-1.amazonaws.com",v="https://dataplane.rum.us-east-1.amazonaws.com",g="https://dataplane.rum.eu-west-1.amazonaws.com",f="https://dataplane.rum.us-west-2.amazonaws.com",y="1.0.0",A={beta:{US:{applicationId:"9c00aee0-9a93-4098-9fa7-aa39ef86f03e",applicationVersion:y,applicationRegion:"us-west-2",config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-west-2:d2e1be4f-3728-49e4-8d5b-078713a456d2",endpoint:h})}},gamma:{US:{applicationId:"11227637-6e24-4366-a1c9-11da33decfb4",applicationVersion:y,applicationRegion:l,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-east-1:2649f3f0-c47a-49b5-8cbb-773e19e99dfe",endpoint:m})}},prod:{US:{applicationId:"a3934264-c818-46b1-9b3b-7a1cbcc3829a",applicationVersion:y,applicationRegion:u,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-east-1:4ef821fb-836c-4071-8cb4-57d86ba414b3",endpoint:v})},CA:{applicationId:"bd740f7d-752a-45e1-8e34-ad349f96fce9",applicationVersion:y,applicationRegion:u,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-east-1:a61ce6df-7a8e-4cef-ac68-49a9e9074824",endpoint:v})},DE:{applicationId:"f4739cbf-2f19-44b4-bcfe-dca2c67e6244",applicationVersion:y,applicationRegion:d,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"eu-west-1:e1234cd9-f5ec-4d9f-8c8a-9edaf9778db9",endpoint:g})},ES:{applicationId:"3da13f30-7b1e-4f14-bb1a-e286b3478ec3",applicationVersion:y,applicationRegion:d,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"eu-west-1:bc71bc32-5c46-4809-a55e-9b25a6485844",endpoint:g})},FR:{applicationId:"813386a4-aba2-4709-a92b-792e885b2bef",applicationVersion:y,applicationRegion:d,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"eu-west-1:8c2a4491-0750-455f-8dc9-fe8f59a997a2",endpoint:g})},IT:{applicationId:"617fc12d-22ee-49ff-a38d-197d0e16d5e5",applicationVersion:y,applicationRegion:d,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"eu-west-1:2317de09-a5c5-4830-b501-8323581b841d",endpoint:g})},UK:{applicationId:"5e3c565a-8ff3-441f-a001-751419f88d63",applicationVersion:y,applicationRegion:d,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"eu-west-1:ff96d6db-f61f-4938-9933-2e4be2dce3a5",endpoint:g})},AU:{applicationId:"bbc4e679-319f-459e-800f-af1b71dd0d29",applicationVersion:y,applicationRegion:p,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-west-2:68f71aca-3d25-47f6-846f-21f47c01eed1",endpoint:f})},JP:{applicationId:"81077f7a-a0f8-45f9-9a47-e2497b020069",applicationVersion:y,applicationRegion:p,config:_objectSpread(_objectSpread({},c),{},{identityPoolId:"us-west-2:ca9d4098-f4f4-46bb-bf2a-9a983de29fa2",endpoint:f})}}};const __WEBPACK_DEFAULT_EXPORT__=()=>{try{var e=(u=(()=>{if(s.Vb)return"beta";if(s.wS)return"gamma";if(s.O_)return"prod";throw new Error("Unknown stage")})(),d=a.A.getProperty("country")||"US",A[u][d]),{applicationId:t,applicationVersion:r,applicationRegion:c,config:l}=e;window.awsRum=new o.mV(t,r,c,l),function wireUpPageViewEvents(){(0,i.D_)();var _monkeyPatch=e=>{var t=window.history[e];return function patched(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];var i=t.apply(window.history,o),a=new Event(e);return a.arguments=o,window.dispatchEvent(a),i}};window.history.pushState=_monkeyPatch("pushState"),window.history.replaceState=_monkeyPatch("replaceState"),window.addEventListener("pushState",i.D_),window.addEventListener("replaceState",i.D_),window.addEventListener("popstate",i.D_)}()}catch(e){s.O_?n.A.fatal("Failed to initiate cloudwatch RUM client, ".concat(e)):console.error(e)}var u,d}},71017:(e,t,r)=>{"use strict";r.d(t,{A:()=>getShouldRedirectToFTUE,R:()=>h});var o=r(95093),n=r.n(o),i=r(18742),a=r(97463),s=r(78439),c=r(84723),l=r(71086);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var u=["IOS","ANDROID","WINDOWS","MAC"],d=180,p="YourPhotos",h="so";function _getHasActiveMobileLogin(){return(_getHasActiveMobileLogin=_asyncToGenerator((function*(){try{var e=yield s.A.listSources({noCache:!0,doNotAlertOnFatal:!0}),{sources:t}=e,r=t.some((e=>{var t=e.lastSeenTime>n()().subtract(d,"days").toISOString();return u.includes(e.device.devicePlatform)&&t}));return r&&function updateActiveSourceStatus(){c.A.setCDPref("hasConnectedMobileDevice"),i.A.setData({hasConnectedMobileDevice:!0})}(),r}catch(e){}}))).apply(this,arguments)}function getShouldRedirectToFTUE(){return _getShouldRedirectToFTUE.apply(this,arguments)}function _getShouldRedirectToFTUE(){return _getShouldRedirectToFTUE=_asyncToGenerator((function*(){var e=l.A.getProperty("route.metrics.viewName")===p,t=l.A.getProperty("route.props.query"),r=t&&"1"===t[h],o=a.A.getProperty("onboarded"),n=i.A.getProperty("device.isDesktop"),s=i.A.getProperty("hasConnectedMobileDevice");return s||(s=yield function getHasActiveMobileLogin(){return _getHasActiveMobileLogin.apply(this,arguments)}()),!r&&e&&!s&&!o&&n})),_getShouldRedirectToFTUE.apply(this,arguments)}},91419:(e,t,r)=>{"use strict";r.d(t,{A:()=>S});var o=r(43346),n=r.n(o),i=r(19747),a=r.n(i),s=r(1882),c=r.n(s),l=r(55378),u=r.n(l),d=r(96540),p=r(21572),h=r(38530),m=r(32485),v=r.n(m),g=r(35994),f={getInitialState:()=>({opts:{cboxState:[!1,!1]},strings:{title:"amazon-photos-settings-remove-member-title",header:"amazon-photos-settings-remove-member-header",cbox:["amazon-photos-settings-remove-member-1","amazon-photos-settings-remove-member-2"],cancelButton:"amazon-photos-settings-remove-cancel",doitButton:"amazon-photos-settings-remove"}})},y={getInitialState:()=>({opts:{cboxState:[!1]},strings:{title:"amazon-photos-settings-remove-member-title",header:"amazon-photos-settings-remove-invitee-member-header",subHeader:"amazon-photos-settings-remove-invitee-member-subheader",cbox:["amazon-photos-settings-remove-invitee-member-irreversible"],cancelButton:"amazon-photos-settings-remove-cancel",doitButton:"amazon-photos-settings-remove"}})},A={getInitialState:()=>({opts:{cboxState:[!1]},strings:{title:"amazon-photos-settings-leave-family-title",header:"amazon-photos-settings-leave-family-title",newAdmin:"amazon-photos-settings-leave-family-new-admin",cbox:["amazon-photos-settings-leave-family-1"],cancelButton:"amazon-photos-settings-leave-cancel",doitButton:"amazon-photos-settings-leave"}}),newAdminJSX(){return d.createElement("h3",null,(0,p.A)(this.state.strings.newAdmin,[this.props.newAdminName]))}},_={getInitialState:()=>({opts:{cboxState:[!1,!1]},strings:{title:"amazon-photos-settings-leave-family-title",cbox:["amazon-photos-settings-leave-family-1","amazon-photos-settings-leave-family-2"],cancelButton:"amazon-photos-settings-remove-cancel",doitButton:"amazon-photos-settings-leave"}})},P={cboxJSX(){return d.createElement("ul",null,u()(this.state.strings.cbox,((e,t)=>d.createElement("li",{key:t},d.createElement("input",{id:"label-confirm-".concat(t),type:"checkbox",value:t,className:v()("checkbox",{selected:this.state.opts.cboxState[t]}),checked:this.state.opts.cboxState[t]}),d.createElement("label",{htmlFor:"label-confirm-".concat(t)},(0,p.A)(e,[this.props.name]))))))}},b={render(){var e=c()(this.newAdminJSX)?this.newAdminJSX():void 0,t=this.cboxJSX?this.cboxJSX():void 0,{strings:r}=this.state,o=[{name:"cancel",className:"button-secondary",label:(0,p.A)(r.cancelButton)},{name:"confirm",className:"button",onClick:this.handleRemove,label:(0,p.A)(r.doitButton),disabled:!a()(this.state.opts.cboxState)}];return d.createElement(h.A,{heading:(0,p.A)(r.title),buttons:o,name:"remove-family-member-dialog",className:"settings-confirm-dialog"},e,r.header&&d.createElement("h3",null,(0,p.A)(r.header,this.props.name)),d.createElement("form",{onChange:this.onFormItemChange,className:"remove-family-member"},t))}};const S={adminRemoveMemberMixin:f,adminRemoveInviteeWithNoAccessMixin:y,renderInviteeRemoveMixin:{render(){var e=this.cboxJSX?this.cboxJSX():void 0,{strings:t}=this.state,r=[{name:"cancel",className:"button-secondary",label:(0,p.A)(t.cancelButton)},{name:"confirm",className:"button",onClick:this.handleRemove,label:(0,p.A)(t.doitButton),disabled:!a()(this.state.opts.cboxState)}];return d.createElement(h.A,{heading:(0,p.A)(t.title),className:"settings-confirm-dialog",buttons:r,name:"remove-invitee-dialog-no-access"},d.createElement("div",{className:"dialog-body"},t.header&&d.createElement("h2",null,(0,p.A)(t.header,[this.props.name])),t.subHeader&&d.createElement("h3",null,(0,p.A)(t.subHeader)),d.createElement("form",{onChange:this.onFormItemChange,className:"remove-family-member"},e)))}},adminRemoveSelfMixin:A,memberRemoveSelfMixin:_,cboxJSXMixin:P,renderMixin:b,utilityMixin:{onFormItemChange(e){var t=n()({},this.state.opts),r=e.target.value;t.cboxState[r]=!t.cboxState[r],this.setState({opts:t})},handleRemove(){g.A.emit("removeMember",{targetCustomerId:this.props.customerId,data:this.props.data})}}}},49479:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var o=r(58156),n=r.n(o),i=r(74692),a=r.n(i),s=r(37763),c=r(21572),l=r(35994),u=r(57427),d=r(77506);class CDSNodeBackwardsCompatible extends u.A{get ownerNodeId(){return this.ownerModelId}belongsToCurrentUser(){return super.belongsToUser}isFolder(){return this._isFolder}isPhoto(){return this._isPhoto}isVideo(){return this._isVideo}isStorytellingVideo(){return this._isStorytellingVideo}isAlbum(){return this._isAlbum}isPrintablePhoto(){return this._isPhoto&&this.isPrintable}isUnprintablePhoto(){return this._isPhoto&&!this.isPrintable}canPrint(){return this.isPrintable}cannotPrint(){return!this.isPrintable}isAmazonPrintsPrintablePhoto(){return this.isPrintablePhoto()}isAmazonPrintsUnprintablePhoto(){return this.isUnprintablePhoto()}canAmazonPrintsPrint(){return this.canPrint()}cannotAmazonPrintsPrint(){return!this.canPrint()}hasThumbnail(){return!this._isAlbum&&Boolean(this.previewUrl)}createdByPie(){return"PieRouterClient"===this._createdBy}getExtension(){return this.fileExtension}getNodeType(){return this.contentType}getMissingThumbnailReason(){return this.isVideoProcessing()?"video-processing":this.hasThumbnail()?void 0:this.isVideo()?"video-no-thumb":"unsupported"}isVideoProcessing(){return!this.mediaProperties.isPlayable&&this._isVideo}getDuration(){return this.mediaProperties.duration}contentDate(){return this.mediaProperties.contentDate}getCreatedDate(){return this.serviceProperties.createdDate}width(){return this.mediaProperties.width}height(){return this.mediaProperties.height}filesize(){return this.mediaProperties.size}isPhotoEditable(){return this.mediaProperties.editable||!1}isDynamicAlbum(){return this.serviceProperties.isDynamicAlbum||!1}mediaContentProperties(){return this._mediaProperties}getAperture(){return this.mediaProperties.apertureValue}getDownloadLink(){return this.downloadUrl}getContentUrlModel(){return this._getNodeContentUrl(this)}getAlbumCovers(){var{albumCovers:e=[]}=this;return e.map((e=>new d.A({id:e.id,ownerId:e.ownerId})))}isInFamilyArchive(){return this.serviceProperties.isInFamilyArchive}canAddToFamilyArchive(){return this.permissions.canAddToFamilyArchive}canRemoveFromFamilyArchive(){return this.permissions.canRemoveFromFamilyArchive}canDelete(){return this.permissions.canDelete}canEdit(){return this.permissions.canEditDate}getParentFolderId(){return this.serviceProperties.parentFolderId}isHidden(){return this.serviceProperties.isHidden}canHide(){return this.permissions.canHide}update(e){var t=a().Deferred();return super.update(e).then(t.resolve).catch(t.reject),t.promise()}get contentProperties(){var{mediaProperties:e={},fileExtension:t}=this,{size:r,contentDate:o}=e;return{size:r,contentDate:o,extension:t}}get parentMap(){return this.serviceProperties.parentMap}get groupPermissions(){return this.serviceProperties.groupPermissions}toggleFavorite(){var e=super.toggleFavorite();return l.A.emit("update"),e.then((e=>{e||l.A.emit("update")}))}updateDate(e){var t=this._contentDate;return this._contentDate=e,l.A.emit("update"),this.update({contentProperties:{contentDate:e}}).fail((()=>{l.A.emit("showToast",{message:(0,c.A)("amazon-photos-generic-service-error"),name:"UpdateDateError",className:"error"}),this._contentDate=t,l.A.emit("update")}))}rename(e){var t=this.name;return this.name=e,l.A.emit("update"),this.update({name:e}).fail((e=>{n()(e,"responseJSON.message").match(/invalid node name/)?(0,s.A)((0,c.A)("amazon-photos-album-name-invalid-content"),{name:"InvalidNameDialog",heading:(0,c.A)("amazon-photos-album-name-invalid-title"),buttons:["ok"]}):l.A.emit("showToast",{message:(0,c.A)("amazon-photos-generic-service-error"),name:"RenameError",className:"error"}),this.name=t,l.A.emit("update")}))}}const p=CDSNodeBackwardsCompatible},77506:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(51317),n=r(2988);class CDSNodeLiteBackwardsCompatible extends n.A{get ownerNodeId(){return this.ownerModelId}belongsToCurrentUser(){return super.belongsToUser}hasThumbnail(){return Boolean(this.previewUrl)}getExtension(){return this.fileExtension}isAlbum(){return!1}width(){return this.mediaProperties.width}height(){return this.mediaProperties.height}filesize(){return this.mediaProperties.size}mediaContentProperties(){return this._mediaProperties}getContentUrlModel(){return new o.A(this)}getMissingThumbnailReason(){return"unknown"}}const i=CDSNodeLiteBackwardsCompatible},2988:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(57427);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}class CDSNodeLite extends o.A{constructor(e){super(e);var{id:t}=e;if(!t)throw new Error("CDSNodeLite missing nodeId")}get contentType(){return"PHOTO"}get mediaProperties(){return{mediaType:"jpg"}}get permissions(){var{belongsToUser:e}=this;return{canDelete:e}}get serviceProperties(){return{}}_setPublicParams(e){var{id:t,ownerId:r}=e;this.id=t,this.ownerId=r,this.name="Photo",this.fileExtension="jpg"}_setPrivateParams(){this._isPhoto=!0}get isPrintable(){return!1}toggleFavorite(){return _asyncToGenerator((function*(){return!1}))()}rename(){return _asyncToGenerator((function*(){return!1}))()}updateDate(){return _asyncToGenerator((function*(){return!1}))()}update(){return _asyncToGenerator((function*(){throw new Error("Cannot update CDSNodeLite")}))()}}const n=CDSNodeLite},57427:(e,t,r)=>{"use strict";r.d(t,{A:()=>S,y:()=>P});var o=r(62193),n=r.n(o),i=r(7309),a=r.n(i),s=r(58156),c=r.n(s),l=r(95093),u=r.n(l),d=r(18742),p=r(35994),h=r(78439),m=r(51317),v=r(87822),g=r(38614),f=r(40484),y=r(96721),A=r(54318),_=r(79585);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={PHOTO:"PHOTO",LIVE_PHOTO:"LIVE_PHOTO",VIDEO:"VIDEO",ALBUM:"ALBUM",FOLDER:"FOLDER",SHARE:"SHARE"},b={"image/gif":"gif","image/jpg":"jpg","image/jpeg":"jpg","image/png":"png","image/heif":"heif","image/heic":"heic",other:"file"};class CDSNode extends _.A{constructor(e){if(super(e),!e)throw new Error("Data missing when constructing CDSNode");this._setPublicParams(e),this._setPrivateParams(e)}get contentType(){return this._isLivePhoto?P.LIVE_PHOTO:this._isPhoto?P.PHOTO:this._isVideo?P.VIDEO:this._isAlbum?P.ALBUM:this._isFolder?P.FOLDER:this._isShare?P.SHARE:this.fileExtension?this.fileExtension.toUpperCase():null}get isMedia(){return this._isLivePhoto||this._isPhoto||this._isVideo}get mediaProperties(){var e,{contentType:t,_mediaContentType:r,_mediaProperties:o,_sizeInBytes:n,_contentDate:i}=this,{width:a,height:s}=o,c={width:a,height:s,contentDate:i,size:n,mediaType:b[r]||b.other};switch(t){case P.PHOTO:case P.LIVE_PHOTO:e=this._getPhotoProperties(o,c);break;case P.VIDEO:e=this._getVideoProperties(o);break;default:e={}}return _objectSpread(_objectSpread({},c),e)}get name(){return this._name}set name(e){this._name=e}get permissions(){var{_canEditDate:e,serviceProperties:t,belongsToUser:r}=this,{isInFamilyArchive:o,isHidden:n}=t;return{canDelete:r,canAddToFamilyArchive:r&&!o,canRemoveFromFamilyArchive:r&&o,canHide:r&&!n&&!o,canEditDate:e}}get serviceProperties(){var{_isAlbum:e,_familyId:t,_parentMap:r={},_groupPermissions:o=[],_collectionProperties:n={},_createdDate:i,_modifiedDate:a,_settings:s}=this,{favorite:l,hidden:d}=s;return{isAlbum:e,isDynamicAlbum:e&&this._isAlbumDynamic(n.query),isInFamilyArchive:Boolean(t),isFavorited:Boolean(l),parentFolderId:c()(r,"FOLDER.0",void 0),parentMap:r,groupPermissions:o,isHidden:Boolean(d),createdDate:u()(i).format(),modifiedDate:u()(a).format()}}get tempLink(){return this._tempLink}get previewUrl(){return this.getFormattedPreviewUrl()}getFormattedPreviewUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:r,cropOffset:o,cropSize:n,fit:i,viewBox:a,fill:s}=e;if(t||r)if(t)if(r)if(s&&"clip"!==i){var{width:c,height:l}=this.mediaProperties;a=c&&l?(0,f.A)(t,r,c,l):"".concat(t,",").concat(r)}else a="".concat(t,",").concat(r);else a="".concat(t);else a="".concat(r);return this.albumCovers?this.albumCovers[0]?this.albumCovers[0].getFormattedPreviewUrl(e):"":[P.PHOTO,P.LIVE_PHOTO,P.VIDEO].includes(this.contentType)?new m.A(this,{viewBox:a,fit:i,cropSize:n,cropOffset:o}).toImageUrlString():""}getFormattedVideoUrl(e){if(!this._isVideo&&!this._isLivePhoto)return null;var t={nodeId:this.id,ownerId:this.ownerId,tempLink:this.tempLink};if(this._isStorytellingVideo)return(0,v.y_)(t);if(this._isLivePhoto){var r,o,n=d.A.getProperty("browser.isSafari"),i=(0,g.A)(e);return n?(0,v.y_)({nodeId:null===(r=this._livePhotoAsset)||void 0===r?void 0:r.id,ownerId:null===(o=this._livePhotoAsset)||void 0===o?void 0:o.ownerId,tempLink:this.tempLink}):(0,v.Ae)(_objectSpread(_objectSpread({},t),{},{transcodeHeight:i}))}return(0,v.yv)(t)}get downloadUrl(){return(0,v.y_)({nodeId:this.id,ownerId:this.ownerId,tempLink:this.tempLink})}get reactionTopic(){return"nodes/".concat(this.ownerId,"/").concat(this.id)}get countables(){for(var{permissions:e}=this,t=[],r=[{key:"_isPhoto",countable:"photo",obj:this},{key:"_isVideo",countable:"video",obj:this},{key:"_isAlbum",countable:"album",obj:this},{key:"_isFolder",countable:"folder",obj:this},{key:"isPrintable",countable:"printable",obj:this},{key:"belongsToUser",countable:"belongsToUser",obj:this},{key:"canDelete",countable:"deletable",obj:e},{key:"canRemoveFromFamilyArchive",countable:"removableFromFamilyArchive",obj:e},{key:"canAddToFamilyArchive",countable:"addableToFamilyArchive",obj:e},{key:"canHide",countable:"hideable",obj:e},{key:"canEditDate",countable:"dateEditable",obj:e}],o=0;o<r.length;o++){var n=r[o],{obj:i,key:a,countable:s}=n;i[a]&&t.push(s)}return t}get isPrintable(){var{contentType:e,mediaProperties:t}=this;if(e===P.ALBUM)return!0;var{mediaType:r}=t;return["jpg","png","heic","heif"].includes(r)}toggleFavorite(){var e=this;return _asyncToGenerator((function*(){var{_settings:t}=e,{favorite:r}=t;e._settings=_objectSpread(_objectSpread({},t),{},{favorite:!r}),e.emitChange({settings:e._settings});try{return yield e.update({settings:e._settings}),!0}catch(r){return e._settings=t,e.emitChange({settings:t}),!1}}))()}updateDate(e){var t=this;return _asyncToGenerator((function*(){var r=t._contentDate;if(e===r)return!0;t._contentDate=e,t.emitChange({mediaProperties:t.mediaProperties});try{return yield t.update({contentProperties:{contentDate:e}}),!0}catch(e){return t._contentDate=r,t.emitChange({mediaProperties:t.mediaProperties}),!1}}))()}rename(e){var t=this;return _asyncToGenerator((function*(){var r=t.name;if(e===r)return!0;t.name=e,t.emitChange({name:e});try{return yield t.update({name:e}),!0}catch(e){return t.name=r,t.emitChange({name:r}),!1}}))()}update(e){var t=this;return _asyncToGenerator((function*(){var{id:r}=t,o=yield h.A.updateNode({id:r,data:e});return p.A.emit("uncache"),o}))()}_setPublicParams(e){var t=r(2988).A,{collectionProperties:o,contentProperties:n,id:i,name:a,ownerId:s,shareId:c}=e;this.id=i,this.ownerId=s,this.name=a,this.fileExtension=null==n?void 0:n.extension,this.shareId=c,null!=o&&o.covers&&(this.albumCovers=o.covers.map((e=>new t({id:e.id,ownerId:e.ownerId||this.ownerId}))))}_setPrivateParams(e){var t,{contentProperties:r,kind:o,tempLink:n,assets:i,transforms:s,createdBy:l,createdDate:u,modifiedDate:d,collectionProperties:p,settings:h,parentMap:m,groupPermissions:v,familyId:g}=e,f=a()(i,(e=>"LIVE_VIDEO"===c()(e,"assetProperties.assetType")));this._isPhoto=Boolean(null==r?void 0:r.image),this._isVideo=(null==r||null===(t=r.contentType)||void 0===t?void 0:t.startsWith("video"))||Boolean(null==r?void 0:r.video),this._isLivePhoto=Boolean(f),this._isAlbum="VISUAL_COLLECTION"===o,this._isFolder="FOLDER"===o,this._isShare="SHARED_COLLECTION"===o,this._isStorytellingVideo=this._isVideo&&("AutoCollections"===l||"AutoCollections_Devo"===l||"DaziService"===l||"DaziService_Devo"===l),this._tempLink=n,this._createdBy=l,this._createdDate=u,this._modifiedDate=d,this._mediaProperties=(null==r?void 0:r.image)||(null==r?void 0:r.video)||{},this._contentDate=null==r?void 0:r.contentDate,this._sizeInBytes=null==r?void 0:r.size,this._mediaContentType=null==r?void 0:r.contentType,this._transforms=s||[],this._hasTranscodedVideo=null==s?void 0:s.includes("VIDEO_TRANSCODE"),this._collectionProperties=p,this._settings=h||{},this._parentMap=m,this._groupPermissions=v,this._familyId=g,this._isLivePhoto&&(this._livePhotoAsset=new CDSNode(f))}_getNodeContentUrl(e){return new m.A(e)}get _canEditDate(){var e,{contentType:t,belongsToUser:r}=this,o=!1;switch(t){case P.PHOTO:case P.LIVE_PHOTO:e=!0,o=!0;break;case P.VIDEO:o=!0}if(!r||!o)return!1;var n=y.A.getProperty("isOverQuota"),i=y.A.getProperty("hasPrime");return!n||!(!e||!i)}_getFormattedDuration(e){if(!e)return"";var t=u().duration(Math.round(e),"seconds"),r=t.days(),o=t.hours(),n=t.minutes(),i=t.seconds(),a=[];function pad(e){return e<10?"0".concat(e):e}return r&&a.push(pad(r)),o&&a.push(pad(o)),a.push(pad(n)),a.push(pad(i)),a=a.join(":")}_getVideoProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{_createdBy:t,_hasTranscodedVideo:r,_isStorytellingVideo:o}=this,{duration:n}=e,i=r||o||"PieRouterClient"===t;return{duration:n,formattedDuration:this._getFormattedDuration(n),isPlayable:i,editable:(0,A.WI)(),mediaType:"video"}}_getPhotoProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{apertureValue:r,exposureTime:o,focalLength:n,location:i,make:a,model:s}=e,{mediaType:c}=t;return{apertureValue:r?this._parseApertureValue(r):"",editable:"jpg"===c||"png"===c,exposureTime:o,focalLength:n,location:i,make:a,model:s}}_parseApertureValue(e){var t;if("string"==typeof e&&e.includes("/")){var[r,o]=e.split("/");r=parseFloat(r),0!==(o=parseFloat(o))&&(t=r/o)}else t=parseFloat(e);return t=Number.isFinite(t)?t.toFixed(1):e,"Æ’/".concat(t)}_isAlbumDynamic(e){return!n()(c()(e,"include"))||!n()(c()(e,"excludedIds"))}}const S=CDSNode},79585:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(97463),n=r(98366),i=r(73725);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=class ContentModelInterface{constructor(e){if(_defineProperty(this,"eventEmitter",new n.A),!e)throw new Error("Content Model constructed with no data");if(e.constructor!==Object)throw new Error("Content Model constructed with an instance of another model instead of data")}get id(){return void 0===this._id&&i.A.warn("id not implemented"),this._id}set id(e){this._id=e}get ownerId(){return void 0===this._ownerId&&i.A.warn("ownerId not implemented"),this._ownerId}set ownerId(e){this._ownerId=e}get name(){return void 0===this._name&&i.A.warn("name not implemented"),this._name}set name(e){this._name=e}get contentType(){return void 0===this._contentType&&i.A.warn("contentType not implemented"),this._contentType}set contentType(e){this._contentType=e}get mediaProperties(){return this._mediaProperties||{}}set mediaProperties(e){this._mediaProperties=e}get permissions(){return this._permissions||{}}set permissions(e){this._permissions=e}get serviceProperties(){return this._serviceProperties||{}}set serviceProperties(e){this._serviceProperties=e}get previewUrl(){return void 0===this._previewUrl&&i.A.warn("previewUrl not implemented"),this._previewUrl}set previewUrl(e){this._previewUrl=e}getFormattedPreviewUrl(){return this.previewUrl}get downloadUrl(){return this._downloadUrl||null}set downloadUrl(e){this._downloadUrl=e}get reactionTopic(){return this._reactionTopic||null}set reactionTopic(e){this._reactionTopic=e}get countables(){return this._countables||[]}set countables(e){this._countables=e}refresh(){var e=this;return _asyncToGenerator((function*(){var t={};return e.emitChange(t),t}))()}update(e){return _asyncToGenerator((function*(){return e}))()}rename(e){var t=this;return _asyncToGenerator((function*(){try{return yield t.update({name:e}),!0}catch(e){return!1}}))()}get ownerModelId(){return"".concat(this.ownerId,":").concat(this.id)}get belongsToUser(){return this.ownerId===o.A.getProperty("customerId")}emitChange(e){this.eventEmitter.emit("change",e)}listen(e,t){this.eventEmitter.addListener("change",e,t)}stopListening(e,t){this.eventEmitter.removeListener("change",e,t)}}},48988:(e,t,r)=>{"use strict";r.d(t,{A:()=>contentModelListener});var o=r(97200),n=r.n(o),i=r(96540),a=r(5556),s=r.n(a),c=r(79585);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function contentModelListener(e){class ConnectedComponent extends i.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{modelUniqueId:n()()}),_defineProperty(this,"onModelUpdate",(()=>{this.setState({modelUniqueId:n()()})}));var{model:e}=this.props;e&&e.listen(this.onModelUpdate,this)}componentDidUpdate(e){var{model:t}=this.props;t!==e.model&&(e.model&&e.model.stopListening(this.onModelUpdate,this),t&&t.listen(this.onModelUpdate,this))}componentWillUnmount(){var{model:e}=this.props;e&&e.stopListening(this.onModelUpdate,this)}render(){var{modelUniqueId:t}=this.state;return i.createElement(e,_extends({},this.props,{__modelUniqueId__:t}))}}return _defineProperty(ConnectedComponent,"displayName","ContentModelConnected(".concat(e.displayName||e.name||"Component",")")),_defineProperty(ConnectedComponent,"propTypes",{model:s().instanceOf(c.A)}),ConnectedComponent}},90566:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>a});var o=r(51317),n=r(79585),i=r(2988);class FaceCluster extends n.A{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];super(e,...r);var{cdsClusterId:n,ownerId:a,nodeId:s,originalWidth:c,originalHeight:l,face:u={}}=e,{boundingBox:d={}}=u;this.id=n,this.ownerId=a,this.name=n,this.contentType="FACE",this.mediaProperties={width:c,height:l},this._previewNode=new i.A({ownerId:a,id:s}),this._boundingBox=d}getFormattedPreviewUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:r,zoomToFace:n=!0}=e;if(!n||!t||!r)return this._previewNode.getFormattedPreviewUrl(e);var i=window.devicePixelRatio||1,{width:a,height:s}=this.mediaProperties,{width:c,height:l,TopLeftCoordY:u,TopLeftCoordX:d}=this._boundingBox,p=a*c,h=s*l,m=a*d,v=s*u,g=Math.min((m-0)/p,(v-0)/h,(a-(m+p))/p,(s-(v+h))/h,.5),f=h*g,y=p*g;return v-=f/2,m-=y/2,h+=f,p+=y,new o.A(this._previewNode,{viewBox:"".concat(Math.round(t*i),",").concat(Math.round(r*i)),cropSize:"".concat(Math.round(p),",").concat(Math.round(h)),cropOffset:"".concat(Math.round(m),",").concat(Math.round(v))}).toImageUrlString()}get previewUrl(){return this.getFormattedPreviewUrl()}}const a=FaceCluster},46962:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(55378),n=r.n(o),i=r(43346),a=r.n(i),s=r(47389),c=r(18742),l=r(97463),u=r(49479);const d=class GroupCollection{constructor(e){a()(this,e),this.coverNodesSource=this.coverNodes,this.coverNodes=n()(this.coverNodes,(e=>new u.A(e))),this.ownerId||(this.ownerId=this.addedBy)}get id(){return this.collectionId}get deepLink(){var{id:e,groupId:t,ownerId:r,parent:o={}}=this,{groups:n}=c.A.getProperty("urls",{}),i=new s.A(n).addPath(t);return"ALBUM"===o.kind?(i.addPath("album"),i.addPath("".concat(r,":").concat(e))):(i.addPath("collections"),i.addPath(e)),i.toString()}belongsToCurrentUser(){return this.ownerId===l.A.getProperty("customerId")}}},11276:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(43346),n=r.n(o),i=r(97463),a=r(74671),s=r(46962);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=class GroupEventModel{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n()(this,e);var{parent:t={}}=this,{id:r,kind:o,parentReaction:i}=t;"REACTION"===o?this.parentReaction=new a.A(i):"POST"!==o&&"ALBUM"!==o||(this.parentCollection=new s.A(_objectSpread(_objectSpread({},this),{},{collectionId:r,authorProfile:this.addedByProfile})))}get id(){return this.eventId}get ownerId(){return this.addedBy}belongsToCurrentUser(){return this.addedBy===i.A.data.customerId}}},94368:(e,t,r)=>{"use strict";r.d(t,{A:()=>GroupMemberAvatar});var o=r(2988),n=r(79585);class GroupMemberAvatar extends n.A{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];super(e,...r);var{profile:i={}}=e,{names:a={},avatar:s={}}=i,{color:c,photo:l}=s,{nodeId:u,ownerId:d}=l||{},{fullName:p}=a;this._avatarNodeId=u,this.ownerId=d,this.color=c,this.contentType="PHOTO",this.name=p,this.customerName=p,l&&(this._previewNode=new o.A({id:u,ownerId:d}))}get id(){return this._avatarNodeId}get previewUrl(){return this._previewNode?this._previewNode.previewUrl:""}getFormattedPreviewUrl(){return this._previewNode?this._previewNode.getFormattedPreviewUrl(...arguments):""}}},61949:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(75456),n=r(77506);class GroupShareNodeLite extends n.A{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];super(e,...r),this.shareToken=e.shareToken}getContentUrlModel(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new o.A(this,...t)}}const i=GroupShareNodeLite},20844:(e,t,r)=>{"use strict";r.d(t,{A:()=>GroupShareNode});var o=r(47389),n=r(75456),i=r(49479);class GroupShareNode extends i.A{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];super(e,...r),this.shareToken=e.shareToken}getDownloadLink(){return this._getNodeContentUrl(this).toDownloadUrlString()}getFormattedPreviewUrl(){var e=super.getFormattedPreviewUrl(...arguments);return new o.A(e).setParam("groupShareToken",this.shareToken).toString()}_getNodeContentUrl(e){!e.shareToken&&this.shareToken&&(e.shareToken=this.shareToken);for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new n.A(e,...r)}}},66941:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var o=r(58156),n=r.n(o),i=r(43346),a=r.n(i),s=r(35994),c=r(21572),l=r(67172),u=r(78439),d=r(49709),p=r(79585),h=r(94368),m=r(77506),v=["name","contentAggregations","ownerProfile"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}class GroupModel extends p.A{constructor(e,t){super(e);var{name:r,contentAggregations:o={},ownerProfile:n}=e,i=_objectWithoutProperties(e,v),{eventCount:s,reactionCount:c}=o;if(this.shareToken=t,this._counts={eventCount:s,reactionCount:c},this.name=r,this.ownerProfile=n,a()(this,i),this.coverPhoto&&(this.coverPhotoNode=new m.A({id:this.coverPhoto.nodeId,ownerId:this.coverPhoto.ownerId})),this.featuredMembers)for(var l=0;l<this.featuredMembers.length;l++){var u=this.featuredMembers[l];u.avatar=new h.A(u)}}get id(){return this.groupId}get ownerId(){return this.createdBy}get contentType(){return"GROUP"}get previewUrl(){return this.getFormattedPreviewUrl()}getFormattedPreviewUrl(e){return this.coverPhotoNode?this.coverPhotoNode.getFormattedPreviewUrl(e):d.Ak}get serviceProperties(){return{isUntitled:this.isUntitled,unreadCount:this.unreadCount,ownerName:this.ownerName,isAlexaGroup:this.isAlexaGroup,hasMembers:this.hasMembers(),hasContent:this.hasContent(),counts:this.contentAggregations,modifiedDate:this.modifiedDate}}get permissions(){return{canDelete:this.belongsToUser,canLeave:!this.belongsToUser}}get contentAggregations(){var{eventCount:e,reactionCount:t,photoCount:r,videoCount:o,albumCount:n}=this._counts;return{eventCount:e,reactionCount:t,photoCount:r,videoCount:o,albumCount:n}}get isUntitled(){return"CUSTOMER_SPECIFIED"!==this.nameType}get unreadCount(){return n()(this,"unseenContentAggregations.eventCount",0)}getNodeType(){return this.contentType}get reactionTopic(){return"groups/".concat(this.groupId)}get ownerName(){var{featuredMembers:e=[]}=this,t=e.find((e=>"OWNER"===e.role));return n()(t,"profile.names.firstName","")}get isAlexaGroup(){var{kind:e}=this;return e===d._v.KIND_FILTER}belongsToCurrentUser(){return this.belongsToUser}hasMembers(){return this.featuredMembers&&this.featuredMembers.length>1}hasContent(){return Boolean(this.coverPhotoNode)}updateCounts(e){var t=this;return _asyncToGenerator((function*(){if(!t._areCountsAlreadyRetrieved||e){t._areCountsAlreadyRetrieved=!0;var r,o,n,{groupId:i,shareToken:a}=t,s={limit:1,groupId:i,shareToken:a};try{var c=yield u.A.searchGroupNodes(s),{aggregations:l={}}=c,{type:d=[]}=l,p=d.find((e=>"PHOTOS"===e.match)),h=d.find((e=>"VIDEOS"===e.match)),m=d.find((e=>"ALBUMS"===e.match));r=p?p.count:0,n=h?h.count:0,o=m?m.count:0}catch(e){r=0,n=0,o=0,t._areCountsAlreadyRetrieved=!1}t._counts=_objectSpread(_objectSpread({},t._counts),{},{photoCount:r,albumCount:o,videoCount:n}),t.emitChange({contentAggregations:t.contentAggregations})}}))()}rename(e){var t=this;return _asyncToGenerator((function*(){var{groupId:r}=t,o=t.name;t.name=e,t.emitChange({name:e});try{yield l.A.updateGroup({groupId:r,name:e}),s.A.emit("uncache")}catch(e){t.name=o,t.emitChange({name:o}),s.A.emit("showToast",{name:"group-update-failure",message:(0,c.A)("amazon-photos-generic-service-error"),className:"fail",icon:"family"})}}))()}}const g=GroupModel},87937:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(48705),n=r.n(o),i=r(79859),a=r.n(i),s=r(62216),c=r.n(s),l=["people","time","events","location","things","name","type","all","clusterid","familymembers"];class Keyword{constructor(e){if(c()(e.name)||!a()(l,e.category.toLowerCase()))throw new Error("A valid keyword needs a name and valid category");this.id=e.id,this.name=e.name,this.category=e.category.toLowerCase(),this.count=e.count,this.searchData=e.searchData}toQueryHash(){var e={};return"time"===this.category?e=function _parseTime(e){var t=String(e).match(u),r={timeYear:t[1],timeMonth:t[2],timeDay:t[3]};return n()(r,(e=>e))}(this.name):e[this.category]=this.name,e}}Keyword.CATEGORIES=l;var u=/(\d{4})?-?(\d{2})?-?(\d{2})?/;const d=Keyword},74671:(e,t,r)=>{"use strict";r.d(t,{A:()=>Reaction});var o=r(55378),n=r.n(o),i=r(44383),a=r.n(i),s=r(43346),c=r.n(s),l=r(47389),u=r(18742),d=r(97463),p=r(77506),h=r(94368);class Reaction{constructor(e){c()(this,a()(e,["author","authorProfile","body","coverPhotos","createdDate","groupId","kind","modifiedDate","reactionId","topic","topicInfo","topicContentAggregations","version"])),this.authorProfile&&(this.avatar=new h.A({profile:this.authorProfile})),this.coverPhotos=n()(this.coverPhotos,(e=>new p.A({id:e.nodeId,ownerId:e.ownerId})))}get id(){return this.reactionId}belongsToCurrentUser(){return this.author===d.A.data.customerId}get ownerId(){return this.author}get topicNodeType(){return this.topicInfo&&this.topicInfo.nodeType||""}get deepLink(){var{topic:e="",topicInfo:t}=this,{nodeType:r}=t,[o,n]=e.split("/").slice(-2);if("ALBUM"===r||"PHOTO"===r||"VIDEO"===r){var i="".concat(o,":").concat(n),a="ALBUM"===r,s=a?"urls.album":"urls.gallery";return new l.A(u.A.getProperty("urls.groups")).addPath(this.groupId).addPath(u.A.getProperty(s)).addPath(i).setParam("contentType",a?"albums":"photos").toString()}return new l.A(u.A.getProperty("urls.groups")).addPath(this.groupId).addPath(e).toString()}}},61510:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var o=r(43346),n=r.n(o),i=r(92854),a=r(73725),s=r(35994),c=r(21572),l=r(13489),u=r(74692),d=r.n(u),p=r(75735),h=r.n(p),m=r(69944),v=r(77506),g="high",f="processing",y="ready";class CreateStoryVideo extends m.A{constructor(e){super(e),this.init(n()(e,{metricName:"CreateStoryVideo",showToast:!1,fakeProgress:!0,batchSize:1,pollForVideoCount:0}))}task(e){var t=new(d().Deferred),r=e[0];"STORY"!==r.contentType&&t.resolve(r);var o={storyNarrative:r,resolution:g},n=h().hash(JSON.stringify(o)).toString();return i.A.createStoryVideo({id:r.id,clientRequestToken:n,resolution:o.resolution}).done((r=>{var{status:o,nodeId:n,ownerId:i}=r;switch(o){case f:this._getStoryVideo(t,e);break;case y:e[0]=new v.A({id:n,ownerId:i}),t.resolve();break;default:t.reject()}})).fail(t.reject),t.promise()}_getStoryVideo(e,t){var r={storyNarrative:t[0],resolution:g},o=h().hash(JSON.stringify(r)).toString();i.A.getStoryVideo({id:t[0].id,clientRequestToken:o}).done((r=>{var{status:o,nodeId:n,ownerId:i}=r;switch(o){case f:this.pollForVideoCount+=1,this.pollForVideoCount<100?this.pollForVideoTimeout=setTimeout((()=>{this._getStoryVideo(e,t)}),3e3):e.reject();break;case y:t[0]=new v.A({id:n,ownerId:i}),e.resolve();break;default:e.reject()}})).fail(e.reject)}}const A=CreateStoryVideo;var _=r(79585);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class StoryModel extends _.A{constructor(e){super(e),_defineProperty(this,"detailDataLoaded",!1),this._setPublicParams(e)}_setPublicParams(e){var{id:t,ownerId:r,name:o,collectionType:n,activationDate:i,subtitle:a,coverPhoto:s,recipe:c,coverPhotoDetails:l,videoNarrative:u,nodes:d,recommendedVideoNarrativeNodeIds:p}=e;this.id=t,this.ownerId=r,this.name=o,this.contentType="STORY",this.collectionType=n,this.title=o,this.subtitle=a,this.coverPhoto=s,this.recipe=c,this.coverPhotoDetails=l,this.videoNarrative=u,this.nodes=d,this.recommendedVideoNarrativeNodeIds=p,this.activationDate=i,this.coverPhoto&&this.ownerId&&(this.coverPhotoNode=new v.A({id:this.coverPhoto,ownerId:this.ownerId}))}loadDetails(){return new Promise(((e,t)=>{this.detailDataLoaded&&e(this);var{id:r}=this,o=this.collectionType;i.A.getStory({id:r,type:o}).done((t=>{var{story:r}=t;this.detailDataLoaded=!0,n()(this,r),e(this)})).fail((()=>{t()}))}))}sharePreprocessOperation(e){var t=new A({items:[this],success:()=>{i.A.registerStoryEvent({id:e,eventType:"SHARE",startTime:(new Date).toISOString()})},failure:()=>{a.A.fatal("Unable to create story video"),s.A.emit("showToast",{name:"ShareStoryToastFail",message:(0,c.A)("amazon-photos-generic-service-error"),className:"fail",icon:"error"}),l.A.log({name:"StoryShareFailure",type:"COUNTER",value:1})}});return t.start(),t}get countables(){return["story"]}belongsToCurrentUser(){return this.belongsToUser}get isPrintable(){return!0}}const P=StoryModel},62410:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(96540),n=r(5556),i=r.n(n),a=r(54625),s=r(56347);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AppRouter(e){var{basename:t,disableUrlChange:r,children:n}=e,i=a.Kd,c={basename:t};return r&&(i=s.fS,c=_objectSpread(_objectSpread({},c),{},{initialEntries:[window.location.pathname],initialIndex:0})),o.createElement(i,c,n)}AppRouter.propTypes={basename:i().string,disableUrlChange:i().bool,children:i().node.isRequired};const c=AppRouter},44303:(e,t,r)=>{"use strict";r.d(t,{A:()=>createRoutes});var o=r(76135),n=r.n(o),i=r(56347),a=r(96540),s=r(60453),c=r(18742),l=r(26977),u=r(17667),d=r(73725),p=r(54318),h=r(65536);var m=r(2404),v=r.n(m),g=r(35994),f=r(5556),y=r.n(f),A=["history","component","location","viewContext","query","pathChanged"],_=["component","history","location","viewContext"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function registerRouteChange(e){var{history:t,component:r,location:o,viewContext:n,query:i,pathChanged:a}=e,s=_objectWithoutProperties(e,A),l=c.A.getProperty("urls.baseAppUrl",""),{pathname:u}=o;0===u.indexOf(l)&&(u=u.substring(l.length)),"/"===u[0]&&(u=u.substring(1)),g.A.emit("routeChanged",{history:t,component:r,query:i,pathChanged:a,fragment:u,props:_objectSpread({query:i},s),metrics:_objectSpread({query:i,clickTime:Date.now()},n)})}class FluxRouterConnector extends a.PureComponent{UNSAFE_componentWillMount(){registerRouteChange(_objectSpread(_objectSpread({},this.props),{},{pathChanged:!1}))}UNSAFE_componentWillReceiveProps(e){if(!v()(e,this.props)){var{location:t}=this.props,{location:r}=e,o=t.pathname+t.search!==r.pathname+r.search;registerRouteChange(_objectSpread(_objectSpread({},e),{},{pathChanged:o}))}}render(){var e=this.props,{component:t,history:r,location:o,viewContext:n}=e,i=_objectWithoutProperties(e,_);return a.createElement(t,i)}}_defineProperty(FluxRouterConnector,"propTypes",{component:y().oneOfType([y().func,y().instanceOf(a.Component)]).isRequired,history:y().shape({push:y().func.isRequired}).isRequired,location:y().shape({pathname:y().string.isRequired}).isRequired,query:y().objectOf(y().oneOfType([y().array,y().string,y().number])).isRequired,viewContext:y().shape({pageContext:y().string.isRequired,pageType:y().string.isRequired,subPageType:y().string.isRequired,viewName:y().string.isRequired}).isRequired});var P=r(13489),b=["failureRedirectPath","render","children","component"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function sanitized_route_objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function sanitized_route_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SanitizedRoute(e){var{failureRedirectPath:t,render:r,children:o,component:n}=e,s=sanitized_route_objectWithoutProperties(e,b);return a.createElement(i.qh,_extends({},s,{render:e=>{var{match:{params:s}}=e;return function areParametersValid(e){try{Object.entries(e).forEach((e=>{var[t,r]=e;S.forEach((e=>{e(t,r)}))}))}catch(e){return!1}return!0}(s)?o?"function"==typeof o?o(e):o:n?a.createElement(n,e):r?r(e):null:(P.A.log({name:"RouteParametersRejected"}),a.createElement(i.rd,{to:t}))}}))}var S=[function containsControlCharacters(e,t){if(!t)return;var r=decodeURIComponent(t);if(/[\0-\x1F\x7F-\x9F]/.test(r))throw new Error("Parameter ".concat(e," contains control characters"))},function containsPathTraversal(e,t){if(!t)return;var r=decodeURIComponent(t);if(r.includes("../")||r.includes("..\\"))throw new Error("Parameter ".concat(e,' contains path traversal "').concat(t,'".'))},function containsDoublePercentEncoding(e,t){if(!t)return;if(/%25[a-zA-Z0-9]{2}/.test(t))throw new Error("Parameter ".concat(e,' contains double encoded escapes "').concat(t,'".'))}];function create_routes_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function create_routes_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?create_routes_ownKeys(Object(r),!0).forEach((function(t){create_routes_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):create_routes_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function create_routes_defineProperty(e,t,r){return(t=function create_routes_toPropertyKey(e){var t=function create_routes_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var getMatchProps=e=>{var{component:t={},history:r,match:o={},location:i,viewContext:a}=e,c=(0,s.A)(i.search),{params:l={}}=o,u={};return n()(l,((e,t)=>{u[t]=decodeURIComponent(e)})),create_routes_objectSpread(create_routes_objectSpread({},u),{},{component:t,viewContext:a,query:c,location:i,history:r})},renderPage=e=>a.createElement(FluxRouterConnector,getMatchProps(e));function createRoutes(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{basename:n}=o,s=function filterRoutes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u.A.isOn(p.jy.GroupsEnabled),r={FamilyPhotos:u.A.isOn("family-vault"),FamilyPhotosSPV:u.A.isOn("family-vault"),BlockedContacts:t,GroupAlbumView:t,GroupAlbumViewSPV:t,GroupCollectionDetailView:t,GroupDetailView:t,GroupDetailViewSPV:t,GroupShareView:t,GroupShareViewSPV:t,ListGroups:t,SharesDetailView:t,SharedLanding:t,SharedLandingSPV:t,IconPreviews:u.A.isOn("internal-tools"),InternalTools:u.A.isOn("internal-tools"),People:u.A.isOn("people"),PeopleDetailView:u.A.isOn("people"),PeopleDetailViewSPV:u.A.isOn("people"),Places:u.A.isOn("places"),PlaceDetailView:u.A.isOn("places"),PlaceDetailViewSPV:u.A.isOn("places"),SERP:(0,h.K)(),SERPSPV:(0,h.K)(),Stories:u.A.isOn("stories"),StoriesSPV:u.A.isOn("stories"),FamilyStorage:(0,p.cp)(),AskPhotos:(0,p.Qr)(),SharedAlbumLanding:(0,p.li)(),SharedAlbumLandingSPV:(0,p.li)()},o=Object.keys(e),n={};return o.forEach((t=>{var o,{viewName:i}=e[t]||{};i?(null===(o=r[i])||void 0===o||o)&&(n[t]=e[t]):d.A.error("Missing viewName for route ".concat(t))})),n}(e),{location:m}=window,{pathname:v}=m,g=!1;n&&v.substr(0,n.length)===n&&(v=v.replace(n,""));var f=a.createElement(i.dO,null,Object.keys(s).map((e=>{var o=s[e],{viewName:n}=o,l="404"===n;if(l&&(r=o),!t[n]||l)return null;var u=(0,i.B6)(v,{path:e,exact:!0});return u&&(g=!0,registerRouteChange(getMatchProps({viewContext:o,match:u,location:m}))),a.createElement(SanitizedRoute,{key:o,path:e,exact:!0,render:e=>renderPage(create_routes_objectSpread({component:t[n],viewContext:o},e)),failureRedirectPath:c.A.getProperty("urls.baseAppUrl")+c.A.getProperty("urls.all")})})),r&&a.createElement(i.qh,{key:r.viewName,render:e=>(e.match.params={},renderPage(create_routes_objectSpread({component:t[r.viewName]||l.A,viewContext:r},e)))}));return!g&&r&&registerRouteChange(getMatchProps({viewContext:r,location:window.location})),f}},83900:(e,t,r)=>{"use strict";r.d(t,{A:()=>useRouteMatchesViewName});var o,n=r(58156),i=r.n(n),a=r(56347);function useRouteMatchesViewName(e){var t=e&&"string"==typeof e?[e]:e;if(!Array.isArray(t))return!1;var r=function getViewNamesToPaths(){if(o)return o;var e=i()(window,"photosBootstrap.Config.routeConfig",{});return o={},Object.keys(e).forEach((t=>{var{viewName:r}=e[t];o[r]=t})),o}(),n=t.map((e=>r[e])),s=(0,a.W5)({path:n,exact:!0});return Boolean(s)}},83981:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var o=function(e){return e.FAMILY_MEMBER="FAMILY_MEMBER",e.ADULT="ADULT",e.TEEN="TEEN",e.CHILD="CHILD",e.UNKNOWN="UNKNOWN",e}({})},15103:(e,t,r)=>{"use strict";r.d(t,{G7:()=>isFeatureEnabled,SD:()=>o,UI:()=>getFeatureCriteria,j8:()=>featureResponseToMap,s7:()=>n});var o=function(e){return e.family_archive="family_archive",e.amazon_prints_v2="amazon_prints_v2",e.basic_search="basic_search",e.face_management="face_management",e.groups="groups",e.groups_invitation="groups_invitation",e.stories="stories",e.device_personalization="device_personalization",e.upsell="upsell",e.auto_renew="auto_renew",e.multi_factor_authentication="multi-factor-authentication",e.people="people",e.places="places",e.things="things",e.unlimited_photos="unlimited_photos",e.semantic_search="semantic_search",e.cookie_consent_v2="cookie_consent_v2",e}({}),n=function(e){return e.PREFERENCE="PREFERENCE",e.LOCATION="LOCATION",e.LAUNCHED="LAUNCHED",e.PRIME="PRIME",e.BANYAN="BANYAN",e.DATA_GENERATION="DATA_GENERATION",e.DOWNSTREAM_FAILURE="DOWNSTREAM_FAILURE",e.UNKNOWN="UNKNOWN",e}({}),i=function(e){return e.enabled="enabled",e.disabled="disabled",e.hidden="hidden",e}({}),a={[o.face_management]:"face-edit",[o.family_archive]:"family-vault"},s=[o.face_management,o.family_archive,o.people,o.places,o.semantic_search,o.stories,o.things,o.upsell];function featureResponseToMap(e){var t,r,n,c={};Object.values(o).forEach((t=>{var r=e.find((e=>e.name===t));r?c[t]=r:s.includes(t)&&(c[t]=function getDefaultEvaluation(e){if(e===o.upsell)return{name:e,state:i.enabled};return{name:e,state:i.disabled}}(t))})),Object.entries(a).forEach((e=>{var[t,r]=e;c[r]=c[t]}));var l=[null===(t=c.things)||void 0===t?void 0:t.state,null===(r=c.places)||void 0===r?void 0:r.state,null===(n=c.people)||void 0===n?void 0:n.state].includes(i.enabled);return c.search={name:"search",state:l?i.enabled:i.disabled},c}function isFeatureEnabled(e,t){var r,o;return(null!==(r=null===(o=e[t])||void 0===o?void 0:o.state)&&void 0!==r?r:i.disabled)===i.enabled}function getFeatureCriteria(e,t){var r,o;return null!==(r=null===(o=e[t])||void 0===o?void 0:o.criteria)&&void 0!==r?r:[]}},34332:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(38364),n=r(97463),i=r(18742),a=r(74169),s=r(74267);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}const c=new class BFFService{get config(){return{customerId:n.A.getProperty("customerId"),language:n.A.getProperty("language"),isAndroid:a.jO.isAndroid,isIOS:a.jO.isIOS,isMobile:a.jO.isMobile,applicationId:i.A.getProperty("applicationId")}}callService(e){var t=this;return _asyncToGenerator((function*(){var{language:r}=t.config,{data:n}=e,i={lang:r,devicePlatform:s.mC.WEB},a=_objectSpread(_objectSpread({},e),{},{shouldShowUnauthDialog:!0,data:_objectSpread(_objectSpread({},i),n)}),c={"x-amz-clouddrive-appid":t.config.applicationId};return(0,o.A)(a,"",c)}))()}sendFamilyVaultInvitation(e,t,r){var o=this;return _asyncToGenerator((function*(){if(!e&&!t)throw new Error("sendFamilyVaultInvitation missing address or inviteId");var n={type:"POST",url:"".concat(s.t8,"invite"),acceptableErrorCodes:s.Be,data:{address:e,inviteId:t,lang:r?"en_US":void 0}};return o.callService(n)}))()}listPendingInvitations(){var e=this;return _asyncToGenerator((function*(){var t=yield e.callService({type:"GET",url:"".concat(s.t8,"invitations/pending"),noCache:!0}),{invitations:r=[]}=t;return r}))()}deleteFamilyVaultInvitation(e){var t=this;return _asyncToGenerator((function*(){if(!e)throw new Error("deleteInvitation missing inviteId");return t.callService({type:"DELETE",url:"".concat(s.t8,"invitation/").concat(e,"/delete")})}))()}acceptFamilyVaultInvitation(e){var t=this;return _asyncToGenerator((function*(){if(!e)throw new Error("acceptFamilyVaultInvitation missing inviteId");return t.callService({type:"PUT",url:"".concat(s.t8,"invitation/").concat(e,"/accept")})}))()}declineFamilyVaultInvitation(e){var t=this;return _asyncToGenerator((function*(){if(!e)throw new Error("declineFamilyVaultInvitation missing inviteId");return t.callService({type:"DELETE",url:"".concat(s.t8,"invitation/").concat(e)})}))()}sendEmailDownloadAppLink(){var e=this;return _asyncToGenerator((function*(){var{isIOS:t,isAndroid:r}=e.config,o="FIREOS";return r&&(o="ANDROID"),t&&(o="IOS"),e.callService({type:"POST",url:"/photoapp/v1/experiences/notification",data:{devicePlatform:o,notificationType:"desktopDownloadEmail"}})}))()}sendSMSDownloadAppLink(e){var t=this;return _asyncToGenerator((function*(){if(!e)throw new Error("sendSMSDownloadAppLink missing phoneNumber");return t.callService({type:"POST",url:"/photoapp/v1/experiences/notification",data:{address:e,lang:"en_US",notificationType:"downloadSms"}})}))()}getAccountStatus(){var e=this;return _asyncToGenerator((function*(){return e.callService({type:"GET",url:"".concat(s.Pn,"state/web")})}))()}getCanSendInvitations(){var e=this;return _asyncToGenerator((function*(){return(yield e.getAccountStatus()).canInvite}))()}setOnboardingSeen(){var e=this;return _asyncToGenerator((function*(){return e.callService({type:"PUT",url:"".concat(s.t8,"updateState"),data:{dismiss:!0}})}))()}getFamilyMemberData(){var e=this;return _asyncToGenerator((function*(){var{isMobile:t}=e.config,r=t?"mobile_web":"web",o={type:"GET",url:"/photoapp/".concat("V3","/account/familyMemberData/").concat(r)};return e.callService(o)}))()}}},60731:(e,t,r)=>{"use strict";function getGrantExpiration(e){if("number"==typeof e.expiration){return 1e3*e.expiration}return 1/0}r.d(t,{Mc:()=>getGrantExpiration})},5887:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var o=r(38364),n=r(18742),i=r(97463),a=r(6468),s=r(73725);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var c={isPreferenceChangeAllowed:e=>_asyncToGenerator((function*(){if(!e||0===e.length)return s.A.warn("Preference name list empty."),{};var t={type:"GET",url:"preferences/allowed",data:{preferenceTypes:[...e]}},r=yield callService(t),o={},n=null==r?void 0:r.preferences;return e.forEach((e=>{var t,r,i=n.find((t=>t.preferenceType===e));o[e]={allowed:null!==(t=null==i?void 0:i.preferenceChangeAllowed)&&void 0!==t&&t,criteria:null!==(r=null==i?void 0:i.criteria)&&void 0!==r?r:[]}})),o}))(),getQuota:()=>_asyncToGenerator((function*(){return yield callService({type:"GET",url:"quota",noCache:!0,data:{includeFamily:!0}})}))()};function getApplicationId(){return n.A.getProperty("applicationId")}function callService(e){return _callService2.apply(this,arguments)}function _callService2(){return _callService2=_asyncToGenerator((function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:{},c=_objectSpread(_objectSpread({shouldShowUnauthDialog:!0},e),{},{data:_objectSpread({customerId:i.A.getProperty("customerId"),applicationId:getApplicationId()},s)}),l=_objectSpread(_objectSpread({},r),{},{"x-amz-clouddrive-appid":getApplicationId()});return(0,a.h)(o.A,c,function getEndpoint(){return"".concat(n.A.getProperty("urls.accountServiceEndpoint"),"/")}(),l)})),_callService2.apply(this,arguments)}},21203:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>s,Zn:()=>isValidCloneRequest,jk:()=>i,nO:()=>a});var o=["sourceType","cdgsGroupId","cdgsShareToken","cloneAllNodesInCollection","selectedNodes","sourceUrl"],n=["sourceType","cdsSharedCollectionNodeId","cdsShareId","cloneAllNodesInCollection","selectedNodes","sourceUrl"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=function(e){return e.CDS_SHARED_COLLECTION="CDS_SHARED_COLLECTION",e.CDGS_GROUP="CDGS_GROUP",e.WHOLE_ACCOUNT="WHOLE_ACCOUNT",e}({}),a=function(e){return e.PENDING="PENDING",e.IN_PROGRESS="IN_PROGRESS",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.FAILED="FAILED",e}({}),s=function(e){return e.OVERQUOTA="OVERQUOTA",e.UNSHARED="UNSHARED",e.CANCELLED="CANCELLED",e.DUPLICATE="DUPLICATE",e.UNKNOWN="UNKNOWN",e}({});function isValidCloneRequest(e){if(!e)return!1;var t=void 0===e.selectedNodes||0===e.selectedNodes.length;if(!1===e.cloneAllNodesInCollection&&t)return!1;var r=/^[.a-zA-Z0-9_-]+$/;if(e.sourceType===i.CDGS_GROUP){var{sourceType:a,cdgsGroupId:s,cdgsShareToken:c,cloneAllNodesInCollection:l,selectedNodes:u,sourceUrl:d}=e,p=_objectWithoutProperties(e,o);return 0===Object.keys(p).length&&r.test(s)&&r.test(c)}if(e.sourceType===i.CDS_SHARED_COLLECTION){var{sourceType:h,cdsSharedCollectionNodeId:m,cdsShareId:v,cloneAllNodesInCollection:g,selectedNodes:f,sourceUrl:y}=e;p=_objectWithoutProperties(e,n);return 0===Object.keys(p).length&&r.test(m)&&r.test(v)}return!1}},4995:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(38364),n=r(97463),i=r(18742),a=r(6468);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}const s=new class CloneService{get config(){var e=i.A.getProperty("urls.cloneServiceEndpoint");if(!e)throw new Error("Clone service endpoint is not configured");var t=new URL(e);return{authenticated:n.A.getProperty("authenticated")&&n.A.getProperty("isValidMarketplace"),endPoint:t.origin}}callService(e){var t=this;return _asyncToGenerator((function*(){var{endPoint:r}=t.config,n={"x-amz-clouddrive-appid":i.A.getProperty("applicationId")};return(0,a.h)((()=>(0,o.A)(_objectSpread(_objectSpread({},e),{},{withCredentials:!0}),r,n)))}))()}initiateCloneCollectionJob(e){var t=this;return _asyncToGenerator((function*(){var{accountId:r,cdgsGroupId:o,cdgsShareToken:n,cdsSharedCollectionNodeId:i,cdsShareId:a,cloneAllNodesInCollection:s,contentDateOverride:c,selectedNodes:l,sourceType:u,sourceUrl:d}=e;return t.callService({type:"POST",url:"/v1/cloneCollection",data:{accountId:r,cdgsGroupId:o,cdgsShareToken:n,cdsSharedCollectionNodeId:i,cdsShareId:a,cloneAllNodesInCollection:s,contentDateOverride:c,selectedNodes:l,sourceType:u,sourceUrl:d}})}))()}getCloneCollectionJob(e){var t=arguments,r=this;return _asyncToGenerator((function*(){var o=t.length>1&&void 0!==t[1]?t[1]:1;return r.callService({type:"GET",url:"/v1/cloneCollection/".concat(e,"?page=").concat(o),noCache:!0})}))()}}},87822:(e,t,r)=>{"use strict";r.d(t,{Ae:()=>getLivePhotoVideoTranscodeUrl,y_:()=>getDownloadUrl,yv:()=>getVideoTranscodeUrl});var o=r(18742),n=r(73725),i=r(71086),a=r(51317);function shouldUseDownloadService(){var e=i.A.getProperty("route.props.shareId"),t=i.A.getProperty("route.props.shareToken");return!e&&!t}var s=720;function getAuthApiUrl(e){var{apiPathSuffix:t="",nodeId:r,ownerId:n}=e,i=new URL(o.A.getProperty("urls.downloadServiceEndpoint")),a="/v2/download/signed/".concat(r).concat(t);if(i.pathname=a,n){var{searchParams:s}=i;s.append("ownerId",n)}return i}function logMissingParameters(e){var{callerName:t,nodeId:r,ownerId:o}=e;if(!r||!o){var i=[!r&&"nodeId",!o&&"ownerId"].filter((e=>e)).join(", ");n.A.error("Download service content URL function ".concat(t," missing required parameter(s): ").concat(i))}}function getDownloadUrl(e){var{nodeId:t,ownerId:r,tempLink:o}=e;return logMissingParameters({callerName:"getDownloadUrl()",nodeId:t,ownerId:r}),t&&r?shouldUseDownloadService()?getAuthApiUrl({nodeId:t,ownerId:r}).toString():new a.A({id:t,ownerId:r,tempLink:o}).toDownloadUrlString():null}function getLivePhotoVideoTranscodeUrl(e){var{nodeId:t,ownerId:r,tempLink:o,transcodeHeight:n=s}=e;if(logMissingParameters({callerName:"getLivePhotoVideoTranscodeUrl()",nodeId:t,ownerId:r}),!t)return null;if(!shouldUseDownloadService())return new a.A({id:t,ownerId:r,tempLink:o}).toLivePhotoUrlString({videoResolution:n});var i=getAuthApiUrl({apiPathSuffix:"/alt/livetranscode",nodeId:t,ownerId:r}),{searchParams:c}=i;return c.append("y",n.toString()),i.toString()}function getVideoTranscodeUrl(e){var{nodeId:t,ownerId:r,tempLink:o}=e;if(logMissingParameters({callerName:"getVideoTranscodeUrl()",nodeId:t,ownerId:r}),!t)return null;if(!shouldUseDownloadService())return new a.A({id:t,ownerId:r,tempLink:o}).toVideoUrlString({videoResolution:s});var n=getAuthApiUrl({apiPathSuffix:"/alt/video_transcode",nodeId:t,ownerId:r}),{searchParams:i}=n;return i.append("y",s.toString()),n.toString()}},60045:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var o=r(62193),n=r.n(o),i=r(83673),a=r.n(i),s=r(7309),c=r.n(s),l=r(84684),u=r.n(l),d=r(18742),p=r(97463),h=r(38364),m=r(84956);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}const v=new class DevicePersonalizationServiceClient{get config(){var e=p.A.getProperty("language");return{endPoint:d.A.getProperty("urls.devicePersonalizationServiceEndpoint"),customerId:p.A.getProperty("customerId"),authenticated:p.A.getProperty("authenticated")&&p.A.getProperty("isValidMarketplace"),locale:e&&e.replace("_","-"),applicationId:d.A.getProperty("applicationId")}}callService(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};r.data=r.data||{};var o={"x-amz-clouddrive-appid":t.config.applicationId};return u()(r,{shouldShowUnauthDialog:!0}),(0,h.A)(r,"".concat(t.config.endPoint),o)}))()}getDevices(e){var t=this;return _asyncToGenerator((function*(){var{noCache:r}=e;return t.callService({url:"/devices",type:"GET",noCache:r})}))()}getDevice(e){var t=this;return _asyncToGenerator((function*(){var{deviceSerialNumber:r,noCache:o}=e;return t.callService({url:"/devices/".concat(r),type:"GET",noCache:o})}))()}getCollections(e){var t=this;return _asyncToGenerator((function*(){var{nextToken:r,limit:o,collectionSelectedFilter:n,locale:i=t.config.locale,noCache:a,deviceAccount:s,collectionType:c=m.A.COLLECTION_TYPES.ALL}=e;return t.callService({url:"/collections",type:"GET",noCache:a,data:{nextToken:r,limit:o,coverPhotoCount:1,collectionType:c,collectionSelectedFilter:n,locale:i,deviceAccount:s}})}))()}getCollectionsByIds(e){var t=this;return _asyncToGenerator((function*(){var{collectionIds:r,locale:o=t.config.locale}=e;return t.callService({url:"/collections",type:"POST",data:{collectionIds:r,locale:o}})}))()}getSettings(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o,noCache:n}=e,{DEVICE_TYPES:{FIRE_TV:i},PATH_SCREENSAVER:a,PATH_WALLPAPER:s}=m.A,c=o===i?a:s;return t.callService({url:"/deviceAccounts/".concat(r,"/settings/").concat(c,"/providerCollections"),type:"GET",noCache:n})}))()}getCompositeDeviceSettings(e){var t=this;return _asyncToGenerator((function*(){var{locale:r=t.config.locale,noCache:o}=e;return t.callService({url:"/devices",type:"GET",noCache:o,data:{settings:"ALL",locale:r}})}))()}updateSettings(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o,collectionIds:n}=e,{DEVICE_TYPES:{FIRE_TV:i},PATH_SCREENSAVER:s,PATH_WALLPAPER:l,PROVIDER_ID_FACEBOOK:u,PROVIDER_ID_AMAZON_PHOTOS:d}=m.A,p=o===i?s:l,h=yield t.getSettings({deviceAccount:r,deviceType:o}),v=c()(h.providerCollections,(e=>e.providerId===u));return t.callService({url:"/deviceAccounts/".concat(r,"/settings/").concat(p,"/providerCollections"),dataType:"text",type:"PUT",data:{providerCollections:a()([{providerId:d,collectionIds:n},v])}})}))()}getAmazonPhotosSettingsCollectionIds(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o}=e,{PROVIDER_ID_AMAZON_PHOTOS:n}=m.A,i=yield t.getSettings({deviceAccount:r,deviceType:o});return c()(i.providerCollections,(e=>e.providerId===n)).collectionIds}))()}addCollectionsToSettings(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o,existingCollectionIds:n,updatingCollectionIds:i}=e,a=[...n,...i];yield t.updateSettings({deviceAccount:r,deviceType:o,collectionIds:a})}))()}removeCollectionsFromSettings(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o,existingCollectionIds:n,updatingCollectionIds:i}=e,a=n.filter((e=>!i.includes(e)));yield t.updateSettings({deviceAccount:r,deviceType:o,collectionIds:a})}))()}isDailyMemoriesEnabled(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o}=e,{PROVIDER_ID_AMAZON_PHOTOS:i,DAILY_MEMORIES_COLLECTION_ID:a}=m.A,s=yield t.getSettings({deviceAccount:r,deviceType:o}),l=c()(s.providerCollections,(e=>e.providerId===i));return!n()(l)&&l.collectionIds.includes(a)}))()}toggleDailyMemoriesCollectionId(e){var t=this;return _asyncToGenerator((function*(){var{deviceAccount:r,deviceType:o,existingCollectionIds:n,isEnabled:i}=e,{DAILY_MEMORIES_COLLECTION_ID:a}=m.A,s={deviceAccount:r,deviceType:o,existingCollectionIds:n,updatingCollectionIds:[a]};i?yield t.removeCollectionsFromSettings(s):yield t.addCollectionsToSettings(s)}))()}}},41321:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,rM:()=>c});var o=r(38364),n=r(18742),i=r(97463),a=r(74169),s=r(47763);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var c={PRINTS:"PRINTS",FOR_YOU:"FOR_YOU",HOME:"HOME",ALL:"ALL",BANNER:"BANNER"};class InAppMessagesService{get config(){return{endPoint:a.DS.inAppMessagesServiceEndpoint,customerId:i.A.getProperty("customerId"),applicationId:n.A.getProperty("applicationId"),language:i.A.getProperty("language"),sourceId:n.A.getProperty("sourceId")}}callService(e){var t=this;return _asyncToGenerator((function*(){var r={"x-amz-clouddrive-appid":n.A.getProperty("applicationId"),"x-amzn-CustomerId":t.config.customerId,"x-amzn-clouddrive-source":n.A.getProperty("sourceId"),"x-amzn-clouddrive-decoded-appid":atob(n.A.getProperty("applicationId"))};return(0,o.A)(e,t.config.endPoint,r)}))()}getInAppMessages(e){var t=this;return _asyncToGenerator((function*(){return(yield t.callService({type:"GET",url:"",data:{category:e,lang:t.config.language},noCache:!0,metricName:(0,s.dk)(InAppMessagesService.METRIC_PREFIX,"getInAppMessages"),doNotAlertOnFatal:!0})).inAppMessages||[]}))()}}!function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(InAppMessagesService,"METRIC_PREFIX","IAM");const l=new InAppMessagesService},14681:(e,t,r)=>{"use strict";r.d(t,{EK:()=>a,OU:()=>i,qb:()=>n,vt:()=>o});var o=function(e){return e.album="album",e.customer="customer",e.document="document",e.file="file",e.folder="folder",e.group="group",e.image="image",e.participant="participant",e.share="share",e.shareToken="shareToken",e.video="video",e}({}),n=function(e){return e.dateModified="dateModified",e.dateCreated="dateCreated",e.name="name",e}({}),i=function(e){return e.ascending="asc",e.descending="desc",e}({}),a=function(e){return e.none="none",e.viewer="viewer",e.collaborator="collaborator",e.administrator="administrator",e.owner="owner",e}({})},44592:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var o=r(38364),n=r(18742),i={baseAppUrl:"baseAppUrl",baseWebViewUrl:"baseWebViewUrl",clouddrive:"clouddrive",manageStorage:"manageStorage",orderHandler:"orderHandler",billingHistory:"billingHistory",sharedHistory:"sharedHistory",voltron:"voltron",yms:"yms",apps:"apps",voice:"voice",welcome:"welcome",imageRecognition:"imageRecognition",help:"help",recognitionHelp:"recognitionHelp",thirdPartyAppsHelp:"thirdPartyAppsHelp",manageThirdParty:"manageThirdParty",authPortal:"authPortal",switchAccounts:"switchAccounts",dashboard:"dashboard",all:"all",search:"search",videos:"videos",familyArchive:"familyArchive",folderView:"folderView",groups:"groups",groupShare:"groupShare",people:"people",stories:"stories",editFaces:"editFaces",places:"places",settings:"settings",share:"share",shareV2:"shareV2",shareList:"shareList",shareListPrevious:"shareListPrevious",blockedContacts:"blockedContacts",album:"album",albums:"albums",invite:"invite",thisday:"thisday",trash:"trash",onboard:"onboard",hidden:"hidden",report:"report",storage:"storage",familyStorage:"familyStorage",androidSimpleStorage:"androidSimpleStorage",androidStorage:"androidStorage",iosStorage:"iosStorage",imageRecognitionSettings:"imageRecognitionSettings",storagePlans:"storagePlans",cancelPlan:"cancelPlan",IOSUpgradeInstructions:"IOSUpgradeInstructions",gallery:"gallery",404:"404",cancellationFeedback:"cancellationFeedback",cancellationSurveyLink:"cancellationSurveyLink",cancellationFeedbackPrivacyLink:"cancellationFeedbackPrivacyLink",cancellationFeedbackCustomerHelpLink:"cancellationFeedbackCustomerHelpLink",serviceWorker:"serviceWorker",prints:"prints",printsSignout:"printsSignout",printingDefaultURL:"printingDefaultURL",printsMarketing:"printsMarketing",chromeLink:"chromeLink",primeSignupLink:"primeSignupLink",signout:"signout",resignin:"resignin",universalAppLink:"universalAppLink",desktopLink:"desktopLink",windowsAppLink:"windowsAppLink",macAppLink:"macAppLink",appDownloadiOS:"appDownloadiOS",appDownloadAndroid:"appDownloadAndroid",appStoreiOS:"appStoreiOS",appStoreAndroid:"appStoreAndroid",reportFormLink:"reportFormLink",photosInfoPage:"photosInfoPage",desktopHelpPages:"desktopHelpPages",feedbackForm:"feedbackForm",privacyPolicy:"privacyPolicy",termsOfUse:"termsOfUse",dataRetentionPolicy:"dataRetentionPolicy",cookieNotice:"cookieNotice",cloneServiceEndpoint:"cloneServiceEndpoint",devicePersonalizationServiceEndpoint:"devicePersonalizationServiceEndpoint",driveServiceEndpoint:"driveServiceEndpoint",groupsOnboardingEndpoint:"groupsOnboardingEndpoint",promptoServiceEndpoint:"promptoServiceEndpoint",proxyServiceEndpoint:"proxyServiceEndpoint",suliServiceEndpoint:"suliServiceEndpoint",thumbnailServiceEndpoint:"thumbnailServiceEndpoint",uploadServiceEndpoint:"uploadServiceEndpoint",pssServiceEndpoint:"pssServiceEndpoint",downloadServiceEndpoint:"downloadServiceEndpoint",accountServiceEndpoint:"accountServiceEndpoint",inAppMessagesServiceEndpoint:"inAppMessagesServiceEndpoint",recordCustomerActionServiceEndpoint:"recordCustomerActionServiceEndpoint",sharingControlPlaneEndpoint:"sharingControlPlaneEndpoint"},a=r(14681);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var s={listShares:e=>_asyncToGenerator((function*(){var t,r=(null==e?void 0:e.sortBy)===a.qb.name?a.OU.ascending:a.OU.descending,o=null!=e?e:{};return null!==(t=o.sortDirection)&&void 0!==t||(o.sortDirection=r),yield get("/share",o)}))(),listAlbums:e=>_asyncToGenerator((function*(){var t,r=(null==e?void 0:e.sortBy)===a.qb.name?a.OU.ascending:a.OU.descending,o=null!=e?e:{};return null!==(t=o.sortDirection)&&void 0!==t||(o.sortDirection=r),yield get("/albums",o)}))(),describeShare:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;return yield get("/shares/".concat(encodeURIComponent(t)))}))(),addShareParticipant:e=>_asyncToGenerator((function*(){var{resourceId:t,participantId:r}=e;yield post("/shares/".concat(encodeURIComponent(t),"/participants/add"),{participantId:r})}))(),removeShareParticipant:e=>_asyncToGenerator((function*(){var{resourceId:t,participantId:r}=e;yield function deleteRequest(e,t){return _deleteRequest.apply(this,arguments)}("/shares/".concat(encodeURIComponent(t),"/participants/remove"),{participantId:r})}))(),getPublicShareLink:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;return yield post("/shares/".concat(encodeURIComponent(t),"/settings/publicShareLink"))}))(),changePublicShareLink:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;return yield post("/shares/".concat(encodeURIComponent(t),"/settings/changePublicShareLink"))}))(),disablePublicShareLink:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;yield post("/shares/".concat(encodeURIComponent(t),"/settings/disablePublicShareLink"))}))(),enableCollaboration:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;yield post("/shares/".concat(encodeURIComponent(t),"/settings/enableCollaboration"))}))(),disableCollaboration:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;yield post("/shares/".concat(encodeURIComponent(t),"/settings/disableCollaboration"))}))(),markShareSeen:e=>_asyncToGenerator((function*(){var{resourceId:t}=e;yield post("/shares/".concat(encodeURIComponent(t),"/participants/markSeen"))}))()};function get(e,t){return _get.apply(this,arguments)}function _get(){return(_get=_asyncToGenerator((function*(e,t){return callService({type:"GET",url:e,data:t})}))).apply(this,arguments)}function post(e,t){return _post.apply(this,arguments)}function _post(){return(_post=_asyncToGenerator((function*(e,t){return callService({type:"POST",url:e,data:t})}))).apply(this,arguments)}function _deleteRequest(){return(_deleteRequest=_asyncToGenerator((function*(e,t){return callService({type:"DELETE",url:e,data:t})}))).apply(this,arguments)}function callService(e){return _callService2.apply(this,arguments)}function _callService2(){return _callService2=_asyncToGenerator((function*(e){var t={"x-amz-clouddrive-appid":n.A.getProperty("applicationId")},r=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},null==e?void 0:e.data),a=n.A.getProperty("urls.".concat(i.sharingControlPlaneEndpoint));return e.shouldReturnNativePromise=!0,e.data=r,(0,o.A)(e,a,t)})),_callService2.apply(this,arguments)}},81412:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,Zf:()=>s,it:()=>c});var o=r(18742),n=r(97463),i=r(38364);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var a="Storage",s="PSS_STORAGE_ERROR",c=function(e){return e.Active="Active",e.Cancelled="Cancelled",e}({});const l=new class PhotoSubscriptionServiceClient{get config(){return{endPoint:o.A.getProperty("urls.pssServiceEndpoint"),customerId:n.A.getProperty("customerId"),applicationId:o.A.getProperty("applicationId")}}callService(e){var t=arguments,r=this;return _asyncToGenerator((function*(){var o={"x-amz-photos-subs-type":t.length>1&&void 0!==t[1]?t[1]:a,"x-amzn-CustomerId":"".concat(r.config.customerId),"x-amz-clouddrive-appid":r.config.applicationId};return e.shouldShowUnauthDialog=!0,(0,i.A)(e,"".concat(r.config.endPoint),o)}))()}cancel(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:a;return t.callService({url:"subscriptions/cancellations",type:"POST",noCache:!0,data:{}},r)}))()}fetchOffers(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:"Amazon",o=e.length>1&&void 0!==e[1]?e[1]:a;if(!r)throw new Error("fetchOffers is missing vendorId");return t.callService({url:"vendors/".concat(r,"/offers"),type:"GET",noCache:!0,data:{}},o)}))()}getSubscription(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:a;if(!r)throw new Error("getSubscription is missing subscriptionType");return t.callService({url:"subscriptions",type:"GET",noCache:!0,data:{}},r)}))()}setAutoRenew(e){var t=arguments,r=this;return _asyncToGenerator((function*(){var o=t.length>1&&void 0!==t[1]?t[1]:a;if(null==e)throw new Error("setAutoRenew is missing isAutoRenewEnabled");if(!o)throw new Error("setAutoRenew is missing subscriptionType");return r.callService({url:"subscriptions/autoRenew",type:"PUT",noCache:!0,data:{isAutoRenewEnabled:e}},o)}))()}}},43293:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(38364),n=r(18742),i=r(97463),a=r(74169),s=r(47763);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}class RecordCustomerActionService{get config(){return{endPoint:a.DS.recordCustomerActionServiceEndpoint,customerId:i.A.getProperty("customerId"),applicationId:n.A.getProperty("applicationId"),language:i.A.getProperty("language"),sourceId:n.A.getProperty("sourceId")}}callService(e){var t=this;return _asyncToGenerator((function*(){var r={"x-amz-clouddrive-appid":n.A.getProperty("applicationId"),"x-amzn-CustomerId":t.config.customerId,"x-amzn-clouddrive-source":n.A.getProperty("sourceId"),"x-amzn-clouddrive-decoded-appid":atob(n.A.getProperty("applicationId"))};return(0,o.A)(e,t.config.endPoint,r)}))()}recordCustomerAction(e){var t=this;return _asyncToGenerator((function*(){var{campaign:r,actionStatus:o}=e,n="PINPOINT:PROMO:".concat(r);return yield t.callService({type:"POST",url:"",data:{identifier:n,actionStatus:o},noCache:!0,metricName:(0,s.dk)(RecordCustomerActionService.METRIC_PREFIX,"recordCustomerAction"),dataType:"text",doNotAlertOnFatal:!0})}))()}}!function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(RecordCustomerActionService,"METRIC_PREFIX","RCA");const c=new RecordCustomerActionService},47763:(e,t,r)=>{"use strict";r.d(t,{ak:()=>emitHealthMetric,dk:()=>generateMetricName});var o=r(73725),n=r(13489),i="RetryCount",a="CallService";function generateMetricName(e,t){return"".concat(a,".").concat(e,".").concat(t)}function emitHealthMetric(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(function validateMetricName(e){return"string"==typeof e&&e.includes(".")}(e)){var a={name:e,type:"BINARY",value:t?1:0,segments:{[i]:null!=r?r:0}};n.A.log(a)}else o.A.fatal("Invalid metric name: ".concat(e))}},50248:(e,t,r)=>{"use strict";r.d(t,{D_:()=>logPageView,Yy:()=>logCustomEvent,jg:()=>logErrorEvent});var o=["/photos/shared/","/photos/share/","/photos/groups/share/"],n=/(^.*\/photos(?:\/groups)?\/shared?\/)([^/?#]+)(.*)$/i,i=/(^.*\/photos\/search\/all\/)([^?#/]+)/i,logPageView=()=>{var e,t,r,{pathname:a}=window.location;r=a,o.some((e=>r.startsWith(e)))&&(a=a.replace(n,"$1[redacted]$3")),a.startsWith("/photos/search/all/")&&(a=(e=>e.replace(i,"$1[redacted]"))(a)),null===(e=window)||void 0===e||null===(t=e.awsRum)||void 0===t||t.recordPageView({pageId:a})},logErrorEvent=(e,t)=>{var r;t?(r="nativeErrorMessage: ".concat(t.message,", customErrorMessage: ").concat(e),t.message=r):r=e;try{var o,n;null===(o=window)||void 0===o||null===(n=o.awsRum)||void 0===n||n.recordError(t||new Error(r))}catch(e){window.console.error(e)}},logCustomEvent=e=>{var{name:t}=e;if(t){var r="amazon.photos.web.".concat(t);if((e=>!(!e||e.length<1||e.length>256)&&/^[a-zA-Z0-9_.-]+$/.test(e))(r))try{var o,n;null===(o=window)||void 0===o||null===(n=o.awsRum)||void 0===n||n.recordEvent(r,e)}catch(e){window.console.error(e)}else logErrorEvent("",new Error("health metric name is invalid"))}else logErrorEvent("",new Error("health metric is missing name property"))}},92522:(e,t,r)=>{"use strict";r.d(t,{A:()=>O});var o=r(62193),n=r.n(o),i=r(39754),a=r.n(i),s=r(47091),c=r.n(s),l=r(58156),u=r.n(l),d=r(62216),p=r.n(d),h=r(74692),m=r.n(h),v=r(46266),g=r(47389),f=r(71086),y=r(14324),A=r(18742),_=r(37763),P=r(21572),b=r(73725),S=r(1683),I=300;function _getPrintsLink(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={category:e||"shop",redirect:arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0},o=f.A.getProperty("sfGsid"),n=f.A.getProperty("sfNextUrl");return o&&(r.sfGsid=decodeURIComponent(o)),!n||t&&!/projectId/.test(n)||(r.sfNextUrl=decodeURIComponent(n)),new g.A(A.A.getProperty("urls.prints"),r).toString()}function _isValidNode(e){if(e.isUnprintablePhoto())return(0,_.A)((0,P.A)("amazon-photos-prints-valid-photo-only"),{name:"OrderPrintsInvalidFormatSelectionDialog",heading:(0,P.A)("amazon-photos-prints-valid-photo-only-head"),buttons:["ok"]}),!1;if(e.isAlbum()){var t=y.A.getProperty("selectionCollection");if(t&&t.count>I)return(0,_.A)((0,P.A)("amazon-photos-prints-album-select-limit-msg",[I]),{name:"OrderPrintsAlbumLimitInvalidSelectionDialog",heading:(0,P.A)("amazon-photos-prints-select-limit-head"),buttons:["ok"]}),!1}return!0}function _isValidSelection(e){var t=e.getNodes();return t.length===e.unprintableCount&&t.length>0?((0,_.A)((0,P.A)("amazon-photos-prints-only-photos-allowed"),{name:"OrderPrintsVideosInvalidSelectionDialog",heading:(0,P.A)("amazon-photos-prints-only-photos-allowed-head"),buttons:["ok"]}),!1):!(t.length>I)||((0,_.A)((0,P.A)("amazon-photos-prints-select-limit",[I]),{name:"OrderPrintsLimitInvalidSelectionDialog",heading:(0,P.A)("amazon-photos-prints-select-limit-head"),buttons:["ok"]}),!1)}const O={redirectToPrinting(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],{navigateToPrintsMarketing:r}=e;if(p()(e.metricContext)&&b.A.warn("Missing metricContext in redirectToPrinting()"),e.metricContext&&e.metricContext.length>15&&b.A.warn("metricContext exceeds max length in redirectToPrinting()"),e.selection){if(!_isValidSelection(e.selection))return;t=e.selection.getNodes()||t}else if(e.node){if(!_isValidNode(e.node))return;t=[e.node]}var o=_getPrintsLink(e.category),i={albumIds:[],photoIds:[],storyIds:u()(e,"storyIds",[])},s=m()("<form/>").attr("method","POST").attr("action",o).on("submit",(e=>{e.preventDefault()})),c=!n()(i.storyIds);if(t.length>0||c){var l,d=f.A.getProperty("sfNextUrl");d&&(l=new g.A(decodeURIComponent(d))),a()(t,(e=>{e.isPrintablePhoto()&&(e.ownerId&&!e.belongsToCurrentUser()&&e.isInFamilyArchive()?i.photoIds.push("".concat(e.ownerId,":").concat(e.id)):i.photoIds.push(e.id),S.A.log("StartOrganize",{eventTag:"SelectModeLocked",eventCount:1,projectId:u()(l,"query.projectId",0),nodeId:e.id,projectType:u()(l,"query.category","New Print")},f.A.getPageContext())),e.isAlbum()&&i.albumIds.push(e.id)})),s.append(m()("<input/>").attr("type","hidden").attr("name","selectedNodeIds").attr("value",JSON.stringify(i))),m()("body").append(s),s[0].submit()}else if(r){var h=new g.A(A.A.getProperty("urls.printsMarketing"),{ref_:"AP_TO_APM"}).toString();window.location.href=h}else window.location.href=_getPrintsLink(e.category,!0)},fetchRedirectionUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function _create3PPrintingPayload(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(e.metricContext)&&b.A.warn("Missing metricContext in create3PPrintingPayload()"),e.metricContext&&e.metricContext.length>15&&b.A.warn("metricContext exceeds max length in create3PPrintingPayload()");var t={albumIds:[],photoIds:[],storyIds:u()(e,"storyIds",[])},r=[];if(e.selection){if(!_isValidSelection(e.selection))return"selectedNodeIds=".concat(encodeURIComponent(JSON.stringify(t)));r=e.selection.getNodes()||r}else if(e.node){if(!_isValidNode(e.node))return"selectedNodeIds=".concat(encodeURIComponent(JSON.stringify(t)));r=[e.node]}if(c()(r)>0){var o,n=f.A.getProperty("sfNextUrl");n&&(o=new g.A(decodeURIComponent(n))),a()(r,(e=>{e.isPrintablePhoto()&&(e.ownerId&&!e.belongsToCurrentUser()&&e.isInFamilyArchive()?t.photoIds.push("".concat(e.ownerId,":").concat(e.id)):t.photoIds.push(e.id),S.A.log("StartOrganize",{eventTag:"SelectModeLocked",eventCount:1,projectId:u()(o,"query.projectId",0),nodeId:e.id,projectType:u()(o,"query.category","New Print")},f.A.getPageContext())),e.isAlbum()&&t.albumIds.push(e.id)}))}return"selectedNodeIds=".concat(encodeURIComponent(JSON.stringify(t)))}(e),r=_getPrintsLink(e.category,!1,"none");return v.A.post(r,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getMaxPrintSelectionCount:()=>I}},45463:(e,t,r)=>{"use strict";r.d(t,{A:()=>createGroup});var o=r(60895),n=r.n(o),i=r(74692),a=r.n(i),s=r(42843),c=r(35994),l=r(47389),u=r(1683),d=r(18742),p=r(13489),h=r(21572),m=r(67172),v=r(71086),g=r(66941);function createGroup(e){var{navigate:t=!0,eventTag:r="",ingressPoint:o=""}=e,i=a().Deferred(),f=v.A.getPageContext();return m.A.createGroup().done((e=>{c.A.emit("uncache");var a=new l.A(d.A.getProperty("urls.groups")).addPath(e.groupId).setParam("new",!0).setParam("ingressPoint",o);n()((()=>{t&&a.go(!1,!0,{groupsBackUrl:v.A.getProperty("fragment")}),i.resolve(new g.A(e))}),s.A.SHORT),p.A.log({name:"CreateGroupSuccess"}),u.A.log("CreateGroupCompleted",{eventTag:r},f)})).fail((e=>{var t="amazon-photos-create-group-fail";403===e.status&&(t="amazon-photos-create-group-fail-maximum"),c.A.emit("showToast",{message:(0,h.A)(t),className:"fail"}),p.A.log({name:"CreateGroupFail"}),i.reject()})),i.promise()}},5288:(e,t,r)=>{"use strict";function calculateCropbox(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=Math.min(t/o,r),i=Math.round(n*o),a=0,s=0;if(e)if(r>t/o){var c=e.left*r+e.width*r/2;s=Math.max(0,c-n/2),s=Math.min(r-n,s)}else{var l=e.top*t+e.height*t/2;a=Math.max(0,l-i/2),a=Math.min(t-i,a)}else s=Math.max(0,(r-n)/2),a=Math.max(0,(t-i)/2);return{cropHeight:i,cropWidth:n,offsetX:s=Math.floor(s),offsetY:a=Math.floor(a)}}r.d(t,{A:()=>calculateCropbox})},49879:(e,t,r)=>{"use strict";r.d(t,{SU:()=>byDateCreated,Xo:()=>byDateTaken,yt:()=>byDateAddedToGroup});var o=r(7309),n=r.n(o),i=r(21572),a=r(89873),s=10,c="nodate";function createKeyFromDate(e){return e.substr(0,s)}function formatDate(e){return new a.A(e,{utc:!0}).displayDate}function byDate(e,t){return!t&&e?{key:createKeyFromDate(e),label:formatDate(e)}:t&&!e?{key:c,label:(0,i.A)("amazon-photos-no-date")}:!(!e||!t)&&(createKeyFromDate(e)!==createKeyFromDate(t)&&{key:createKeyFromDate(e),label:formatDate(e)})}function byDateTaken(e,t,r){if(!e)return!1;var o=e.contentDate(),n=r?r.contentDate():null;return r||o?byDate(o,n):{key:c,label:(0,i.A)("amazon-photos-no-date")}}function byDateCreated(e,t,r){if(!e)return!1;var o=e.getCreatedDate(),n=r?r.getCreatedDate():null;return r||o?byDate(o,n):{key:c,label:(0,i.A)("amazon-photos-no-date")}}var getDateAddedToGroup=(e,t)=>{if(!e)return null;var r=n()(e.groupPermissions,{groupId:t});return r?r.lastModifiedTime:null};function byDateAddedToGroup(e,t,r,o){if(!e)return!1;var n=getDateAddedToGroup(e,o),a=r?getDateAddedToGroup(r,o):null;return r||n?r&&e.ownerId!==r.ownerId?{key:createKeyFromDate(n),label:formatDate(n)}:byDate(n,a):{key:c,label:(0,i.A)("amazon-photos-no-date")}}},42341:(e,t,r)=>{"use strict";r.d(t,{A:()=>download,_:()=>Downloader});var o=r(96540),n=r(21572),i=r(1683),a=r(35994),s=r(13489),c=r(78439),l=r(39138),u=r(34001);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var d="AVAILABLE",p=function(){var e=_asyncToGenerator((function*(e){return new Promise((t=>{setTimeout((()=>t()),e)}))}));return function timer(t){return e.apply(this,arguments)}}();class Downloader{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty(this,"fileSizeLimit",2e9),_defineProperty(this,"fileCountLimit",200),_defineProperty(this,"retryTime",3e3),_defineProperty(this,"retryLimit",10),_defineProperty(this,"linkCleanupTime",1e4),_defineProperty(this,"downloadExceedsLimit",!1),this.options=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}start(){var e=this;return _asyncToGenerator((function*(){var{models:t,collection:r}=e.options;if((t?t.length:r&&r.count)||r)return t?yield e.downloadModels(t):r&&(yield e.downloadCollection(r)),e;e.handleDownloadFailure()}))()}downloadModels(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r,o=e.length>0&&void 0!==e[0]?e[0]:[],{pageContext:i,downloadCountLimit:c}=t.options,u=o.length>t.fileCountLimit||o.length>1&&t.areModelsOverSizeLimit(o);if(c||!u){var d=1===o.length&&!(null!==(r=o[0])&&void 0!==r&&r.isFolder());if(s.A.log({name:"DownloadInitiated",segments:{DownloadType:d?"SingleFile":"BatchLink"}}),d)try{var p,h=null===(p=o[0])||void 0===p?void 0:p.getDownloadLink();if(!h)return void t.handleDownloadFailure();t.triggerDownload(h),t.logMetric(o,i)}catch(e){throw t.handleDownloadFailure(),e}else try{a.A.emit("showToast",{message:(0,n.A)("amazon-photos-download-starting")});var m=o.map((e=>"".concat(e.ownerId,":").concat(e.id))),v=yield t.getDownloadLink(m);if(!v)return;t.triggerDownload(v),t.logMetric(o,i)}catch(e){throw t.handleDownloadFailure(),e}}else t.openMassDownload(new l.A(o))}))()}downloadCollection(e){var t=this;return _asyncToGenerator((function*(){if(void 0===e.count&&(yield e.getPage(0)),e.count)if(e.count>t.fileCountLimit)t.openMassDownload(e);else{var r=yield e.getByIndexRange(0,e.count-1);t.downloadModels(r)}}))()}openMassDownload(e){var t=this.fileCountLimit;a.A.emit("openDialog",o.createElement(u.A,{collection:e,fileLimit:t,fileSizeLimit:this.fileSizeLimit,downloadModels:e=>this.downloadModels(e)}))}getDownloadLink(e){var t=this;return _asyncToGenerator((function*(){var r,{shareId:o,downloadCountLimit:n}=t.options;try{r=yield c.A.requestBatchLink({ids:e,shareId:o})}catch(e){if(403===e.status&&n)return t.downloadExceedsLimit=!0,null;throw new Error("Unable to request batch link")}return r.status!==d&&(r=yield t.waitForLinkReady(r.links.self)),(yield t.testDownloadLink(r.links.content))?r.links.content:null}))()}waitForLinkReady(e){var t=arguments,r=this;return _asyncToGenerator((function*(){var o,n=t.length>1&&void 0!==t[1]?t[1]:0;if(n>r.retryLimit)throw new Error("Max download retry limit reached");yield p(r.retryTime);try{(o=yield c.A.retrieveBatchLink({batchLink:e})).status!==d&&(o=yield r.waitForLinkReady(e,n+1))}catch(e){throw new Error("Error retrieving link")}return o}))()}testDownloadLink(e){var t=this;return _asyncToGenerator((function*(){var{downloadCountLimit:r}=t.options;try{yield c.A.testBatchLink({url:e})}catch(e){if(!r)throw new Error("Download link is broken");if(403===e.status||0===e.status)return t.downloadExceedsLimit=!0,!1}return!0}))()}areModelsOverSizeLimit(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,r=0;r<e.length;r++){var o=e[r];o&&o.filesize&&(t+=o.filesize())}return t>this.fileSizeLimit}handleDownloadFailure(){a.A.emit("showToast",{message:(0,n.A)("amazon-photos-generic-service-error"),className:"error"})}logMetric(e,t){for(var r,o=0,n=0;n<e.length;n++){var a=e[n];if(a.getNodeType){var s=a.getNodeType();r&&r!==s?r="MIXED":r||(r=s)}a.filesize&&(o+=a.filesize())}i.A.log("Download",{eventTag:r,eventCount:e.length,sizeInBytes:o},t)}triggerDownload(e){var t=document.createElement("a");t.download="",t.href=e,t.click(),setTimeout((()=>{t.remove()}),this.linkCleanupTime)}}function download(){return new Downloader(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).start()}},77914:(e,t,r)=>{"use strict";function escapeRegExp(e){return"string"==typeof e?e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):e}r.d(t,{A:()=>escapeRegExp})},9240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>isFamilyVaultVisible});var o=r(17667),n=r(54318);function isFamilyVaultVisible(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)>=2,t=o.A.isOff(n.jy.GroupsEnabled);return o.A.isOn("family-vault")&&(t||e)}},41847:(e,t,r)=>{"use strict";r.d(t,{O:()=>isValidNodeId,l:()=>isValidShareId});var o=/^[-_a-zA-Z0-9]{22}$/;function isValidNodeId(e){return o.test(e)}var n=/^[a-zA-Z0-9]+$/;function isValidShareId(e){return n.test(e)}},91491:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var o=r(48705),n=r.n(o),i=r(23805),a=r.n(i),s=r(87612),c=r.n(s),l=r(56449),u=r.n(l),d=r(17667);function filterIterator(e){return!a()(e)||!e.featureFlag||d.A.isOn(e.featureFlag)}const p=function filterByFeature(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u()(e)?c()(e,filterIterator):a()(e)?n()(e,filterIterator):void 0}},98436:(e,t,r)=>{"use strict";function fixedCharAt(e,t){for(var r="",o=(e+="").length,n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!=n.exec(e);){if(!(n.lastIndex-2<t))break;t++}return t>=o||t<0?"":(r+=e.charAt(t),/[\uD800-\uDBFF]/.test(r)&&/[\uDC00-\uDFFF]/.test(e.charAt(t+1))&&(r+=e.charAt(t+1)),r)}r.d(t,{A:()=>fixedCharAt})},30772:(e,t,r)=>{"use strict";function __WEBPACK_DEFAULT_EXPORT__(e,t){var r,i,a,s,c,l,u,d,p,h,m=[],v=t.spacing||0,{containerWidth:g}=t,f=t.fixedHeight?t.fixedHeight:t.idealElementHeight,y=[],A=[],_=t.maxAspect||16/9,P=t.minAspect||9/16,{centerLastItem:b=!0}=t;for(r=0,i=e.length;r<i;r++)h=Math.max(Math.min(e[r].width/e[r].height,_),P),y.push(h),A.push(Math.round(100*h));var S=t.rowsNeeded||o(y,f,g);if(1===y.length)l=t.fixedHeight?t.fixedHeight:Math.round(g/y[0]),t.maxHeight&&(l=Math.min(t.maxHeight,l)),t.minHeight&&(l=Math.max(t.minHeight,l)),u=Math.round(l*y[0]),u=Math.min(u,g),m.push({y:0,x:b?(g-u)/2:0,width:u,height:l}),p=l;else{var I,O,E,T=n(A,S),w=0;for(p=0,r=0,i=T.length;r<i;r++){for(I=w,O=0,a=0,s=T[r].length;a<s;a++)O+=y[I+a],w++;for(d=0,l=t.fixedHeight?t.fixedHeight:Math.round(g/O),t.maxHeight&&(l=Math.min(t.maxHeight,l)),t.minHeight&&(l=Math.max(t.minHeight,l)),c=T[r].length,a=0;a<c;a++)E=(g-(c-1)*v)/O,u=Math.round(E*y[I+a]),m.push({y:p,x:d,width:u,height:l}),d+=u,a!==c-1&&(d+=v);p+=l,r!==i-1&&(p+=v)}}return{width:g,height:p,positions:m}}r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=function calc_rows_needed(e,t,r){var o,n,i=0;for(o=0,n=e.length;o<n;o++)i+=e[o]*t;return Math.max(1,Math.round(i/r))},n=function linear_partition(e,t){if(0===t)return[];if(1===t)return[e];if(t>=e.length){for(var r=[],o=0;o<t-e.length;++o)r.push([]);return e.map((e=>[e])).concat(r)}for(var n=e.slice(0),c=[],l=a(n,t),u=s(n,t,l),d=2;d<=n.length;++d)for(var p=2;p<=t;++p){u[d][p]=void 0;for(var h=1;h<d;++h){var m=Math.max(u[h][p-1],l[d]-l[h]);c[d]=c[d]||[],(void 0===u[d][p]||u[d][p]>m)&&(u[d][p]=m,c[d][p]=h)}}return i(n,c,t)},i=function reconstruct_partition(e,t,r){for(var o=[];r>1;){if(t[e.length]){var n=t[e.length][r],i=e.splice(n);o.unshift(i)}--r}return o.unshift(e),o},a=function generate_prefix_sums(e){for(var t=[0],r=1;r<=e.length;++r)t[r]=t[r-1]+e[r-1];return t},s=function generate_boundary_conditions(e,t,r){for(var o=[],n=1;n<=e.length;++n)o[n]=[],o[n][1]=r[n];for(var i=1;i<=t;++i)o[1][i]=e[0];return o}},72234:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(99227),n=r.n(o),i=1e4,a=999999,s="0[.]0a",c="0a";const l=function formatFacetCount(e){var t=s;return e>=i&&e<=a&&(t=c),n()(e).format(t)}},23688:(e,t,r)=>{"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>getFaceCircleStyle});var o=.2;function getFaceCircleStyle(){var{face:e,imageWidth:t,imageHeight:r,cropWidth:n=0,cropHeight:i=0,cropOffsetX:a=0,cropOffsetY:s=0,scaleFactor:c=o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{floor:l,max:u}=Math;e=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.boundingBox),e.TopLeftCoordY=l(e.TopLeftCoordY*r),e.TopLeftCoordX=l(e.TopLeftCoordX*t),e.width=l(e.width*t),e.height=l(e.height*r);var d=u(e.height,e.width)*(1+c),p=e.TopLeftCoordX-a,h=e.TopLeftCoordY-s,m=i||r,v=n||t;return{top:"".concat((h-(d-e.height)/2)/m*100,"%"),left:"".concat((p-(d-e.width)/2)/v*100,"%"),height:"".concat(d/m*100,"%"),width:"".concat(d/v*100,"%")}}},53980:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>getRecent});var o=r(78439),n=r(67172),i=r(53540),a=r(5732),s=r(17667),c=r(49479),l=r(66941),u=r(54318);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var d=20;function getGroups(){return _getGroups.apply(this,arguments)}function _getGroups(){return(_getGroups=_asyncToGenerator((function*(){if(s.A.isOff(u.jy.GroupsEnabled))return[];try{return(yield n.A.listGroups({maxResults:d,noCache:!1})).groups.map((e=>new l.A(e)))}catch(e){return[]}}))).apply(this,arguments)}function getAlbums(){return _getAlbums.apply(this,arguments)}function _getAlbums(){return(_getAlbums=_asyncToGenerator((function*(){var e={filters:(0,a.A)({type:"album"}),limit:d,sort:(0,i.Ay)({sortToken:"sortDateModified",order:"ASC"})};try{return(yield o.A.listNodes(e)).data.map((e=>new c.A(e)))}catch(e){return[]}}))).apply(this,arguments)}function getRecent(){return _getRecent.apply(this,arguments)}function _getRecent(){return(_getRecent=_asyncToGenerator((function*(){try{var[e,t]=yield Promise.all([getGroups(),getAlbums()]),r=[...e,...t];return r.sort(((e,t)=>{var r=new Date(e.serviceProperties.modifiedDate).getTime();return new Date(t.serviceProperties.modifiedDate).getTime()-r})),r}catch(e){return[]}}))).apply(this,arguments)}},38614:(e,t,r)=>{"use strict";r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=r(18742),n=[480,720];function __WEBPACK_DEFAULT_EXPORT__(){var e,{allowRotation:t=!0,height:r=0,originalResolution:i,width:a=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i&&!n.includes(i)?e=[...n,i].sort(((e,t)=>e-t)):e=n;var s=e[e.length-1];if(!a&&!r)return s;var c=o.A.getProperty("device.isMobile")&&t?Math.max(a,r):r,l=Math.min(c,s);return e.find((e=>e>=l))||s}},75456:(e,t,r)=>{"use strict";r.d(t,{A:()=>GroupShareContentUrl});var o=r(51317);class GroupShareContentUrl extends o.A{_addGroupShareParams(e){var{shareToken:t}=this.node;return t&&e.setParam("groupShareToken",t),e}buildContentRedirectUrlModel(){var e=super.buildContentRedirectUrlModel(...arguments);return this._addGroupShareParams(e)}buildDirectUrlModel(){var e=super.buildDirectUrlModel(...arguments);return this._addGroupShareParams(e)}}},29386:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(13472),n=[],i=[];const a=function hotWrapRoutes(e){Object.keys(e).forEach((t=>{var r=e[t],a=n.indexOf(r);if(-1!==a)e[t]=i[a];else{var s=(0,o.K)(r);n.push(r),i.push(s),e[t]=s}}))}},32359:(e,t,r)=>{"use strict";r.d(t,{ZW:()=>getCachedById,e3:()=>resetCache,p:()=>getLargest,xe:()=>setCachedById});var o={};function setCachedById(e,t,r){var n=o[e];!Number.isFinite(r)||r<1||(!n||n.area<r)&&(o[e]={area:r,url:t})}function getCachedById(e){return o[e]?o[e].url:void 0}function getLargest(e,t,r){var n=o[e];return n&&n.area>=r?n.url:t}function resetCache(){o={}}},78333:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(96540);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}const n=function lazyComponent(e){var t=null;class LazyLoaded extends o.Component{componentDidMount(){var r=this;return function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){t||(({default:t}=yield e()),r._unMounted||r.forceUpdate())}))()}componentWillUnmount(){this._unMounted=!0}render(){return t?o.createElement(t,this.props):null}}return LazyLoaded}},41716:(e,t,r)=>{"use strict";r.d(t,{A:()=>init});var o=r(79859),n=r.n(o),i=(r(60010),r(95093)),a=r.n(i),s=r(99227),c=r.n(s),l=r(97463),u=["zh_CN"],d=["en_AU","en_GB","es_ES","fr_CA","pt_BR","nl_NL"],p=["cs","de","en","es","fr","it","ja","pl","tr"];function localizeUtil(e,t,r,o,i){var a=n()(t,r)?o:i;e.locale(a)}var init=()=>{l.A.onPickedStateChange(["language"],(e=>{var{language:t}=e;(e=>{var{language:t="en_US"}=e,r=t.toLowerCase().split("_"),[o]=r,[,i]=r,s=[o,i].join("-");localizeUtil(a(),u,t,s,o),o=n()(p,o)?o:"en",localizeUtil(c(),d,t,s,o)})({language:t})}))}},89873:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(43346),n=r.n(o),i=r(95093),a=r.n(i),s=r(21572),c=r(61365),l=function NiceDate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=n()({todayString:(0,s.A)("amazon-photos-date-today"),yesterdayString:(0,s.A)("amazon-photos-date-yesterday")},t),this.shortDate=void 0,this.longDate=void 0,this.displayDate=void 0,this.dayTime=void 0,this.setTime(e)};l.prototype.toString=function(){return this.displayDate},l.prototype.generateStrings=function(){var e,t,{time:r}=this,o=c.eK,{utc:n}=this.options;if(r.length<=7)r+="-01",e=n?a().utc(r):a()(r),o=c.Qh;else{e=n?a()(r).utc():a()(r);var i=n?a().utc(new Date(a()().format("MMMM DD YYYY"))).startOf("day"):a()().startOf("day"),s=e.diff(i,"days",!0);s>=0&&s<1?t=this.options.todayString:s>=-1&&s<0?t=this.options.yesterdayString:e.year()===i.year()&&(t=e.week()===i.week()?(0,c.jr)(e):(0,c.zT)(e))}this.longDate=o(e),this.shortDate=(0,c.zT)(e),this.dayTime=a()(e).format("MMM DD, h:mm A"),this.displayDate=t||this.longDate},l.prototype.setTime=function(e){this.time=e,this.generateStrings()};const u=l},51317:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var o=r(18742),n=r(73725),i=r(59786),a=r(71086),s=r(97463),c=r(38614),l=r(54318),u=["videoResolution"],d=["videoResolution"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const p=class NodeContentURL{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.customerId=s.A.getProperty("customerId"),this.driveServiceEndpoint=o.A.getProperty("urls.driveServiceEndpoint"),this.groupShareToken=a.A.getProperty("route.props.shareToken"),this.isAuthenticated=s.A.getProperty("authenticated"),this.node=e,this.nodeContentQueryParams=t,this.thumbnailServiceEndpoint=o.A.getProperty("urls.thumbnailServiceEndpoint")}setParam(e,t){return this.nodeContentQueryParams[e]=t,this}addCommonParams(e){var t,r=null===(t=this.node)||void 0===t?void 0:t.ownerId,o=r!==this.customerId;this.groupShareToken&&(!this.isAuthenticated||o)&&e.setParam("groupShareToken",this.groupShareToken),r&&e.setParam("ownerId",r)}buildDirectUrlModel(){var e,t=null===(e=this.node)||void 0===e?void 0:e.id;t||n.A.error("Bad content URL:  Attempted to build a thumbnail URL without a node id");var r="v1/thumbnail/".concat(t),o=new i.A(this.thumbnailServiceEndpoint+r,this.nodeContentQueryParams);return this.addCommonParams(o),o}buildTempLinkModel(){var e,t,r=null!==(e=null===(t=this.node)||void 0===t?void 0:t.tempLink)&&void 0!==e?e:"";return r||n.A.error("Bad content URL:  Attempted to build a tempLink URL without a tempLink"),new i.A(r,this.nodeContentQueryParams)}buildContentRedirectUrlModel(){var e,t=null===(e=this.node)||void 0===e?void 0:e.id,r="nodes/".concat(t,"/contentRedirection"),o=new i.A(this.driveServiceEndpoint+r);if(t||n.A.error("Bad content URL:  Attempted to build a content redirection URL without a node id"),this.nodeContentQueryParams){var a=Object.entries(this.nodeContentQueryParams).filter((e=>{var[t,r]=e;return Boolean(r)}));if(a.length){var s=a.map((e=>{var[t,r]=e;return"".concat(t,"=").concat(r)}));o.setParam("querySuffix","?".concat(s.join("&")))}}return this.addCommonParams(o),o}toDownloadUrlString(){var e;return this.setParam("download","true"),null!==(e=this.node)&&void 0!==e&&e.tempLink?this.buildTempLinkModel().toString():this.buildContentRedirectUrlModel().toString()}toImageUrlString(){var e,{tempLink:t}=this.node||{};return t?this.buildTempLinkModel().toString():(0,l.ji)()&&this.thumbnailServiceEndpoint&&void 0!==(null===(e=this.nodeContentQueryParams)||void 0===e?void 0:e.viewBox)?this.buildDirectUrlModel().toString():this.buildContentRedirectUrlModel().toString()}toLivePhotoUrlString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{videoResolution:t}=e,r=_objectWithoutProperties(e,u),{tempLink:o}=this.node;return this.setParam("liveTranscodeView","true"),this.setParam("y",t||(0,c.A)(r)),o?this.buildTempLinkModel().toString():this.buildContentRedirectUrlModel().toString()}toVideoUrlString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{videoResolution:t}=e,r=_objectWithoutProperties(e,d),{tempLink:o}=this.node;return this.setParam("videoTranscodeView","true"),this.setParam("y",t||(0,c.A)(r)),o?this.buildTempLinkModel().toString():this.buildContentRedirectUrlModel().toString()}toVideoAssetUrlString(){var{tempLink:e}=this.node;return e?this.buildTempLinkModel().toString():this.buildContentRedirectUrlModel().toString()}toString(){return this.toImageUrlString()}}},91474:(e,t,r)=>{"use strict";r.d(t,{A:()=>isNodeNameValid});var o=/^\.{1,2}$|[/\u202e]/,n=280;function isNodeNameValid(e){var t=e.trim();return Boolean(t)&&!o.test(t)&&t.length<=n}},51315:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var o=r(55378),n=r.n(o),i=r(87612),a=r.n(i),s=r(84684),c=r.n(s),l=r(97200),u=r.n(l),d=r(43346),p=r.n(d),h=r(96540),m=r(35994),v=r(69944),g=r(13489),f=r(78439),y=r(21572),A=r(21764),_=r(18742),P=r(43840),b=r(94788),S=r(71086);function AddToAlbum(e){this.init(p()(e,{batchSize:25,activeLimit:1,metricName:"AddPhotos",id:u()("add-to-album-operation-")}));var t=this.options.albumName||(0,y.A)("amazon-photos-untitled-album-placeholder-name");c()(this,{message:(0,y.A)("amazon-photos-album-adding",[e.items.length,t],e.items.length)})}AddToAlbum.prototype=new v.A,p()(AddToAlbum.prototype,{success(){this.isUpload||(m.A.emit("uncache"),m.A.emit("addModels"),m.A.emit("deselectAll"));var e=this.options.albumName||(0,y.A)("amazon-photos-untitled-album-placeholder-name");m.A.emit("showToast",{name:"AddToAlbumToastSuccess",className:"success ellipsis",message:(0,y.A)("amazon-photos-album-add-success",[this.successItems.length,e],this.successItems.length),icon:"album",action:h.createElement(P.A,{name:"view-albums",href:"".concat(_.A.getProperty("urls.album"),"/").concat(this.albumId),historyState:{albumBackUrl:S.A.getProperty("fragment")}},h.createElement(b.A,null,"amazon-photos-view-item"))}),g.A.log({name:"AddToAlbumSuccess"})},failure(){this.successItems.length&&!this.isUpload&&(m.A.emit("uncache"),m.A.emit("addModels"),m.A.emit("unselectItem",this.successItems)),m.A.emit("showToast",{metricEventTag:"AddToAlbumToastFail",className:"fail",message:(0,y.A)("amazon-photos-add-album-fail",[this.failedItems.length],this.failedItems.length),icon:"album"}),g.A.log({name:"AddToAlbumFail"})},culled(){m.A.emit("showToast",{message:(0,y.A)("amazon-photos-add-albums-mixed-fail",[this.culledItems.length],this.culledItems.length),className:"fail"})},cullInvalidItems(){return this.removeUnowned?a()(this.items,(e=>e.belongsToCurrentUser())):this.items},task(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{nodeId:t}=(0,A.A)(this.options.albumId);return f.A.bulkAddChildren({parentId:t,ids:n()(e,(e=>{var{ownerId:t,id:r}=e;return t?"".concat(t,":").concat(r):r}))})}});const I=AddToAlbum},96389:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var o=r(39754),n=r.n(o),i=r(55378),a=r.n(i),s=r(87612),c=r.n(s),l=r(84684),u=r.n(l),d=r(43346),p=r.n(d),h=r(35994),m=r(74692),v=r.n(m),g=r(69944),f=r(78439),y=r(21572),A=r(25205);function AddToFamilyArchive(e){this.init(p()(e,{batchSize:25,familyId:A.A.getProperty("familyId"),metricName:"ManualAddToArchive"})),u()(this,{message:(0,y.A)("amazon-photos-fa-adding",[e.items.length],e.items.length)})}AddToFamilyArchive.prototype=new g.A,v().extend(AddToFamilyArchive.prototype,{success(){this.updateNodesFamilyId(),h.A.emit("uncache"),h.A.emit("deselectAll"),this.showToast&&this.showSuccessToast&&h.A.emit("showToast",{name:"AddToFamilyArchiveToastSuccess",className:"success",message:(0,y.A)("amazon-photos-fa-add-success",[this.successItems.length],this.successItems.length)}),h.A.emit("update")},failure(){this.updateNodesFamilyId(),this.successItems.length&&(h.A.emit("uncache"),h.A.emit("unselectItem",this.successItems)),this.showToast&&h.A.emit("showToast",{name:"AddToFamilyArchiveToastFailure",message:(0,y.A)("amazon-photos-fa-add-fail"),className:"fail"})},culled(){h.A.emit("showToast",{name:"AddToFamilyArchiveToastFailure",message:(0,y.A)("amazon-photos-add-fa-duplicate-fail",[this.culledItems.length],this.culledItems.length),className:"fail"})},cullInvalidItems(){var e=this.items,t=c()(e,(e=>e.canAddToFamilyArchive&&e.canAddToFamilyArchive()));return t.length&&(e=t),e},task(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f.A.updateFamilyArchive({operation:"add",familyId:this.familyId,ids:a()(e,(e=>e.id))})},updateNodesFamilyId(){n()(this.successItems,(e=>{this.familyId?e.familyId=this.familyId:e.familyIdPending=!0}))}});const _=AddToFamilyArchive},63059:(e,t,r)=>{"use strict";r.d(t,{A:()=>AddToGroupOperation});var o=r(60895),n=r.n(o),i=r(55378),a=r.n(i),s=r(19747),c=r.n(s),l=r(42426),u=r.n(l),d=r(42843),p=r(35994),h=r(21572),m=r(67172),v=r(92676);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class AddToGroupOperation extends v.A{constructor(){super(...arguments),_defineProperty(this,"operationName","AddToGroupOperation"),_defineProperty(this,"activeLimit",1),_defineProperty(this,"progressStringIdAlbum","amazon-photos-adding-to-group-album"),_defineProperty(this,"progressStringId","amazon-photos-adding-to-group"),_defineProperty(this,"successStringIdMultiGroups","amazon-photos-add-to-groups-success"),_defineProperty(this,"successStringIdMultiGroupsAlbum","amazon-photos-add-to-groups-success-album"),_defineProperty(this,"successStringIdAlbum","amazon-photos-add-to-group-success-album"),_defineProperty(this,"successStringId","amazon-photos-add-to-group-success"),_defineProperty(this,"successMetricName","AddToGroupSuccess"),_defineProperty(this,"failMetricName","AddToGroupFail"),_defineProperty(this,"failStringId","amazon-photos-adding-to-group-fail"),_defineProperty(this,"batchSize",50),_defineProperty(this,"task",(e=>{var{groups:t,eventKey:r}=this,o=a()(e,(e=>e.id)),n=a()(t,(e=>e.groupId));return m.A.batchAddNode({groupIds:n,nodeIds:o,eventKey:r}).done((e=>{this.groupCollections=e.groupCollections}))}));var{eventKey:e,groups:t,items:r}=this;if(!t||!t.length)throw"Invalid groups passed";if(!r||!r.length)throw"items requires at least one item";this.items.reverse();var o=u()(r,(e=>e.isAlbum&&e.isAlbum()));o&&(this.batchSize=1),t.length>1?(this.eventState=t.length,this.metricName=o?"AddAlbumsToMultipleGroups":"AddPhotosToMultipleGroups"):this.metricName=o?"AddAlbumsToSingleGroup":"AddPhotosToSingleGroup",this.eventKey=e||Date.now().toString()}get isMultiple(){return this.groups.length>1}get isAlbums(){return c()(this.items,(e=>e.isAlbum&&e.isAlbum()))}get message(){var{isAlbums:e}=this,t=e?this.progressStringIdAlbum:this.progressStringId;return(0,h.A)(t,[this.items.length],this.items.length)}get successMessage(){var e,{isAlbums:t,isMultiple:r}=this;return e=t?r?this.successStringIdMultiGroupsAlbum:this.successStringIdAlbum:r?this.successStringIdMultiGroups:this.successStringId,(0,h.A)(e,[this.successItems.length,r?this.groups.length:this.groups[0].name],this.successItems.length)}finalize(){super.finalize(...arguments);var{groups:e}=this;if(e)for(var t=function _loop(){var t=e[r];n()((()=>{p.A.emit("groupUpdated",t),p.A.emit("infoUpdated")}),d.A.SHORT)},r=0;r<e.length;r++)t()}}},16176:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(46219);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class CreatePersonWithFacesOperation extends o.A{constructor(){super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-new-person-with-faces-progress"),_defineProperty(this,"successStringId","amazon-photos-new-person-with-faces-success"),_defineProperty(this,"metricName","ChangeTag"),_defineProperty(this,"eventTag","ToNewCluster"),_defineProperty(this,"requiredFields",["sourcePersonId","targetPersonName"]),_defineProperty(this,"fmsAPI","createPersonWithFaces")}}const n=CreatePersonWithFacesOperation},61081:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(73055);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class DeleteGroupShareOperation extends o.A{constructor(){super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-deleting-group-share"),_defineProperty(this,"successStringId","amazon-photos-delete-group-share-success"),_defineProperty(this,"successMetricName","DeleteGroupShareSuccess"),_defineProperty(this,"failMetricName","DeleteGroupShareFail")}}const n=DeleteGroupShareOperation},73055:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(87612),n=r.n(o),i=r(35994),a=r(21572),s=r(67172),c=r(92676);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class DeleteGroupOperation extends c.A{constructor(){super(...arguments),_defineProperty(this,"batchSize",1),_defineProperty(this,"progressStringId","amazon-photos-deleting-sharing"),_defineProperty(this,"successStringId","amazon-photos-delete-sharing-success"),_defineProperty(this,"metricName","DeleteGroup"),_defineProperty(this,"successMetricName","DeleteGroupSuccess"),_defineProperty(this,"failMetricName","DeleteGroupFail"),_defineProperty(this,"icon","groups"),_defineProperty(this,"task",(e=>s.A.deleteGroup({groupId:e[0].id})))}culled(){i.A.emit("showToast",{message:(0,a.A)("amazon-photos-delete-sharing-mixed-fail",[this.culledItems.length],this.culledItems.length),className:"fail"})}cullInvalidItems(){return n()(this.items,(e=>e.belongsToCurrentUser()||e.isAlexaGroup))}finalize(e){super.finalize(e,"remove")}}const l=DeleteGroupOperation},61436:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(84684),n=r.n(o),i=r(43346),a=r.n(i),s=r(35994),c=r(69944),l=r(21572);function DateUpdate(e){this.init(a()(e,{metricName:"EditDate",batchSize:1})),n()(this,{message:(0,l.A)("amazon-photos-editing-date",[this.items.length],this.items.length)})}DateUpdate.prototype=new c.A,a()(DateUpdate.prototype,{success(){s.A.emit("deselectAll"),s.A.emit("addModels"),s.A.emit("showToast",{name:"EditDateToastSuccess",className:"success",message:(0,l.A)("amazon-photos-date-edit-success",[this.successItems.length],this.successItems.length),icon:"thisday"})},failure(){s.A.emit("uncache"),s.A.emit("unselectItem",this.successItems),s.A.emit("addModels"),s.A.emit("showToast",{message:(0,l.A)("amazon-photos-date-edit-fail"),className:"fail",icon:"thisday"})},task(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0].updateDate(this.newContentDate)}});const u=DateUpdate},92676:(e,t,r)=>{"use strict";r.d(t,{A:()=>AddRemoveOperation});var o=r(60895),n=r.n(o),i=r(42843),a=r(35994),s=r(69944),c=r(13489),l=r(21572);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class AddRemoveOperation extends s.A{constructor(){super(...arguments),_defineProperty(this,"delay",i.A.SHORT),_defineProperty(this,"progressStringId",null),_defineProperty(this,"successStringId",null),_defineProperty(this,"failStringId","amazon-photos-generic-service-error"),_defineProperty(this,"metricName",null),_defineProperty(this,"successMetricName",null),_defineProperty(this,"failMetricName",null),_defineProperty(this,"icon","spinner"),_defineProperty(this,"successIcon","done-inline"),_defineProperty(this,"failIcon","error"),_defineProperty(this,"batchSize",1),_defineProperty(this,"success",(()=>{var{showToast:e=!0,showSuccessToast:t=!0}=this.options;e&&t&&a.A.emit("showToast",{name:this.successMetricName,className:"success",message:this.successMessage,icon:this.successIcon||this.icon}),this.successMetricName&&c.A.log({name:this.successMetricName}),this.finalize&&this.finalize(!0)})),_defineProperty(this,"failure",(()=>{var{showToast:e=!0}=this.options;!this.failedItems.length&&this.culledItems.length&&this.culled||(this.failMetricName&&c.A.log({name:this.failMetricName}),e&&a.A.emit("showToast",{name:this.failMetricName,message:this.failMessage,className:"fail",icon:this.failIcon||this.icon}),this.finalize&&this.finalize(!1))})),this.init(...arguments)}get message(){return(0,l.A)(this.progressStringId,[this.items.length],this.items.length)}get successMessage(){return(0,l.A)(this.successStringId,[this.successItems.length],this.successItems.length)}get failMessage(){return(0,l.A)(this.failStringId)}task(){throw new Error("task not implemented")}finalize(e,t){e?a.A.emit("deselectAll"):a.A.emit("unselectItem",this.successItems),a.A.emit("uncache"),n()((()=>{"remove"===t?(a.A.emit("removeModels",this.successItems),a.A.emit("infoUpdated")):a.A.emit("addModels")}),this.delay)}}},46219:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(55378),n=r.n(o),i=r(19747),a=r.n(i),s=r(35994),c=r(12017),l=r(21572),u=r(92676);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GenericFaceOperation extends u.A{constructor(){if(super(...arguments),_defineProperty(this,"batchSize",50),_defineProperty(this,"itemsAreNotNodes",!0),_defineProperty(this,"requiredFields",[]),_defineProperty(this,"fmsAPI",""),!a()(this.requiredFields,(e=>Boolean(this[e]))))throw"".concat(this.metricName," requires ").concat(this.requiredFields.join(", "))}get message(){return(0,l.A)(this.progressStringId,[this.items.length,this.targetPersonName],this.items.length)}get successMessage(){return(0,l.A)(this.successStringId,[this.items.length,this.targetPersonName],this.items.length)}task(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{sourcePersonId:t,targetPersonName:r,targetPersonId:o}=this;return e=n()(e,(e=>({nodeId:e.node.id,faceId:e.faceId}))),c.A[this.fmsAPI]({nodeFacePairs:e,sourcePersonId:t,targetPersonName:r,targetPersonId:o})}finalize(e){e?s.A.emit("deselectAll"):s.A.emit("unselectItem",n()(this.successItems,"node")),s.A.emit("uncache"),s.A.emit("removedFacesFromPerson",{nodeFacePairs:this.successItems,personId:this.sourcePersonId})}}const d=GenericFaceOperation},27925:(e,t,r)=>{"use strict";r.d(t,{A:()=>LeaveGroupOperation});var o=r(87612),n=r.n(o),i=r(35994),a=r(21572),s=r(67172),c=r(97463),l=r(92676);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class LeaveGroupOperation extends l.A{constructor(){super(...arguments),_defineProperty(this,"batchSize",1),_defineProperty(this,"progressStringId","amazon-photos-leaving-sharing"),_defineProperty(this,"successStringId","amazon-photos-leave-sharing-success"),_defineProperty(this,"metricName","LeaveGroup"),_defineProperty(this,"successMetricName","LeaveGroupSuccess"),_defineProperty(this,"failMetricName","LeaveGroupFail"),_defineProperty(this,"icon","groups"),_defineProperty(this,"task",(e=>s.A.deleteMember({groupId:e[0].id,memberId:c.A.getProperty("customerId")})))}culled(){i.A.emit("showToast",{message:(0,a.A)("amazon-photos-leave-sharing-mixed-fail",[this.culledItems.length],this.culledItems.length),className:"fail"})}cullInvalidItems(){return n()(this.items,(e=>!e.belongsToCurrentUser()))}finalize(e){super.finalize(e,"remove")}}},83676:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(46219);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class MoveFacesToPersonOperation extends o.A{constructor(){super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-move-faces-to-person-progress"),_defineProperty(this,"successStringId","amazon-photos-move-faces-to-person-success"),_defineProperty(this,"metricName","ChangeTag"),_defineProperty(this,"eventTag","ToNamedCluster"),_defineProperty(this,"requiredFields",["sourcePersonId","targetPersonId","targetPersonName"]),_defineProperty(this,"fmsAPI","moveFacesToPerson")}}const n=MoveFacesToPersonOperation},52318:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(46219);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class RemoveFacesFromPersonOperation extends o.A{constructor(){super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-remove-faces-from-person-progress"),_defineProperty(this,"successStringId","amazon-photos-remove-faces-from-person-success"),_defineProperty(this,"metricName","RemoveTag"),_defineProperty(this,"requiredFields",["sourcePersonId"]),_defineProperty(this,"fmsAPI","removeFacesFromPerson")}}const n=RemoveFacesFromPersonOperation},77157:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var o=r(55378),n=r.n(o),i=r(60895),a=r.n(i),s=r(84684),c=r.n(s),l=r(43346),u=r.n(l),d=r(35994),p=r(69944),h=r(13489),m=r(78439),v=r(21572),g=r(42843);function RemoveFromAlbum(e){this.init(u()(e,{batchSize:25,activeLimit:1,metricName:"RemovePhotos"}));var t=this.options.albumName||(0,v.A)("amazon-photos-untitled-album-placeholder-name");c()(this,{message:(0,v.A)("amazon-photos-album-removing",[e.items.length,t],e.items.length)})}RemoveFromAlbum.prototype=new p.A,u()(RemoveFromAlbum.prototype,{success(){d.A.emit("uncache"),a()((()=>{d.A.emit("addModels"),d.A.emit("infoUpdated")}),g.A.SHORT),d.A.emit("removeFromAlbum",{albumId:this.options.albumId,models:this.successItems}),d.A.emit("deselectAll");var e=this.options.albumName||(0,v.A)("amazon-photos-untitled-album-placeholder-name");d.A.emit("showToast",{metricEventTag:"RemoveFromAlbumToastSuccess",className:"success",message:(0,v.A)("amazon-photos-album-remove-success",[this.successItems.length,e],this.successItems.length),icon:"album"}),h.A.log({name:"RemoveFromAlbumSuccess"})},failure(){this.successItems.length&&(d.A.emit("uncache"),d.A.emit("addModels"),d.A.emit("unselectItem",this.successItems)),d.A.emit("showToast",{metricEventTag:"RemoveFromAlbumToastFail",className:"fail",message:(0,v.A)("amazon-photos-remove-album-fail",[this.failedItems.length],this.failedItems.length),icon:"album"}),h.A.log({name:"RemoveFromAlbumFail"})},task(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m.A.bulkRemoveChildren({parentId:this.options.albumId,ids:n()(e,(e=>"".concat(e.ownerId,":").concat(e.id)))})}});const f=RemoveFromAlbum},93031:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var o=r(39754),n=r.n(o),i=r(55378),a=r.n(i),s=r(87612),c=r.n(s),l=r(84684),u=r.n(l),d=r(43346),p=r.n(d),h=r(35994),m=r(74692),v=r.n(m),g=r(78439),f=r(69944),y=r(21572),A=r(25205);function RemoveFromFamilyArchive(e){this.init(p()(e,{batchSize:25,familyId:A.A.getProperty("familyId"),metricName:"RemovedFromArchive"})),u()(this,{message:(0,y.A)("amazon-photos-fa-removing",[e.items.length],e.items.length)})}RemoveFromFamilyArchive.prototype=new f.A,v().extend(RemoveFromFamilyArchive.prototype,{success(){this.updateNodesFamilyId(),h.A.emit("uncache"),h.A.emit("deselectAll"),h.A.emit("removeModelsFromFamilyArchive",this.successItems),this.showToast&&h.A.emit("showToast",{metricEventTag:"RemoveFromFamilyArchiveToastSuccess",className:"success",message:(0,y.A)("amazon-photos-fa-remove-success",[this.successItems.length],this.successItems.length)}),h.A.emit("update")},failure(){this.updateNodesFamilyId(),this.successItems.length&&(h.A.emit("uncache"),h.A.emit("unselectItem",this.successItems),h.A.emit("removeModelsFromFamilyArchive",this.successItems)),this.showToast&&h.A.emit("showToast",{metricEventTag:"RemoveFromFamilyArchiveToastFailure",message:(0,y.A)("amazon-photos-fa-remove-fail"),className:"fail"})},culled(){h.A.emit("showToast",{message:(0,y.A)("amazon-photos-shared-remove-fail",[this.culledItems.length],this.culledItems.length),className:"fail"})},cullInvalidItems(){return c()(this.items,(e=>e.canRemoveFromFamilyArchive()))},task(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this;return g.A.updateFamilyArchive({operation:"remove",familyId:this.familyId,ids:a()(e,(e=>e.id))}).done((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.errors&&n()(e.errors,(e=>{t.itemsWithErrors[e.nodeId]=e}))}))},updateNodesFamilyId(){n()(this.successItems,(e=>{delete e.familyId,delete e.familyIdPending}))}});const _=RemoveFromFamilyArchive},23551:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(28917);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class RemoveFromGroupShareOperation extends o.A{constructor(){super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-removing-from-group-share"),_defineProperty(this,"successStringId","amazon-photos-remove-from-group-share-success"),_defineProperty(this,"successStringIdAlbum","amazon-photos-remove-from-group-share-success-album"),_defineProperty(this,"metricName","RemoveGroupShareContent"),_defineProperty(this,"successMetricName","RemoveFromGroupShareSuccess"),_defineProperty(this,"failMetricName","RemoveFromGroupShareFail"),_defineProperty(this,"failStringId","amazon-photos-remove-from-group-share-fail"),_defineProperty(this,"icon","link")}}const n=RemoveFromGroupShareOperation},28917:(e,t,r)=>{"use strict";r.d(t,{A:()=>RemoveFromGroupOperation});var o=r(58156),n=r.n(o),i=r(7309),a=r.n(i),s=r(87612),c=r.n(s),l=r(74154),u=r.n(l),d=r(19747),p=r.n(d),h=r(35994),m=r(21572),v=r(67172),g=r(92676);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class RemoveFromGroupOperation extends g.A{constructor(e){var{group:t}=e;if(super(...arguments),_defineProperty(this,"progressStringId","amazon-photos-removing-from-group"),_defineProperty(this,"successStringId","amazon-photos-remove-from-group-success"),_defineProperty(this,"successStringIdAlbum","amazon-photos-remove-from-group-success-album"),_defineProperty(this,"metricName","RemoveGroupContent"),_defineProperty(this,"successMetricName","RemoveFromGroupSuccess"),_defineProperty(this,"failMetricName","RemoveFromGroupFail"),_defineProperty(this,"failStringId","amazon-photos-remove-from-group-fail"),_defineProperty(this,"icon","individual"),_defineProperty(this,"batchSize",50),_defineProperty(this,"task",(e=>{var{group:t}=this,{groupId:r}=t,o=e.map((e=>e.ownerNodeId));return v.A.batchRemoveNode({groupId:r,nodeIds:o})})),!t)throw"Invalid group passed";this.group=t}get isAlbums(){return p()(this.items,(e=>e.isAlbum&&e.isAlbum()))}get successMessage(){var e=this.isAlbums?this.successStringIdAlbum:this.successStringId;return(0,m.A)(e,[this.successItems.length],this.successItems.length)}culled(){var{notOwned:e,implicit:t}=u()(this.culledItems,(e=>e.belongsToCurrentUser()?"implicit":"notOwned"));if(e){var r=this.isAlbums?"amazon-photos-remove-from-group-mixed-fail-album":"amazon-photos-remove-from-group-mixed-fail";h.A.emit("showToast",{message:(0,m.A)(r,[e],e),className:"fail"})}t&&h.A.emit("showToast",{message:(0,m.A)("amazon-photos-remove-from-group-album-fail",[t],t),className:"fail",stay:!0})}cullInvalidItems(){var{group:e}=this,{groupId:t}=e;return c()(this.items,(r=>{if(!r.belongsToCurrentUser()&&!e.belongsToUser)return!1;var o=a()(r.groupPermissions,{groupId:t});return!n()(o,"albumIds.length")}))}finalize(e){super.finalize(e,"remove")}}},36898:(e,t,r)=>{"use strict";r.d(t,{CT:()=>PhotosArnBuilder});var o,n=r(14681);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PARTITION="sdo",e.SERVICE="photos",e.ARN_FIELD_SEPARATOR=":";e.isCustomerResourceType=function isCustomerResourceType(e){var t="string"==typeof e?e:e.resource().resourceType();return t===n.vt.customer||t===n.vt.participant},e.isShareTokenResourceType=function isShareTokenResourceType(e){return("string"==typeof e?e:e.resource().resourceType())===n.vt.shareToken},e.arnResourceToString=function arnResourceToString(e){var t="",r=e.resourceType();r&&(t+=r),t+=":".concat(e.resource());var o=e.qualifier();return o&&(t+=":".concat(o)),t}}(o||(o={}));class ArnResourceBuilder{constructor(){_defineProperty(this,"_resourceType",void 0),_defineProperty(this,"_resource",void 0),_defineProperty(this,"_qualifier",void 0)}resourceType(e){return this._resourceType=e?e.trim():void 0,this}resource(e){return this._resource=e?e.trim():void 0,this}qualifier(e){return this._qualifier=e?e.trim():void 0,this}build(){if(!this._resource)throw new Error("Resource must be specified");return{resourceType:()=>this._resourceType,resource:()=>this._resource,qualifier:()=>this._qualifier}}static builder(){return new ArnResourceBuilder}static fromString(e){for(var t=null,r=null,o=0;o<e.length;o++){var n=e[o];if(":"===n||"/"===n){t=o;break}}if(null!==t)for(var i=e.length-1;i>t;i--){if(":"===e[i]){r=i;break}}if(null===t)return ArnResourceBuilder.builder().resource(e).build();if(null===r){var a=e.substring(0,t),s=e.substring(t+1);return ArnResourceBuilder.builder().resourceType(a).resource(s).build()}var c=e.substring(0,t),l=e.substring(t+1,r),u=e.substring(r+1);return ArnResourceBuilder.builder().resourceType(c).resource(l).qualifier(u).build()}}class ArnBuilder{constructor(){_defineProperty(this,"_partition",void 0),_defineProperty(this,"_service",void 0),_defineProperty(this,"_region",void 0),_defineProperty(this,"_accountId",void 0),_defineProperty(this,"_resource",void 0)}partition(e){return this._partition=e,this}service(e){return this._service=e,this}region(e){return this._region=e,this}accountId(e){return this._accountId=e,this}resource(e){return this._resource=e,this}build(){if(!this._partition)throw new Error("Partition must be specified");if(!this._service)throw new Error("Service must be specified");if(!this._resource)throw new Error("Resource must be specified");var e=ArnResourceBuilder.fromString(this._resource);return{partition:()=>this._partition,service:()=>this._service,region:()=>this._region,accountId:()=>this._accountId,resource:()=>e,resourceAsString:()=>this._resource,toString:()=>"arn:".concat(this._partition,":").concat(this._service,":").concat(this._region||"",":").concat(this._accountId||"",":").concat(this._resource),toBuilder:()=>{var e=new ArnBuilder;return e.partition(this._partition),e.service(this._service),this._region&&e.region(this._region),this._accountId&&e.accountId(this._accountId),e.resource(this._resource),e}}}static builder(){return new ArnBuilder}static fromString(e){var t=e.indexOf(":");if(t<0||"arn"!==e.substring(0,t))throw new Error("Malformed ARN - doesn't start with 'arn:'");var r=e.indexOf(":",t+1);if(r<0)throw new Error("Malformed ARN - no AWS partition specified");var o=e.substring(t+1,r),n=e.indexOf(":",r+1);if(n<0)throw new Error("Malformed ARN - no service specified");var i=e.substring(r+1,n),a=e.indexOf(":",n+1);if(a<0)throw new Error("Malformed ARN - no AWS region partition specified");var s=e.substring(n+1,a),c=e.indexOf(":",a+1);if(c<0)throw new Error("Malformed ARN - no AWS account specified");var l=e.substring(a+1,c),u=e.substring(c+1);if(!u)throw new Error("Malformed ARN - no resource specified");return ArnBuilder.builder().partition(o).service(i).region(s).accountId(l).resource(u).build()}}class PhotosArnBuilderImpl{constructor(){_defineProperty(this,"_region",""),_defineProperty(this,"_customerId",""),_defineProperty(this,"_resourceId",void 0),_defineProperty(this,"_resourceType",void 0),_defineProperty(this,"_resourceQualifier",void 0)}build(){var e=this._resourceType&&o.isCustomerResourceType(this._resourceType),t=e&&!this._resourceId?this._customerId:this._resourceId,r=e&&!this._customerId?this._resourceId:this._customerId;if(!t)throw new Error("resourceId must be specified.");if(!this._resourceType)throw new Error("resourceType must be specified.");var n=ArnResourceBuilder.builder().resourceType(this._resourceType.toString()).resource(t).qualifier(this._resourceQualifier).build();return ArnBuilder.builder().partition(o.PARTITION).service(o.SERVICE).region(this._region).accountId(r).resource(o.arnResourceToString(n)).build()}region(e){return this._region=e?e.trim():"",this}customerId(e){return this._customerId=e?e.trim():"",this}resourceId(e){return this._resourceId=e?e.trim():void 0,this}resourceType(e){return this._resourceType=e,this}resourceQualifier(e){return this._resourceQualifier=e?e.trim():void 0,this}}class PhotosArnBuilder{static parseArn(e){if(!e||""===e.trim())throw new Error("ARN cannot be null or blank");var t=this.parseShortFormArn(e);if(t)return t;var r=ArnBuilder.fromString(e);if(r.partition()!==o.PARTITION)throw new Error("Invalid photos ARN. Partition should be ".concat(o.PARTITION));if(r.service()!==o.SERVICE)throw new Error("Invalid photos ARN. Service should be ".concat(o.SERVICE));if(!r.accountId()&&this.isCustomerResourceType(r)){var n=r.toBuilder();return n.accountId(r.resource().resource()),n.build()}return r}static toShortFormString(e){var t=e.resource().resourceType()||"",r=e.accountId()||"",n=e.resource().resource(),i=e.resource().qualifier(),a="".concat(t).concat(o.ARN_FIELD_SEPARATOR);return this.isCustomerResourceType(e)||this.isShareTokenResourceType(e)?a+=n:a+="".concat(r).concat(o.ARN_FIELD_SEPARATOR).concat(n),i&&(a+="".concat(o.ARN_FIELD_SEPARATOR).concat(i)),a}static builder(){return new PhotosArnBuilderImpl}static isCustomerResourceType(e){var t="string"==typeof e?e:e.resource().resourceType();return t===n.vt.customer||t===n.vt.participant}static isShareTokenResourceType(e){return("string"==typeof e?e:e.resource().resourceType())===n.vt.shareToken}static parseShortFormArn(e){var t,r=e.split(o.ARN_FIELD_SEPARATOR),i=r.length;if(!(i<2||i>4)){var a=(null===(t=r[0])||void 0===t?void 0:t.trim())||"",s=n.vt[a];if(a&&(2!==i||this.isCustomerResourceType(s)||this.isShareTokenResourceType(s))){var c,l,u,d,p,h;if(4===i)c=(null===(d=r[1])||void 0===d?void 0:d.trim())||void 0,l=(null===(p=r[2])||void 0===p?void 0:p.trim())||void 0,u=(null===(h=r[3])||void 0===h?void 0:h.trim())||void 0;else if(2===i){var m;l=(null===(m=r[1])||void 0===m?void 0:m.trim())||void 0}else{var v,g;c=(null===(v=r[1])||void 0===v?void 0:v.trim())||void 0,l=(null===(g=r[2])||void 0===g?void 0:g.trim())||void 0,this.isCustomerResourceType(s)?c&&l&&c.toLowerCase()!==l.toLowerCase()&&(u=l,l=c):this.isShareTokenResourceType(s)&&(u=l,l=c,c=void 0)}return this.isCustomerResourceType(s)&&!c&&(c=l),PhotosArnBuilder.builder().customerId(c||"").resourceType(s).resourceId(l).resourceQualifier(u).build()}}}}},8776:(e,t,r)=>{"use strict";r.d(t,{m:()=>getPreference,z:()=>buildSet});var o=r(7309),n=r.n(o),i=r(39754),a=r.n(i),s=r(50014),c=r.n(s),l=r(56449),u=r.n(l);function buildSet(e,t,r){var o,n={},i=[];if(!u()(e)&&(e=[e]),!u()(t)&&(t=[t]),!u()(r)&&(r=[r]),1!==c()([e.length,t.length,r.length]).length)throw"SetIds, prefIds and values must be the same length";for(o=0;o<e.length;o++)n[e[o]]={};for(o=0;o<t.length;o++){n[e[o]][t[o]]=r[o]}return a()(n,((e,t)=>{var r=[];a()(e,((e,t)=>r.push({id:t,value:e}))),i.push({id:t,preferences:r})})),i}function getPreference(e,t,r){var o=n()(e,{id:t})||{};return(n()(o.preferences,{id:r})||{}).value}},65536:(e,t,r)=>{"use strict";r.d(t,{K:()=>isSearchEnabled,u:()=>isSemanticSearchEnabled});var o=r(17667);function isSemanticSearchEnabled(){return o.A.isOn("semantic_search")}function isSearchEnabled(){return o.A.isOn("search")||isSemanticSearchEnabled()}},55319:(e,t,r)=>{"use strict";r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=r(35994),n=r(13489),i=r(21572),a=r(66569),s=r(71086),c=r(14324),l=r(18742),u=r(78439),d=r(1683),p=r(51315);function __WEBPACK_DEFAULT_EXPORT__(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.eventTag)throw new Error("Please supply an event tag when initializing the select-add-to-album flow.");t.pageContext=t.pageContext||s.A.getPageContext();var r,h,m=e.id,v=e.name||(0,i.A)("amazon-photos-untitled-album-placeholder-name"),g=!m,f=s.A.getProperty("fragment"),y=s.A.getProperty("history.location.state.albumBackUrl"),A=s.A.getProperty("lastFragment"),_=window.location.pathname+window.location.search;g?(r=(0,i.A)("amazon-photos-create-album"),h=(0,i.A)("amazon-photos-add-selected-to-new-album")):(r=(0,i.A)("amazon-photos-add-to-album"),h=(0,i.A)("amazon-photos-add-selected-to-album",v)),o.A.emit("lockSelectMode",{navigationOptions:["photos","family"],title:h,buttons:[{label:r,name:"add-selected-to-album",className:"mobile-icon icon-checkmark",allowNoSelection:!0,onClick(e){var r=c.A.getProperty("selection");function addToAlbum(){r.getSize()?new p.A({albumId:m,albumName:v,items:r.getNodes(),success(){o.A.emit("uncache"),o.A.emit("unlockSelectMode"),n.A.log({name:"AddToAlbumSuccess"})},eventTag:t.eventTag}).start():(o.A.emit("uncache"),o.A.emit("unlockSelectMode"))}e.currentTarget.disabled=!0,g?u.A.createAlbum({name:(0,i.A)("amazon-photos-new-album-default-name")}).done((e=>{m=e.id,v=e.name,addToAlbum(),d.A.log("CreatePhotoAlbum",{eventTag:t.eventTag,eventCount:1},t.pageContext)})).fail((()=>{o.A.emit("showToast",{message:(0,i.A)("amazon-photos-generic-service-error"),className:"error"})})):addToAlbum()}}]}),o.A.listen("unlockSelectMode",(function onUnlockSelectMode(){var e,t,r={discardSelection:!0};t=m?"".concat(l.A.getProperty("urls.album"),"/").concat(m):f?"/".concat(f):_,e=m&&g?f:null!=y?y:A,r.historyState={albumBackUrl:e},(0,a.A)(t,r),m&&g&&o.A.emit("navigatedToNewAlbum"),o.A.unListen("unlockSelectMode",onUnlockSelectMode)})),(0,a.A)(l.A.getProperty("urls.all"))}},13319:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>selectAddToGroup});var o=r(56170),n=r.n(o),i=r(96540),a=r(35994),s=r(1683),c=r(18742),l=r(21572),u=r(47389),d=r(71086),p=r(14324),h=r(38530),m=r(67172),v=r(11250),g=r(63059),f=r(45463);function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}var getReturnPathForGroup=e=>{var{group:t,type:r}=e;switch(r){case"albums":return new u.A("".concat(c.A.getProperty("urls.groups"),"/").concat(t.groupId),{contentType:"albums"});case"share":return new u.A("".concat(c.A.getProperty("urls.shareList"),"/").concat(t.groupId));case"shared-photo-album-landing-page":return new u.A("".concat(c.A.getProperty("urls.groupShare"),"/").concat(t.shareToken));default:return new u.A("".concat(c.A.getProperty("urls.groups"),"/").concat(t.groupId))}},AddCaptionDialog=e=>{var{onClick:t,onInput:r}=e;return i.createElement(h.A,{name:"add-caption",heading:(0,l.A)("amazon-photos-group-add-caption"),buttons:[{name:"confirm",label:(0,l.A)("amazon-photos-group-add-caption-cta"),onClick:t}]},i.createElement(v.A,{placeholder:(0,l.A)("amazon-photos-group-add-caption-placeholder"),onInput:r,focus:!0}))};function selectAddToGroup(e){var t,{group:r,type:o,eventTag:h,ingressPoint:v}=e,y=r,A=new u.A(window.location.pathname),_=new u.A(c.A.getProperty("urls.all")),P="amazon-photos-add-to-sharing-header",b="amazon-photos-add-to-sharing";switch(o){case"albums":_=new u.A(c.A.getProperty("urls.albums"));break;case"share":P="amazon-photos-add-to-group-share-header",b="amazon-photos-add-button";break;default:r||(b="amazon-photos-create-sharing-confirm")}var S=function(){var e=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var e=p.A.getProperty("selection"),i=e.getNodes();if(!r)try{y=yield(0,f.A)({navigate:!1,eventTag:h,ingressPoint:v})}catch(e){return void A.go(!0)}if(A=getReturnPathForGroup({group:y,type:o}),r||A.setParam("new",!0),A.setParam("ingressPoint",v),y&&i.length){var s=new g.A({groups:[y],items:e.getNodes(),eventTag:h}).start();if(!t)return void a.A.emit("unlockSelectMode");s.getPromise().done((()=>{var e=n()(s.groupCollections),{groupId:r,collectionId:o}=e;m.A.patchGroupCollection({groupId:r,caption:t,collectionId:o}).done((()=>{a.A.emit("unlockSelectMode")}))}))}else a.A.emit("unlockSelectMode")}));return function onAddToGroupClick(){return e.apply(this,arguments)}}(),onInput=e=>{t=e};s.A.log("AddtoGroupStart",{eventTag:h},d.A.getPageContext()),a.A.emit("lockSelectMode",{navigationOptions:["photos","albums"],title:(0,l.A)(P),buttons:[{label:(0,l.A)(b),name:"add-selected-to-group",allowNoSelection:!0,onClick:e=>{if(p.A.getProperty("selection").getNodes().length>0&&(!r||!r.isAlexaGroup))return a.A.emit("openDialog",i.createElement(AddCaptionDialog,{onClick:S,onInput}));e.currentTarget.disabled=!0,S()},className:"mobile-icon icon-checkmark"}]});var onPopState=()=>a.A.emit("unlockSelectMode");_.go(!0),a.A.listenOnce("unlockSelectMode",(()=>{a.A.unListen("popState",onPopState),A.go()}),null,-1),a.A.listen("popState",onPopState)}},33461:(e,t,r)=>{"use strict";r.d(t,{A:()=>selectGroupCover});var o=r(60895),n=r.n(o),i=r(96540),a=r(42843),s=r(35994),c=r(47389),l=r(1683),u=r(18742),d=r(21572),p=r(66569),h=r(67172),m=r(71086),v=r(14324),g=r(1280);function selectGroupCover(e){var{group:t}=e;if(t){var r=window.location.href,o=new c.A(u.A.getProperty("urls.groups")).addPath(t.groupId).setParam("contentType","photos").toString();s.A.emit("lockSelectMode",{title:(0,d.A)("amazon-photos-groups-set-cover"),singleSelect:!0,buttons:[{label:(0,d.A)("amazon-photos-confirm"),name:"set-cover-confirm",className:"mobile-icon icon-checkmark",allowNoSelection:!1,onClick:()=>{var e=v.A.getProperty("selection").getNodes()[0];if(e){s.A.emit("openDialog",i.createElement(g.A,{model:e,onSave:(r,o)=>{s.A.emit("closeDialog"),s.A.emit("unlockSelectMode"),s.A.emit("setScroll",{position:0,transition:!0});var{ownerId:i,id:c}=e,{groupId:u}=t;h.A.updateGroup({groupId:u,coverNode:{ownerId:i,nodeId:c,cropBox:o}}).done((()=>{s.A.emit("showToast",{message:(0,d.A)("amazon-photos-groups-set-cover-success")}),n()((()=>{s.A.emit("uncache"),s.A.emit("groupUpdated",{groupId:t.groupId}),l.A.log("ChangeGroupCoverPhoto",void 0,m.A.getPageContext())}),a.A.SHORT)}))}}))}}}]}),(0,p.A)(o);var onPopState=()=>s.A.emit("unlockSelectMode");s.A.listen("popState",onPopState),s.A.listenOnce("unlockSelectMode",(()=>{s.A.unListen("popState",onPopState),(0,p.A)(r)}))}}},65329:(e,t,r)=>{"use strict";function canShowStap(e,t){var r,o,n=void 0===e||!(null!=e&&e.count),i=null!==(r=null==t||null===(o=t.serviceProperties)||void 0===o?void 0:o.isDynamicAlbum)&&void 0!==r&&r;return!n&&!i}r.d(t,{U:()=>canShowStap})},19949:(e,t,r)=>{"use strict";function trim(e){return(e="string"==typeof e?e:"").trim()}r.d(t,{A:()=>trim})},30257:(e,t,r)=>{"use strict";function truncateCount(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e<t?String(e):"".concat(t-1,"+")}r.d(t,{A:()=>truncateCount})},90811:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(58156),n=r.n(o),i=r(75735),a=r.n(i),s=r(99566),c=r(43669);const l=function getIncrementalMD5(e){return new Promise(((t,r)=>{(function buildIncrementalMD5(e){return new Promise(((t,r)=>{e instanceof Blob&&Number.isFinite(e.size)||r({errorCode:c.Iw.MD5_BAD_BLOB,errorSource:c.Bc.GET_INCREMENTAL_MD5});var o=2097152,i=new FileReader,s=new(a().ArrayBuffer),l=Math.ceil(e.size/o),u=0;function readNextChunk(){var t=u*o,r=t+o>=e.size?e.size:t+o;i.readAsArrayBuffer(e.slice(t,r))}i.onload=e=>{try{var o=n()(e,"target.result");if(s.append(o),(u+=1)<l)readNextChunk();else{var i=s.end();t(i)}}catch(e){r(e)}},i.onerror=()=>{r({errorCode:c.Iw.MD5_CALCULATION_FAILED,errorSource:c.Bc.GET_INCREMENTAL_MD5})},readNextChunk()}))})(e).then((e=>{t(e)})).catch((e=>{e instanceof Error&&r((0,s.Ay)(e,c.Bc.GET_INCREMENTAL_MD5)),r(e)}))}))}},99566:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>getUploadError,DD:()=>getCdusUploadError,Z2:()=>getCdpUploadError});var o=r(56449),n=r.n(o),i=r(58156),a=r.n(i),s=r(23805),c=r.n(s),l=r(46266),u=r(73725),d=r(43669);function getStatusErrorCode(e,t){return"timeout"===t?d.Qe.TIMEOUT:0===e?d.Qe.ENDPOINT_UNREACHABLE:e}function getErrorInfo(e,t){if(!c()(e))return{errorCode:d.Iw.XHR_MISSING};if(l.A.isCancel(e))return{errorCode:d.Iw.AXIOS_CANCELLATION};var{isAxiosError:r}=e;if(e instanceof Error&&!r)return u.A.error("Uploader runtime error: ",t,e),{errorCode:d.Iw.RUNTIME_ERROR};var o=(r?a()(e,"response.data"):e.responseJSON)||{},n=(r?e.request:e)||{},{code:i,errorCode:s,message:p}=o,{status:h,statusText:m}=n;return{errorCode:s||i||getStatusErrorCode(h,m)||d.Iw.UNKNOWN,httpStatus:h,message:p}}function getCdpUploadError(e,t){var r,{errorCode:o,message:i}=getErrorInfo(e,t);o===d.XV.MD5_DUPLICATE&&(r=a()(e,"response.data.info.nodeIds"));var s=i&&i.startsWith('{"MD5":"MD5 does not match underlying data.');return{conflictNodeId:n()(r)?r[0]:void 0,errorCode:s?d.XV.MD5_MISMATCH_ERROR:o,errorSource:t,retryable:d.uV.includes(o),retryableWithBackoff:d.hb.includes(o)}}function getCdusUploadError(e,t){var r,{errorCode:o,httpStatus:i}=getErrorInfo(e,t);return o===d.tA.DUPLICATES_CONFLICT_ERROR&&(r=a()(e,"response.data.errorDetails.conflictNodeIds")),i>=500&&i<=599&&(o=i),{conflictNodeId:n()(r)?r[0]:void 0,errorCode:o,errorSource:t,retryable:d.uV.includes(o),retryableWithBackoff:d.hb.includes(o)}}function getUploadError(e,t){var{errorCode:r}=getErrorInfo(e,t);return{errorCode:r,errorSource:t,retryable:d.uV.includes(r),retryableWithBackoff:d.hb.includes(r)}}},7145:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(43669);const n=function getUploadFileCategory(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.match(/.*(\..*$)/)||[],n=r[1]&&r[1].toLowerCase(),i=o.a0[n];return!i&&t.startsWith("image/")&&(i=o.DG.PHOTO),!i&&t.startsWith("video/")&&(i=o.DG.VIDEO),i||o.DG.OTHER}},35777:(e,t,r)=>{"use strict";r.d(t,{A:()=>getUploadFolderIds});var o=r(78439),n=r(5732),i=r(43669),a=r(99566);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function getOrCreateFolders(e,t,r){return _getOrCreateFolders.apply(this,arguments)}function _getOrCreateFolders(){return _getOrCreateFolders=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(e,t,r){var s=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);if(s[t])return s;if("/"===t)try{return s[t]=yield o.A.getRootNodeId({disableRetryHandling:r}),s}catch(e){throw(0,a.Ay)(e,i.Bc.GET_ROOT_NODE_ID)}var c=t.match(/^(\/.*\/).*\//),l=c?c[1]:"/";if(!s[l]){var u=yield getOrCreateFolders(s,l,r);Object.assign(s,u)}var d,p=t.match(/^\/?.*\/(.*?)\/.*?$/),h=p&&p[1],m=(0,n.A)({name:h,type:"folder"});try{d=yield o.A.listChildren({disableRetryHandling:r,id:s[l],filters:m})}catch(e){throw(0,a.Ay)(e,i.Bc.GET_FOLDER)}var v,{data:g}=d,f=Array.isArray(g)&&g[0],y="object"==typeof f&&f.id;if(y)return s[t]=y,s;try{v=yield o.A.createFolder({disableRetryHandling:r,name:h,parents:s[l]})}catch(e){var{responseJSON:A}=e||{},{code:_,info:P}=A||{},{nodeId:b}=P||{};if(_!==i.oN.NAME_ALREADY_EXISTS||!b)throw(0,a.Ay)(e,i.Bc.CREATE_FOLDER);v={id:b}}var{id:S}=v;return S?(s[t]=S,s):void 0})),_getOrCreateFolders.apply(this,arguments)}function getUploadFolderIds(){var{cachedFolderIds:e={},relativePath:t="/",disableRetryHandling:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((o,n)=>{getOrCreateFolders(e,t,r).then((e=>{o(e)})).catch((e=>{e instanceof Error&&n((0,a.Ay)(e,i.Bc.GET_UPLOAD_FOLDER_IDS)),n(e)}))}))}},43669:(e,t,r)=>{"use strict";r.d(t,{Bc:()=>P,DG:()=>I,Iw:()=>g,NX:()=>b,Qe:()=>f,Wi:()=>y,XV:()=>o,_5:()=>a,a0:()=>O,f_:()=>S,hb:()=>_,oN:()=>n,rt:()=>E,tA:()=>i,uV:()=>A});var o={INSUFFICIENT_STORAGE:"INSUFFICIENT_STORAGE",INSUFFICIENT_PERMISSION_FOR_ADD_CHILD:"INSUFFICIENT_PERMISSION_FOR_ADD_CHILD",INVALID_PARENT:"INVALID_PARENT",MD5_DUPLICATE:"MD5_DUPLICATE",MD5_MISMATCH_ERROR:"MD5_MISMATCH_ERROR",NO_ACTIVE_SUBSCRIPTION_FOUND:"NO_ACTIVE_SUBSCRIPTION_FOUND",PARENT_NODE_ID_NOT_FOUND:"PARENT_NODE_ID_NOT_FOUND",PARENT_NODE_IN_TRASH:"PARENT_NODE_IN_TRASH",TOO_MANY_REQUESTS:"TOO_MANY_REQUESTS"},n={NAME_ALREADY_EXISTS:"NAME_ALREADY_EXISTS",ONLINE_PROXY_FLEET_FAILURE:"ONLINE_PROXY_FLEET_FAILURE"},i={DATE_TIME_NOT_IN_UTC:"DateTimeNotInUTC",FILE_SIZE_LARGER_THAN_EXPECTED:"FileSizeLargerThanExpected",FILE_SIZE_SMALLER_THAN_EXPECTED:"FileSizeSmallerThanExpected",FILE_SIZE_TOO_LARGE:"FileSizeTooLarge",INVALID_DATE_TIME_FORMAT:"InvalidDateTimeFormat",INVALID_PARENT:"InvalidParent",MD5_MISMATCH_ERROR:"Md5MismatchError",MISSING_CONTENT_NAME:"MissingContentName",MISSING_FILE_CONTENT:"MissingFileContent",MISSING_FILE_MD5:"MissingFileMd5",MISSING_FILE_SIZE:"MissingFileSize",SOCKET_EXCEPTION:"SocketException",FORBIDDEN_ACCESS:"ForbiddenAccess",INSUFFICIENT_STORAGE:"InsufficientStorage",NO_ACTIVE_SUBSCRIPTION_FOUND:"NoActiveSubscriptionFound",UNAUTHORIZED_ACCESS:"UnauthourizedAccess",NODE_NOT_FOUND:"NodeNotFound",DUPLICATES_CONFLICT_ERROR:"DuplicatesConflictError",FAMILY_CONFLICT:"FamilyConflict",NAME_ALREADY_EXISTS:"NameAlreadyExists",PRECONDITION_FAILED:"PreconditionFailed",TOO_MANY_REQUESTS:"TooManyRequests",UNCLASSIFIED_CLIENT_ERROR:"UnclassifiedClientError"},a={FILE_EXCEEDS_QUOTA:"FileExceedsQuota",FILE_TOO_LARGE:"FileTooLarge",FILE_TYPE_INVALID:"FileTypeInvalid"},s=429,c=502,l=400,u=499,d=504,p=500,h=501,m=503,v=401,g={AXIOS_CANCELLATION:"AxiosCancellation",MD5_BAD_BLOB:"Md5BadBlob",MD5_CALCULATION_FAILED:"Md5CalculationFailed",MD5_PARAM_MISSING:"Md5ParamMissing",RUNTIME_ERROR:"RuntimeError",UNKNOWN:"Unknown",XHR_MISSING:"XhrMissing"},f={ENDPOINT_UNREACHABLE:"EndpointUnreachable",TIMEOUT:"Timeout"},y=(o.INSUFFICIENT_STORAGE,o.NO_ACTIVE_SUBSCRIPTION_FOUND,i.FORBIDDEN_ACCESS,i.INSUFFICIENT_STORAGE,i.NO_ACTIVE_SUBSCRIPTION_FOUND,[o.INSUFFICIENT_PERMISSION_FOR_ADD_CHILD,o.MD5_DUPLICATE,o.TOO_MANY_REQUESTS,n.NAME_ALREADY_EXISTS,n.ONLINE_PROXY_FLEET_FAILURE,i.DUPLICATES_CONFLICT_ERROR,i.FAMILY_CONFLICT,i.FILE_SIZE_TOO_LARGE,i.MISSING_CONTENT_NAME,i.MISSING_FILE_CONTENT,i.MISSING_FILE_SIZE,i.MISSING_FILE_MD5,i.NAME_ALREADY_EXISTS,i.PRECONDITION_FAILED,i.TOO_MANY_REQUESTS,i.UNCLASSIFIED_CLIENT_ERROR,s,c,l,d,p,h,m,g.MD5_PARAM_MISSING,g.RUNTIME_ERROR,g.UNKNOWN,g.XHR_MISSING]),A=[o.TOO_MANY_REQUESTS,n.ONLINE_PROXY_FLEET_FAILURE,i.FILE_SIZE_LARGER_THAN_EXPECTED,i.FILE_SIZE_SMALLER_THAN_EXPECTED,i.SOCKET_EXCEPTION,i.TOO_MANY_REQUESTS,i.UNCLASSIFIED_CLIENT_ERROR,s,c,u,p,d,m,f.ENDPOINT_UNREACHABLE,f.TIMEOUT],_=[o.TOO_MANY_REQUESTS,n.ONLINE_PROXY_FLEET_FAILURE,i.SOCKET_EXCEPTION,i.TOO_MANY_REQUESTS,i.UNCLASSIFIED_CLIENT_ERROR,s,c,u,p,d,m,f.ENDPOINT_UNREACHABLE,f.TIMEOUT],P={CALL_UPLOAD_SERVICE:"CallUploadService",CALL_UPLOAD_SERVICE_LEGACY:"CallUploadServiceLegacy",CLIENT_VALIDATION:"ClientValidation",CREATE_FOLDER:"CreateFolder",GET_UPLOAD_FOLDER_IDS:"GetUploadFolderIds",GET_FOLDER:"GetFolder",GET_INCREMENTAL_MD5:"GetIncrementalMd5",GET_ROOT_NODE_ID:"GetRootNodeId",UPLOAD_FILE:"UploadFile",UPLOADER_SAGAS:"UploaderSagas"},b={AUTHENTICATION_ISSUE:"AUTHENTICATION_ISSUE",FILE_CHANGED:"FILE_CHANGED",FILE_SIZE:"FILE_SIZE",FILE_TYPE:"FILE_TYPE",NETWORK_ISSUE:"NETWORK_ISSUE",OTHER:"OTHER",OVER_QUOTA:"OVER_QUOTA",SERVICE_ISSUE:"SERVICE_ISSUE"},S={[o.INSUFFICIENT_STORAGE]:b.OVER_QUOTA,[o.INSUFFICIENT_PERMISSION_FOR_ADD_CHILD]:b.OTHER,[o.NO_ACTIVE_SUBSCRIPTION_FOUND]:b.OVER_QUOTA,[o.INVALID_PARENT]:b.OTHER,[o.MD5_MISMATCH_ERROR]:b.FILE_CHANGED,[o.PARENT_NODE_ID_NOT_FOUND]:b.OTHER,[o.PARENT_NODE_IN_TRASH]:b.OTHER,[o.TOO_MANY_REQUESTS]:b.SERVICE_ISSUE,[n.NAME_ALREADY_EXISTS]:b.OTHER,[n.ONLINE_PROXY_FLEET_FAILURE]:b.SERVICE_ISSUE,[i.SOCKET_EXCEPTION]:b.NETWORK_ISSUE,[i.DATE_TIME_NOT_IN_UTC]:b.OTHER,[i.MISSING_CONTENT_NAME]:b.OTHER,[i.MISSING_FILE_CONTENT]:b.OTHER,[i.MISSING_FILE_SIZE]:b.OTHER,[i.MISSING_FILE_MD5]:b.OTHER,[i.INVALID_PARENT]:b.OTHER,[i.FILE_SIZE_LARGER_THAN_EXPECTED]:b.NETWORK_ISSUE,[i.FILE_SIZE_SMALLER_THAN_EXPECTED]:b.NETWORK_ISSUE,[i.FILE_SIZE_TOO_LARGE]:b.FILE_SIZE,[i.MD5_MISMATCH_ERROR]:b.FILE_CHANGED,[i.UNAUTHORIZED_ACCESS]:b.AUTHENTICATION_ISSUE,[i.FORBIDDEN_ACCESS]:b.OVER_QUOTA,[i.INSUFFICIENT_STORAGE]:b.OVER_QUOTA,[i.NO_ACTIVE_SUBSCRIPTION_FOUND]:b.OVER_QUOTA,[i.DUPLICATES_CONFLICT_ERROR]:b.OTHER,[i.NAME_ALREADY_EXISTS]:b.OTHER,[i.FAMILY_CONFLICT]:b.OTHER,[i.TOO_MANY_REQUESTS]:b.SERVICE_ISSUE,[i.PRECONDITION_FAILED]:b.SERVICE_ISSUE,[i.UNCLASSIFIED_CLIENT_ERROR]:b.SERVICE_ISSUE,[a.FILE_EXCEEDS_QUOTA]:b.OVER_QUOTA,[a.FILE_TOO_LARGE]:b.FILE_SIZE,[a.FILE_TYPE_INVALID]:b.FILE_TYPE,[s]:b.SERVICE_ISSUE,[c]:b.SERVICE_ISSUE,[l]:b.OTHER,[u]:b.SERVICE_ISSUE,[d]:b.SERVICE_ISSUE,[p]:b.SERVICE_ISSUE,[h]:b.SERVICE_ISSUE,[m]:b.SERVICE_ISSUE,[v]:b.AUTHENTICATION_ISSUE,[g.AXIOS_CANCELLATION]:b.OTHER,[g.MD5_CALCULATION_FAILED]:b.FILE_CHANGED,[g.MD5_PARAM_MISSING]:b.OTHER,[g.UNKNOWN]:b.OTHER,[g.RUNTIME_ERROR]:b.OTHER,[g.XHR_MISSING]:b.OTHER,[f.ENDPOINT_UNREACHABLE]:b.NETWORK_ISSUE,[f.TIMEOUT]:b.NETWORK_ISSUE},I={OTHER:"other",PHOTO:"photo",VIDEO:"video"},O={".avif":I.PHOTO,".bmp":I.PHOTO,".gif":I.PHOTO,".heic":I.PHOTO,".heif":I.PHOTO,".jpg":I.PHOTO,".jpeg":I.PHOTO,".jxl":I.PHOTO,".ora":I.PHOTO,".png":I.PHOTO,".svg":I.PHOTO,".tif":I.PHOTO,".tiff":I.PHOTO,".webp":I.PHOTO,".dng":I.PHOTO,".ari":I.PHOTO,".bay":I.PHOTO,".cr2":I.PHOTO,".cr3":I.PHOTO,".crw":I.PHOTO,".erf":I.PHOTO,".gpr":I.PHOTO,".3fr":I.PHOTO,".fff":I.PHOTO,".dc2":I.PHOTO,".dcr":I.PHOTO,".dcs":I.PHOTO,".drf":I.PHOTO,".k25":I.PHOTO,".kdc":I.PHOTO,".mos":I.PHOTO,".pxn":I.PHOTO,".mef":I.PHOTO,".mdc":I.PHOTO,".mrw":I.PHOTO,".nef":I.PHOTO,".nrw":I.PHOTO,".orf":I.PHOTO,".pef":I.PHOTO,".ptx":I.PHOTO,".cap":I.PHOTO,".eip":I.PHOTO,".iiq":I.PHOTO,".raf":I.PHOTO,".raw":I.PHOTO,".rw2":I.PHOTO,".rwl":I.PHOTO,".rwz":I.PHOTO,".r3d":I.PHOTO,".srw":I.PHOTO,".x3f":I.PHOTO,".cs1":I.PHOTO,".arw":I.PHOTO,".sr2":I.PHOTO,".srf":I.PHOTO,".3g2":I.VIDEO,".3gp":I.VIDEO,".asf":I.VIDEO,".avi":I.VIDEO,".f4p":I.VIDEO,".f4v":I.VIDEO,".flv":I.VIDEO,".mkv":I.VIDEO,".m4v":I.VIDEO,".mov":I.VIDEO,".mp4":I.VIDEO,".mpg":I.VIDEO,".mpeg":I.VIDEO,".mts":I.VIDEO,".ogg":I.VIDEO,".ogv":I.VIDEO,".qt":I.VIDEO,".swf":I.VIDEO,".webm":I.VIDEO,".wmv":I.VIDEO},E=5368709120},66607:(e,t,r)=>{"use strict";r.d(t,{A:()=>upload_disambiguator});var o=r(96540),n=r(35994),i=r(55808),a=r.n(i),s=r(56718),c=r(21572),l=r(5556),u=r.n(l),d=r(32485),p=r.n(d),h=r(84503),m=r(71468),v=r(24764),g=r(94141),f=r(51549);const y="upload-disambiguator-dialog-module__dialog__jZ_JI",A="upload-disambiguator-dialog-module__button__f26BR";var UploadDisambiguatorDialog=e=>{var{contextName:t,onContextClickOverride:r,uploadToContextButtonString:i}=e,l=(0,m.d4)(g.j0),u=(0,o.useRef)(!1),d=(0,m.wA)(),_="upload-".concat(t,"-intent"),P="uploadTo".concat(a()(t)),onClick=()=>{u.current=!0,n.A.emit("closeDialog",{id:"upload-confirm-dialog"})};return o.createElement(s.A,{heading:(0,c.A)("amazon-photos-upload-context-header"),name:_,onClose:()=>{u.current||d((0,f.wr)()),u.current=!1},className:y},!r&&o.createElement(v.A,{name:P,className:p()("button",A),onClick,selectionType:l,useContext:!0},i),r&&o.createElement(h.A,{name:P,className:p()("button",A),onClick:r},i),o.createElement(v.A,{name:"uploadToAccount",className:p()("button-secondary",A),onClick,selectionType:l,useContext:!1},(0,c.A)("amazon-photos-uploader-context-confirm-account")))};UploadDisambiguatorDialog.propTypes={contextName:u().string.isRequired,onContextClickOverride:u().func,uploadToContextButtonString:u().string.isRequired};const _=UploadDisambiguatorDialog;const upload_disambiguator=e=>{var{contextName:t,onContextClickOverride:r,uploadToContextButtonString:i}=e;n.A.emit("openDialog",{id:"upload-confirm-dialog",component:o.createElement(_,{contextName:t,onContextClickOverride:r,uploadToContextButtonString:i})})}},21476:(e,t,r)=>{"use strict";r.d(t,{A:()=>uploadFile});var o=r(56449),n=r.n(o),i=r(17667),a=r(78439),s=r(54318),c=r(43669),l=r(46266),u=r(18742);function callUploadService(){var{cancelToken:e,contentDate:t,file:r,md5Hash:o,parentNodeId:n,progressHandler:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=new URL(u.A.getProperty("urls.uploadServiceEndpoint"));a.pathname="/v2/upload";var s={"x-amzn-file-md5":o,"x-amz-clouddrive-appid":u.A.getProperty("applicationId")},c=new URLSearchParams;c.append("conflictResolution","RENAME"),c.append("fileSize",null==r?void 0:r.size),c.append("name",null==r?void 0:r.name),c.append("parentNodeId",n),t&&c.append("contentDate",t);var d={cancelToken:e,data:r,headers:s,withCredentials:!0,method:"POST",params:c,onUploadProgress:i,url:a.toString()};return(0,l.A)(d)}var d=r(99566),p=r(97463),h=r(59786);function legacyCallUploadService(){var{cancelToken:e,file:t,md5Hash:r,parentNodeId:o,progressHandler:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name:i}=t,a=new FormData,s=new h.A(u.A.getProperty("urls.proxyServiceEndpoint"));s.addPath("nodes"),a.append("metadata",JSON.stringify({kind:"FILE",name:i,conflictResolution:"RENAME",parents:Array.isArray(o)?o:[o]})),a.append("file",t);var c={cancelToken:e,contentType:!1,data:a,headers:{"Content-MD5":r,"x-amzn-SessionId":p.A.getProperty("sessionId"),"x-amz-clouddrive-appid":u.A.getProperty("applicationId")},method:"POST",onUploadProgress:n,processData:!1,url:s.toString(),withCredentials:!0};return(0,l.A)(c)}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function _uploadFileChain(){return _uploadFileChain=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(e){var t,r,{acceptableFileCategories:o,acceptableFileExtensions:l,bytesAvailable:u,disableRetryHandling:p,cancelToken:h,contentDate:m,file:v,fileCategory:g,fileExtension:f,hasPrime:y,md5Hash:A,md5Error:_,parentNodeId:P,progressHandler:b}=e,{size:S}=v||{};if(n()(o)&&!o.includes(g)||n()(l)&&!l.includes(f))throw{errorCode:c._5.FILE_TYPE_INVALID,errorSource:c.Bc.CLIENT_VALIDATION};if(S>c.rt)throw{errorCode:c._5.FILE_TOO_LARGE,errorSource:c.Bc.CLIENT_VALIDATION};if(!A){var{errorCode:I,errorSource:O}=_||{};if(I||O)throw{errorCode:I,errorSource:O};throw{errorCode:c.Iw.MD5_PARAM_MISSING,errorSource:c.Bc.CLIENT_VALIDATION,retryable:!0}}if((!(g===c.DG.PHOTO)||!1===y)&&Number.isFinite(S)&&Number.isFinite(u)&&S>u)throw{errorCode:c._5.FILE_EXCEEDS_QUOTA,errorSource:c.Bc.CLIENT_VALIDATION};if(!P)try{t=yield a.A.getRootNodeId({disableRetryHandling:p})}catch(e){throw(0,d.Ay)(e,c.Bc.GET_ROOT_NODE_ID)}try{var E=i.A.isOn(s.jy.CloudDriveUploadService)?callUploadService:legacyCallUploadService;r=yield E({cancelToken:h,contentDate:m,file:v,md5Hash:A,parentNodeId:P||t,progressHandler:b})}catch(e){throw i.A.isOn(s.jy.CloudDriveUploadService)?(0,d.DD)(e,c.Bc.CALL_UPLOAD_SERVICE):(0,d.Z2)(e,c.Bc.CALL_UPLOAD_SERVICE_LEGACY)}return r})),_uploadFileChain.apply(this,arguments)}function uploadFile(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,r)=>{(function uploadFileChain(e){return _uploadFileChain.apply(this,arguments)})(e).then((e=>{t(e)})).catch((e=>{e instanceof Error&&r((0,d.Ay)(e,c.Bc.UPLOAD_FILE)),r(e)}))}))}},58331:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>isSubscriptionInGracePeriod,Js:()=>shouldShowMFABanner,R1:()=>handleCompletedMFAAuthorization,RG:()=>isMFAOnlyBillingProblem,S8:()=>getPurchasePlanUrl,dZ:()=>getEditPaymentMethodUrl,if:()=>getAuthorizePaymentMethodUrl,p:()=>getGracePeriodEndDate,to:()=>hasMFABillingProblem});var o=r(62193),n=r.n(o),i=r(65606),a=r.n(i),s=r(96540),c=r(95093),l=r.n(c),u=r(59786),d=r(18742),p=r(71086),h=r(97463),m=r(17667),v=r(35994),g=r(1683),f=r(97042),y=r(80880),A=r(73842),_=r(71256),P=r(54318);r(81412);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b="hide_nav",S="mfaFailure",I="failed",O="BillingProblemDueToMFA",E="0000000000",T="isWebView",w=["DE","ES","FR","IT","UK"];function hasOpenProblems(e){var t;return Boolean((null==e||null===(t=e.openProblems)||void 0===t?void 0:t.length)>0||(null==e?void 0:e.hasOpenProblems))}function getProblemsList(e){var t;return null!==(t=(null==e?void 0:e.openProblems)||(null==e?void 0:e.subscriptionProblemsList))&&void 0!==t?t:[]}function findPlanById(e,t){return e.find((e=>{var r;return((null==e||null===(r=e.plan)||void 0===r?void 0:r.planId)||(null==e?void 0:e.planId))===t}))}function getEditPaymentMethodUrl(e){var{failure:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m.A.isOn(P.jy.YMSPaymentUpdate)){var r=d.A.getProperty("urls.yms");return new u.A(r).toString()}var o,n=d.A.getProperty("urls.voltron"),i={},s=p.A.getProperty("route.props.query.hide_nav"),c=h.A.getProperty("country"),l=w.includes(c),v=d.A.getProperty("isWebView");if(isMFARequiredForSubscription(e)||l){var{subscriptionId:g}=e;(o=new u.A("/photos/storage/mfa/".concat(g))).setParam("redirectToUrl",getDefaultRedirectUrl())}else o=new u.A(getDefaultRedirectUrl());s&&o.setParam(b,1),"production"!==a().env.NODE&&(i.marketplaceId=h.A.getProperty("marketplaceId"),i.merchantId="");var f=new u.A(n,_objectSpread(_objectSpread({oL:h.A.getProperty("language"),transactionContext:"Preference",cdwTransactionType:"switch"},i),{},{destinationPath:o}));return s&&f.setParam(b,1),v&&f.setParam(T,1),t&&f.setParam(S,I),f.toString()}function getAuthorizePaymentMethodUrl(e,t){var r,o;if(!e||!t)return"";if(m.A.isOn(P.jy.YMSPaymentUpdate)){var n=d.A.getProperty("urls.yms");return new u.A(n).toString()}var{subscriptionId:i}=e,s=(null==t||null===(r=t.activePlan)||void 0===r?void 0:r.asin)||(null==t?void 0:t.asin),c=(null==t||null===(o=t.activePlan)||void 0===o?void 0:o.sku)||(null==t?void 0:t.sku),l=d.A.getProperty("urls.voltron"),v={},g=p.A.getProperty("route.props.query.hide_nav"),f=p.A.getProperty("route.props.query.mfa"),y=new u.A("/photos/storage/mfa/".concat(i)),A=isSubscriptionInGracePeriod(e)?"1":"0",_=d.A.getProperty("isWebView");y.setParam("redirectToUrl",getDefaultRedirectUrl()),g&&y.setParam(b,1),y.setParam("gracePeriod",A),"production"!==a().env.NODE&&(v.marketplaceId=h.A.getProperty("marketplaceId"),v.merchantId="");var O=new u.A(l,_objectSpread({oL:h.A.getProperty("language"),transactionContext:"one-click",asinNumber:s,sku:c,cdwTransactionType:"authorize",destinationPath:y,gracePeriod:A},v));return g&&O.setParam(b,1),_&&O.setParam(T,1),"failed"===f&&O.setParam(S,I),O.toString()}function getPurchasePlanUrl(e,t){var r,o,n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{redirectOverride:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=(null==e||null===(r=e.plan)||void 0===r?void 0:r.planId)||(null==e?void 0:e.planId),l=(null==e||null===(o=e.plan)||void 0===o?void 0:o.sku)||(null==e?void 0:e.sku),v=(null==e||null===(n=e.plan)||void 0===n?void 0:n.asin)||(null==e?void 0:e.asin);if(null!=e&&e.isExternallyManaged||l===E)return d.A.getProperty("urls.404");var g=d.A.getProperty("urls.voltron"),y=d.A.getProperty("urls.orderHandler"),A={},_={},O=p.A.getProperty("route.props.query.hide_nav"),w=new u.A(y),C=s||getDefaultRedirectUrl(),N=d.A.getProperty("isWebView");if(w.addPath(c),w.setParam("redirectToUrl",C),O&&w.setParam(b,1),e&&m.A.isOn(P.jy.VoltronThirdPartyPlanData)){var R,D,L=(null==e||null===(R=e.plan)||void 0===R?void 0:R.subscriptionPeriod)||(null==e||null===(D=e.contractLength)||void 0===D?void 0:D.timeInterval);L===f.e9&&(L="Year"),L===f.R0&&(L="Month"),_.recurringUnit=L,_.subscriptionPlanType="Paid"}"production"!==a().env.NODE&&(A.marketplaceId=h.A.getProperty("marketplaceId"),A.merchantId="");var M=new u.A(g,_objectSpread(_objectSpread(_objectSpread({oL:h.A.getProperty("language"),transactionContext:"one-click",asinNumber:v,sku:l,cdwTransactionType:t?"switch":"start"},_),A),{},{destinationPath:w}));return N&&M.setParam(T,1),O&&M.setParam(b,1),i&&M.setParam(S,I),M.toString()}function handleCompletedMFAAuthorization(e,t,r,o,i,a){var{upgradeSuccess:c,mfa:l}=i;if("failed"===l||"0"===c?function getFailureDialog(e,t,r,o){var i,{upgradePlanId:a,mfa:c,planId:l,cdwTransactionType:u}=o;if(n()(e))return null;if("failed"===c){var d;d=l?getPurchasePlanUrl(findPlanById(e,l),t,!0):"authorize"===u?getAuthorizePaymentMethodUrl(r,t):getEditPaymentMethodUrl(r,{failure:!0}),i=s.createElement(_.A,{tryAgainUrl:d})}else{if(!a)return null;var p=findPlanById(e,a);i=s.createElement(A.A,{tryAgainUrl:getPurchasePlanUrl(p,t)})}v.A.emit("openDialog",i)}(e,t,r,i):"1"===c&&!0!==a&&function getSuccessDialog(e,t,r){if(n()(e)||n()(t))return null;var o=(null==t?void 0:t.isAutoRenewEnabled)||(null==t?void 0:t.autoRenewEnabled);(0,P.F9)()&&g.A.log("FTCConsentReceived",{eventTag:null==e?void 0:e.planId},p.A.getPageContext());var i=s.createElement(y.A,{hasPrime:r,currentPlan:e,currentSubscription:t,autoRenew:o});v.A.emit("openDialog",i)}(t,r,o),c){var u=new RegExp("&upgradeSuccess=\\d"),d=window.location.href.replace(u,"");window.history.replaceState("","",d)}}function isMFARequiredForSubscription(e){return!!e&&e.isMFARequired}function hasMFABillingProblem(e){if(!e)return!1;var t=hasOpenProblems(e),r=getProblemsList(e);return t&&r.some((e=>e.problemCode===O))}function isMFAOnlyBillingProblem(e){if(!e)return!1;var t=hasOpenProblems(e),r=getProblemsList(e);return t&&1===r.length&&hasMFABillingProblem(e)}function shouldShowMFABanner(e){return!!e&&(isMFARequiredForSubscription(e)&&!hasOpenProblems(e)||isMFAOnlyBillingProblem(e))}function isSubscriptionInGracePeriod(e){return hasOpenProblems(e)}function getGracePeriodEndDate(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var r=(null==e?void 0:e.gracePeriod)||(null==e?void 0:e.gracePeriodBeforeCancellation),o=getProblemsList(e),n=t?null==o?void 0:o.find((e=>e.problemCode===O)):null==o?void 0:o.find((e=>e.problemCode!==O)),i=null==n?void 0:n.effectiveDate;return i?l()(i).add(r,"days").format("LL"):""}function getDefaultRedirectUrl(){var e=d.A.getProperty("isWebView")?d.A.getProperty("urls.baseWebViewUrl"):d.A.getProperty("urls.baseAppUrl");return"".concat(e,"/storage")}},54318:(e,t,r)=>{"use strict";r.d(t,{D4:()=>isPSSStorageMigrationOn,F9:()=>FtcAutoRenewConsentCheckboxRequirementOn,Gg:()=>isImageEditorImprovementOn,HQ:()=>isForesterDeprecationFullOn,L2:()=>isIAMPrintsSidebarOn,Qr:()=>isAIAskPhotosOn,Sp:()=>isPrintsSideBarShutterflyOnlyOn,Tx:()=>isIAMBannerOn,WI:()=>isVideoEditorExperienceOn,ZB:()=>a,_q:()=>isGetAccountFeaturesV2On,cp:()=>isFamilySharedStorageOn,ji:()=>isThumbnailServiceOn,jy:()=>n,kT:()=>isPrintsSideBarShutterflyIntegrationOn,li:()=>isSharedAlbumsOn,oI:()=>isPrintsSideBarSnapfishOnlyOn,q7:()=>isForesterDeprecationShadowOn,t1:()=>getSlpHeaderTreatment});var o=r(17667),n=function(e){return e.AIAskPhotosLaunch="AIAskPhotosLaunch",e.Bootstrap="Bootstrap",e.FamilyStorageSharing="FamilyStorageSharing",e.GetAccountFeaturesV2="GetAccountFeaturesV2",e.IsPreferenceChangeAllowed="IsPreferenceChangeAllowed",e.PSSStorageMigrationLaunch="PSSStorageMigrationLaunch",e.SharedAlbums="SharedAlbums",e.SlpHeader="SlpHeader",e.SnapfishCardTextHolidayEvents="SnapfishCardTextHolidayEvents",e.CloudDriveUploadService="cloud-drive-upload-service",e.DisableOnboardingSMS="disable-onboarding-sms",e.FtcAutoRenewConsentCheckboxRequired="FtcAutoRenewConsentCheckboxRequired",e.GroupsEnabled="groups",e.OneClickCancelButton="OneClickCancelButton",e.PhotosPrinting="printing",e.ShowDPSLearnMoreLink="show-dps-learn-more-link",e.snapFishHeifHeicSupport="snapfish-heif-heic-support",e.ThumbnailService="ThumbnailService",e.PrintsSideBarShutterflyIntegration="PrintsSideBarShutterflyIntegration",e.PrintsSideBarShutterflyOnly="PrintsSideBarShutterflyOnly",e.PrintsSideBarSnapfishOnly="PrintsSideBarSnapfishOnly",e.ShutterflyEarlyMothersDayPromotion="ShutterflyEarlyMothersDayPromotion",e.ShutterflyLateMothersDayPromotion="ShutterflyLateMothersDayPromotion",e.BanyanStoragePage="banyan-storage-page",e.BulkDownloadMigration="bulk-download-migration",e.DevicePersonalizationRefresh="device-personalization-refresh",e.DisableStoryFamilyVaultSharing="disable-story-family-vault-sharing",e.InAppPurchaseDailyPlans="in-app-purchase-daily-plans",e.InAppPurchaseManageStorageSection="manage-storage-section-for-in-app-purchase",e.InAppPurchaseUpsellTreatment="in-app-purchase-upgrade-treatment",e.MFABlockPlanSubs="mfa-block-plans",e.SharedDigitalGreetingCardAppUpsell="shared-digital-greeting-card-app-upsell",e.StorageTermsUpdate="storage-terms-update",e.TwoClickCancellation="two-click-cancellation",e.VoltronThirdPartyPlanData="voltron-iframe-plan-info",e.YMSPaymentUpdate="yms-payment-update",e.FolderView="folder-view",e.InAppPurchaseCombined="in-app-purchase",e.ImageEditorImprovement="ImageEditorImprovement",e.VideoEditorExperience="VideoEditorExperience",e.IAMPrintsSidebar="IAMPrintsSidebar",e.IAMBanner="IAMBanner",e.ForesterDeprecation="ForesterDeprecation",e.StartTokenListChildren="StartTokenListChildren",e}({}),i=function(e){return e.C="C",e.T1="T1",e.T2="T2",e.T3="T3",e.T4="T4",e}({});function isFamilySharedStorageOn(){return o.A.isOn(n.FamilyStorageSharing)}function isAIAskPhotosOn(){return o.A.isOn(n.AIAskPhotosLaunch)}function isPrintsSideBarShutterflyIntegrationOn(){return o.A.isOn(n.PrintsSideBarShutterflyIntegration)}function isPrintsSideBarShutterflyOnlyOn(){return o.A.isOn(n.PrintsSideBarShutterflyOnly)}function isPrintsSideBarSnapfishOnlyOn(){return o.A.isOn(n.PrintsSideBarSnapfishOnly)}function isGetAccountFeaturesV2On(e){return e[n.GetAccountFeaturesV2]===i.T2}function isPSSStorageMigrationOn(){return o.A.isOn(n.PSSStorageMigrationLaunch)}function isSharedAlbumsOn(){return o.A.isOn(n.SharedAlbums)}var a=function(e){return e[e.GoToAmazonPhotos=0]="GoToAmazonPhotos",e[e.DownloadAndStap=1]="DownloadAndStap",e[e.StapOnly=2]="StapOnly",e}({});function getSlpHeaderTreatment(){switch(o.A.getProperty(n.SlpHeader)){case i.T1:return a.DownloadAndStap;case i.T2:return a.StapOnly;default:return a.GoToAmazonPhotos}}function FtcAutoRenewConsentCheckboxRequirementOn(){return o.A.isOn(n.FtcAutoRenewConsentCheckboxRequired)}function isImageEditorImprovementOn(){return o.A.isOn(n.ImageEditorImprovement)}function isVideoEditorExperienceOn(){return o.A.isOn(n.VideoEditorExperience)}function isIAMPrintsSidebarOn(){return o.A.isOn(n.IAMPrintsSidebar)}function isIAMBannerOn(){return o.A.isOn(n.IAMBanner)}function isForesterDeprecationShadowOn(){return o.A.getProperty(n.ForesterDeprecation)===i.T1}function isForesterDeprecationFullOn(){return o.A.getProperty(n.ForesterDeprecation)===i.T2}function isThumbnailServiceOn(){return o.A.isOn(n.ThumbnailService)}},58346:(e,t,r)=>{var o={"./cs":56464,"./cs.js":56464,"./de":77853,"./de-at":26111,"./de-at.js":26111,"./de.js":77853,"./en-au":53872,"./en-au.js":53872,"./en-ca":28298,"./en-ca.js":28298,"./en-gb":56195,"./en-gb.js":56195,"./es":97650,"./es.js":97650,"./fr":85498,"./fr-ca":26435,"./fr-ca.js":26435,"./fr-ch":37892,"./fr-ch.js":37892,"./fr.js":85498,"./it":88383,"./it.js":88383,"./ja":23827,"./ja.js":23827,"./nl":92572,"./nl.js":92572,"./pl":94418,"./pl.js":94418,"./pt":79834,"./pt-br":48303,"./pt-br.js":48303,"./pt.js":79834,"./tr":85096,"./tr.js":85096,"./zh-cn":52648,"./zh-cn.js":52648};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=58346}},e=>{e.O(0,[237,460,890,735,609,732,911,644,96,179,475,221,267,630],(()=>{return t=56716,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=sharing-d75baf043e98d342b760.js.map