"use strict";(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[460],{62471:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(96540),r=o(5556),a=o.n(r),i=o(32485),s=o.n(i),l=o(71468),c=o(35994),d=o(51158),m=o(43840),p=o(84503),u=o(32098),h=o(47389),g=o(94788),v=o(18742),f=o(21572),y=o(7138),b=o(61738),A=o(71086),E=o(14324),P=o(89649),_=o(49479),S=o(66941),N=o(42341),w=o(68865),C=o(31035);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var I="album-head";class AlbumHeader extends((0,y.A)(n.Component)){constructor(e){super(e),_defineProperty(this,"onNavigatedToNewAlbum",(()=>{this.setState({createMode:!0})})),_defineProperty(this,"onDownloadClick",(()=>{var{collection:e}=this.props;(0,N.A)({collection:e,pageContext:"album"})})),_defineProperty(this,"onKeyDown",(e=>{if((0,P.A)(e,!1,!0),"Escape"===e.key){var t=this.getAlbumName(),o={albumName:""};this.state.albumName||(o={editMode:!1,albumName:t}),this.setState(o)}})),_defineProperty(this,"onEditAlbumSave",(()=>{var{model:e}=this.props;e&&e.rename(this.state.albumName),this.setState({editMode:!1,createMode:!1,albumName:this.getAlbumName()})})),_defineProperty(this,"onEditAlbumCancelClick",(()=>{this.setState({editMode:!1,albumName:this.getAlbumName()})})),_defineProperty(this,"onEditClick",(()=>{this.setState({editMode:!0})})),_defineProperty(this,"onInputChange",(e=>{var t={};t[e.currentTarget.id]=e.currentTarget.value,this.setState(t)})),_defineProperty(this,"onSlideshowClick",(()=>{var{collection:e,initializeSlideshowData:t,pageUrlModel:o}=this.props;t({collection:e,returnUrlModel:o})})),this.state={editMode:!1,albumName:this.getAlbumName()}}UNSAFE_componentWillReceiveProps(e){e.model&&e.model!==this.props.model&&this.setState({albumName:e.model.name})}UNSAFE_componentWillMount(){c.A.listen("navigatedToNewAlbum",this.onNavigatedToNewAlbum,this)}componentWillUnmount(){c.A.unListen("navigatedToNewAlbum",null,this)}componentDidUpdate(){(this.state.editMode||this.state.createMode)&&document.activeElement!==this.inputHeader&&this.inputHeader.select()}getAlbumName(){return this.props.model?this.props.model.name:(0,f.A)("amazon-photos-new-album-default-name")}backUrl(){var{backUrl:e,urls:t}=this.props;return e||t.albums}renderAlbumEditHead(){var{size:e,collection:t}=this.props,{createMode:o}=this.state,r=Number.isFinite(t.count),a=s()("edit-mode",I),i=o?(0,f.A)("amazon-photos-create-new-album"):(0,f.A)("amazon-photos-albums-renaming-header",this.props.albumName);return e.mobile,n.createElement("section",{className:a},n.createElement("form",{onSubmit:this.onEditAlbumSave},n.createElement("div",{className:"heading"},n.createElement("h1",null,n.createElement("input",{ref:e=>{this.inputHeader=e},id:"albumName",maxLength:"256",autoComplete:"off",onChange:this.onInputChange,placeholder:(0,f.A)("amazon-photos-create-album-placeholder"),onKeyDown:this.onKeyDown,"aria-labelledby":"rename-album-header",value:this.state.albumName})),r&&n.createElement(g.A,{className:"album-count",count:t.count,replace:[t.count]},"amazon-photos-album-count")),n.createElement("div",{className:"rename-album-header"},n.createElement("h5",{id:"rename-album-header"},i),n.createElement("div",null,this.state.editMode&&n.createElement(p.A,{type:"button",name:"cancel",onClick:this.onEditAlbumCancelClick},n.createElement(g.A,null,"amazon-photos-name-album-cancel")),n.createElement(p.A,{type:"submit",disabled:!this.state.albumName,name:"save",onClick:this.onEditAlbumSave},n.createElement(g.A,null,"amazon-photos-name-album-save"))))))}renderHeader(){var{selectMode:e,collection:t,model:o}=this.props;if(!o)return null;var r=Number.isFinite(t.count),a=o.name||(0,f.A)("amazon-photos-untitled-album-placeholder-name"),i=n.createElement("h1",{title:a},a);return n.createElement("div",{className:"heading"},o.belongsToCurrentUser()&&!e?n.createElement(p.A,{name:"rename-shortcut",onClick:this.onEditClick},i):i,r&&n.createElement(g.A,{className:"album-count",count:t.count,replace:[t.count]},"amazon-photos-album-count"))}renderHeadOptions(){var{group:e,model:t,size:o}=this.props,r={name:"slideshow",onClick:this.onSlideshowClick,string:"amazon-photos-slideshow",disabled:this.props.count<=0},a=[{name:"rename",onClick:this.onEditClick,string:"amazon-photos-edit-album-name"},{name:"download",onClick:this.onDownloadClick,string:"amazon-photos-download"},"trashAlbum"],i=["addPhotos","heart","share",r,"reactions"],s={share:{disabled:this.props.count<=0}};if(e&&a.push("removeFromGroup"),(o.mobile||o.tablet)&&(a=[r,"share"].concat(a),i=["heart","reactions","addPhotos"]),t){var{printingMode:l}=this.props,c=!l;if(t.belongsToCurrentUser()&&c)return n.createElement("span",{className:"options"},n.createElement(w.A,{className:"visible-options",parentContext:e?"group":"album",parentModel:e,model:t,pick:i,overrides:s}),a.length>0&&n.createElement(u.A,{name:"more",position:"right"},n.createElement(w.A,{parentModel:e,parentContext:e?"group":"album",model:t,pick:a})));if(e&&c)return n.createElement("span",{className:"options"},n.createElement(w.A,{className:"visible-options",parentContext:"group",parentModel:e,model:t,pick:[r,"heart","reactions"]}))}}renderAlbumHead(){return n.createElement("section",{className:s()(I),name:"album-head"},n.createElement(m.A,{name:"back",href:this.backUrl()},n.createElement(g.A,null,"amazon-photos-go-back-link")),this.renderHeadOptions(),this.renderHeader())}render(){var{createMode:e,editMode:t}=this.state;return e||t?this.renderAlbumEditHead():this.renderAlbumHead()}}_defineProperty(AlbumHeader,"propTypes",{backUrl:a().string,collection:a().instanceOf(d.A).isRequired,count:a().number,createMode:a().bool,group:a().instanceOf(S.A),initializeSlideshowData:a().func.isRequired,model:a().instanceOf(_.A),pageUrlModel:a().instanceOf(h.A).isRequired,printingMode:a().bool,selectMode:a().bool,size:a().shape({mobile:a().bool,tablet:a().bool,desktop:a().bool,large:a().bool}),urls:a().objectOf(a().string)});var T=(0,l.Ng)(void 0,{initializeSlideshowData:C.P4})(AlbumHeader);const k=c.A.connect(T,[{store:v.A,mapToProps:["urls"]},{store:A.A,mapToProps:["printingMode"]},{store:E.A,mapToProps:["selectMode"]},{store:b.A,mapToProps:["size"]}])},35110:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(96540),r=o(32485),a=o.n(r),i=o(35994),s=o(61738),l=o(94788),c=o(84503),scrollToTop=()=>i.A.emit("setScroll",{position:0});const d=i.A.connect((e=>{var{isScrolled:t}=e;return n.createElement("aside",{className:a()("back-to-top-btn",{visible:t})},n.createElement(c.A,{onClick:scrollToTop,name:"scroll-to-top"},n.createElement(l.A,null,"amazon-photos-top")))}),{store:s.A,mapToProps:["isScrolled"]})},8722:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(96540),r=o(5556),a=o.n(r),i=o(32485),s=o.n(i),l=o(84503),c=["className","name"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var BubbleButton=e=>{var{className:t,name:o}=e,r=_objectWithoutProperties(e,c);return n.createElement(l.A,_extends({},r,{name:o,className:s()(t||o,"bubble-button")}))};BubbleButton.propTypes={name:a().string.isRequired};const d=BubbleButton},31505:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(96540),r=o(5556),a=o.n(r),i=o(43840),s=o(47389),l=o(94788);class GroupTypeSwitcher extends n.Component{shouldComponentUpdate(e){var{commentCount:t,albumCount:o,photoCount:n}=e;return[t,o,n].some((e=>Number.isInteger(e)))}render(){var{activeType:e,albumCount:t,commentCount:o,isAlexaGroup:r,pageUrlModel:a,photoCount:s,showAlbums:c,showComments:d}=this.props;return n.createElement("nav",{className:"group-type-switcher"},n.createElement("ul",null,n.createElement("li",null,n.createElement(i.A,{href:a.setParam("contentType","photos").toString(),name:"photos",className:"photos"!==e&&e?"":"active",metricOverrides:{eventName:"ViewGroupPhotos"}},n.createElement("div",{className:"count"},Number.isInteger(s)?s:n.createElement("span",{className:"no-count"})),n.createElement(l.A,null,"amazon-photos-filter-photos"))),!r&&c&&t>0&&n.createElement("li",null,n.createElement(i.A,{href:a.setParam("contentType","albums").toString(),name:"albums",className:"albums"===e?"active":"",metricOverrides:{eventName:"ViewGroupAlbums"}},n.createElement("div",{className:"count"},Number.isInteger(t)?t:n.createElement("span",{className:"no-count"})),n.createElement(l.A,null,"amazon-photos-albums-nav"))),!r&&d&&n.createElement("li",null,n.createElement(i.A,{href:a.setParam("contentType","comments").toString(),name:"comments",className:"comments"===e?"active":"",metricOverrides:{eventName:"ViewGroupComments"}},n.createElement("div",{className:"count"},Number.isInteger(o)?o:n.createElement("span",{className:"no-count"})),n.createElement(l.A,null,"amazon-photos-reactions-dlg-header")))))}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(GroupTypeSwitcher,"propTypes",{pageUrlModel:a().instanceOf(s.A).isRequired,activeType:a().string.isRequired,photoCount:a().number,albumCount:a().number,commentCount:a().number,showComments:a().bool,showAlbums:a().bool,isAlexaGroup:a().bool});const c=GroupTypeSwitcher},91380:(e,t,o)=>{o.d(t,{h:()=>MinimalHeader});var n=o(32485),r=o.n(n),a=o(18742),i=o(97463),s=o(63734),l=o(54351),c=o(96540),d=o(83900),m=o(54205),p=o(32098),u=o(94788),h=o(77112),g=o(95871),v=o(88871),AuthenticatedMenu=()=>{var{urls:e}=(0,s.N)(a.A,(e=>({urls:e.urls}))),{cdsProfileName:t,customerId:o}=(0,s.N)(i.A,(e=>({cdsProfileName:e.cdsProfileName,customerId:e.customerId}))),n=(0,g.GV)(h.r2),r=n?{id:n,ownerId:o}:null,l=c.createElement("span",null,c.createElement(v.A,{node:r,customerName:t}),c.createElement("span",{className:"name"},t));return c.createElement(p.A,{position:"right",name:"user-settings-menu",text:l},c.createElement("ul",null,c.createElement("li",null,c.createElement(m.A,{name:"switch-accounts",href:null==e?void 0:e.switchAccounts,metricOverrides:{eventName:"SwitchAccounts",eventTag:"AccountMenu"}},c.createElement(u.A,null,"amazon-photos-switch-account-link"))),c.createElement("li",null,c.createElement(m.A,{name:"signout",href:null==e?void 0:e.signout,metricOverrides:{eventName:"SignOut",eventTag:"AccountMenu"}},c.createElement(u.A,null,"amazon-photos-sign-out-link")))))},f=o(84503),y=o(35994),b=o(1683),A=o(71086),E=o(75758),P=o(54260),_=o(1040),S=o(23152),N=o(62076),w=o(55858),C=o(82354),I=o(65329),T="ExpandableMenu",OptionsMenu=()=>{var e,t,o=(0,g.jL)(),n=(0,g.GV)(N.Cc),r=n&&n!==N.I9.groupInvite,{groupCollection:a,group:i,shareToken:l}=(0,s.N)(P.A,(e=>({groupCollection:e.collection,group:e.group,shareToken:e.shareToken}))),{shareCollection:d,albumModel:m,shareId:h}=(0,s.N)(_.A,(e=>({shareCollection:e.collection,albumModel:e.albumModel,shareId:e.shareId}))),v=a||d,k=!(null!==(e=null==m||null===(t=m.serviceProperties)||void 0===t?void 0:t.isDynamicAlbum)&&void 0!==e&&e),x=v&&v.count>0&&r,O=r&&(0,I.U)(v,m);return c.createElement(p.A,{name:"more",position:"right",onClose:()=>b.A.log("CloseOverflowMenu",{eventTag:T},A.A.getPageContext())},c.createElement("ul",null,x&&c.createElement("li",null,c.createElement(f.A,{onClick:()=>y.A.emit("lockSelectMode",{forceMobileExpand:!0}),name:"select-photos",className:"select-photos",metricOverrides:{eventName:"ClickSelectPhotos",eventTag:T}},c.createElement(u.A,null,"amazon-photos-select-start"))),O&&c.createElement("li",null,c.createElement(f.A,{name:"save-all",onClick:()=>{o((0,S.gj)([]))},metricOverrides:{eventName:"ClickCloneButton",eventTag:T}},c.createElement(u.A,null,"amazon-photos-save-all-to-amazon-photos"))),k&&c.createElement("li",null,c.createElement(C.A,{className:"download-link",collection:v,shareId:h},c.createElement(u.A,null,"amazon-photos-download-to-device"))),c.createElement("li",null,c.createElement(f.A,{onClick:()=>{var e,t=(null==i||null===(e=i.ownerProfile)||void 0===e?void 0:e.customerId)||"",o=i?E.V8:E.u_;return y.A.emit("openDialog",{component:w.A,props:{shareType:o,nodeId:null,shareId:l||h,ownerId:t}})},name:"report-abuse"},c.createElement(u.A,null,"amazon-photos-report-abuse")))))},k=o(47389),SignInButton=()=>{var e=a.A.getProperty("urls.authPortal"),t=new k.A(e),{hostname:o,pathname:n,protocol:r}=window.location;return t.setParam("siteState","".concat(r,"//").concat(o).concat(n)),c.createElement(m.A,{name:"sign-in",metricOverrides:{eventName:"SignIn"},href:t.toString(),className:"signed-out"},c.createElement(u.A,null,"amazon-photos-sign-in-link"))},x=["SharedLanding","SharedLandingSPV","ShareLanding","ShareLandingSPV"],MinimalHeader=()=>{var e=(0,s.N)(i.A,(e=>e.authenticated)),t=(0,s.N)(a.A,(e=>e.urls.baseAppUrl)),o=(0,d.A)(x),n=r()({"header-with-options-menu":o});return c.createElement("header",{id:"primary-header",className:n},c.createElement("section",{className:"inner"},c.createElement("a",{className:"photos-link",href:t},c.createElement("figure",{className:"photos-logo desktop"},c.createElement(l.A,null,"logo-photos-2021")),c.createElement("figure",{className:"photos-logo mobile-web"},c.createElement(l.A,null,"logo-photos-2021"))),c.createElement("div",{id:"expandable-menus"},e?c.createElement(AuthenticatedMenu,null):c.createElement(SignInButton,null),o&&c.createElement(OptionsMenu,null))))}},14768:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(96540),r=o(5556),a=o.n(r),i=o(43840),s=o(32098),l=o(94788),c=o(68865),d=o(54318);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}var NodeHeader=e=>{var t,o,r,{additionalOptions:a,addReactionOnJoin:m,backUrl:p,faceEditingVisible:u,favoriteButton:h,handleSlideshowClick:g,headerTagProps:v,hideActions:f,hideReactions:y,hideOverflowOptions:b,hideZoom:A,isSharedPage:E,isZoomed:P,model:_,onFaceEditClick:S,onReportAbuseClick:N,onToggleZoom:w,onMouseEnter:C,onMouseLeave:I,parentContext:T,parentModel:k,reportAbuseVisible:x,shareMode:O,showFavorite:M,showHide:z,toggleDetails:D}=e;t=A?"":P?{name:"zoomOut",onClick:w,string:"amazon-photos-zoom-out"}:{name:"zoomIn",onClick:w,string:"amazon-photos-zoom-in"},M&&_&&_.belongsToCurrentUser()&&(o={name:"toggleFavorite",component:h}),g&&(r={name:"slideshow",onClick:g,string:"amazon-photos-slideshow"});var F=["heart","livePhoto","addToFamilyArchive","removeFromFamilyArchive","share",o,t,r,...(0,d.Gg)()?["edit"]:[],"reactions","info","trash"];O&&F.push("download");var R=O&&(null==_?void 0:_.belongsToUser);if(a)for(var j=0;j<a.length;j++)F.splice(a[j].position||0,0,a[j]);return n.createElement("header",_extends({},v,{className:"node-gallery-header",onMouseEnter:C,onMouseLeave:I}),p&&n.createElement(i.A,{name:"back",href:p},n.createElement(l.A,null,"amazon-photos-go-back-link")),!f&&n.createElement(c.A,{model:_,pick:F,parentModel:k,parentContext:T,hideReactions:y,shareMode:O,toggleDetails:D,className:"visible-options",isSharedPage:E,addReactionOnJoin:m}),!f&&!b&&!R&&n.createElement(s.A,{position:"right",name:"node-options-more",className:"more"},n.createElement(c.A,{model:_,parentModel:k,parentContext:T,omit:F,faceEditingVisible:u,onFaceEditClick:S,reportAbuseVisible:x,onReportAbuseClick:N,shareMode:O,showHide:z})))};NodeHeader.propTypes={additionalOptions:a().arrayOf(a().oneOfType([a().string,a().object])),addReactionOnJoin:a().func,backUrl:a().string,faceEditingVisible:a().bool,favoriteButton:a().element,handleSlideshowClick:a().func,headerTagProps:a().object,hideActions:a().bool,hideReactions:a().bool,hideOverflowOptions:a().bool,hideZoom:a().bool,isSharedPage:a().bool,isZoomed:a().bool,model:a().object.isRequired,onFaceEditClick:a().func,onReportAbuseClick:a().func,onToggleZoom:a().func,parentContext:a().string,parentModel:a().object,reportAbuseVisible:a().bool,shareMode:a().bool,showFavorite:a().bool,showHide:a().bool,toggleDetails:a().func};const m=NodeHeader},39655:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(96540),r=o(71468),a=o(94788),i=o(13489),s=o(1683),l=o(71086),c=o(41543);const d="outage-banner-module__outageBanner__wUtJh",m="outage-banner-module__icon__RtBsB";var p="OutageInfoShown";const u=(0,r.Ng)((e=>{var{outage:t}=e;return{hasLoggedShownMetric:t.hasLoggedShownMetric,isActiveGenericOutage:t.isActiveGenericOutage,hasFetchedOutageStatus:t.hasFetchedOutageStatus}}),(e=>({getOutageConfig:()=>e((0,c.iY)()),dispatchSetLoggedShownMetric:()=>e((0,c.ep)())})))((e=>{var{dispatchSetLoggedShownMetric:t,getOutageConfig:o,hasLoggedShownMetric:r,isActiveGenericOutage:c,hasFetchedOutageStatus:u}=e;return(0,n.useEffect)((()=>{u||o()}),[]),(0,n.useEffect)((()=>{c&&!r&&(i.A.log({name:p}),s.A.log(p,void 0,l.A.getPageContext()),t())}),[c,u]),c?n.createElement("div",{className:d},n.createElement("div",{className:m}),n.createElement(a.A,null,"amazon-photos-notification-banner-outage-generic")):null}))},46756:(e,t,o)=>{o.d(t,{A:()=>PageHeader});var n=o(96540),r=o(32485),a=o.n(r);function PageHeader(e){var{className:t,children:o}=e;return n.createElement("header",{className:a()("page-header",t)},o)}},80442:(e,t,o)=>{o.d(t,{A:()=>J});var n=o(55378),r=o.n(n),a=o(38221),i=o.n(a),s=o(63950),l=o.n(s),c=o(96540),d=o(5556),m=o.n(d),p=o(32485),u=o.n(p),h=o(71468),g=o(35994),v=o(59786),f=o(84503),y=o(42852),b=o(51158),A=o(60788),E=o(61738),P=o(40959),_=o(57717),S=o(92034),N=o(30009),w=o(49404),C=o(77112),I=o(58156),T=o.n(I),k=o(50014),x=o.n(k),O=o(87612),M=o.n(O),z=o(64112),D=o.n(z),F=o(19747),R=o.n(F),j=o(14324),L=o(17667),U=o(94788),G=o(88871),V=o(72234),W=o(60730),B=o(88339),H=o(54318);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class SectionHeader extends c.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{models:void 0}),_defineProperty(this,"selectAllInSection",(()=>{var{isSelected:e,selectItems:t,deselectItems:o}=this.props,{models:n}=this.state;n&&n.length&&(R()(n,(t=>t&&e(t.id)))?o(n):t(n))})),_defineProperty(this,"shareAllInSection",(()=>{var{deselectAll:e,openShareDialog:t}=this.props;e(),D()((()=>{this.selectAllInSection(),t()}))}))}UNSAFE_componentWillMount(){var{collection:e,startIndex:t,endIndex:o,isComplete:n}=this.props;if(n){var r=e.getByIndexRange(t,o,{synchronous:!0});this.setState({models:r})}}UNSAFE_componentWillReceiveProps(e){var{collection:t,startIndex:o,endIndex:n,isComplete:r,collectionUID:a}=this.props;if(e.isComplete!==r||a!==e.collectionUID||o!==e.startIndex||n!==e.endIndex){if(!e.isComplete)return;var i=t.getByIndexRange(e.startIndex,e.endIndex,{synchronous:!0});this.setState({models:i})}}render(){var e,{label:t,count:o,isComplete:n,contributorData:a,isSelected:i,singleSelect:s,selectionLocked:l,showShareButton:d,disableSelection:m,startIndex:p,displayOptions:h}=this.props,{models:g}=this.state,v=o>0&&n,y=o>0&&n&&!m&&!s,b=d&&y&&!l,A=0===p,E=!1;g&&n&&(E=R()(g,(e=>e&&i(e.id))));var P=u()("count-select",{active:E});if(g&&a){var _=M()(g,(e=>Boolean(e))),S=x()(r()(_,(e=>e.ownerId)));e=c.createElement("ul",{className:"contributors"},r()(S,(e=>{var t=a[e],o=T()(t,"avatar.color"),n=T()(t,"name"),r=t?{id:t.avatarNodeId,ownerId:t.customerId}:null;return c.createElement("li",{key:e},c.createElement(G.A,{node:r,color:o,customerName:n}))})))}return c.createElement("div",{className:"section-header"},y&&c.createElement(f.A,{className:P,name:"select-section",onClick:this.selectAllInSection}),b&&c.createElement(f.A,{name:"share-section",onClick:this.shareAllInSection},c.createElement(U.A,null,"amazon-photos-share-link")),c.createElement("span",{className:"label"},t),v&&c.createElement(U.A,{className:"count",replace:[(0,V.A)(o)],count:o},"amazon-photos-section-header-count"),e,A&&h)}}_defineProperty(SectionHeader,"propTypes",{collectionUID:m().string.isRequired,isSelected:m().func.isRequired,selectionLocked:m().bool,singleSelect:m().bool,deselectAll:m().func.isRequired,selectItems:m().func.isRequired,deselectItems:m().func.isRequired,openShareDialog:m().func.isRequired,startIndex:m().number.isRequired,endIndex:m().number.isRequired,collection:m().instanceOf(b.A).isRequired,label:m().node.isRequired,showShareButton:m().bool,disableSelection:m().bool,count:m().number.isRequired,isComplete:m().bool,contributorData:m().object});var deselectAll=()=>g.A.emit("deselectAll"),selectItems=e=>g.A.emit("selectItem",e),deselectItems=e=>g.A.emit("unselectItem",e),openShareDialog=()=>{L.A.isOn(H.jy.GroupsEnabled)?g.A.emit("openDialog",c.createElement(W.A,null)):g.A.emit("openDialog",c.createElement(B.A,null))};const q=g.A.connect(SectionHeader,{store:j.A,mapToProps:e=>{var{selection:t,selectionOptions:o}=e,{locked:n,singleSelect:r}=o;return{isSelected:function isSelected(){return t.isSelected(...arguments)},selectionLocked:n,singleSelect:r,deselectAll,selectItems,deselectItems,openShareDialog}}});function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){photo_browser_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function photo_browser_defineProperty(e,t,o){return(t=function photo_browser_toPropertyKey(e){var t=function photo_browser_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var K=[w.o.mosaic,w.o.gridSmall,w.o.gridMedium,w.o.gridLarge],Z={"grid-sm":{mobile:3,tablet:4,desktop:6},"grid-med":{mobile:2,tablet:3,desktop:4},"grid-lg":{mobile:1,tablet:2,desktop:3}};class PhotoBrowser extends c.PureComponent{constructor(e){super(e),photo_browser_defineProperty(this,"onRowsRendered",((e,t)=>{this.scrubberInstance&&this.scrubberInstance.setPosition(e,t)})),photo_browser_defineProperty(this,"setDisplayType",((e,t)=>{var{displayType:o}=t,{displayOptions:n,setGridViewPreferredDisplayAction:r}=this.props;if(o===this.getDisplayType()&&n.length>1){var a=n.indexOf(o),i=n[a+1]||n[0];return this.setDisplayType(e,{displayType:i})}-1!==K.indexOf(o)&&r(o)})),photo_browser_defineProperty(this,"scrollToNode",i()((e=>{this.scrollerInstance&&this.scrollerInstance.scrollToNodeIndex(e,{force:!0})}),100)),photo_browser_defineProperty(this,"registerScrubber",(e=>{this.scrubberInstance=e})),photo_browser_defineProperty(this,"registerScroller",(e=>{this.scrollerInstance=e})),photo_browser_defineProperty(this,"renderSection",(e=>{var{key:{label:t}={},startIndex:o,endIndex:n,count:r,isComplete:a}=e,{collection:i,contributorData:s,showShareButton:l,uid:d}=this.props;return c.createElement(q,{collectionUID:d,label:t,startIndex:o,endIndex:n,count:r,showShareButton:l,isComplete:a,collection:i,contributorData:s})})),photo_browser_defineProperty(this,"renderItems",(e=>{var t,{models:o,width:n,onSelectShiftClick:a}=e,i=this.getDisplayType(),{children:s,size:l}=this.props,{shouldCenterSingleItem:d}=this.state;return i===K[0]?c.createElement(_.A,{models:o,itemSpacing:2,width:n,centerLastItem:d},(e=>s(_objectSpread(_objectSpread({},e),{},{onSelectShiftClick:a})))):(t=d?l.mobile?n:.5*n:function getItemDimensionsFromWidth(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{mobile:n,tablet:r,desktop:a}=Z[t],i=a;return o.mobile?i=n:o.tablet&&(i=r),Math.round(e/i-2)}(n,i,l),r()(o,((e,o)=>s({height:t,index:o,model:e,onSelectShiftClick:a,width:t}))))})),this.state={disabled:!1,shouldCenterSingleItem:1===e.collection.count&&e.centerSinglePhoto};var{activeNodeId:t}=e;t&&(this.state.disabled=!0)}componentDidUpdate(e){var{activeNodeId:t,centerSinglePhoto:o,collection:n}=e,{disabled:r}=this.state;r&&!t&&this.setState({disabled:!1});var a=1===n.count&&o;this.setState({shouldCenterSingleItem:a})}getDisplayType(){var{displayOptions:e,gridViewPreferredDisplay:t}=this.props;return e.includes(t)?t:e[0]}renderOptions(){var e=this.getDisplayType(),{pageUrlModel:t,currentSort:o,sortOptions:n,displayOptions:a}=this.props,i=a.length>1,s=n.length>1&&t;return i||s?c.createElement("nav",{className:"options"},s&&c.createElement("div",{className:"sort"},c.createElement(S.A,{options:n,selectedSort:o,pageUrlModel:t,navPosition:"right"})),i&&c.createElement("ul",{className:"display-types"},r()(a,(t=>c.createElement("li",{key:t},c.createElement(f.A,{name:"set-display-type",metricOverrides:{eventTag:t},className:u()(t,{active:t===e}),displayType:t,label:(0,w.I)(t),onClick:this.setDisplayType})))))):null}render(){var e,t,{disabled:o,shouldCenterSingleItem:n}=this.state,{className:r,collection:a,currentSort:i,beforeScroller:s,afterScroller:d,placeSection:m,hideInactiveScrubber:p,emptyState:h,hideScrubber:g,overscanCount:v,query:f}=this.props,{complete:y,count:b}=a,E=this.getDisplayType(),_="mosaic"!==E,S=b>0;if(o)return null;a instanceof A.A?(e=!S&&!y,t=!S&&y):(t=0===b,e=void 0===b);var w=n?"centered-single-item":"";return c.createElement("div",{className:u()("photo-browser",r,E,w)},e&&c.createElement("div",{className:"loading"}),t&&h,!t&&this.renderOptions(),!g&&f&&b<3e5&&c.createElement(N.A,{selectedYear:f.timeYear,selectedMonth:f.timeMonth,requestScrollToIndex:this.scrollToNode,internalRef:this.registerScrubber,collection:a,hideWhenInactive:p}),!t&&!e&&c.createElement(P.A,{after:d,before:s,collection:a,currentSort:i,displayType:E,internalRef:this.registerScroller,onRowsRendered:this.onRowsRendered,overscanRowCount:v,pageSize:12,placeSection:m||l(),registerCollection:!0,renderSection:this.renderSection,useGridLayout:_,useWindowScroll:!0},this.renderItems))}}photo_browser_defineProperty(PhotoBrowser,"propTypes",{activeNodeId:m().string,afterScroller:m().arrayOf(m().node),beforeScroller:m().arrayOf(m().node),centerSinglePhoto:m().bool,children:m().func.isRequired,className:m().string,collection:m().instanceOf(b.A).isRequired,contributorData:m().object,currentSort:m().string,displayOptions:m().arrayOf(m().oneOf(K)),emptyState:m().node.isRequired,gridViewPreferredDisplay:m().string,hideInactiveScrubber:m().bool,hideScrubber:m().bool,overscanCount:m().number,pageUrlModel:m().instanceOf(v.A),placeSection:m().func,showShareButton:m().bool,size:m().shape({mobile:m().bool,tablet:m().bool,desktop:m().bool}),sortOptions:m().arrayOf(m().string),query:m().shape({timeYear:m().string,timeMonth:m().string})}),photo_browser_defineProperty(PhotoBrowser,"defaultProps",{placeSection:l(),displayOptions:K,sortOptions:["sortDateTaken","sortDateUploaded"],showShareButton:!0,overscanCount:2,gridViewPreferredDisplay:K[0]});var X=g.A.connect((0,y.A)(PhotoBrowser),[{store:E.A,mapToProps:["size"]}]);const J=(0,h.Ng)((e=>{var{accountSettings:t}=e;return{gridViewPreferredDisplay:t.gridViewPreferredDisplay}}),{setGridViewPreferredDisplayAction:C.JD})(X)},44541:(e,t,o)=>{o.d(t,{A:()=>Q});var n=o(96540),r=o(32485),a=o.n(r),i=o(35994),s=o(43840),l=o(84503),c=o(54351),d=o(7138),m=o(21572),p=o(9029),u=o(65536),h=o(14127),g=o(63734),v=o(94788),f=o(32098),y=o(54205),b=o(18742),A=o(97463),E=o(17667),P=o(88871),_=o(77112),S=o(54318),N=o(95871),w=o(96721);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}const user_settings_menu=()=>{var{urls:e,client:t}=(0,g.N)(b.A,(e=>({urls:e.urls,client:e.client}))),{currentSubscription:o,hasPrime:r}=(0,g.N)(w.A,(e=>({currentSubscription:e.currentSubscription,hasPrime:e.hasPrime}))),{cdsProfileName:a,customerId:i,marketplaceId:l,language:c}=(0,g.N)(A.A,(e=>({cdsProfileName:e.cdsProfileName,customerId:e.customerId,marketplaceId:e.marketplaceId,language:e.language}))),d=(0,N.GV)(_.r2),m={build_version:t.build,application_id:t.clientName,client_id:t.clientId,os_version:t.devicePlatform||t.osVersion,customer_id:i,marketplace:l,language:c,is_prime_customer:r,user_agent_string:window.navigator.userAgent,feedback_url:window.document.location.href,has_subscription:Boolean(o),is_auto_renew:null==o?void 0:o.autoRenewEnabled,plan_id:null==o?void 0:o.planId},p=Object.entries(m).filter((e=>{var[t,o]=e;return void 0!==o})).map((e=>{var[t,o]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(o))})).join("&"),u="".concat(e.feedbackForm,"?").concat(p),h=d?{id:d,ownerId:i}:null,C=n.createElement("span",null,n.createElement(P.A,{node:h,customerName:a,customerId:i}),n.createElement("span",{className:"name"},a));return n.createElement(f.A,{position:"right",name:"user-settings-menu",text:C},n.createElement("ul",null,n.createElement("li",null,n.createElement(s.A,{name:"settings",href:"".concat(e.settings,"?returnUrl=").concat(window.location.pathname)},n.createElement(v.A,null,"amazon-photos-settings-link"))),n.createElement("li",null,n.createElement(y.A,{name:"feedback",href:u,target:"_blank"},n.createElement(v.A,null,"amazon-photos-send-feedback"))),n.createElement("li",null,n.createElement(y.A,{name:"help",href:e.help,target:"_blank"},n.createElement(v.A,null,"amazon-photos-help-link"))),n.createElement("li",null,(()=>{var{shareList:t}=e,o=s.A,r="".concat(t,"?backUrl=").concat(window.location.pathname);return n.createElement(o,_extends({name:"share-history",className:"share-history",href:r},{}),n.createElement(v.A,null,"amazon-photos-shared-history"))})()),E.A.isOn(S.jy.GroupsEnabled)&&n.createElement("li",null,n.createElement(s.A,{name:"blocked-contacts",href:"".concat(e.blockedContacts,"?backUrl=").concat(window.location.pathname)},n.createElement(v.A,null,"amazon-photos-blocked-contact"))),n.createElement("li",{className:"separator"},n.createElement(s.A,{name:"hidden-items",href:e.hidden},n.createElement(v.A,null,"amazon-photos-hidden-items-link"))),n.createElement("li",null,n.createElement(y.A,{name:"switch-accounts",href:e.switchAccounts,metricOverrides:{eventName:"SwitchAccounts",eventTag:"AccountMenu"}},n.createElement(v.A,null,"amazon-photos-switch-account-link"))),n.createElement("li",null,n.createElement(y.A,{name:"signout",onClick:t=>{t.preventDefault();var signout=()=>{window.location.href=e.signout},o=document.createElement("iframe");o.style.display="none",document.body.appendChild(o),o.title="signout",o.onload=signout,o.onerror=signout,o.src=e.printsSignout},href:e.signout,metricOverrides:{eventName:"SignOut",eventTag:"AccountMenu"}},n.createElement(v.A,null,"amazon-photos-sign-out-link")))))};var C=o(62193),I=o.n(C),T=o(84684),k=o.n(T),x=o(5556),O=o.n(x),M=o(1683),z=o(47389),D=o(23897),F=o(74169),R=o(31194),j=o(70476);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var L="Generic",U="AutoComplete",G="Semantic",V=["amazon-photos-search-semantic-example-1","amazon-photos-search-semantic-example-2","amazon-photos-search-semantic-example-3"],W={"amazon-photos-search-semantic-example-1":"Graduation","amazon-photos-search-semantic-example-2":"Friends","amazon-photos-search-semantic-example-3":"Sunset"};class SearchField extends n.Component{constructor(){super(),_defineProperty(this,"state",{placeholderString:""}),_defineProperty(this,"loggedNullAutoComplete",!1),_defineProperty(this,"placeholderStringIDs",[]),_defineProperty(this,"buildPlaceholderStrings",(()=>{var e=[];return E.A.isOn("things")&&e.push("amazon-photos-search-placeholder-things"),E.A.isOn("places")&&e.push("amazon-photos-search-placeholder-places"),E.A.isOn("people")&&e.push("amazon-photos-search-placeholder-people"),e})),_defineProperty(this,"onSubmit",(e=>{e.preventDefault();var{value:t}=this.props,o=(0,u.u)()?G:L;this.performSearch({value:t,source:o})})),_defineProperty(this,"onItemSelect",(e=>{var t,{pageContext:o}=this.context;"albums"===e.category?(this.suggest(),i.A.emit("searchRequested",{source:"".concat(U,":Album"),pageContext:o}),new z.A("".concat(F.DS.album,"/").concat(e.searchData.nodeId)).go()):(t="location"===e.category?e.searchData.locationId:"people"===e.category?e.searchData.clusterId:"things"===e.category?e.searchData.thingId:e.term,e.semanticExampleEventTag&&(0,u.u)()&&e.category===D.h.ALL&&M.A.log("SemanticExampleTapped",{eventTag:e.semanticExampleEventTag},o),this.performSearch({source:U,category:e.category,value:t}))})),_defineProperty(this,"onInputFocus",(()=>{var{value:e}=this.props,{pageContext:t}=this.context;M.A.log("SearchStart",{},t),this.suggest(e)})),_defineProperty(this,"onInputChange",(e=>{this.suggest(e),e||this.setSearchPlaceholder()})),_defineProperty(this,"setSearchPlaceholder",(()=>{var e=Math.round(Math.random()*(this.placeholderStringIDs.length-1)),t=this.placeholderStringIDs[e];if(t){var o=(0,m.A)(t);this.setState({placeholderString:o})}})),_defineProperty(this,"listItemRenderer",(e=>{var{value:t}=this.props;return n.createElement("div",{className:e.category},n.createElement(R.A,{text:e.term,highlight:t,onlyBeginning:!0}))})),this.placeholderStringIDs=this.buildPlaceholderStrings()}componentDidMount(){this.setSearchPlaceholder()}suggest(e){i.A.emit("searchAutoComplete",{query:e})}performSearch(e){var{pageContext:t}=this.context;k()(e,{source:L,category:"all",value:""});var o=e.value.trim();if(!I()(o)){var n=new z.A("\n            ".concat(F.DS.search,"/").concat(encodeURIComponent(e.category),"/").concat(encodeURIComponent(o),"\n        "));if(e.source===U)switch(e.category){case D.h.LOCATION:e.source="".concat(U,":Place");break;case D.h.PEOPLE:e.source="".concat(U,":People")}i.A.emit("searchRequested",{source:e.source,pageContext:t}),n.go(),i.A.emit("setScroll",{position:0,transition:!0})}}itemToString(e){var t;return null!==(t=null==e?void 0:e.term)&&void 0!==t?t:""}render(){var{limit:e,value:t,result:o,maxLength:r}=this.props,{placeholderString:a}=this.state,i=(0,u.u)()?(0,m.A)("amazon-photos-search-semantic-placeholder"):a,s=V.map((e=>({category:"all",term:(0,m.A)(e),semanticExampleEventTag:W[e]}))),c=(0,u.u)()&&I()(t)&&I()(o),d=c?s:o;return n.createElement("form",{id:"search-field",action:F.DS.search,onSubmit:this.onSubmit},n.createElement(j.Ay,{onChange:this.onInputChange,onFocus:this.onInputFocus,listItemRenderer:this.listItemRenderer,itemToString:this.itemToString,onItemSelect:this.onItemSelect,placeholder:i,title:i,value:t,disabled:!(0,u.K)(),result:d,limit:e,accessibilityLabel:(0,m.A)("amazon-photos-accessibility-search-bar"),maxLength:r,shouldShowExamplesHeader:c}),n.createElement(l.A,{name:"search-submit",type:"submit",disabled:!(0,u.K)()}))}}_defineProperty(SearchField,"contextTypes",{pageContext:O().string.isRequired}),_defineProperty(SearchField,"propTypes",{limit:O().number,maxLength:O().number}),_defineProperty(SearchField,"defaultProps",{limit:5,maxLength:256});const B=i.A.connect(SearchField,[{store:p.h,mapToProps:["result","value"]}]);var H=o(71086),q=o(11747);const K="order-prints-button-module__orderPrintsHeaderBtn__Je392";function order_prints_button_defineProperty(e,t,o){return(t=function order_prints_button_toPropertyKey(e){var t=function order_prints_button_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class OrderPrintsButton extends n.Component{constructor(){super(...arguments),order_prints_button_defineProperty(this,"onBuyPrintsClick",(()=>{var{eventTag:e}=this.props,t={eventName:"EnterPrintsHome",eventTag:e,pageContext:H.A.getPageContext()};(0,q.A)(t)}))}render(){return E.A.isOff(S.jy.PhotosPrinting)?null:(0,S.L2)()?n.createElement("div",null,n.createElement(l.A,{name:K,onClick:this.onBuyPrintsClick,label:(0,m.A)("amazon-photos-buy-prints-content")},n.createElement(v.A,null,"amazon-photos-buy-prints-content"))):n.createElement(l.A,{name:K,onClick:this.onBuyPrintsClick,label:(0,m.A)("amazon-photos-buy-prints-content")},n.createElement(v.A,null,"amazon-photos-buy-prints-content"))}}const Z=OrderPrintsButton;var X=o(59786),J=o(24764),Y=o(55319);class AddButton extends n.Component{constructor(e){super(e);var{device:t}=e,o=document.createElement("input");this.isMobileOrIOS=t.isMobile||t.isIOS,this.hasUploadFolderSupport=Boolean("webkitdirectory"in o)&&!this.isMobileOrIOS,this.isFireTablet=t.isFireTablet}onCreateAlbumClick(){(0,Y.A)({},{eventTag:"AddMenu"})}_getDesktopAppLink(){var{urls:e}=this.props;return!this.isMobileOrIOS&&!this.isFireTablet&&new X.A(e.desktopLink).setParam("ref_","IP_US_X_P_UB_SC_428_synclink").toString()}render(){var e=this._getDesktopAppLink();return n.createElement(f.A,{label:(0,m.A)("amazon-photos-add-button"),text:n.createElement(v.A,null,"amazon-photos-add-button"),position:"center",name:"add-menu",className:"add-content-header-btn"},n.createElement("ul",null,n.createElement("li",null,n.createElement(J.A,{name:"upload-files-link"},n.createElement(v.A,{className:"label"},"amazon-photos-upload-button"),n.createElement(v.A,null,"amazon-photos-add-content"))),this.hasUploadFolderSupport&&n.createElement("li",null,n.createElement(J.A,{name:"upload-folder-link",selectionType:"folder"},n.createElement(v.A,{className:"label"},"amazon-photos-upload-folder-button"))),n.createElement("li",null,n.createElement(l.A,{name:"create-album-link",onClick:this.onCreateAlbumClick},n.createElement(v.A,{className:"label"},"amazon-photos-create-album"))),e&&n.createElement("li",{className:"desktop-app"},n.createElement(y.A,{name:"desktop-app-link",href:e},n.createElement(v.A,{replace:n.createElement(v.A,{className:"highlight"},"amazon-photos-desktop-app")},"amazon-photos-upload-with-app")))))}}const $=i.A.connect(AddButton,[{store:b.A,mapToProps:["urls","device"]}]);function primary_header_defineProperty(e,t,o){return(t=function primary_header_toPropertyKey(e){var t=function primary_header_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var goToTop=()=>{i.A.emit("setScroll",0)};class PrimaryHeader extends((0,d.A)(n.Component)){constructor(){super(...arguments),primary_header_defineProperty(this,"onToggleMobileSearch",(()=>{i.A.emit("toggleMobileSearch")}))}render(){var e=a()({"mobile-search-mode":this.props.isMobileSearchVisible});return n.createElement("header",{id:"primary-header",className:e},n.createElement("section",{className:"inner"},n.createElement("figure",{className:"mobile-menu-disabled"}),n.createElement(s.A,{onClick:goToTop,name:"photos-link",href:"/"},n.createElement("figure",{className:"photos-logo desktop"},n.createElement(c.A,{alt:(0,m.A)("amazon-photos-app-title")},"logo-photos-2021")),n.createElement("figure",{className:"photos-logo mobile-web"},n.createElement(c.A,{alt:(0,m.A)("amazon-photos-app-title")},"logo-photos-mobile-2021"))),n.createElement("div",{className:"search-container"},(0,u.K)()&&n.createElement(h.A,{attribution:"search-field"},n.createElement(l.A,{label:(0,m.A)("amazon-photos-accessibility-search-bar"),name:"open mobile-search-button",onClick:this.onToggleMobileSearch,disabled:this.props.isMobileSearchVisible}),n.createElement(B,null),n.createElement(l.A,{name:"close mobile-search-button",onClick:this.onToggleMobileSearch}))),n.createElement($,null),n.createElement(Z,{eventTag:"PrintsSideBar"}),n.createElement(user_settings_menu,null)))}}const Q=i.A.connect(PrimaryHeader,{store:p.h,mapToProps:["isMobileSearchVisible"]})},46698:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(96540),r=o(71468),a=o(5556),i=o.n(a),s=o(32485),l=o.n(s),c=o(74692),d=o.n(c),m=o(35994),p=o(84503),u=o(72470),h=o(9029),g=o(339),v=o(35110);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class SideNavWrapper extends n.Component{constructor(){super(...arguments),_defineProperty(this,"state",{isDragging:!1}),_defineProperty(this,"onExpandClick",(()=>{var{toggleSideNav:e}=this.props;e()})),_defineProperty(this,"onBackToTopClick",(()=>{m.A.emit("setScroll",{position:0,transition:!0})})),_defineProperty(this,"onDragStart",(()=>{this.setState({isDragging:!0})})),_defineProperty(this,"onDragMove",(e=>{if(this.wrapper){var{posX:t}=this.state,o=this.wrapper.clientWidth;void 0===t&&(t=parseInt(d()(this.wrapper).css("left"),10)),t+=e.offsetX,t=Math.max(Math.min(t,0),-o),this.setState({posX:t})}})),_defineProperty(this,"onDragEnd",(()=>{this.setState({isDragging:!1,posX:void 0})})),_defineProperty(this,"onSwipe",(e=>{var{toggleSideNav:t,isOpen:o}=this.props;("left"===e&&o||"right"===e&&!o)&&t()}))}componentWillUnmount(){var{closeSideNav:e}=this.props;e()}render(){var e,{isDragging:t,posX:o}=this.state,{isOpen:r,children:a,isMobileSearchVisible:i,showBackToTop:s}=this.props,c=l()("side-nav","wrapper",{open:r,dragging:t}),d={onStart:this.onDragStart,onEnd:this.onDragEnd,onMove:this.onDragMove,onSwipe:this.onSwipe};return void 0!==o&&(e={left:o}),n.createElement("nav",{ref:e=>{this.wrapper=e},className:c,style:e},s&&n.createElement(v.A,null),n.createElement(u.A,_extends({className:"menu-backdrop"},d,{onClick:r?this.onExpandClick:null})),n.createElement(u.A,_extends({className:"menu-expand-container"},d,{allowMouse:!1}),n.createElement(p.A,{name:"menu-expand",disabled:i,onClick:this.onExpandClick})),n.createElement("div",{className:"inner"},a))}}_defineProperty(SideNavWrapper,"propTypes",{showBackToTop:i().bool,isMobileSearchVisible:i().bool,children:i().node.isRequired,closeSideNav:i().func,toggleSideNav:i().func,isOpen:i().bool}),_defineProperty(SideNavWrapper,"defaultProps",{showBackToTop:!0});var f=m.A.connect(SideNavWrapper,{store:h.h,mapToProps:["isMobileSearchVisible"]}),y={closeSideNav:g.NL,toggleSideNav:g.x8};const b=(0,r.Ng)((e=>{var{sideNav:t}=e;return t}),y)(f)},67517:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(42026),a=["header"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var i="amazon-photos-albums-search-empty-state-header";const __WEBPACK_DEFAULT_EXPORT__=e=>{var{header:t=i}=e,o=_objectWithoutProperties(e,a);return n.createElement(r.A,_extends({header:t},o),o.children)}},32216:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(96540),r=o(52306),a=o.n(r),i=o(5556),s=o.n(i),l=o(94788),c=o(84503),d=o(69391),m=o(14324),p=o(55319),u=o(42026),h=["createMode","album"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}const g=a()((0,d.A)("AlbumEmptyState",{UNSAFE_componentWillMount(){m.A.pickComponentState(this,["selectMode"])},componentWillUnmount(){m.A.endComponentState(this)},propTypes:{createMode:s().bool,album:s().shape({kind:s().oneOf(["VISUAL_COLLECTION"])})},getDefaultProps:()=>({createMode:!1,sceneContent:n.createElement("img",{alt:"Albums",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-album.png"}),header:"amazon-photos-album-empty-state-header",body:"amazon-photos-album-empty-state-body"}),onButtonClick(){(0,p.A)(this.props.album,{eventTag:"AlbumEmptyState"})},render(){var e,t=this.props,{createMode:o,album:r}=t,a=_objectWithoutProperties(t,h),i=r&&r.belongsToCurrentUser();return o&&(a.header=null,a.body=null),i||(a.body=null),i&&!this.state.selectMode&&(e=n.createElement(c.A,{className:"button",name:"add-to-album",onClick:this.onButtonClick},n.createElement(l.A,null,"amazon-photos-albums-empty-state-button"))),n.createElement(u.A,_extends({},a,{name:"AlbumEmptyState"}),e,this.props.children)}}))},455:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(21572),r=o(84503),a=o(14324),i=o(97463),s=o(35994),l=o(63734),c=o(96540),d=o(24764),m=o(55319),p=o(42026),u=o(76292),SplashImage=()=>c.createElement("img",{alt:"Albums",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-album.png"}),ContentForEmptyAccount=()=>{var e=(0,l.N)(a.A,(e=>e.selectMode));return c.createElement(p.A,{sceneContent:c.createElement(SplashImage,null),header:"amazon-photos-albums-no-photos",body:"amazon-photos-albums-upload-photos"},!e&&c.createElement(d.A,{name:"upload-photos",className:"button"},(0,n.A)("amazon-photos-albums-upload-photos-button")))},ContentForAccountWithMedia=()=>{var e=(0,l.N)(a.A,(e=>e.selectMode));return c.createElement(p.A,{sceneContent:c.createElement(SplashImage,null),header:"amazon-photos-albums-empty-state-header",body:"amazon-photos-albums-empty-state-body"},!e&&c.createElement(r.A,{name:"create-album",className:"button",onClick:()=>{(0,m.A)({},{eventTag:"AlbumsEmptyState"})}},(0,n.A)("amazon-photos-create-new-album")))};const __WEBPACK_DEFAULT_EXPORT__=()=>{var e=(0,l.N)(i.A,(e=>e.hasContent));return(0,c.useEffect)((()=>{s.A.emit("updateAccountStatus")}),[]),c.createElement(u.A,null,e?c.createElement(ContentForAccountWithMedia,null):c.createElement(ContentForEmptyAccount,null))}},42026:(e,t,o)=>{o.d(t,{A:()=>p,g:()=>m});var n=o(49907),r=o(5556),a=o.n(r),i=o(96540),s=o(42749),l=o(94788),c=o(32485),d=o.n(c);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class DefaultEmptyState extends i.Component{renderScene(){var{sceneName:e,sceneContent:t}=this.props,o=e&&i.createElement("div",{className:d()("scene",e)});return t||o||null}renderHeader(){var{header:e,headerContent:t}=this.props,o=e&&i.createElement("h3",null,i.createElement(l.A,null,e));return t||o||null}renderBody(){var{body:e,bodyContent:t}=this.props,o=e&&i.createElement("p",null,i.createElement(l.A,null,e));return t||o||null}render(){var{children:e,className:t,beacon:o,beaconStatus:r}=this.props,a=d()(t,"empty-state");return i.createElement("div",{className:a},this.renderScene(),this.renderHeader(),this.renderBody(),e,o&&i.createElement(n.A,{status:r}))}}_defineProperty(DefaultEmptyState,"propTypes",{sceneName:a().string,sceneContent:a().node,header:a().string,headerContent:a().node,body:a().string,bodyContent:a().node,beaconStatus:a().oneOf(s.A.beaconTypes),beacon:a().bool}),_defineProperty(DefaultEmptyState,"defaultProps",{beaconStatus:s.A.types.EMPTY,beacon:!0});var m="https://dcupkcmoyuvm5.cloudfront.net/cooper/emptyStates/";const p=DefaultEmptyState},76292:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(55378),r=o.n(n),a=o(96540),i=o(54205),s=o(59786),l=o(94788),c=o(18742),d=o(97463),m=o(35994),p=o(21572),u=o(32485),h=o.n(u),g=o(54351),v=o(11711);class DownloadApps extends a.Component{renderDesktopButton(){var{hideDesktop:e,urls:{desktopLink:t}}=this.props;if(e)return null;var o=new s.A(t).setParam("ref_","IP_US_D_P_ES_PW_1218").toString();return a.createElement(i.A,{name:"desktop-download",href:o},a.createElement(g.A,null,"logo-photos-white"),a.createElement("p",null,a.createElement(l.A,{className:"download-the"},"amazon-photos-empty-state-download-the"),a.createElement(l.A,{className:"desktop-app"},"amazon-photos-empty-state-download-desktop-app")))}render(){var{children:e,device:t,fullHeightLayout:o,isPrimeExperienceAvailable:n,urls:{appStoreiOS:c,appStoreAndroid:d}}=this.props,m={ios:{label:"amazon-photos-empty-state-download-ios-app",href:c,image:"digital/photos/ios-app-store-icon.svg",refMarker:"IP_US_P_P_PI_SC_818"},android:{label:"amazon-photos-empty-state-download-android-app",href:d,image:"digital/photos/google-play-badge.png",refMarker:"IP_US_P_P_PA_SC_818"}},u=a.createElement("section",{className:"download-apps"},a.createElement("div",{className:"download-apps-header"},a.createElement("p",null,a.createElement(l.A,{className:"bold"},"amazon-photos-upload-empty-state-download-apps")),n&&a.createElement("p",null,a.createElement(l.A,{className:"small"},"amazon-photos-apps-upsell"))),a.createElement("div",{className:"download-buttons"},!t.isMobile&&this.renderDesktopButton(),r()(m,((e,t)=>{var o=new s.A(e.href).setParam("ref_",e.refMarker).toString();return a.createElement(i.A,{name:t,key:t,href:o,target:"_blank"},a.createElement(v.A,{src:e.image,alt:(0,p.A)(e.label),className:"app-store-link"}))})))),g=a.createElement("section",{className:h()("empty-state",{"full-height-with-header":o})},a.createElement("div",{className:h()("desktop-empty-state",{"full-height":o})},a.createElement("div",{className:"empty-state-content"},a.createElement("div",{className:"empty-state-content-wrapper"},e)),u));return e?g:u}}DownloadApps.defaultProps={hideDesktop:!1,fullHeightLayout:!0,hasPageHeader:!0};const f=m.A.connect(DownloadApps,[{store:d.A,mapToProps:["isPrimeExperienceAvailable"]},{store:c.A,mapToProps:["urls","device"]}])},98731:(e,t,o)=>{o.d(t,{A:()=>I});var n=o(58156),r=o.n(n),a=o(62216),i=o.n(a),s=o(38221),l=o.n(s),c=o(96540),d=o(35994),m=o(21572),p=o(97463),u=o(14324),h=o(84503),g=o(54205),v=o(94788),f=o(66569),y=o(54351),b=o(74169),A=o(162),E=o(34332),P=o(25205),_=o(96389),S=o(24764),N=o(96721),w=o(76292),C=o(42026);function asyncGeneratorStep(e,t,o,n,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function _next(e){asyncGeneratorStep(a,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,r,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class FamilyEmptyState extends c.Component{constructor(){var e;super(...arguments),e=this,_defineProperty(this,"state",{phoneNumber:void 0}),_defineProperty(this,"sendSMSButtonClick",l()(_asyncToGenerator((function*(){var{phoneNumber:t}=e.state;if(!e.operationInProgress){e.operationInProgress=!0;try{yield E.A.sendSMSDownloadAppLink(t),e.setState({phoneNumber:void 0}),d.A.emit("showToast",{metricEventTag:"SendDownloadAppSMSSuccess",className:"success",message:(0,m.A)("amazon-photos-sms-send-success")})}catch(e){d.A.emit("showToast",{metricEventTag:"SendDownloadAppSMSFail",className:"fail",message:(0,m.A)("amazon-photos-sms-send-error")})}e.operationInProgress=!1}})),1e3,{leading:!0})),_defineProperty(this,"addPhotosButtonClick",(()=>{var{familyArchive:e,all:t}=b.DS;d.A.emit("lockSelectMode",{navigationOptions:["photos"],title:(0,m.A)("amazon-photos-fa-add-selected"),buttons:[{label:(0,m.A)("amazon-photos-add-button"),onClick:()=>{var e=u.A.getProperty("selection");if(e.getSize()){var t=new _.A({items:e.getNodes(),eventTag:"EmptyFamilyArchive"});t.getPromise().then((()=>{d.A.emit("unlockSelectMode")})),t.start()}},className:"mobile-icon icon-checkmark",name:"add-family-archive"}]}),d.A.listen("unlockSelectMode",(function onUnlockSelectMode(){(0,f.A)(e,{discardSelection:!0}),d.A.unListen("unlockSelectMode",onUnlockSelectMode)})),(0,f.A)(t)})),_defineProperty(this,"onLearnMoreLinkClick",(()=>{d.A.emit("openDialog",{component:A.A,props:{footer:c.createElement(h.A,{className:"button call-to-action",name:"got-it",onClick:()=>d.A.emit("closeDialog")},c.createElement(v.A,null,"amazon-photos-family-vault-education-dialog-confirm"))}})})),_defineProperty(this,"smsInputFieldChange",(e=>{this.setState({phoneNumber:e.currentTarget.value})}))}addAllPhotosButtonClick(){var{settings:e}=b.DS;(0,f.A)("".concat(e,"#bulkAdd"))}isPhoneNumberValid(){var{phoneNumber:e}=this.state;return!i()(e)&&e.trim().length}renderSMSTextField(){var{phoneNumber:e}=this.state;return c.createElement("div",{className:"sms-notification"},c.createElement("form",null,c.createElement("input",{type:"tel",maxLength:15,placeholder:(0,m.A)("amazon-photos-sms-placeholder"),value:e,onChange:this.smsInputFieldChange}),c.createElement(h.A,{name:"submit",className:"button",disabled:!this.isPhoneNumberValid(),onClick:this.sendSMSButtonClick},c.createElement(v.A,null,"amazon-photos-sms-send-button-title"))))}render(){var e,t,o,n,a,i,s,l,{hasContent:d,memberIdToMember:m={},selectMode:u,selectedMember:f,hasPrime:A}=this.props,{primeSignupLink:E}=b.DS,P=r()(m[f],"firstName"),_=!1;e=c.createElement("img",{alt:"Family",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-family-vault.png"}),l=c.createElement(h.A,{name:"learn-more",className:"text-link learn-more",onClick:this.onLearnMoreLinkClick},c.createElement(v.A,null,"amazon-photos-family-vault-learn-more")),!1===A?(t="amazon-photos-family-empty-state-no-subscription-header",n="amazon-photos-family-empty-state-no-subscription-body",a=c.createElement(g.A,{name:"learn-more-about-prime",className:"button",href:E},c.createElement(v.A,null,"amazon-photos-family-empty-state-no-subscription-prime-button")),l=null):P&&f!==p.A.getProperty("customerId")?(e=c.createElement(y.A,{className:"scene empty"},"empty-state"),o=c.createElement("h3",null,c.createElement(v.A,{replace:P},"amazon-photos-fa-mem-no-items")),n="amazon-photos-fa-mem-no-items-message",s=this.renderSMSTextField(),l=null):d?(t="amazon-photos-fa-mem-empty-state-header",n="amazon-photos-fa-mem-empty-state-body",a=!u&&c.createElement(h.A,{name:"select-photos",className:"button",onClick:this.addPhotosButtonClick},c.createElement(v.A,null,"amazon-photos-select-photos")),i=!u&&c.createElement(h.A,{name:"add-all",className:"button",onClick:this.addAllPhotosButtonClick},c.createElement(v.A,null,"amazon-photos-add-all-photos"))):(t="amazon-photos-family-empty-state-header",n="amazon-photos-family-empty-state-body",a=!u&&c.createElement(S.A,{name:"upload",className:"button"},c.createElement(v.A,null,"amazon-photos-upload-button")),_=!0);var N=c.createElement(C.A,{sceneContent:e,header:t,headerContent:o,body:n,name:"FamilyEmptyState"},c.createElement("p",null,a,i),s,l);return _?c.createElement(w.A,{fullHeightLayout:!1},N):N}}const I=d.A.connect(FamilyEmptyState,[{store:P.A,mapToProps:["members","memberIdToMember"]},{store:p.A,mapToProps:["hasContent"],setup:()=>d.A.emit("updateAccountStatus")},{store:u.A,mapToProps:["selectMode"]},{store:N.A,mapToProps:["hasPrime"]}])},18123:(e,t,o)=>{o.d(t,{Ay:()=>GroupsEmptyState,J9:()=>GroupDetailEmptyState,N_:()=>GroupShareEmptyState,P4:()=>GroupDetailAlbumsEmptyState,Y$:()=>GroupDetailEmptyStateNoButton,_v:()=>GroupPublicLandingEmptyState,fR:()=>GroupsShareLandingEmptyState});var n=o(96540),r=o(84503),a=o(35994),i=o(94788),s=o(38530),l=o(21572),c=o(45463),d=o(13319),m=o(42026),p=["group"],u=["group","isViewOnly"],h=["group"],g=["group","isViewOnly"],v=["children"],f=["group"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var onCreateGroupClick=(e,t)=>{var{metricOverrides:{eventTag:o}}=t;e.currentTarget.disabled=!0,(0,c.A)({eventTag:o})},viewOnlyErrorDialog=()=>n.createElement(s.A,{name:"PrivacyError",heading:(0,l.A)("amazon-photos-groups-privacy-view-only-header"),buttons:[{name:"confirm",label:(0,l.A)("amazon-photos-ok")}]},n.createElement(i.A,null,"amazon-photos-groups-privacy-view-only-message")),onAddPhotosClick=(e,t)=>{var{group:o,metricOverrides:n,isViewOnly:r}=t;r?a.A.emit("openDialog",viewOnlyErrorDialog):(0,d.Ay)({group:o,type:"photos",eventTag:n.eventTag})},onAddAlbumsClick=(e,t)=>{var{group:o,metricOverrides:n,isViewOnly:r}=t;r?a.A.emit("openDialog",viewOnlyErrorDialog):(0,d.Ay)({group:o,type:"albums",eventTag:n.eventTag})},getEmptyStateContent=()=>n.createElement("ul",{className:"empty-share"},n.createElement("li",null,n.createElement(i.A,null,"amazon-photos-empty-group-state-no-app-feature")),n.createElement("li",null,n.createElement(i.A,null,"amazon-photos-empty-group-state-free-account-feature")),n.createElement("li",null,n.createElement(i.A,null,"amazon-photos-empty-group-state-share-feature")),n.createElement("li",null,n.createElement(i.A,null,"amazon-photos-empty-group-state-device-feature")));function GroupsEmptyState(e){var{group:t}=e,o=_objectWithoutProperties(e,p);return n.createElement(m.A,_extends({},o,{className:"groups"}),n.createElement(r.A,{name:"create-new-group",onClick:onCreateGroupClick,metricOverrides:{eventName:"CreateGroupStart",eventTag:"empty_state_list"}},n.createElement("span",{className:"cover"},n.createElement("span",{className:"add-icon"})),n.createElement(i.A,{className:"label"},"amazon-photos-create-group"),n.createElement("div",{className:"description"},n.createElement("img",{src:"https://dcupkcmoyuvm5.cloudfront.net/group-arrow.svg",alt:""}),n.createElement(i.A,null,"amazon-photos-groups-empty-state-description"))),n.createElement("ul",{className:"empty-groups"},n.createElement("li",{className:"create-new-group"},n.createElement("span",{className:"cover"})),n.createElement("li",{className:"create-new-group"},n.createElement("span",{className:"cover"}))))}function GroupDetailEmptyState(e){var{group:t,isViewOnly:o}=e,a=_objectWithoutProperties(e,u),s=n.createElement("img",{alt:"Sharing",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-share-list.png"});return n.createElement(m.A,_extends({},a,{className:"groups",sceneContent:s,header:"amazon-photos-group-detail-empty-heading"}),n.createElement(r.A,{name:"add-photos",group:t,metricOverrides:{eventTag:"empty_state_photos"},onClick:onAddPhotosClick,isViewOnly:o},n.createElement(i.A,null,"amazon-photos-group-add-photos")))}function GroupDetailEmptyStateNoButton(e){var{group:t}=e,o=_objectWithoutProperties(e,h),r=n.createElement("img",{alt:"Sharing",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-share-list.png"});return n.createElement(m.A,_extends({},o,{className:"groups",sceneContent:r,header:"amazon-photos-group-detail-empty-heading-alt",body:"amazon-photos-group-detail-empty-body"}))}function GroupDetailAlbumsEmptyState(e){var{group:t,isViewOnly:o}=e,a=_objectWithoutProperties(e,g),s=n.createElement("img",{alt:"Sharing",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-share-list.png"});return n.createElement(m.A,_extends({},a,{className:"groups",sceneContent:s,header:"amazon-photos-group-album-empty-heading"}),n.createElement(r.A,{name:"add-albums",group:t,metricOverrides:{eventTag:"empty_state_albums"},onClick:onAddAlbumsClick,isViewOnly:o},n.createElement(i.A,null,"amazon-photos-group-add-albums")))}function GroupShareEmptyState(e){var{children:t}=e,o=_objectWithoutProperties(e,v);return n.createElement(m.A,_extends({},o,{className:"groups group-share-dialog",sceneName:"groups-share"}),n.createElement("h2",null,n.createElement(i.A,null,"amazon-photos-empty-group-share-heading")),getEmptyStateContent(),t)}function GroupPublicLandingEmptyState(e){var t=n.createElement("img",{alt:"Sharing",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-share-list.png"});return n.createElement(m.A,_extends({},e,{className:"groups",sceneContent:t,header:"amazon-photos-group-public-empty-heading",body:"amazon-photos-group-public-empty-body"}))}function GroupsShareLandingEmptyState(e){var{group:t}=e,o=_objectWithoutProperties(e,f),r=n.createElement("img",{alt:"Sharing",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-share-list.png"});return n.createElement(m.A,_extends({},o,{className:"groups share-link",sceneContent:r}),n.createElement("h2",null,n.createElement(i.A,null,"amazon-photos-group-share-landing-empty-header")),n.createElement("p",null,n.createElement(i.A,null,"amazon-photos-group-share-landing-empty-content")))}},77815:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(42026);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{children:t}=e,o=n.createElement("img",{alt:"Hidden",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/404-no-search-results.png"});return n.createElement(r.A,{header:"amazon-photos-hidden-empty-state-header",name:"HiddenEmptyState",sceneContent:o},t)}},56895:(e,t,o)=>{o.d(t,{A:()=>InviteDialogEmptyState});var n=o(96540),r=o(54351),a=o(42026);function InviteDialogEmptyState(){var e=n.createElement(r.A,{className:"scene"},"logo-photos-white");return n.createElement(a.A,{className:"invite-dialog",sceneContent:e,header:"amazon-photos-invite-empty-state-header",body:"amazon-photos-invite-empty-state-description"})}},46455:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(96540),r=o(35994),a=o(43840),i=o(94788),s=o(18742),l=o(97463),c=o(1683),d=o(13489),m=o(71086),p=o(25205),u=o(42026),h=o(76292),g="PeopleSearchNotSupported";class PeopleEmptyState extends n.Component{componentDidMount(){var{recognitionHidden:e}=this.props;if(e){var t=m.A.getPageContext();d.A.log({name:g}),c.A.log(g,{eventCount:1},t)}}renderRecognitionInfo(){var e="".concat(s.A.getProperty("urls.settings"),"?returnUrl=").concat(window.location.pathname),t=n.createElement(a.A,{className:"text-link",name:"settings",href:e},n.createElement(i.A,null,"amazon-photos-empty-state-settings-link-recognition-off"));return n.createElement("p",null,n.createElement(i.A,{replace:t},"amazon-photos-people-empty-state-body-recognition-off"))}render(){var{adminId:e,members:t=[],isPeopleRecognitionEnabled:o,customerId:r,recognitionHidden:a}=this.props;if(a)return n.createElement(h.A,null,n.createElement(u.A,{header:"amazon-photos-people-search-not-available"}));if(o)return n.createElement(h.A,null,n.createElement(u.A,{header:"amazon-photos-people-empty-state-header"}));var i,s,l=e===r,c=t.length<=1;return!l&&!c?i="amazon-photos-people-invitee-empty-state-detail":s=this.renderRecognitionInfo(),n.createElement(h.A,null,n.createElement(u.A,{header:"amazon-photos-empty-state-header-recognition-off",body:i,bodyContent:s}))}}const v=r.A.connect(PeopleEmptyState,[{store:p.A,mapToProps:["adminId","members"]},{store:l.A,mapToProps:["isPeopleRecognitionEnabled","recognitionHidden","customerId"]}])},49442:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(96540),r=o(52306),a=o.n(r),i=o(54205),s=o(94788),l=o(54351),c=o(47389),d=o(69391),m=o(18742),p=o(24764),u=o(76292),h=o(42026),g=n.createElement("div",{className:"app-logo"},n.createElement(l.A,{className:"logo-photos-white"},"logo-photos-white"));const v=a()((0,d.A)("PhotosEmptyState",{renderDesktopEmptyState(){var{universalAppLink:e}=m.A.getProperty("urls",{});return n.createElement("div",{className:"desktop-empty-state"},n.createElement("div",{className:"empty-state-content"},n.createElement("div",{className:"empty-state-content-wrapper"},n.createElement("div",{className:"upload-empty-state"},n.createElement("div",{className:"row"},n.createElement("div",{className:"upload-image"})),n.createElement("div",{className:"row"},n.createElement(s.A,{className:"heading"},"amazon-photos-upload-empty-state-heading")),n.createElement("div",{className:"row"},n.createElement("div",{className:"link cell"},n.createElement(p.A,{name:"desktop-browse-to-upload",className:"upload-button"},n.createElement(s.A,null,"amazon-photos-upload-empty-state-button"))))))),this.renderMobileEmptyState(new c.A(e).setParam("ref_","IP_US_D_P_ES_PW_1118_C").toString()),n.createElement(u.A,{hideDesktop:!0,fullHeightLayout:!1}))},renderMobileEmptyState:e=>n.createElement("div",{className:"mobile-empty-state"},n.createElement(h.A,{className:"get-the-app",sceneContent:n.createElement("div",{className:"scene"},g),header:"amazon-photos-empty-state-mobile-header",body:"amazon-photos-empty-state-mobile-body"},n.createElement("div",{className:"get-the-app"},n.createElement(i.A,{name:"mobile-get-the-app",className:"button",href:e},n.createElement(s.A,null,"amazon-photos-empty-state-get-desktop-app-link"))),n.createElement(p.A,{name:"mobile-browse-to-upload",className:"text-link"},n.createElement(s.A,null,"amazon-photos-empty-state-drag-and-drop-body")))),render(){var e,t,o=m.A.getProperty("device.isAndroid"),r=m.A.getProperty("device.isIOS"),a=m.A.getProperty("urls",{});return r?(e=new c.A(a.appStoreiOS).setParam("ref_","IP_US_D_P_ES_MW_1118").toString(),t=this.renderMobileEmptyState(e)):o?(e=new c.A(a.appStoreAndroid).setParam("ref_","IP_US_D_P_ES_MW_1118").toString(),t=this.renderMobileEmptyState(e)):t=this.renderDesktopEmptyState(),n.createElement("section",{className:"empty-state photos"},t)}}))},7707:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(96540),r=o(35994),a=o(43840),i=o(94788),s=o(18742),l=o(97463),c=o(25205),d=o(42026),m=o(76292);class PlacesEmptyState extends n.Component{renderRecognitionInfo(){var e="".concat(s.A.getProperty("urls.settings"),"?returnUrl=").concat(window.location.pathname),t=n.createElement(a.A,{className:"text-link",name:"settings",href:e},n.createElement(i.A,null,"amazon-photos-empty-state-settings-link-recognition-off"));return n.createElement("p",null,n.createElement(i.A,{replace:t},"amazon-photos-places-empty-state-body-recognition-off"))}render(){var{adminId:e,members:t=[],isPlacesRecognitionEnabled:o,customerId:r}=this.props,a=n.createElement("img",{alt:"Places",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-places.png"});if(o)return n.createElement(m.A,null,n.createElement(d.A,{header:"amazon-photos-places-empty-state-header",sceneContent:a}));var i,s,l=e===r,c=t.length<=1;return!l&&!c?i="amazon-photos-places-invitee-empty-state-detail":s=this.renderRecognitionInfo(),n.createElement(m.A,null,n.createElement(d.A,{header:"amazon-photos-empty-state-header-recognition-off",body:i,bodyContent:s,sceneContent:a}))}}const p=r.A.connect(PlacesEmptyState,[{store:c.A,mapToProps:["adminId","members"]},{store:l.A,mapToProps:["isPlacesRecognitionEnabled","customerId"]}])},76028:(e,t,o)=>{o.d(t,{A:()=>PostDetailEmptyState});var n=o(96540),r=o(42026);function PostDetailEmptyState(){return n.createElement(r.A,{beacon:!1,className:"posts",body:"amazon-photos-reactions-empty-body"})}},74358:(e,t,o)=>{o.d(t,{A:()=>h});var n=o(96540),r=o(52306),a=o.n(r),i=o(43840),s=o(54205),l=o(54351),c=o(94788),d=o(18742),m=o(69391),p=o(24764),u=o(42026);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}const h=a()((0,m.A)("PrintingEmptyState",{render(){var{children:e}=this.props,t=d.A.getProperty("urls",{}),o=n.createElement(p.A,{name:"upload",className:"button"},n.createElement(c.A,null,"amazon-photos-upload-button")),r=n.createElement(i.A,{name:"printing-empty-storage-link",href:t.settings},n.createElement(c.A,null,"amazon-photos-manage-storage")),a=n.createElement("p",null,n.createElement(c.A,{replace:[r]},"amazon-photos-printing-view-plan")),m=n.createElement(s.A,{target:"_blank",name:"printing-empty-privacy-policy",href:t.privacyPolicy},n.createElement(c.A,null,"amazon-photos-privacy-policy")),h=n.createElement(s.A,{target:"_blank",name:"printing-empty-terms",href:t.termsOfUse},n.createElement(c.A,null,"amazon-photos-terms-of-use")),g=n.createElement("p",null,n.createElement(c.A,{replace:[m,h]},"amazon-photos-printing-agreement")),v=n.createElement(l.A,{className:"scene empty"},"empty-state");return n.createElement(u.A,_extends({},this.props,{header:"amazon-photos-printing-upload-to-start",sceneContent:v,name:"PrintingEmptyState"}),n.createElement("div",{className:"printing-empty-content"},a,g,e,o))}}))},803:(e,t,o)=>{o.d(t,{A:()=>ReactionsEmptyState});var n=o(96540),r=o(42026);function ReactionsEmptyState(){return n.createElement(r.A,{beacon:!1,className:"reactions",header:"amazon-photos-reactions-empty-header",body:"amazon-photos-reactions-empty-body",sceneContent:n.createElement("img",{alt:"No comments",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-group-comments.png"})})}},91407:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(96540),r=o(52306),a=o.n(r),i=o(35994),s=o(94788),l=o(69391),c=o(66361),d=o(42026),m=a()((0,l.A)("SearchEmptyState",{render(){var e,{keyword:t}=this.props,o=n.createElement("h3",null,n.createElement(s.A,{replace:null!==(e=null==t?void 0:t.name)&&void 0!==e?e:""},"amazon-photos-search-family-photos-empty-state-header"));return n.createElement(d.A,{body:"amazon-photos-search-family-photos-empty-state-body",headerContent:o,name:"SearchEmptyState",sceneContent:n.createElement("img",{alt:"No search results",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/404-no-search-results.png"}),sceneName:"search"})}}));const p=i.A.connect(m,{store:c.A,mapToProps:["keyword"]})},76734:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(96540),r=o(52306),a=o.n(r),i=o(35994),s=o(18742),l=o(94788),c=o(69391),d=o(32721),m=o(49907),p=o(42026),u=o(76292);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}var h=a()((0,c.A)("StoriesEmptyState",{render(){var e={},t=n.createElement(m.A,{status:"completed"});e.sceneContent=n.createElement("div",{className:"scene stories"}),e.header="amazon-photos-stories-empty-state-header";var o=n.createElement("div",{className:"stories-feature-intro"},n.createElement("div",{role:"button",tabIndex:"0",className:"help-hover"},n.createElement(l.A,null,"amazon-photos-stories-empty-state-button")),n.createElement(d.A,{text:n.createElement(l.A,null,"amazon-photos-stories-empty-state-tooltip-body"),active:!0}));return n.createElement(u.A,null,n.createElement(p.A,_extends({},e,{name:"StoriesEmptyState",sceneContent:n.createElement("img",{alt:"New for you",className:"splash-img",src:"https://dcupkcmoyuvm5.cloudfront.net/pngs/empty-state-memories.png"})},this.state),n.createElement("p",{className:"stories-empty-state-body"},n.createElement(l.A,null,"amazon-photos-stories-empty-state-first-body")),n.createElement("p",{className:"stories-empty-state-body"},n.createElement(l.A,null,"amazon-photos-stories-empty-state-second-body")),o),t)}}));const g=i.A.connect(h,[{store:s.A,mapToProps:e=>{var{device:t}=e;return{isDesktop:t.isDesktop}}}])},19984:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(95093),a=o.n(r),i=o(94788),s=o(27236),l=o(54205),c=o(47389),d=o(74169),m=o(42026),p=["sceneName"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var u="this-day";const __WEBPACK_DEFAULT_EXPORT__=e=>{var{sceneName:t=u}=e,o=_objectWithoutProperties(e,p),{header:r,year:h,monthDay:g,children:v}=o,f=!1;if(r&&h&&(f=n.createElement("h3",null,n.createElement(i.A,{replace:h},r))),g){var y="".concat(a()(g.month,"M").format("MMM")," ").concat(g.day);return n.createElement("div",{className:"this-day-empty-state-body"},n.createElement("h1",null,n.createElement(i.A,null,"amazon-photos-this-day-no-memories-section-title")),n.createElement("div",{className:"content"},n.createElement("p",{className:"primary-text"},n.createElement(i.A,null,"amazon-photos-this-day-no-memories-body-title")),n.createElement("p",{className:"secondary-text"},n.createElement(i.A,null,"amazon-photos-this-day-no-memories-body-text")),(()=>{if(s.A.isFireTablet())return null;var{universalAppLink:e,appStoreiOS:t,appStoreAndroid:o}=d.DS,r=new c.A(e).setParam("ref_","IP_US_D_P_ES_PW_1118_C").toString(),a="amazon-photos-this-day-download-desktop-button-text";return s.A.isIOS()&&(r=new c.A(t).setParam("ref_","IP_US_D_P_ES_MW_1118").toString(),a="amazon-photos-this-day-download-iOS-button-text"),s.A.isAndroid()&&(r=new c.A(o).setParam("ref_","IP_US_D_P_ES_MW_1118").toString(),a="amazon-photos-this-day-download-android-button-text"),n.createElement(l.A,{name:"mobile-get-the-app",className:"button",href:r},n.createElement(i.A,null,a))})()),n.createElement("footer",null,n.createElement("p",{className:"primary-text"},n.createElement(i.A,{replace:y},"amazon-photos-this-day-no-memories-footer-title")),n.createElement("p",{className:"secondary-text"},n.createElement(i.A,null,"amazon-photos-this-day-no-memories-footer-text"))))}return n.createElement(m.A,_extends({sceneName:t,header:r,headerContent:f},o),v)}},7161:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(14697),a=o(17667),i=o(42026);const __WEBPACK_DEFAULT_EXPORT__=()=>{var e=n.createElement(r.A,{src:"".concat(i.g,"trash-sm.png"),className:"trash-bin"});return n.createElement(i.A,{sceneContent:e,sceneName:"trash",header:"amazon-photos-trash-empty-state-header",body:a.A.isOn("trash-auto-purge")?"amazon-photos-trash-empty-state-body":null,className:"trash"})}},91747:(e,t,o)=>{o.d(t,{A:()=>U});var n=o(90179),r=o.n(n),a=o(55378),i=o.n(a),s=o(95950),l=o.n(s),c=o(66245),d=o.n(c),m=o(62216),p=o.n(m),u=o(62193),h=o.n(u),g=o(80299),v=o.n(g),f=o(68090),y=o.n(f),b=o(7309),A=o.n(b),E=o(96540),P=o(5556),_=o.n(P),S=o(74692),N=o.n(S),w=o(51158),C=o(35994),I=o(47389),T=o(18742),k=o(66569),x=o(71468),O=o(480),M=o(31035),z=o(14768),D=["additionalOptions","addReactionOnJoin","backUrl","collection","faceEditingVisible","hideActions","hideReactions","hideOverflowOptions","hideZoom","initializeSlideshowData","isSharedPage","isZoomed","model","onFaceEditClick","onReportAbuseClick","onToggleZoom","parentContext","parentModel","reportAbuseVisible","shareMode","showFavorite","showHide","toggleDetails","pageUrlModel","onMouseEnter","onMouseLeave"];function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class CollectionNodeHeader extends E.PureComponent{constructor(){super(...arguments),_defineProperty(this,"onSlideshowClick",(()=>{var{collection:e,initializeSlideshowData:t,model:o={},pageUrlModel:n}=this.props,{contentType:r,id:a}=o;"VIDEO"===r&&C.A.emit("stopVideo"),t({collection:e,startNodeId:a,returnUrlModel:n})}))}render(){var e=this.props,{additionalOptions:t,addReactionOnJoin:o,backUrl:n,collection:r,faceEditingVisible:a,hideActions:i,hideReactions:s,hideOverflowOptions:l,hideZoom:c,initializeSlideshowData:d,isSharedPage:m,isZoomed:p,model:u,onFaceEditClick:h,onReportAbuseClick:g,onToggleZoom:v,parentContext:f,parentModel:y,reportAbuseVisible:b,shareMode:A,showFavorite:P,showHide:_,toggleDetails:S,pageUrlModel:N,onMouseEnter:w,onMouseLeave:C}=e,I=_objectWithoutProperties(e,D),T=r.count<2?null:this.onSlideshowClick;return E.createElement(z.A,{additionalOptions:t,addReactionOnJoin:o,backUrl:n,faceEditingVisible:a,favoriteButton:E.createElement(O.A,{collection:r,model:u,allowKeyboardShortcut:!0}),handleSlideshowClick:T,headerTagProps:I,hideActions:i,hideReactions:s,hideOverflowOptions:l,hideZoom:c,initializeSlideshowData:d,isSharedPage:m,isZoomed:p,model:u,onFaceEditClick:h,onMouseEnter:w,onMouseLeave:C,onReportAbuseClick:g,onToggleZoom:v,parentContext:f,parentModel:y,reportAbuseVisible:b,shareMode:A,showFavorite:P,showHide:_,toggleDetails:S})}}_defineProperty(CollectionNodeHeader,"propTypes",{additionalOptions:_().arrayOf(_().oneOfType([_().string,_().object])),addReactionOnJoin:_().func,backUrl:_().string,collection:_().instanceOf(w.A).isRequired,faceEditingVisible:_().bool,favoriteButton:_().element,handleSlideshowClick:_().func,headerTagProps:_().object,hideActions:_().bool,hideReactions:_().bool,hideOverflowOptions:_().bool,hideZoom:_().bool,initializeSlideshowData:_().func.isRequired,isSharedPage:_().bool,isZoomed:_().bool,model:_().object.isRequired,onFaceEditClick:_().func,onMouseEnter:_().func.isRequired,onMouseLeave:_().func.isRequired,onReportAbuseClick:_().func,onToggleZoom:_().func,pageUrlModel:_().instanceOf(I.A).isRequired,parentContext:_().string,parentModel:_().object,reportAbuseVisible:_().bool,shareMode:_().bool,showFavorite:_().bool,showHide:_().bool,toggleDetails:_().func});const F=(0,x.Ng)(void 0,{initializeSlideshowData:M.P4})(CollectionNodeHeader);var R=o(49479),j=o(66941),L=o(94330);function collection_node_gallery_defineProperty(e,t,o){return(t=function collection_node_gallery_toPropertyKey(e){var t=function collection_node_gallery_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class CollectionNodeGallery extends E.Component{constructor(){var e;super(...arguments),e=this,collection_node_gallery_defineProperty(this,"state",{numToPreload:0}),collection_node_gallery_defineProperty(this,"loadedPromises",{}),collection_node_gallery_defineProperty(this,"navigateDirection","next"),collection_node_gallery_defineProperty(this,"previousPromises",{}),collection_node_gallery_defineProperty(this,"startWhen",!1),collection_node_gallery_defineProperty(this,"triedPageIndex",!1),collection_node_gallery_defineProperty(this,"whenDeclared",!1),collection_node_gallery_defineProperty(this,"onDataChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"removeModelDone"===t.action?e.onRemoveModelDone(t):e.state.nextNode||e.state.prevNode||e.setSurroundingNodes(e.props.nodeId)})),collection_node_gallery_defineProperty(this,"onModelUpdate",(()=>{var{nodeId:e}=this.props;this.setNodeData(e)})),collection_node_gallery_defineProperty(this,"onNextButtonClicked",(()=>{this.setState({numToPreload:0}),this.navigateDirection="next"})),collection_node_gallery_defineProperty(this,"onPreloadNodes",(()=>{this.setState((e=>({numToPreload:e.numToPreload+1})))})),collection_node_gallery_defineProperty(this,"onPrevButtonClicked",(()=>{this.setState({numToPreload:0}),this.navigateDirection="prev"})),collection_node_gallery_defineProperty(this,"onRemoveModelDone",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{collection:o}=e.props,{currentNode:n}=e.state;if(0!==o.count){if(n){var r=A()(t.models,(t=>e.getNodeId(t.model)===e.getNodeId(n)));r&&e.props.collection.getByIndexRange(r.index-1,r.index).done((t=>{var o=y()(t);o?e.navigateTo(o):(0,k.A)(e.backUrl(),{replace:!0})}))}}else(0,k.A)(e.backUrl(),{replace:!0})})),collection_node_gallery_defineProperty(this,"getNodeId",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&t.id){var{useOwnerId:o}=e.props;return o?t.ownerNodeId:t.id}})),collection_node_gallery_defineProperty(this,"getNodesToLoad",(()=>{var e=[this.state.prevNode,this.state.currentNode,this.state.nextNode];return"prev"===this.navigateDirection?(this.state.preloadPrev&&this.state.numToPreload>0&&(e=v()(this.state.preloadPrev.slice(0,this.state.numToPreload),e)),this.state.preloadNext&&this.state.numToPreload>0&&this.state.numToPreload>this.state.preloadPrev.length&&(e=v()(e,this.state.preloadNext.slice(0,this.state.numToPreload-this.state.preloadPrev.length)))):(this.state.preloadNext&&this.state.numToPreload>0&&(e=v()(e,this.state.preloadNext.slice(0,this.state.numToPreload))),this.state.preloadPrev&&this.state.numToPreload>0&&this.state.numToPreload>this.state.preloadNext.length&&(e=v()(this.state.preloadPrev.slice(0,this.state.numToPreload-this.state.preloadNext.length),e))),e})),collection_node_gallery_defineProperty(this,"getSurroundingNodes",(e=>{var t,o,{collection:n}=this.props,r=n.indexOf(e),a=n.atIndex(r-1),i=n.atIndex(r+1),s=[],l=[],c=r<0||r+2<=n.count-1&&h()(n.atIndex(r+2)),d=r-2>=0&&h()(n.atIndex(r-2)),m=!p()(n.count);return m&&(a&&r-1>0&&(t=(t=r-5)>0?t:0,s=n.getByIndexRange(t,r-2,{synchronous:!0}).reverse()),i&&r+2<n.count&&(o=(o=r+5)>=n.count?n.count-1:o,l=n.getByIndexRange(r+2,o,{synchronous:!0})),m&&c?this.triedPageIndex||p()(this.props.pageIndex)?n.getNextUnloadedPage():(n.getPage(this.props.pageIndex),this.triedPageIndex=!0):m&&d&&n.getPage(n.getPageIndex(r-2))),{totalNodesToLoad:(a?1:0)+(i?1:0)+l.length+s.length+1,prev:a,next:i,preloadNext:l,preloadPrev:s}})),collection_node_gallery_defineProperty(this,"setNodeData",(e=>{var{collection:t,goBackOnFail:o,pageUrlModel:n}=this.props;t.getById(e).done((t=>{this.setSurroundingNodes(e),this.setState({currentNode:t})})).fail((()=>{o&&n&&n.go()}))})),collection_node_gallery_defineProperty(this,"setSurroundingNodes",(e=>{var{next:t,prev:o,preloadNext:n,preloadPrev:r,totalNodesToLoad:a}=this.getSurroundingNodes(e);this.setState({nextNode:t,prevNode:o,preloadNext:n,preloadPrev:r,totalNodesToLoad:a})})),collection_node_gallery_defineProperty(this,"addLoadedDeferred",(e=>{this.loadedPromises[e]||(this.loadedPromises[e]=N().Deferred())})),collection_node_gallery_defineProperty(this,"backUrl",(()=>{var e,{pageUrlModel:t,backUrl:o}=this.props,{query:n}=t;return o?e=new I.A(o):n.backUrl&&(e=new I.A(n.backUrl),n.familyThisDay&&e.setParam("familyThisDay",!0)),e?e.toString():t.toString()})),collection_node_gallery_defineProperty(this,"cleanUpPromises",(()=>{var e=v()(this.state.preloadPrev,[this.state.prevNode,this.state.currentNode,this.state.nextNode],this.state.preloadNext),t=d()(l()(this.loadedPromises),i()(e,"id"));this.loadedPromises=r()(this.loadedPromises,t)})),collection_node_gallery_defineProperty(this,"navigate",(e=>{var{currentNode:t}=this.state;if(t){var o=this.getSurroundingNodes(this.getNodeId(t));o[e]&&(this.setState({numToPreload:0}),this.navigateDirection=e,this.navigateTo(o[e]))}})),collection_node_gallery_defineProperty(this,"navigateTo",(e=>{this.setState({numToPreload:0}),(0,k.A)("".concat(this.baseUrl,"/").concat(this.getNodeId(e)).concat(this.props.pageUrlModel.toQueryString()),{replace:!0}),C.A.emit("stopVideo")})),collection_node_gallery_defineProperty(this,"resolveLoadedPromise",(e=>{this.loadedPromises[e].resolve()})),collection_node_gallery_defineProperty(this,"buildNavigationLink",((e,t)=>{var{collection:o}=this.props;return e.setParam("pageIndex",o.getPageIndexById(this.getNodeId(t))),"".concat(this.baseUrl,"/").concat(this.getNodeId(t)).concat(e.toQueryString())}))}UNSAFE_componentWillMount(){var{pageUrlModel:e,backUrl:t,collection:o,nodeId:n}=this.props;this.baseUrl=e.base,t||(this.baseUrl+=T.A.getProperty("urls.gallery")),o.listen(this.onDataChange,this),C.A.listen("infoUpdated",this.onModelUpdate,this),this.lastLoggedId=void 0,this.setNodeData(n)}UNSAFE_componentWillReceiveProps(e){if(e.nodeId===this.props.nodeId)return!1;this.lastLoggedId=void 0,this.setNodeData(e.nodeId)}componentDidUpdate(){!1===this.whenDeclared&&!0===this.startWhen&&(this.whenDeclared=!0,this.cleanUpPromises(),N().when(...Object.values(this.loadedPromises)).done((()=>{this.whenDeclared=!1,this.onPreloadNodes()})))}componentWillUnmount(){this.props.collection.unListen(null,this),C.A.unListen("infoUpdated",this.onModelUpdate,this)}render(){var{collection:e,faceEditingVisible:t,reportAbuseVisible:o,onReportAbuseClick:n,defaultPersonId:r,parentModel:a,parentContext:i,contributorData:s,hideActions:l,hideReactions:c,hideOverflowOptions:d,shareMode:m,showFavorite:p,additionalOptions:u,isSharedPage:h,addReactionOnJoin:g,pageUrlModel:v,showChromeOnKeyNav:f}=this.props,{currentNode:y,nextNode:b,prevNode:A,totalNodesToLoad:P}=this.state,{viewName:_}=this.context,S=this.getNodesToLoad();return this.startWhen=!1,S.length<P&&(this.startWhen=!0),E.createElement(L.A,{faceEditingVisible:t,reportAbuseVisible:o,onReportAbuseClick:n,defaultPersonId:r,parentModel:a,parentContext:i,contributorData:s,hideActions:l,hideReactions:c,hideOverflowOptions:d,shareMode:m,showFavorite:p,additionalOptions:u,isSharedPage:h,addReactionOnJoin:g,pageUrlModel:v,currentNode:y,nextNode:b,prevNode:A,nodesToLoad:S,viewName:_,backUrl:this.backUrl(),onPrevButtonClicked:this.onPrevButtonClicked,onNextButtonClicked:this.onNextButtonClicked,buildNavigationLink:this.buildNavigationLink,handleImageLoad:this.resolveLoadedPromise,handleItemRender:this.addLoadedDeferred,showChromeOnKeyNav:f,handleNavigate:this.navigate,nodeHeader:{component:F,additionalProps:{collection:e}}})}}collection_node_gallery_defineProperty(CollectionNodeGallery,"propTypes",{nodeId:_().string.isRequired,useOwnerId:_().bool,collection:_().instanceOf(w.A).isRequired,pageUrlModel:_().instanceOf(I.A).isRequired,backUrl:_().string,goBackOnFail:_().bool,pageIndex:_().string,showChromeOnKeyNav:_().bool,faceEditingVisible:_().bool,reportAbuseVisible:_().bool,onReportAbuseClick:_().func,defaultPersonId:_().string,parentModel:_().oneOfType([_().instanceOf(R.A),_().instanceOf(j.A)]),parentContext:_().string,contributorData:_().object,hideActions:_().bool,hideReactions:_().bool,hideOverflowOptions:_().bool,shareMode:_().bool,showFavorite:_().bool,additionalOptions:_().arrayOf(_().shape({position:_().number,string:_().string.isRequired,onClick:_().func.isRequired})),addReactionOnJoin:_().bool,isSharedPage:_().bool}),collection_node_gallery_defineProperty(CollectionNodeGallery,"contextTypes",{viewName:_().string.isRequired});const U=CollectionNodeGallery},11711:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(97463);const __WEBPACK_DEFAULT_EXPORT__=e=>{var t,{alt:o,className:a,src:i}=e;switch(r.A.getProperty("country")){case"US":default:t="https://images-na.ssl-images-amazon.com/images/G/01/";break;case"UK":t="https://images-eu.ssl-images-amazon.com/images/G/02/";break;case"DE":t="https://images-eu.ssl-images-amazon.com/images/G/03/";break;case"FR":t="https://images-eu.ssl-images-amazon.com/images/G/08/";break;case"JP":t="https://images-fe.ssl-images-amazon.com/images/G/09/";break;case"IT":t="https://images-eu.ssl-images-amazon.com/images/G/29/";break;case"ES":t="https://images-eu.ssl-images-amazon.com/images/G/30/"}return t+=i,n.createElement("img",{src:t,alt:o,className:a})}},83271:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(1882),r=o.n(n),a=o(55378),i=o.n(a),s=o(96540),l=o(32485),c=o.n(l),d=o(5556),m=o.n(d),p=o(73509),u=o(35994),h=o(51158),g=o(42852),v=o(72470),f=o(94788),y=o(84503);function asyncGeneratorStep(e,t,o,n,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function _next(e){asyncGeneratorStep(a,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,r,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class NodeCarousel extends s.PureComponent{constructor(){super(...arguments),_defineProperty(this,"_endingModel",{id:"__ending__"}),_defineProperty(this,"_introModel",{id:"__intro__"}),_defineProperty(this,"state",{activeIndex:0,activeNode:null,posX:0,error:!1,nodes:[]}),_defineProperty(this,"onDragMove",(e=>{var{offsetX:t}=e,o=this._el.clientWidth,{posX:n}=this.state;n+=t,n=Math.min(Math.max(n,-o),o),this.setState({posX:n})})),_defineProperty(this,"onDragEnd",(()=>{this.setState({posX:0})})),_defineProperty(this,"onSwipe",(e=>{switch(e){case"right":this.goToPrev();break;case"left":this.goToNext()}})),_defineProperty(this,"goToNext",(()=>{var{activeIndex:e}=this.state;return this.goToIndex(e+1),!1})),_defineProperty(this,"goToPrev",(()=>{var{activeIndex:e}=this.state;return this.goToIndex(e-1),!1}))}UNSAFE_componentWillMount(){var{intro:e}=this.props;this.setup(),u.A.listen("next",this.goToNext,this),u.A.listen("prev",this.goToPrev,this),e&&(this._introModel.content=e,this.setState({nodes:[this._introModel],activeNode:this._introModel,activeIndex:this.firstIndex}))}UNSAFE_componentWillReceiveProps(e){var{collection:t}=this.props;t!==e.collection&&this.setState({nodes:[]},(()=>this.setup()))}componentWillUnmount(){u.A.unListen("next",this.goToNext,this),u.A.unListen("prev",this.goToPrev,this)}get lastIndex(){var{ending:e,count:t}=this.props;return e?t:t-1}get firstIndex(){var{intro:e}=this.props;return e?-1:0}setup(){var e=this;return _asyncToGenerator((function*(){var{collection:t,intro:o,startNodeId:n,startNodeIndex:r}=e.props;try{if(yield t.getPage(0),o)e.goToIndex(e.firstIndex);else if(void 0!==r)e.goToIndex(r);else if(n)try{yield t.getById(n);var a=Math.max(t.indexOf(n),0);e.goToIndex(a)}catch(t){e.goToIndex(0)}else e.goToIndex(0)}catch(t){e.setState({error:!0})}}))()}goToIndex(e){var t=this;return _asyncToGenerator((function*(){var{lastIndex:o,firstIndex:n}=t,{collection:r,intro:a,ending:i,onNodeChange:s}=t.props,{count:l}=r,c=Math.max(0,e-3),d=Math.min(l-1,e+3);if(!(e>o||e<n))try{var m,p=yield r.getByIndexRange(c,d);a&&e<=n+3&&(t._introModel.content=a,p.unshift(t._introModel),e===n&&(m=t._introModel)),i&&e>=o-3&&(t._endingModel.content=i,p.push(t._endingModel),e===o&&(m=t._endingModel)),m||(m=r.atIndex(e),s&&m&&s(m)),t.setState({activeIndex:e,posX:0,activeNode:m,nodes:p,error:!1})}catch(e){throw t.setState({error:!0}),e}}))()}renderError(){return s.createElement("p",{className:"error"},s.createElement(f.A,null,"amazon-photos-error-fatal-header"),s.createElement("br",null),s.createElement(f.A,null,"amazon-photos-error-fatal-body"))}renderItems(){var{children:e}=this.props,{nodes:t,activeNode:o,posX:n}=this.state,a=t.indexOf(o),l=this._el?this._el.clientWidth:null;return s.createElement("ul",{className:"images"},t&&i()(t,((t,o)=>{var i,d=o===a;if(n&&l){var m;switch(o){case a:m=n;break;case a+1:m=l+n;break;case a-1:m=-l+n}m&&(i={transform:"translate3d(".concat(m,"px, 0, 0)")})}var u=c()({dragging:!!i,"next-img":o>a,"prev-img":o<a,active:d});return s.createElement("li",{className:u,key:t&&t.id||o,style:i},s.createElement(p.t$,null,(o=>{var{width:n,height:a}=o;return t===this._endingModel||t===this._introModel?r()(t.content)?t.content({width:n,height:a,visible:d}):t.content:e({width:n,height:a,model:t,visible:d})})))})))}render(){var{className:e,count:t}=this.props,{activeIndex:o,error:n}=this.state,r=!t||o>=this.lastIndex,a=!t||o<=this.firstIndex;return s.createElement("div",{className:c()("node-carousel",e),ref:e=>{this._el=e}},s.createElement(v.A,{allowZoom:!1,allowTouch:!0,allowMouse:!1,onMove:this.onDragMove,onSwipe:this.onSwipe,onEnd:this.onDragEnd},s.createElement("nav",{className:"controls"},s.createElement(y.A,{disabled:a,name:"prev",onClick:this.goToPrev}),n&&this.renderError(),s.createElement(y.A,{disabled:r,name:"next",onClick:this.goToNext})),!n&&this.renderItems()))}}_defineProperty(NodeCarousel,"propTypes",{collection:m().instanceOf(h.A).isRequired,startNodeIndex:m().number,startNodeId:m().string,children:m().func.isRequired,intro:m().oneOfType([m().node,m().func]),ending:m().oneOfType([m().node,m().func]),onNodeChange:m().func,count:m().number});const b=(0,g.A)(NodeCarousel)},94330:(e,t,o)=>{o.d(t,{A:()=>ze});var n=o(55378),r=o.n(n),a=o(38221),i=o.n(a),s=o(96540),l=o(5556),c=o.n(l),d=o(32485),m=o.n(d),p=o(35994),u=o(43840),h=o(47389),g=o(66569),v=o(72470),f=o(61738),y=o(1683),b=o(18742),A=o(49479),E=o(57427),P=o(66941),_=o(14768),S=o(58156),N=o.n(S),w=o(7309),C=o.n(w),I=o(2404),T=o.n(I),k=o(95093),x=o.n(k),O=o(84503),M=o(33218),z=o(61365),D=o(21572),F=o(17667),R=o(21040),j=o(88871),L=o(87612),U=o.n(L),G=o(78439),V=o(32098),W=o(67172),B=o(21327),H=o(97463),q=o(86682),K=o(52105),Z=o(60730),X=o(88632),J=o(71086),Y=o(77157),$=o(17660),Q=o(85609);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class InfoPanelCollectionNode extends s.Component{constructor(){super(...arguments),_defineProperty(this,"removeFromNodeClick",(()=>{var{model:e,imageModel:t,modelType:o}=this.props;"Groups"===o?p.A.emit("openDialog",s.createElement($.A,{items:[t],group:e})):new Y.A({items:[t],albumId:e.id,albumName:e.name}).start()}))}render(){var{model:e,modelType:t,showEditOptions:o}=this.props,n="Groups"===t?Q.Ay:X.A,r="Groups"===t?b.A.getProperty("urls.groups"):b.A.getProperty("urls.album"),a={eventName:"Groups"===t?"RemoveFromGroup":"RemoveFromAlbum",eventTag:"SPV_InfoPanel"},i=o?s.createElement(O.A,{name:"removeFromAssociatedCollection",metricOverrides:a,className:"remove-link",onClick:this.removeFromNodeClick}):null,l=o?s.createElement(n,{model:e}):s.createElement(u.A,{href:"".concat(r,"/").concat(e.id),name:"associatedCollectionNodeClick",historyState:{groupsBackUrl:J.A.getProperty("fragment")}},s.createElement(n,{model:e}));return s.createElement("div",{className:m()("associated-collection-node",{"edit-mode":o})},l,i)}}const ee=InfoPanelCollectionNode;function node_info_panel_collections_defineProperty(e,t,o){return(t=function node_info_panel_collections_toPropertyKey(e){var t=function node_info_panel_collections_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class InfoPanelAssociatedCollections extends s.PureComponent{constructor(){super(...arguments),node_info_panel_collections_defineProperty(this,"state",{models:[],showEdit:!1}),node_info_panel_collections_defineProperty(this,"onEditToggle",(()=>this.setState((e=>({showEdit:!e.showEdit}))))),node_info_panel_collections_defineProperty(this,"addToAlbumClick",(()=>{var{model:e}=this.props,t=e instanceof P.A;p.A.emit("openDialog",{component:K.A,props:{selection:new B.A(e),removeUnowned:t}})})),node_info_panel_collections_defineProperty(this,"addToGroupClick",(()=>{var{model:e}=this.props;p.A.emit("openDialog",{component:Z.A,props:{selection:new B.A(e)}})}))}componentDidMount(){this.getModels()}componentDidUpdate(e){var{model:t}=this.props;t!==e.model&&this.getModels()}componentWillUnmount(){this.unMounted=!0}getModels(){var{nodeIds:e,nodeType:t}=this.props;this.setState({showEdit:!1}),e&&e.length?"Albums"===t?this.getAlbumModels():"Groups"===t&&this.getGroupModels():this.unMounted||this.setState({models:[]})}getGroupModels(){var{nodeIds:e,model:t}=this.props,{id:o}=t,n=H.A.getProperty("customerId"),a=[],i=[];return i=e.length>49?e.slice(0,49):e,W.A.batchGetGroup({groupIds:i,customerId:n}).done((e=>{if(e){var{groups:t}=e,n=r()(t,(e=>new P.A(e)));a=U()(n,(e=>"SHARE_LINK"!==e.kind))}var{model:i}=this.props,{id:s}=i;this.unMounted||s!==o||this.setState({models:a})}))}getAlbumModels(){var{nodeIds:e,model:t}=this.props,{id:o}=t;G.A.bulkGetNodes({nodeIds:e}).done((e=>{var{nodes:t=[]}=e;if(t.length){var n=t.filter((e=>"AVAILABLE"===e.status)).map((e=>new A.A(e))),{model:r}=this.props,{id:a}=r;this.unMounted||o!==a||this.setState({models:n})}}))}render(){var e,t,o,n,a,i,{models:l,showEdit:c}=this.state,{model:d,nodeType:p}=this.props,u="Groups"===p,h={eventName:u?"AddToGroupDialogShow":"AddToAlbumDialogShow",eventTag:"SPV_InfoPanel"};return l&&l.length?(t=s.createElement(q.A,{limit:3},r()(l,(e=>s.createElement(ee,{key:e.id,model:e,showEditOptions:c,modelType:p,imageModel:d})))),e=u?(0,D.A)("amazon-photos-photo-info-groups-header",l.length,l.length):(0,D.A)("amazon-photos-photo-info-albums-header",l.length,l.length),o=u?s.createElement(O.A,{name:"AddToGroup",onClick:this.addToGroupClick,className:"add-to-group-btn",metricOverrides:h},(0,D.A)("amazon-photos-add-to-group")):s.createElement(O.A,{name:"AddToAlbum",onClick:this.addToAlbumClick,className:"add-to-album-btn",metricOverrides:h},(0,D.A)("amazon-photos-add-to-album")),n=u?s.createElement(O.A,{name:"ToggleEditAssociatedCollections",onClick:this.onEditToggle,className:"toggle-remove-btn"},(0,D.A)("amazon-photos-photo-info-remove-from-group")):s.createElement(O.A,{name:"ToggleEditAssociatedCollections",onClick:this.onEditToggle,className:"toggle-remove-btn"},(0,D.A)("amazon-photos-photo-info-remove-from-album")),i=c?s.createElement(O.A,{name:"ToggleEditAssociatedCollections",onClick:this.onEditToggle,className:"edit-btn"},(0,D.A)("amazon-photos-done-btn")):s.createElement(V.A,{name:"more",position:"right"},s.createElement("li",null,o),s.createElement("li",null,n)),a=s.createElement("h4",{className:"info-subheading"},e,i)):(e=u?(0,D.A)("amazon-photos-photo-info-no-groups-header"):(0,D.A)("amazon-photos-photo-info-no-albums-header"),o=u?s.createElement(O.A,{name:"AddToGroup",className:"add-btn",onClick:this.addToGroupClick,metricOverrides:h},(0,D.A)("amazon-photos-photo-info-add-to-group")):s.createElement(O.A,{name:"AddToAlbum",className:"add-btn",onClick:this.addToAlbumClick,metricOverrides:h},(0,D.A)("amazon-photos-photo-info-add-to-album")),a=s.createElement("div",null,s.createElement("h4",null,e),o)),s.createElement("div",{className:m()("info-panel-collection-nodes",{"group-collection":u,"album-collection":!u})},a,t)}}node_info_panel_collections_defineProperty(InfoPanelAssociatedCollections,"propTypes",{nodeType:c().string.isRequired});const te=InfoPanelAssociatedCollections;var oe=o(12017),ne=o(59055);function node_info_panel_people_defineProperty(e,t,o){return(t=function node_info_panel_people_toPropertyKey(e){var t=function node_info_panel_people_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class InfoPanelPeople extends s.PureComponent{constructor(){super(...arguments),node_info_panel_people_defineProperty(this,"state",{faces:[]}),node_info_panel_people_defineProperty(this,"refreshPeople",(()=>{this.getPeople()})),node_info_panel_people_defineProperty(this,"editFaceClick",(()=>{p.A.emit("faceEdit")}))}UNSAFE_componentWillMount(){p.A.listen("facesChanged",this.refreshPeople),this.getPeople()}componentDidUpdate(e){var{model:t}=this.props;T()(e.model,t)||this.getPeople()}componentWillUnmount(){p.A.unListen("facesChanged",this.refreshPeople)}getPeople(){var{model:e}=this.props;oe.A.getFacesForNode({nodeId:e.id}).done((e=>{this.setState({faces:e.faceList})}))}render(){var e=F.A.isOn("face-edit"),{faces:t=[]}=this.state,o=b.A.getProperty("urls.people"),n=t.filter((e=>e.personId)),a=e?s.createElement(O.A,{name:"edit-face",className:"edit-btn",onClick:this.editFaceClick},(0,D.A)("amazon-photos-edit-faces")):null,i=(0,D.A)("amazon-photos-people-nav"),l=n.length?s.createElement("h4",null,i,a):s.createElement("h4",null,i),c=n.length?r()(n,(e=>s.createElement(u.A,{name:"associated-person",href:"".concat(o,"/").concat(e.personId),key:e.personId,metricOverrides:{eventName:"GoToFaceCluster",eventTag:"SPV_InfoPanel"}},s.createElement(ne.A,{cdsClusterId:e.personId}),s.createElement("span",{className:"associated-person-name"},e.personName)))):s.createElement(O.A,{name:"add-face",className:"add-btn",onClick:this.editFaceClick,metricOverrides:{eventName:"AddOrEditFaces",eventTag:"SPV_InfoPanel"}},(0,D.A)("amazon-photos-edit-faces"));return n.length||t.length&&e?s.createElement("div",{className:"info-item"},s.createElement("div",{className:"people-list"},l,c)):null}}const re=InfoPanelPeople;var ae=o(54318);const ie="info-panel-item-module__infoPanelItem__SWMkJ",se="info-panel-item-module__heading__Jja8T",le="info-panel-item-module__icon__esxlg",ce="info-panel-item-module__body__G9O6V";var InfoPanelItem=e=>{var{children:t,headingText:o,iconClass:n}=e,r=m()(le,n);return s.createElement("section",{className:ie},s.createElement("h5",{className:se},s.createElement("span",{className:r}),s.createElement("span",null,o)),s.createElement("div",{className:ce},t))};const de="info-panel-location-module__locationIcon__vvFtU",me="info-panel-location-module__locationText__zAaPQ";var pe=p.A.connect((e=>{var{authenticated:t,nodeId:o,modelLocation:n}=e,[r,a]=(0,s.useState)(null),i=(0,s.useRef)(o),l=t&&Boolean(o)&&Boolean(n);(0,s.useEffect)((()=>{i.current=o,a(null),l&&G.A.getExtendedMetadataForNode({id:o}).then((e=>{var{location:t}=e,n=o===i.current;t&&n&&a(t)})).catch((()=>{}))}),[o]);var{city:c,country:d,state:m}=r||{},p=[c,m,d].filter(Boolean).join(", ");return l&&p?s.createElement(InfoPanelItem,{headingText:(0,D.A)("amazon-photos-photo-info-location"),iconClass:de},s.createElement("div",{className:me},p)):null}),[{store:H.A,mapToProps:["authenticated"]}]);function node_info_panel_defineProperty(e,t,o){return(t=function node_info_panel_toPropertyKey(e){var t=function node_info_panel_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class NodeInfoPanel extends s.Component{constructor(){super(...arguments),node_info_panel_defineProperty(this,"onDateAndTimeClick",(()=>{var{model:e}=this.props;p.A.emit("openDialog",{component:R.A,props:{items:[e]}})}))}shouldComponentUpdate(e){return!(!e.shouldRenderInfo||T()(e,this.props))}componentDidUpdate(e){var{model:t}=this.props;e.model.id!==t.id&&y.A.log("InfoPanelView",{eventTag:"SPV_InfoPanel"})}getDeviceInfo(e){var t=[],{model:o,make:n,apertureValue:r,exposureTime:a,ISO:i}=e.mediaContentProperties();if(o)return n&&-1===o.toLowerCase().indexOf(n.toLowerCase())&&(o="".concat(n," ").concat(o)),r&&t.push(e.getAperture()),a&&t.push(a+(-1===a.indexOf("s")?"s":"")),i&&t.push(i),{className:"device-info",title:(0,D.A)("amazon-photos-photo-info-device-info"),label:o,subs:t}}getContributorInfo(e){var{model:t,contributorData:o={},parentModel:n}=e;if(!t)return null;var r,a,i,l,{ownerId:c,groupPermissions:d}=t,m=o[c];if(!m)return null;if(n instanceof P.A){var{groupId:p}=n,u=C()(d,{groupId:p});u&&(l=(0,z.eK)(x().utc(u.lastModifiedTime))),a=N()(m,"avatar.color"),r=N()(m,"names.firstName");var h=N()(m,"avatar.photo");h&&(i={id:h.nodeId,ownerId:h.ownerId})}else r=m.name,i={id:m.avatarNodeId,ownerId:m.customerId},l=(0,z.eK)(x().utc(t.createdDate));if(!r)return null;var g=t.belongsToCurrentUser()?(0,D.A)("amazon-photos-you"):r;return{className:"contributor",title:[s.createElement(j.A,{key:"avatar",color:a,customerName:r,node:i}),(0,D.A)("amazon-photos-added-by-user",[g])],subs:[l]}}getEditDateInfo(e){var t,{contextViewName:o}=this.props,n=e.canEdit()&&"ShareLandingSPV"!==o,EditDateAndTimeButton=e=>{var{label:t}=e;return s.createElement(O.A,{onClick:this.onDateAndTimeClick,name:"edit-date-button",className:"edit-btn"},t)},r=null;return e.contentProperties.contentDate?(t=x().utc(e.contentProperties.contentDate),r={editableElement:n,className:m()("date-info"),button:n?s.createElement(EditDateAndTimeButton,{label:(0,D.A)("amazon-photos-photo-info-edit")}):null,label:(0,z.eK)(t),title:(0,D.A)("amazon-photos-photo-info-date-taken"),subs:[t.format("dddd, LT")]}):r=n?{editableElement:n,className:m()("date-info","no-date",{editable:n}),title:(0,D.A)("amazon-photos-photo-info-date-taken"),label:s.createElement(EditDateAndTimeButton,{label:(0,D.A)("amazon-photos-edit-date-no-date")}),hide:!e.canEdit()}:null,r}getFileInfo(e){var{width:t,height:o}=e.mediaContentProperties(),n=[];return t&&o&&n.push("".concat(t," x ").concat(o)),n.push((0,M.A)(e.contentProperties.size)),{className:"file-info",title:(0,D.A)("amazon-photos-photo-info-file-info"),label:e.name,subs:n}}renderGroupsInfo(){if(F.A.isOff(ae.jy.GroupsEnabled))return null;var{model:e,groups:t}=this.props;return s.createElement("div",{className:"info-item"},s.createElement("div",{className:"group-list"},s.createElement(te,{nodeIds:t,nodeType:"Groups",model:e})))}renderAlbumsInfo(){var{albums:e,model:t}=this.props;return s.createElement("div",{className:"info-item"},s.createElement("div",{className:"album-list"},s.createElement(te,{nodeIds:e,nodeType:"Albums",model:t})))}renderPeopleInfo(){var{model:e}=this.props;return F.A.isOff("people")||F.A.isOff("face-edit")?null:s.createElement(re,{model:e})}renderDetailsContent(){var{model:e,contributorData:t,parentModel:o}=this.props,n=[];return n.push(this.getContributorInfo({model:e,contributorData:t,parentModel:o})),n.push(this.getFileInfo(e)),n.push(this.getEditDateInfo(e)),n.push(this.getDeviceInfo(e)),s.createElement(s.Fragment,null,r()(n,((e,t)=>{if(e&&!e.hide)return s.createElement("div",{className:m()("info-item",{editable:e.editableElement}),key:t},s.createElement("div",{className:m()("detail-item",e.className)},s.createElement("h4",null,e.title,e.button),s.createElement("span",{className:"label"},e.label),s.createElement("span",{className:"subs"},r()(e.subs,((e,t)=>s.createElement("span",{key:t},e))))))})))}renderAssociatedInfo(){var{contextViewName:e,model:t}=this.props;return t.belongsToCurrentUser()&&"ShareLandingSPV"!==e?s.createElement(s.Fragment,null,this.renderPeopleInfo(),this.renderAlbumsInfo(),this.renderGroupsInfo()):null}render(){var e,{model:t,shouldRenderInfo:o,toggleDetails:n}=this.props;return s.createElement("aside",{className:"image-info-panel"},s.createElement("h2",{className:"header"},(0,D.A)("amazon-photos-photo-info-header"),s.createElement(O.A,{onClick:n,name:"close-details"})),o&&s.createElement(s.Fragment,null,this.renderAssociatedInfo(),this.renderDetailsContent(),s.createElement(pe,{nodeId:null==t?void 0:t.id,modelLocation:null==t||null===(e=t.mediaProperties)||void 0===e?void 0:e.location})))}}var ue=o(61510),he=o(37796),ge=o(24713),ve=o.n(ge),fe=o(56170),ye=o.n(fe),be=o(32629),Ae=o.n(be),Ee=o(85796),Pe=o(94788),_e=o(16176),Se=o(83676),Ne=o(77459),we=o(63623),Ce=o(46158),Ie=o(52318),Te=o(23688),ke=["nodeToFacesMap","defaultPersonId","onExitFaceTagEditorClick"];function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function face_tag_editor_defineProperty(e,t,o){return(t=function face_tag_editor_toPropertyKey(e){var t=function face_tag_editor_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}var Button=e=>s.createElement(O.A,_extends({stopPropagation:!0},e));class FaceTagEditor extends s.Component{constructor(){super(...arguments),face_tag_editor_defineProperty(this,"state",{sortedFaces:[],activeFace:"",containerWidth:void 0,containerHeight:void 0,imageLoadFailed:!1}),face_tag_editor_defineProperty(this,"menuRefs",{}),face_tag_editor_defineProperty(this,"onKeyboardPrev",(()=>this.keyboardNav(-1))),face_tag_editor_defineProperty(this,"onKeyboardNext",(()=>this.keyboardNav(1))),face_tag_editor_defineProperty(this,"onImageLoad",(()=>{var{width:e,height:t}=this.imageNode.getMaximumDimensions();this.setState({containerWidth:e,containerHeight:t})})),face_tag_editor_defineProperty(this,"onImageError",(()=>{this.setState({imageLoadFailed:!0})})),face_tag_editor_defineProperty(this,"onEditorClick",(()=>{this.setState({activeFace:""})})),face_tag_editor_defineProperty(this,"onFaceClick",((e,t)=>{var{face:o}=t;this.setState({activeFace:o.faceId})})),face_tag_editor_defineProperty(this,"onRemoveFaceClick",((e,t)=>{var{face:{faceId:o,personId:n,personName:r}}=t,{model:a}=this.props,i=[{node:a,faceId:o}];p.A.emit("openDialog",s.createElement(Ce.A,{personName:r,imageCount:1,onConfirm:()=>{this.disableFaceMenu(o),new Ie.A({sourcePersonId:n,items:i}).start()}}))})),face_tag_editor_defineProperty(this,"disableFaceMenu",(e=>{var{sortedFaces:t}=this.state;C()(t,{faceId:e}).disabled=!0,this.setState({sortedFaces:t})})),face_tag_editor_defineProperty(this,"onReassignFaceClick",((e,t)=>{var{face:o}=t;this.changeFace(o)})),face_tag_editor_defineProperty(this,"onIdentifyFaceClick",((e,t)=>{var{face:o}=t;this.changeFace(o)}))}UNSAFE_componentWillMount(){var{nodeToFacesMap:e={},model:t}=this.props;this.getFaceData(t.id),e[t.id]&&this.setSortedFaceState(e[t.id]),this.bindKeyboardNavEvents()}UNSAFE_componentWillReceiveProps(e){var{model:t,nodeToFacesMap:o={}}=e,{model:n}=this.props,{sortedFaces:r}=this.state;if(n.id!==t.id)this.getFaceData(t.id),this.setState({sortedFaces:[],activeFace:""});else{var a=o[t.id]||[];r.length!==a.length&&(this.setSortedFaceState(a),a.length||this.getFaceData(n.id))}}componentDidUpdate(){var{activeFace:e=""}=this.state,t=this.menuRefs[e];t&&!1===/Trident/.test(window.navigator.userAgent)&&t.scrollIntoView({behavior:"smooth"})}componentWillUnmount(){this.unbindKeyboardNavEvents()}getFaceData(e){p.A.emit("getFacesForNode",e)}setSortedFaceState(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{defaultPersonId:t}=this.props,o=Ae()(e);o.sort(((e,t)=>{var{boundingBox:o}=e,{boundingBox:n}=t;return o.TopLeftCoordY-n.TopLeftCoordY||o.TopLeftCoordX-n.TopLeftCoordX}));var{activeFace:n}=this.state;!n&&t&&(n=(C()(e,{personId:t})||{}).faceId),n||(n=(ye()(e)||{}).faceId),this.setState({sortedFaces:o,activeFace:n})}bindKeyboardNavEvents(){p.A.listen("prev",this.onKeyboardPrev,this),p.A.listen("next",this.onKeyboardNext,this)}unbindKeyboardNavEvents(){p.A.unListen("prev",this.onKeyboardPrev,this),p.A.unListen("next",this.onKeyboardNext,this)}keyboardNav(e){var{sortedFaces:t,activeFace:o}=this.state,n=ve()(t,{faceId:o});this.setState({activeFace:t[(t.length+n+e)%t.length].faceId})}changeFace(e){var{model:t}=this.props,{faceId:o,personId:n}=e,r=s.createElement(we.A,{onPersonSelected:e=>{this.disableFaceMenu(o),new Se.A({targetPersonId:e.name,targetPersonName:N()(e,"searchData.clusterName"),sourcePersonId:n,items:[{node:t,faceId:o}]}).start()},onNewPersonSelected:e=>{this.disableFaceMenu(o),new _e.A({sourcePersonId:n,items:[{node:t,faceId:o}],targetPersonName:e}).start()},disabledPersonIds:[n]});p.A.emit("openDialog",r)}renderFaceMenu(e){var{faceId:t,personName:o}=e;if(!o)return s.createElement("ul",{className:"face-menu",ref:e=>(this.menuRefs[t]=e,e)},s.createElement("li",null,s.createElement(Button,{name:"identify-face",onClick:this.onIdentifyFaceClick,face:e,metricOverrides:{eventName:"AddTag"}},s.createElement(Pe.A,null,"amazon-photos-new-person"))))}renderFaceLabel(e){var{faceId:t,personName:o}=e;if(o)return s.createElement("label",null,s.createElement("div",{className:"face-name",title:o},o),s.createElement("ul",{className:"label-face-menu",ref:e=>(this.menuRefs[t]=e,e)},s.createElement("li",null,s.createElement(Button,{name:"remove",onClick:this.onRemoveFaceClick,face:e},s.createElement(Pe.A,null,"amazon-photos-remove-face"))),s.createElement("li",null,s.createElement(Button,{name:"reassign",onClick:this.onReassignFaceClick,face:e},s.createElement(Pe.A,null,"amazon-photos-reassign-face")))))}renderFaceCircle(e){var{model:t}=this.props,{activeFace:o}=this.state,{height:n,width:r}=t.mediaContentProperties(),a=o===e.faceId,i=(0,Te.A)({face:e,imageWidth:r,imageHeight:n});return s.createElement("figure",{className:m()("face-circle",{active:a}),style:i,key:e.faceId},!a&&s.createElement(Button,{name:"face-button",onClick:this.onFaceClick,face:e}),!e.disabled&&a&&this.renderFaceMenu(e),!e.disabled&&this.renderFaceLabel(e))}render(){var{containerWidth:e,containerHeight:t,sortedFaces:o=[],imageLoadFailed:n}=this.state,a=this.props,{nodeToFacesMap:i,defaultPersonId:l,onExitFaceTagEditorClick:c}=a,d=_objectWithoutProperties(a,ke),m=t&&e,p=!n&&m&&o.length&&r()(o,(e=>this.renderFaceCircle(e))),u={};if(m){var h=e/t;h>=1?(u.maxWidth="100%",u.maxHeight="".concat(Math.round(1/h*1e4)/100,"vw")):(u.maxWidth="".concat(Math.round(1e4*h)/100,"vh"),u.maxHeight="100%")}return s.createElement("section",{className:"face-editor",onClick:this.onEditorClick},s.createElement(Button,{name:"exit-face-editor",onClick:c}),s.createElement(Ee.A,_extends({},d,{style:u,onImageLoad:this.onImageLoad,onImageError:this.onImageError,ref:e=>(this.imageNode=e,e),height:t,width:e}),p,!p&&!n&&s.createElement("div",{className:"loading"})))}}face_tag_editor_defineProperty(FaceTagEditor,"propTypes",{onExitFaceTagEditorClick:c().func.isRequired,model:c().shape({id:c().string.isRequired,mediaContentProperties:c().func.isRequired}).isRequired,defaultPersonId:c().string});const xe=Ne.A.connectComponent(FaceTagEditor,"nodeToFacesMap");class GalleryItem extends X.A{getViewComponent(e){return e instanceof ue.A?he.A:this.props.isFaceEditing?xe:super.getViewComponent(e)}}const Oe=GalleryItem;function node_gallery_extends(){return node_gallery_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},node_gallery_extends.apply(this,arguments)}function node_gallery_defineProperty(e,t,o){return(t=function node_gallery_toPropertyKey(e){var t=function node_gallery_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Me=100;class NodeGallery extends s.Component{constructor(){var e;super(...arguments),e=this,node_gallery_defineProperty(this,"state",{showChrome:!0,isDetailsOpen:!1,isFaceEditing:!1,wasDetailsOpen:!1,animateZoom:!1,zoom:Me,posX:0,posY:0}),node_gallery_defineProperty(this,"bindUXEvents",(()=>{p.A.listen("next",this.onNext,this),p.A.listen("prev",this.onPrev,this),p.A.listen("info",this.toggleDetails,this),p.A.listen("favorite",this.temporarilyShowChrome,this),p.A.listen("mouseJiggle",this.temporarilyShowChrome,this),p.A.listen("escape",this.onEscape,this),p.A.listen("faceEdit",this.handleFaceEditEnter,this)})),node_gallery_defineProperty(this,"unbindUXEvents",(()=>{p.A.unListen("next",this.onNext,this),p.A.unListen("prev",this.onPrev,this),p.A.unListen("info",this.toggleDetails,this),p.A.unListen("favorite",this.temporarilyShowChrome,this),p.A.unListen("mouseJiggle",this.temporarilyShowChrome,this),p.A.unListen("escape",this.onEscape,this),p.A.unListen("faceEdit",this.handleFaceEditEnter,this)})),node_gallery_defineProperty(this,"logViewMetric",((e,t)=>{if(e){var o=t;t&&t.includes("SPV")&&(o=t.slice(0,-3));var n=e.getNodeType();n!==E.y.PHOTO&&n!==E.y.LIVE_PHOTO||(n="PHOTO"),Object.values(E.y).indexOf(n)<0&&(n="FILE"),y.A.log("PhotosViewPhoto",{eventTag:n},o)}})),node_gallery_defineProperty(this,"onNext",(()=>{var{handleNavigate:e}=this.props;this.handleKeyNav(),p.A.emit("stopVideo"),e("next")})),node_gallery_defineProperty(this,"onPrev",(()=>{var{handleNavigate:e}=this.props;this.handleKeyNav(),p.A.emit("stopVideo"),e("prev")})),node_gallery_defineProperty(this,"onChromeMouseEnter",(()=>{window.clearTimeout(this.chromeTimeout),this.showChrome()})),node_gallery_defineProperty(this,"onChromeMouseLeave",(()=>{this.setChromeTimeout()})),node_gallery_defineProperty(this,"onEscape",(()=>{var{backUrl:e}=this.props,{isFaceEditing:t}=this.state;t?this.handleFaceEditExit():(0,g.A)(e)})),node_gallery_defineProperty(this,"onSwipe",(e=>{var{handleNavigate:t}=this.props,{zoom:o}=this.state;if(o===Me)switch(e){case"right":t("prev");break;case"left":t("next")}})),node_gallery_defineProperty(this,"toggleDetails",(()=>{var{viewName:e}=this.props,{isDetailsOpen:t}=this.state;y.A.log(t?"CloseInfoPanel":"OpenInfoPanel",{eventTag:"SPV_InfoPanel"},e),this.setState((e=>({isDetailsOpen:!e.isDetailsOpen})))})),node_gallery_defineProperty(this,"handleFaceEditEnter",(()=>{this.hideChrome(),this.unbindUXEvents(),p.A.listen("escape",this.onEscape,this),this.setState((e=>({isDetailsOpen:!1,wasDetailsOpen:e.isDetailsOpen,isFaceEditing:!0,animateZoom:!0,zoom:Me,imagePreviewZoom:Me})))})),node_gallery_defineProperty(this,"handleFaceEditExit",(()=>{window.clearTimeout(this.chromeTimeout),this.showChrome(),p.A.emit("facesChanged"),this.setState((e=>({isDetailsOpen:e.wasDetailsOpen,isFaceEditing:!1}))),this.bindUXEvents()})),node_gallery_defineProperty(this,"handleGalleryClick",(e=>{var{showChrome:t}=this.state;t?this.hideChrome():(e.preventDefault(),e.stopPropagation(),this.showChrome())})),node_gallery_defineProperty(this,"handleKeyNav",(()=>{var{showChromeOnKeyNav:e}=this.props,{showChrome:t}=this.state;e&&(t||this.showChrome(),this.setChromeTimeout())})),node_gallery_defineProperty(this,"handleNextButtonClicked",(()=>{var{onNextButtonClicked:e}=this.props;this.handleKeyNav(),e&&e()})),node_gallery_defineProperty(this,"handlePrevButtonClicked",(()=>{var{onPrevButtonClicked:e}=this.props;this.handleKeyNav(),e&&e()})),node_gallery_defineProperty(this,"handleDragEnd",(()=>{var{zoom:e}=this.state;e===Me&&this.setState({posX:0,posY:0})})),node_gallery_defineProperty(this,"handleDragMove",(e=>{var{posX:t,posY:o,zoom:n}=this.state,r=n||Me,a=t||0,i=o||0,s=window.innerWidth,l=window.innerHeight,c=s/2-s*Me/(2*r),d=l/2-l*Me/(2*r);r+=e.zoom,r=Math.min(Math.max(r,Me),400),a+=e.offsetX*Me/n,i+=e.offsetY*Me/n,r===Me?(i=0,e.x||e.y||(a=0)):(a=Math.min(Math.max(a,-c),c),i=Math.min(Math.max(i,-d),d)),this.setState({zoom:r,posX:a,posY:i,animateZoom:!1}),this.setImagePreviewZoom(r)})),node_gallery_defineProperty(this,"handleToggleZoom",(()=>{var{zoom:e}=this.state,t=e===Me?400:Me;this.setState({zoom:t,posX:0,posY:0,animateZoom:!0}),this.setImagePreviewZoom(t)})),node_gallery_defineProperty(this,"setImagePreviewZoom",(e=>{var{imagePreviewZoom:t}=this.state;e!==t&&this.setState({imagePreviewZoom:e})})),node_gallery_defineProperty(this,"showChrome",(()=>{this.setState({showChrome:!0})})),node_gallery_defineProperty(this,"hideChrome",(()=>{window.clearTimeout(this.chromeTimeout),this.setState({showChrome:!1})})),node_gallery_defineProperty(this,"temporarilyShowChrome",(()=>{var{showChrome:e}=this.state;e||(this.showChrome(),this.setChromeTimeout())})),node_gallery_defineProperty(this,"setChromeTimeout",(()=>{window.clearTimeout(this.chromeTimeout),this.chromeTimeout=window.setTimeout(this.hideChrome,3e3)})),node_gallery_defineProperty(this,"getNodeId",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&t.id){var{useOwnerId:o}=e.props;return o?t.ownerNodeId:t.id}})),node_gallery_defineProperty(this,"shouldRenderNavigation",(()=>{var{viewName:e}=this.props,{isFaceEditing:t}=this.state;return!(t&&"PeopleDetailViewSPV"!==e)}))}UNSAFE_componentWillMount(){p.A.emit("enterFullScreen"),this.bindUXEvents(),this.setChromeTimeout(),this.setImagePreviewZoom=i()(this.setImagePreviewZoom,100)}componentDidMount(){var{currentNode:e,viewName:t}=this.props;this.logViewMetric(e,t)}UNSAFE_componentWillReceiveProps(e){var{currentNode:t}=this.props;e.currentNode!==t&&this.setState({zoom:Me,animateZoom:!1,posX:0,posY:0})}componentDidUpdate(e){var{currentNode:t,viewName:o,handleNavigate:n}=this.props;!this.getNodeId(t)&&e.currentNode&&(this.getNodeId(e.nextNode)?n("next",{prevNode:e.prevNode,nextNode:e.nextNode}):n("prev",{prevNode:e.prevNode,nextNode:e.nextNode})),this.getNodeId(t)!==this.getNodeId(e.currentNode)&&this.logViewMetric(t,o)}componentWillUnmount(){p.A.emit("exitFullScreen"),this.unbindUXEvents(),window.clearTimeout(this.chromeTimeout)}render(){var{nodeHeader:{component:e,additionalProps:t},faceEditingVisible:o,reportAbuseVisible:n,onReportAbuseClick:a,defaultPersonId:i,parentModel:l,parentContext:c,contributorData:d,hideActions:p,hideReactions:h,hideOverflowOptions:g,size:f,shareMode:y,showFavorite:A,showHide:E,additionalOptions:P,isSharedPage:_,addReactionOnJoin:S,pageUrlModel:N,currentNode:w,nextNode:C,prevNode:I,nodesToLoad:T,viewName:k,backUrl:x,buildNavigationLink:O,handleImageLoad:M,handleItemRender:z}=this.props,{isDetailsOpen:D,isFaceEditing:F,showChrome:R,animateZoom:j,imagePreviewZoom:L,posX:U,posY:G,zoom:V}=this.state,W=V!==Me,B=0!==U||0!==G,H=b.A.getProperty("device.isIOS")||b.A.getProperty("browser.isSafari"),q=!F,K={onMouseEnter:this.onChromeMouseEnter,onMouseLeave:this.onChromeMouseLeave};return s.createElement("section",{className:m()("gallery",{"face-editing":F,"info-panel-open":D,"chrome-visible":R,"persistent-header":H})},s.createElement(e,node_gallery_extends({showFavorite:A,showHide:E,model:w,shareMode:y,hideActions:p,hideReactions:h,hideOverflowOptions:g,toggleDetails:this.toggleDetails,backUrl:x,onMouseEnter:this.onChromeMouseEnter,onMouseLeave:this.onChromeMouseLeave,faceEditingVisible:o,onFaceEditClick:this.handleFaceEditEnter,reportAbuseVisible:n,onReportAbuseClick:a,hideZoom:f.mobile||w&&!w.isPhoto(),isZoomed:W,onToggleZoom:this.handleToggleZoom,parentModel:l,parentContext:c,additionalOptions:P,isSharedPage:_,addReactionOnJoin:S,pageUrlModel:N},t)),s.createElement("div",{className:"image-and-controls"},I&&this.shouldRenderNavigation()&&s.createElement(u.A,node_gallery_extends({},K,{key:"prev-node",onClick:this.handlePrevButtonClicked,href:O(N,I),name:"prev",replace:!0})),C&&this.shouldRenderNavigation()&&s.createElement(u.A,node_gallery_extends({},K,{key:"next-node",onClick:this.handleNextButtonClicked,href:O(N,C),name:"next",replace:!0})),s.createElement(v.A,{className:m()("image-drag",{zoomed:W,"smooth-zoom":j}),style:{transform:"scale(".concat(V/100,")")},allowZoom:q,allowTouch:q,allowMouse:q,onMove:this.handleDragMove,onSwipe:this.onSwipe,onEnd:this.handleDragEnd,onClick:this.handleGalleryClick},r()(T,(e=>{if(this.getNodeId(e)){var t,o,n,r=!1,a=!1;switch(e){case C:t="next-node",B&&!W&&(o={transform:"translateX(".concat(window.innerWidth+U,"px)")},t+=" dragging");break;case I:t="prev-node",B&&!W&&(o={transform:"translateX(".concat(-window.innerWidth+U,"px)")},t+=" dragging");break;case w:r=!0,a=F,B&&(t="dragging",o={transform:"translateX(".concat(U,"px) translateY(").concat(G,"px)")}),n=L;break;default:t="preloaded-node"}return z&&z(this.getNodeId(e)),s.createElement(Oe,{model:e,transition:!1,showLoading:r,style:o,key:this.getNodeId(e),thumbnail:!1,zoom:n,onImageLoad:()=>{M&&M(this.getNodeId(e),T)},className:t,isActive:r,isFaceEditing:a,onExitFaceTagEditorClick:this.handleFaceEditExit,defaultPersonId:i})}})))),w&&s.createElement(NodeInfoPanel,{parentModel:l,toggleDetails:this.toggleDetails,shouldRenderInfo:D,model:w,contributorData:d,contextViewName:k,date:w&&w.contentProperties?w.contentProperties.contentDate:null,groups:r()(w.groupPermissions,(e=>e.groupId)),albums:w.parentMap.VISUAL_COLLECTION||[]}))}}node_gallery_defineProperty(NodeGallery,"propTypes",{nodeHeader:c().shape({component:c().elementType,additionalProps:c().object}),faceEditingVisible:c().bool,reportAbuseVisible:c().bool,onReportAbuseClick:c().func,defaultPersonId:c().string,parentModel:c().oneOfType([c().instanceOf(A.A),c().instanceOf(P.A)]),parentContext:c().string,contributorData:c().object,hideActions:c().bool,hideReactions:c().bool,hideOverflowOptions:c().bool,size:c().object.isRequired,shareMode:c().bool,showFavorite:c().bool,showHide:c().bool,additionalOptions:c().arrayOf(c().shape({position:c().number,string:c().string.isRequired,onClick:c().func.isRequired})),isSharedPage:c().bool,addReactionOnJoin:c().bool,pageUrlModel:c().instanceOf(h.A).isRequired,currentNode:c().instanceOf(A.A),nextNode:c().instanceOf(A.A),prevNode:c().instanceOf(A.A),nodesToLoad:c().arrayOf(c().instanceOf(A.A)).isRequired,viewName:c().string.isRequired,backUrl:c().string.isRequired,buildNavigationLink:c().func.isRequired,handleImageLoad:c().func,handleItemRender:c().func}),node_gallery_defineProperty(NodeGallery,"defaultProps",{nodeHeader:{component:_.A,additionalProps:{}}});const ze=p.A.connect(NodeGallery,{store:f.A},["size"])},57717:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(55378),r=o.n(n),a=o(24713),i=o.n(a),s=o(96540),l=o(5556),c=o.n(l),d=o(73509),m=o(32485),p=o.n(m),u=o(49479),h=o(30772);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g={},v=[{ratio:.25,min:1024},{ratio:.3,min:700},{ratio:.5,min:0}];class NodeMosaic extends s.Component{componentWillUnmount(){clearTimeout(this.updateTimeout)}generateLayout(e){if(!e)return null;var t=v[i()(v,(t=>e>=t.min))].ratio,{models:o,itemSpacing:n,centerLastItem:a=!1,height:s}=this.props,l=r()(o,(e=>({width:e&&e.width()||1,height:e&&e.height()||1}))),c=r()(l,(e=>{var{width:t,height:o}=e;return Math.round(o/t*100)/100})).join("|")+e,d={spacing:n,idealElementHeight:Math.round(e*t),maxHeight:s||Math.max(300,Math.round(.5*e)),minHeight:s||100,fixedHeight:s||void 0,minAspect:2/3,maxAspect:1.5,containerWidth:e,centerLastItem:a},m=g[c];if(m)return m;var p=(0,h.A)(l,d);return g[c]=p,p}renderLayout(e,t){var{models:o,children:n,onComponentHeightChange:a}=this.props,i=this.generateLayout(e);if(!i)return null;var{width:l,height:c,positions:d}=i;return a&&t&&c!==this._height&&(this._height=c,this.updateTimeout=setTimeout((()=>a()),0)),s.createElement("div",{style:{height:c,width:l},className:"mosaic-inner"},r()(d,((e,t)=>{var r=o[t],a=!r,i=a?t:r.id,{y:l,x:c,width:d,height:m}=e;return s.createElement("div",{key:i,className:"mosaic-item",style:{top:l,left:c,width:d,height:m}},n({model:r,placeholder:a,width:d,height:m}))})))}render(){var{className:e,width:t,itemSpacing:o}=this.props,n={marginBottom:"".concat(o,"px")};return s.createElement("div",{className:p()("node-mosaic",e),ref:e=>{this._el=e},style:n},t&&this.renderLayout(t),!t&&s.createElement(d.t$,{disableHeight:!0},(e=>{var{width:t}=e;return this.renderLayout(t,!0)})))}}_defineProperty(NodeMosaic,"propTypes",{models:c().arrayOf(c().instanceOf(u.A)),onComponentHeightChange:c().func,children:c().func.isRequired,width:c().number,height:c().number,centerLastItem:c().bool,itemSpacing:c().number}),_defineProperty(NodeMosaic,"defaultProps",{models:new Array(10),itemSpacing:2});const f=NodeMosaic},68865:(e,t,o)=>{o.d(t,{A:()=>NodeOptions});var n=o(55378),r=o.n(n),a=o(95950),i=o.n(a),s=o(43346),l=o.n(s),c=o(39754),d=o.n(c),m=o(90179),p=o.n(m),u=o(44383),h=o.n(u),g=o(38221),v=o.n(g),f=o(96540),y=o(5556),b=o.n(y),A=o(32485),E=o.n(A),P=o(84503),_=o(35994),S=o(68564),N=o(7138),w=o(21327),C=o(31682),I=o(19625),T=o(17667),k=o(21572),x=o(32239),O=o(1683),M=o(71086),z=o(18742),D=o(52105),F=o(96389),R=o(49479),j=o(95552),L=o(42341),U=o(25205),G=o(91491),V=o(66941),W=o(60730),B=o(24406),H=o(62193),q=o.n(H),K=o(60895),Z=o.n(K),X=o(58156),J=o.n(X),Y=o(42843),$=o(91155),Q=o(30257),ee=o(78333);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var te="OpenReactionsPanel",oe=(0,ee.A)((()=>o.e(634).then(o.bind(o,39948))));class ReactionButtons extends f.Component{constructor(){super(...arguments),_defineProperty(this,"state",{reactionSummary:{}}),_defineProperty(this,"onReactionsChanged",(()=>{var{isSharedPage:e}=this.props;if(e)return null;Z()((()=>this.refreshCount()),Y.A.SHORT)})),_defineProperty(this,"onCommentKey",(()=>{var{pageContext:e}=this.context;return this.openDialog(),O.A.log(te,{eventTag:"keyboard"},e),!1})),_defineProperty(this,"onCommentClick",(e=>{e.stopPropagation(),this.openDialog()}))}componentDidMount(){var{parentModel:e,model:t}=this.props;this._isMounted=!0,e&&t&&(_.A.listen("reactionsChanged",this.onReactionsChanged,this),_.A.listen("comment",this.onCommentKey,this),this.refreshCount(e.groupId,t.reactionTopic))}componentDidUpdate(e){var{model:t,parentModel:o}=this.props,{reactionSummary:n}=this.state;J()(t,"id")===J()(e,"model.id")&&J()(o,"groupId")===J()(e,"parentModel.groupId")||(n={commentCount:0},this.setState({reactionSummary:n}),this.refreshCount())}componentWillUnmount(){this._isMounted=!1,_.A.unListen("reactionsChanged",this.onReactionsChanged,this),_.A.unListen("comment",this.onCommentKey,this)}refreshCount(){var{model:e,parentModel:t,isSharedPage:o}=this.props,{reactionSummary:n}=this.state;if(o)return null;e&&e===t&&(this.isUnseenCount=!0,n={commentCount:J()(t,"unseenContentAggregations.reactionCount")},this.setState({reactionSummary:n}))}openDialog(){var{parentModel:e,model:t,includeCoverPhotos:o,className:n}=this.props,{reactionSummary:r}=this.state;_.A.emit("openDialog",f.createElement($.A,{groupId:e.groupId,topic:t.reactionTopic,includeCoverPhotos:o,className:n})),this.isUnseenCount&&(r={commentCount:0},this.setState({reactionSummary:r}))}render(){var e,{reactionSummary:t}=this.state,{className:o,children:n,model:r,parentModel:a,showHearts:i,isSharedPage:s,addReactionOnJoin:l}=this.props;return q()(t)||(e=(0,Q.A)(t.commentCount)),f.createElement("div",{className:"reaction-buttons"},i&&f.createElement(oe,{model:r,parentModel:a,position:"bottom",addReactionOnJoin:l,isSharedPage:s}),!i&&f.createElement(P.A,{name:"open-reactions-button",className:E()(o,"open-reactions-button"),title:(0,k.A)("amazon-photos-open-reactions"),metricOverrides:{eventName:te,eventTag:"button"},onClick:this.onCommentClick},f.createElement("span",{className:"badge"},"0"===e?null:e),n))}}_defineProperty(ReactionButtons,"contextTypes",{pageContext:b().string.isRequired});const ne=ReactionButtons;var re=o(77157),ae=o(93031),ie=o(17660),se=o(55319),le=o(88339),ce=o(61510),de=o(54318);function node_options_defineProperty(e,t,o){return(t=function node_options_toPropertyKey(e){var t=function node_options_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class NodeOptions extends((0,N.A)(f.Component)){constructor(){super(...arguments),node_options_defineProperty(this,"state",{familyId:U.A.getProperty("familyId")}),node_options_defineProperty(this,"onReportAbuseClick",(e=>{var{onReportAbuseClick:t}=this.props;if(t)return t(e,this.props.model)})),node_options_defineProperty(this,"onDownloadClick",(()=>{var{model:e}=this.props,{pageContext:t}=this.context,o=[e];(0,L.A)({models:o,pageContext:t})})),node_options_defineProperty(this,"onBuyPrintsClick",(()=>{var{model:e}=this.props,{pageContext:t}=this.context;_.A.emit("openDialog",{id:"prints-sidebar",component:f.createElement(B.T9,{models:[e]})}),O.A.log("EnterProjectProductSelectionSinglePhoto",{},t)})),node_options_defineProperty(this,"onEditPhotoClick",(e=>{e.preventDefault(),_.A.emit("editPhotoEngaged",{node:this.props.model})})),node_options_defineProperty(this,"onAddToFamilyArchiveClick",v()((()=>{var{familyArchiveSingleOperation:e,model:t}=this.props,{familyId:o}=this.state;e&&(o?t.familyId=o:t.familyIdPending=!0,_.A.emit("update")),new F.A({showToast:!e,items:[t],eventTag:"Hover",failure(){_.A.emit("showToast",{message:(0,k.A)("amazon-photos-fa-add-fail"),className:"fail"})}}).start()}),1e3,{leading:!0})),node_options_defineProperty(this,"onRemoveFromFamilyArchiveClick",v()((()=>{new ae.A({showToast:!this.props.familyArchiveSingleOperation,items:[this.props.model],eventTag:"Hover",failure(){_.A.emit("showToast",{message:(0,k.A)("amazon-photos-fa-remove-fail"),className:"fail"})}}).start(),this.props.familyArchiveSingleOperation&&(delete this.props.model.familyId,delete this.props.model.familyIdPending,_.A.emit("update"))}),1e3,{leading:!0})),node_options_defineProperty(this,"onRemoveFromGroupClick",(()=>{var{model:e,parentModel:t}=this.props;_.A.emit("openDialog",f.createElement(ie.A,{items:[e],group:t}))})),node_options_defineProperty(this,"onRemoveFromAlbumClick",(()=>{var{model:e,parentModel:t}=this.props;new re.A({items:[e],albumId:t.id,albumName:t.name}).start()})),node_options_defineProperty(this,"onShareClick",(()=>{var{model:e}=this.props;_.A.emit("openDialog",{component:T.A.isOn(de.jy.GroupsEnabled)?W.A:le.A,props:{selection:new w.A(e)}})})),node_options_defineProperty(this,"onAddToAlbumClick",(()=>{_.A.emit("openDialog",f.createElement(D.A,{selection:new w.A(this.props.model)}))})),node_options_defineProperty(this,"onAddPhotosClick",(()=>{(0,se.A)(this.props.model,{eventTag:"AddPhotosToAlbumButton"})})),node_options_defineProperty(this,"onHideClick",(()=>{var{model:e}=this.props;new I.A({items:[e]}).start()})),node_options_defineProperty(this,"onTrashClick",(()=>{var{model:e}=this.props;if(e)if(e.isAlbum())(0,x.A)((0,k.A)("amazon-photos-album-move-to-trash-confirm"),{name:"MoveAlbumToTrashDialog",heading:(0,k.A)("amazon-photos-album-move-to-trash-confirm-heading"),confirmText:(0,k.A)("amazon-photos-album-move-to-trash-confirm-button"),onConfirmClick:()=>{new C.A({items:[e]}).start()}});else{var t=new C.A({items:[e]});T.A.isOn("trash-auto-purge")?(0,x.A)(f.createElement(j.A,null),{name:"TrashConfirm",heading:(0,k.A)("amazon-photos-trash-delete-confirm-button"),confirmText:(0,k.A)("amazon-photos-trash-delete-confirm-button"),onConfirmClick:()=>t.start()}):t.start()}}))}getButtons(){var{model:e,parentModel:t,parentContext:o,toggleDetails:n,shareMetricOverrides:r,isSharedPage:a,addReactionOnJoin:i,showHide:s=!0}=this.props,c=M.A.getProperty("route.metrics.viewName"),m="SharedLanding"===c||"SharedLandingSPV"===c,u={heart:{component:f.createElement(ne,{model:e,parentModel:t,showHearts:!0,isSharedPage:a,addReactionOnJoin:i})},livePhoto:{component:f.createElement(S.A,{model:e})},addToFamilyArchive:{onClick:this.onAddToFamilyArchiveClick,string:"amazon-photos-add-to-family-photos",featureFlag:"family-vault"},removeFromFamilyArchive:{onClick:this.onRemoveFromFamilyArchiveClick,string:"amazon-photos-remove-from-family-photos",featureFlag:"family-vault"},share:{className:"share",onClick:this.onShareClick,string:"amazon-photos-share-link",metricOverrides:r||{eventTag:"NodeOptions_T1"}},reactions:{component:f.createElement(ne,{model:e,parentModel:t})},trash:{onClick:this.onTrashClick,string:"amazon-photos-trash"},trashAlbum:{onClick:this.onTrashClick,string:"amazon-photos-trash-album",className:"trash"},faceEdit:{onClick:this.props.onFaceEditClick,string:"amazon-photos-edit-faces",metricOverrides:{eventName:"EditTag"}},edit:{onClick:this.onEditPhotoClick,string:"amazon-photos-edit-photo"},addToAlbum:{onClick:this.onAddToAlbumClick,string:"amazon-photos-add-to-album"},download:{onClick:this.onDownloadClick,string:"amazon-photos-download"},addPhotos:{onClick:this.onAddPhotosClick,string:"amazon-photos-add-photos"},prints:{onClick:this.onBuyPrintsClick,string:"amazon-photos-buy-prints",disabled:!e||!e.isPrintable},removeFromGroup:{onClick:this.onRemoveFromGroupClick,string:"amazon-photos-remove-from-group"},removeFromAlbum:{onClick:this.onRemoveFromAlbumClick,string:"amazon-photos-remove-from-album"},reportAbuse:{onClick:this.onReportAbuseClick,string:"amazon-photos-report-item"},hide:{onClick:this.onHideClick,string:"amazon-photos-hide-button"},info:{onClick:n,string:"amazon-photos-information"}};if(!e)return{};if(e instanceof ce.A&&(u=h()(u,["share","print","edit"])),e.belongsToCurrentUser())delete u.reportAbuse;else{var g=t instanceof V.A;g&&(delete u.share,delete u.addToAlbum),g&&t.belongsToUser||delete u.removeFromGroup,delete u.trash,delete u.trashAlbum,delete u.edit,delete u.addToFamilyArchive,delete u.removeFromFamilyArchive,delete u.removeFromAlbum,delete u.faceEdit,delete u.addPhotos,delete u.hide}return e instanceof R.A&&(e.canAddToFamilyArchive()||delete u.addToFamilyArchive,e.canRemoveFromFamilyArchive()||delete u.removeFromFamilyArchive,"LIVE_PHOTO"!==e.contentType&&delete u.livePhoto,e.isPhotoEditable()||delete u.edit,!z.A.getProperty("photoEditorLicense")&&T.A.isOn(de.jy.ImageEditorImprovement)&&delete u.edit,e.isAlbum()?(delete u.addToFamilyArchive,delete u.removeFromFamilyArchive,delete u.download,delete u.addToAlbum):(delete u.trashAlbum,delete u.addPhotos),e.isPrintable&&T.A.isOn(de.jy.PhotosPrinting)&&(e.belongsToCurrentUser()||"group"!==o)||delete u.prints,s&&e.permissions.canHide||delete u.hide),this.props.shareMode&&(u=h()(u,["reportAbuse","download"])),this.props.omit&&(u=p()(u,this.props.omit)),this.props.faceEditingVisible||delete u.faceEdit,this.props.reportAbuseVisible||delete u.reportAbuse,this.props.hideReactions&&delete u.reactions,this.props.overrides&&d()(this.props.overrides,((e,t)=>{u[t]&&l()(u[t],e)})),t&&"group"===o||(delete u.removeFromGroup,delete u.reactions),t&&"album"===o||delete u.removeFromAlbum,"group"===o&&delete u.trash,(m||"group"!==o)&&delete u.heart,T.A.isOn(de.jy.GroupsEnabled)&&(delete u.addToFamilyArchive,delete u.removeFromFamilyArchive),(0,G.A)(u)}render(){var e=this.getButtons(),t=this.props.pick||i()(e),o=E()("node-options",this.props.className);return f.createElement("ul",{className:o,name:"node-options"},r()(t,(t=>{var o,n;if("object"==typeof t?(o=t,({name:n}=o)):n=(o=e[t])&&o.name||t,o){if(f.isValidElement(o.component))return f.createElement("li",{key:t},o.component);var r=(0,k.A)(o.string);return f.createElement("li",{key:n},f.createElement(P.A,{onClick:o.onClick,onMouseOver:o.onMouseOver,onMouseOut:o.onMouseOut,name:n,className:o.className||o.name,title:r,disabled:!!o.disabled,stopPropagation:!0,metricOverrides:o.metricOverrides},f.createElement("span",{className:"label"},r)))}})))}}node_options_defineProperty(NodeOptions,"contextTypes",{pageContext:b().string.isRequired})},23969:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(96540),r=o(32485),a=o.n(r),i=o(21572);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{className:t,preSelected:o,onClick:r,selected:s,ariaLabel:l=(0,i.A)("amazon-photos-accessibility-select")}=e;return n.createElement("button",{type:"button",role:"checkbox","aria-checked":s,className:a()("selector",t,{"pre-selected":o,selected:!o&&s}),onClick:o?void 0:r,"aria-label":l})}},26980:(e,t,o)=>{o.d(t,{A:()=>R});var n=o(55378),r=o.n(n),a=o(96540),i=o(32485),s=o.n(i),l=o(5556),c=o.n(l),d=o(51158),m=o(42852),p=o(35994),u=o(72470),h=o(13489),g=o(83325),v=o(1683),f=o(71086),y=o(1882),b=o.n(y),A=o(73509),E=o(88632),P=o(85796),_=o(80286);const slideshow_item=e=>{var{model:t,isVisible:o,isPaused:n,introModelId:r,endingModelId:i,introContent:s,endingContent:l,onImageLoad:c,onVideoLoading:d}=e;if(!t)return null;var m=o?c:void 0,p=o?d:void 0;return a.createElement(A.t$,null,(e=>{var{width:d,height:u}=e;return t.id===r?b()(s)?s({width:d,height:u,visible:o}):s:t.id===i?b()(l)?l({width:d,height:u,visible:o}):l:"PHOTO"===(null==t?void 0:t.contentType)?a.createElement(P.A,{width:d,height:u,model:t,onImageLoad:m}):"VIDEO"===(null==t?void 0:t.contentType)?a.createElement(_.A,{width:d,height:u,model:t,videoId:t.id,thumbnail:!1,preload:"auto",isActive:o,controls:!1,src:t.getFormattedVideoUrl({width:d,height:u}),onLoadStart:p,videoPlaying:!n&&o,isInSlideshow:!0,allowClickPropagation:!0}):a.createElement(E.A,{width:d,height:u,model:t,onImageLoad:c})}))};var S=o(84503),N=o(32098),w=o(94788),C=o(51650),I=o(21533);const T="slideshow-error-message-module__error__pAEGA";const slideshow_error_message=()=>a.createElement("p",{className:T},a.createElement(w.A,null,"amazon-photos-error-fatal-header"),a.createElement("br",null),a.createElement(w.A,null,"amazon-photos-error-fatal-body")),k="slideshow-controls-module__controls__HJvCS",x="slideshow-controls-module__styleOption__FMora",O="slideshow-controls-module__speedOption__NtLKJ";var M=[{labelStringId:"amazon-photos-slideshow-speed-slow",value:g.B.SLOW},{labelStringId:"amazon-photos-slideshow-speed-medium",value:g.B.MEDIUM},{labelStringId:"amazon-photos-slideshow-speed-fast",value:g.B.FAST}],z=[{labelStringId:"amazon-photos-slideshow-style-pan-zoom",value:g.x.PAN_AND_ZOOM},{labelStringId:"amazon-photos-slideshow-style-dissolve",value:g.x.DISSOLVE},{labelStringId:"amazon-photos-slideshow-style-none",value:g.x.NONE}];const slideshow_controls=e=>{var{activeNode:t,error:o,isPaused:n,isTransitioning:r,onClose:i,onEnterControls:s,onImageSizeChange:l,onLeaveControls:c,onNext:d,onPause:m,onPrev:p,onPlay:u,onSpeedChange:h,onTransitionStyleChange:g,shouldImageFill:v,speed:f,transitionStyle:y}=e;return a.createElement("nav",{className:k,onMouseEnter:s,onMouseLeave:c},a.createElement(S.A,{disabled:r,name:"prev",onClick:p,metricOverrides:{eventName:"Previous",eventTag:"Previous"}}),o&&a.createElement(slideshow_error_message,null),a.createElement(S.A,{name:n?"play":"pause",onClick:n?u:m}),a.createElement(S.A,{disabled:r,name:"next",onClick:d,metricOverrides:{eventName:"Next",eventTag:"Next"}}),a.createElement("div",{className:"vertical-line"}),a.createElement(N.A,{alignment:"top",closeOnClick:!1,name:"settings"},a.createElement("form",null,a.createElement("h4",null,a.createElement(w.A,null,"amazon-photos-slideshow-style")),z.map((e=>a.createElement(C.A,{key:e.value,className:x,label:a.createElement(w.A,null,e.labelStringId),id:e.labelStringId,name:e.labelStringId,value:e.value,checked:y===e.value,onChange:g},null))),a.createElement("h4",null,a.createElement(w.A,null,"amazon-photos-slideshow-speed")),M.map((e=>a.createElement(C.A,{key:e.value,className:O,label:a.createElement(w.A,null,e.labelStringId),id:e.labelStringId,name:e.labelStringId,value:e.value,checked:f===e.value,onChange:h},null))),a.createElement("h4",null,a.createElement(w.A,null,"amazon-photos-slideshow-image-size")),a.createElement(I.A,{checked:v,name:"image-size",onChange:l},v?a.createElement(w.A,null,"amazon-photos-slideshow-image-size-fill"):a.createElement(w.A,null,"amazon-photos-slideshow-image-size-fit")))),a.createElement(S.A,{name:"exit",onClick:()=>i(t)}))};function asyncGeneratorStep(e,t,o,n,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function _next(e){asyncGeneratorStep(a,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,r,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var D=3e3,F=2e3;class Slideshow extends a.PureComponent{constructor(){super(...arguments),_defineProperty(this,"_endingModel",{id:"__ending__"}),_defineProperty(this,"_introModel",{id:"__intro__"}),_defineProperty(this,"state",{isLoaded:!1,activeIndex:0,activeNode:null,posX:0,error:!1,nodes:[],isTransitioning:!1,transitionFrom:null,transitionTo:null,shouldShowControls:!0,isHoveringOnControls:!1,isPaused:!0,errorModels:[]}),_defineProperty(this,"onVideoLoading",(()=>{var{isLoaded:e}=this.state;e||this.setState({isLoaded:!0,isPaused:!1})})),_defineProperty(this,"onImageLoad",(()=>{var{speed:e}=this.props,{isLoaded:t}=this.state;t||(this.setState({isLoaded:!0,isPaused:!1}),this.startTime=(new Date).getTime(),this.autoplayTimer=setInterval(this.goToNext,e))})),_defineProperty(this,"onDragMove",(e=>{var{offsetX:t}=e,o=this._el.clientWidth,{posX:n}=this.state;n+=t,n=Math.min(Math.max(n,-o),o),this.setState({posX:n})})),_defineProperty(this,"onDragEnd",(()=>{this.setState({posX:0})})),_defineProperty(this,"onSwipe",(e=>{switch(e){case"right":this.goToPrev();break;case"left":this.goToNext()}})),_defineProperty(this,"onEscClose",(()=>{var{onClose:e}=this.props;document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||e()})),_defineProperty(this,"goToNext",(()=>(this.navigate(1),!1))),_defineProperty(this,"goToPrev",(()=>(this.navigate(-1),!1))),_defineProperty(this,"onSpace",(()=>{var{isPaused:e}=this.state;e?this.play():this.pause()})),_defineProperty(this,"pause",(()=>{var{speed:e}=this.props,{activeNode:t}=this.state;v.A.log("SlideshowPause",{eventTag:"SlideshowPause"},f.A.getPageContext()),"VIDEO"!==(null==t?void 0:t.contentType)&&(clearInterval(this.autoplayTimer),this.remainingSlideTime=e-((new Date).getTime()-this.startTime)),this.showControls(),this.setState({isPaused:!0})})),_defineProperty(this,"play",(()=>{var{activeNode:e}=this.state;v.A.log("SlideshowPlay",{eventTag:"SlideshowPlay"},f.A.getPageContext()),"VIDEO"!==(null==e?void 0:e.contentType)&&(this.autoplayTimer=setInterval(this.goToNext,this.remainingSlideTime)),this.showControls(),this.setState({isPaused:!1})})),_defineProperty(this,"showControls",(()=>{var{isHoveringOnControls:e}=this.state;this.setState({shouldShowControls:!0}),e||(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(this.hideControls,D))})),_defineProperty(this,"hideControls",(()=>{this.setState({shouldShowControls:!1})})),_defineProperty(this,"enterControls",(()=>{this.setState({shouldShowControls:!0,isHoveringOnControls:!0}),p.A.unListen("mouseJiggle",this.showControls,this),clearTimeout(this.mouseTimer)})),_defineProperty(this,"leaveControls",(()=>{this.setState({isHoveringOnControls:!1}),p.A.listen("mouseJiggle",this.showControls,this),this.mouseTimer=setTimeout(this.hideControls,D)})),_defineProperty(this,"onSlideshowClick",(()=>{var{shouldShowControls:e}=this.state;e?this.hideControls():this.showControls()})),_defineProperty(this,"handleStyleChange",(e=>{var{onTransitionStyleChange:t}=this.props;t(e),this.setState({transitionFrom:null,transitionTo:null})})),_defineProperty(this,"onVideoError",(e=>{var{model:t}=e,{errorModels:o}=this.state;o.includes(t)||this.setState({errorModels:[t,...o]})}))}UNSAFE_componentWillMount(){var{intro:e}=this.props;this.setup(),p.A.emit("enterFullScreen"),p.A.listen("mouseJiggle",this.showControls,this),p.A.listen("space",this.onSpace,this),p.A.listen("next",this.goToNext,this),p.A.listen("prev",this.goToPrev,this),p.A.listen("endVideo",this.goToNext,this),p.A.listen("videoError",this.onVideoError,this),e&&(this._introModel.content=e,this.setState({nodes:[this._introModel],activeNode:this._introModel,activeIndex:this.firstIndex})),document.addEventListener("fullscreenchange",this.onEscClose),document.addEventListener("mozfullscreenchange",this.onEscClose),document.addEventListener("webkitfullscreenchange",this.onEscClose),document.addEventListener("msfullscreenchange",this.onEscClose)}componentDidMount(){this._el.requestFullscreen?this._el.requestFullscreen():this._el.mozRequestFullScreen?this._el.mozRequestFullScreen():this._el.webkitRequestFullscreen?this._el.webkitRequestFullscreen():this._el.msRequestFullscreen&&this._el.msRequestFullscreen(),this.mouseTimer=setTimeout(this.hideControls,D),v.A.log("SlideshowLaunch",{eventTag:"SlideshowLaunch"},f.A.getPageContext()),h.A.log({name:"SlideshowLaunch",value:1,type:"COUNTER"})}UNSAFE_componentWillReceiveProps(e){var{collection:t}=this.props;t!==e.collection&&this.setState({nodes:[]},(()=>this.setup()))}componentWillUnmount(){p.A.emit("exitFullScreen"),p.A.unListen("next",this.goToNext,this),p.A.unListen("prev",this.goToPrev,this),p.A.unListen("mouseJiggle",this.showControls,this),p.A.unListen("space",this.onSpace,this),p.A.unListen("endVideo",this.goToNext,this),p.A.unListen("videoError",this.onVideoError,this),document.removeEventListener("fullscreenchange",this.onEscClose),document.removeEventListener("mozfullscreenchange",this.onEscClose),document.removeEventListener("webkitfullscreenchange",this.onEscClose),document.removeEventListener("msfullscreenchange",this.onEscClose),clearInterval(this.autoplayTimer),clearTimeout(this.mouseTimer),clearTimeout(this.isTransitioningTimeout),clearTimeout(this.goToIndexTimeout)}get lastIndex(){var{ending:e,count:t}=this.props;return e?t:t-1}get firstIndex(){var{intro:e}=this.props;return e?-1:0}setup(){var e=this;return _asyncToGenerator((function*(){var{collection:t,intro:o,startNodeId:n,startNodeIndex:r}=e.props;try{if(yield t.getPage(0),o)e.goToIndex(e.firstIndex);else if(void 0!==r)e.goToIndex(r);else if(n)try{yield t.getById(n);var a=Math.max(t.indexOf(n),0);e.goToIndex(a)}catch(t){e.goToIndex(0)}else e.goToIndex(0)}catch(t){e.setState({error:!0}),h.A.log({name:"SlideshowError",value:1,type:"COUNTER"})}}))()}navigate(e){var{speed:t,transitionStyle:o}=this.props,{activeIndex:n,isPaused:r}=this.state,a=o&&o!==g.x.NONE;clearInterval(this.autoplayTimer),a?(n===this.lastIndex&&1===e?(this.setState({transitionTo:this.firstIndex,transitionFrom:n}),this.goToIndexTimeout=setTimeout((()=>{this.goToIndex(this.firstIndex,e)}),F)):n===this.firstIndex&&-1===e?(this.setState({transitionTo:this.lastIndex,transitionFrom:n}),this.goToIndexTimeout=setTimeout((()=>{this.goToIndex(this.lastIndex,e)}),F)):(this.setState({transitionTo:n+e,transitionFrom:n}),this.goToIndexTimeout=setTimeout((()=>{this.goToIndex(n+e,e)}),F)),this.setState({isTransitioning:!0}),this.isTransitioningTimeout=setTimeout((()=>{this.setState({isTransitioning:!1})}),F)):n===this.lastIndex&&1===e?this.goToIndex(this.firstIndex,e):n===this.firstIndex&&-1===e?this.goToIndex(this.lastIndex,e):this.goToIndex(n+e,e),r?this.remainingSlideTime=t:(this.autoplayTimer=a?setInterval(this.goToNext,t+F):setInterval(this.goToNext,t),this.startTime=(new Date).getTime())}goToIndex(e,t){var o=this;return _asyncToGenerator((function*(){var{lastIndex:n,firstIndex:r}=o,{isPaused:a,errorModels:i}=o.state,{collection:s,intro:l,ending:c,onNodeChange:d}=o.props,{count:m}=s,p=Math.max(0,e-3),u=Math.min(m-1,e+3);if(!(e>n||e<r))try{var g,v,f=yield s.getByIndexRange(p,u);if(l&&e<=r+3&&(o._introModel.content=l,f.unshift(o._introModel),e===r&&(v=o._introModel)),c&&e>=n-3&&(o._endingModel.content=c,f.push(o._endingModel),e===n&&(v=o._endingModel)),v||(v=s.atIndex(e),d&&v&&d(v)),m>4){if(e===r){var y=s.atIndex(n);f.unshift(y)}if(e===n){var b=s.atIndex(r);f.push(b)}}f=f.filter(Boolean),o.setState({activeIndex:e,posX:0,activeNode:v,nodes:f,error:!1}),"VIDEO"!==(null===(g=v)||void 0===g?void 0:g.contentType)||a||clearInterval(o.autoplayTimer),i.includes(v)&&(1===t?o.goToNext():o.goToPrev())}catch(e){throw o.setState({error:!0}),h.A.log({name:"SlideshowError",value:1,type:"COUNTER"}),e}}))()}renderItems(){var e,t,{collection:o,intro:n,ending:i,transitionStyle:l}=this.props,{nodes:c,activeNode:d,posX:m,transitionTo:p,transitionFrom:u,isPaused:h}=this.state,g=c.indexOf(d),v=this._el?this._el.clientWidth:null;if(null!==p){var f=o.atIndex(u),y=o.atIndex(p);e=c.indexOf(f),t=c.indexOf(y)}var b=c&&r()(c,((o,r)=>{var c,d,p=r===g;if(m&&v){var u;switch(r){case g:u=m;break;case g+1:u=v+m;break;case g-1:u=-v+m}u&&(c={transform:"translate3d(".concat(u,"px, 0, 0)")})}switch(l){case"dissolve":d=s()({dragging:!!c,"next-img":r>g,"prev-img":r<g,"dissolving-to":r===t,active:p,"transition-from":r===e});break;case"panAndZoom":d=s()({dragging:!!c,"next-img":r>g,"prev-img":r<g,"pan-to":r===t,active:p,"transition-from":r===e});break;default:d=s()({dragging:!!c,"next-img":r>g,"prev-img":r<g,active:p})}return a.createElement("li",{className:d,key:o&&o.id||r,style:c},a.createElement(slideshow_item,{model:o,isVisible:p,isPaused:h,introModelId:this._introModel.id,endingModelId:this._endingModel.id,introContent:n,endingContent:i,onImageLoad:this.onImageLoad,onVideoLoading:this.onVideoLoading}))}));return a.createElement("ul",{className:"images"},b)}render(){var{className:e,onClose:t,onImageSizeChange:o,onSpeedChange:n,shouldImageFill:r,speed:i,transitionStyle:l}=this.props,{activeNode:c,error:d,shouldShowControls:m,isLoaded:p,isPaused:h,isTransitioning:g}=this.state;return a.createElement("div",{id:"slideshow",className:s()("slideshow",{"hidden-controls":!m,"image-fit":!r,loaded:p},e),ref:e=>{this._el=e}},a.createElement("div",{className:"loading"}),a.createElement(slideshow_controls,{activeNode:c,error:d,isPaused:h,isTransitioning:g,onClose:t,onEnterControls:this.enterControls,onLeaveControls:this.leaveControls,onImageSizeChange:o,onNext:this.goToNext,onPause:this.pause,onPrev:this.goToPrev,onPlay:this.play,onSpeedChange:n,onTransitionStyleChange:this.handleStyleChange,shouldImageFill:r,speed:i,transitionStyle:l}),a.createElement(u.A,{allowZoom:!1,allowTouch:!0,allowMouse:!1,onMove:this.onDragMove,onSwipe:this.onSwipe,onEnd:this.onDragEnd,onClick:this.onSlideshowClick},!d&&this.renderItems()))}}_defineProperty(Slideshow,"propTypes",{collection:c().instanceOf(d.A).isRequired,count:c().number,ending:c().oneOfType([c().node,c().func]),intro:c().oneOfType([c().node,c().func]),onNodeChange:c().func,onClose:c().func.isRequired,onImageSizeChange:c().func.isRequired,onSpeedChange:c().func.isRequired,onTransitionStyleChange:c().func.isRequired,shouldImageFill:c().bool,speed:c().number.isRequired,startNodeId:c().string,startNodeIndex:c().number,transitionStyle:c().string.isRequired});const R=(0,m.A)(Slideshow)},66967:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=o(55378),r=o.n(n),a=o(96540);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{children:t}=e,o=t.splice(0,6);return a.createElement("ul",{className:"image-tiles tiles-".concat(o.length)},r()(o,((e,t)=>a.createElement("li",{className:"tile tile-".concat(t+1),key:t},e))))}},90247:(e,t,o)=>{o.d(t,{A:()=>AlbumWithSharedList});var n=o(55378),r=o.n(n),a=o(11354),i=o(81197),s=o(96540),l=o(72924),c=o(32485),d=o.n(c),m=o(21572),p=o(67172),u=o(50749),h=o(66941),g=o(85609),v=["className","model"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class AlbumWithSharedList extends s.Component{constructor(){super(...arguments),_defineProperty(this,"state",{showSharedTooltip:!1}),_defineProperty(this,"onSharedIconEnter",(()=>this.loadSharedToolTip())),_defineProperty(this,"onSharedIconLeave",(()=>this.setState({showSharedTooltip:!1})))}componentWillUnmount(){this.unMounted=!0}loadSharedToolTip(){var{showIconOnly:e}=this.props,{sharedGroupsList:t}=this.state;e||(this.setState({showSharedTooltip:!0}),t||this.retrieveSharedGroups())}retrieveSharedGroups(){var e,{model:t}=this.props;if(t){var{groupPermissions:o}=t;for(e=0;e<o.length;e++)p.A.getGroup({groupId:o[e].groupId}).done((e=>{if(!this.unMounted){var{sharedGroupsList:t=[]}=this.state;t.push(new h.A(e)),this.setState({sharedGroupsList:t})}}))}}render(){var e,t=this.props,{className:o,model:n}=t,c=_objectWithoutProperties(t,v),{sharedGroupsList:p,showSharedTooltip:h}=this.state;if(!n)return s.createElement(l.A,_extends({},c,{placeholder:!0}));if(n.groupPermissions&&n.groupPermissions.length){var f=s.createElement("div",{className:"shared-with-groups"},s.createElement("h5",null,(0,m.A)("amazon-photos-group-album-shared-list")),p&&s.createElement("ul",{className:"groups-list"},r()(p,(e=>s.createElement("li",{key:e.groupId},s.createElement(g.Ay,{model:e}))))));e=s.createElement(u.A,{className:"shared-content"},s.createElement("span",{onMouseEnter:this.onSharedIconEnter,onMouseLeave:this.onSharedIconLeave},(0,m.A)("amazon-photos-group-album-shared-tag")),s.createElement(i.A,{text:f,active:h&&p,position:"right"}))}return s.createElement(a.A,_extends({},c,{className:d()(o,"share-list"),model:n,additionalContent:e}))}}},85892:(e,t,o)=>{o.d(t,{A:()=>Comment});var n=o(55378),r=o.n(n),a=o(96540),i=o(32485),s=o.n(i),l=o(21572),c=o(84503),d=o(94788);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=["amazon-photos-groups-quick-comment1","amazon-photos-groups-quick-comment2","amazon-photos-groups-quick-comment3","amazon-photos-groups-quick-comment4","amazon-photos-groups-quick-comment5","amazon-photos-groups-quick-comment6","amazon-photos-groups-quick-comment7"];class Comment extends a.Component{constructor(){super(...arguments),_defineProperty(this,"state",{activeIndex:""}),_defineProperty(this,"onClick",((e,t)=>{var{index:o}=t,{activeIndex:n}=this.state,{onClick:r}=this.props;n===o?(this.setState({activeIndex:""}),r&&r(null)):(this.setState({activeIndex:o}),r&&r(o))}))}render(){var{activeIndex:e}=this.state;return a.createElement("div",{className:"comment-suggestion"},a.createElement("h3",null,a.createElement(d.A,null,"amazon-photos-groups-message-header")),a.createElement("div",{className:"comments-list"},r()(m,((t,o)=>a.createElement(c.A,{name:"comment",className:s()("comment",{active:e===o}),onClick:this.onClick,index:o,key:o,ref:()=>{this.value=""!==e&&(0,l.A)(m[e])}},a.createElement(d.A,null,t))))))}}},64512:(e,t,o)=>{o.d(t,{A:()=>ContactItem});var n=o(62193),r=o.n(n),a=o(96540),i=o(32485),s=o.n(i),l=o(61068),c=o(88871);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ContactItem extends a.Component{constructor(){super(...arguments),_defineProperty(this,"onClick",(e=>{var{onSelect:t,model:o,isInGroup:n}=this.props;n||(e.stopPropagation(),t(o),this.forceUpdate())}))}render(){var e,{selection:t,model:o,isInGroup:n}=this.props,i=n||t&&o&&t.isSelected(o.id),d=s()("contact-item",{"is-member":n});if(!r()(o)){var{coverPhoto:m,name:p}=o,{nodeId:u,ownerId:h}=m;e={customerName:p,id:u,ownerId:h,color:"#FF7676"}}return a.createElement("figure",{className:d,onClick:this.onClick},a.createElement(c.A,{node:e}),o&&a.createElement("div",{className:"details"},a.createElement("div",{className:"contact-name"},o.name),a.createElement("div",{className:"contact-description"},o.description)),a.createElement(l.A,{checked:i,onClick:this.onClick}))}}},95723:(e,t,o)=>{o.d(t,{A:()=>PublicGroup});var n=o(58156),r=o.n(n),a=o(7309),i=o.n(a),s=o(96540),l=o(94788),c=o(21572),d=o(54351),m=o(85609);class PublicGroup extends m.Ay{getOwnerName(){var{model:e={}}=this.props,{featuredMembers:t=[]}=e,o=i()(t,{role:"OWNER"});return r()(o,"profile.names.firstName","")}renderFeaturedMembers(){return null}renderName(){var e,{model:t={},showLogo:o}=this.props,{name:n,nameType:r}=t,a=this.getOwnerName(),{ownerProfile:i}=t,l="CUSTOMER_SPECIFIED"===r,m=n;if(a&&!l&&(m=(0,c.A)("amazon-photos-groups-made-by",a)),o){var p=l;e=s.createElement("div",{className:"logo-content"},p&&s.createElement("div",{className:"group-details"},s.createElement("h3",null,n)),!p&&s.createElement("div",{className:"group-details"},s.createElement("h3",null,(0,c.A)("amazon-photos-groups-made-by",i.name))),s.createElement("figure",{className:"photos-logo"},s.createElement(d.A,null,"logo-photos-white")))}else e=s.createElement("h3",null,m);return e}renderCounts(){var{model:e={}}=this.props,{contentAggregations:t={}}=e,{photoCount:o=0,videoCount:n=0}=t,r=e.memberCount||0;return s.createElement("ul",{className:"counts"},0!==o&&s.createElement("li",{className:"photos"},s.createElement(l.A,{count:o,replace:o},"amazon-photos-group-photos-count")),0!==n&&s.createElement("li",{className:"videos"},s.createElement(l.A,{count:n,replace:n},"amazon-photos-group-videos-count")),s.createElement("li",{className:"member-count"},s.createElement(l.A,{count:r,replace:r},"amazon-photos-group-members-count")))}}},85609:(e,t,o)=>{o.d(t,{Ay:()=>O,uO:()=>x});var n=o(55378),r=o.n(n),a=o(58156),i=o.n(a),s=o(96540),l=o(5556),c=o.n(l),d=o(32485),m=o.n(d),p=o(35994),u=o(1683),h=o(47389),g=o(40484),v=o(61738),f=o(21572),y=o(94788),b=o(14697),A=o(84503),E=o(97463),P=o(38530),_=o(49709),S=o(50749),N=o(48988),w=o(66941),C=o(93834),I=o(30257),T=o(75456),k=o(91601);function asyncGeneratorStep(e,t,o,n,r,a,i){try{var s=e[a](i),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class GroupNode extends s.Component{constructor(){super(...arguments),_defineProperty(this,"state",{imageError:!1,renaming:!1}),_defineProperty(this,"onImageLoad",(()=>this.forceUpdate())),_defineProperty(this,"onImageError",(()=>this.setState({imageError:!0}))),_defineProperty(this,"onRenameBlur",(()=>this.renameSave())),_defineProperty(this,"onRenameClick",(e=>{this.setState({renaming:!0}),e.preventDefault(),e.stopPropagation()})),_defineProperty(this,"onRenameKeyDown",(e=>{e.stopPropagation(),27===e.which&&(this.setState({renaming:!1}),e.preventDefault(),e.stopPropagation()),13===e.which&&this.renameSave()}))}componentDidMount(){var{openInRenameMode:e}=this.props,{imageContainer:t}=this;t&&this.setState({coverWidth:Math.round(t.clientWidth),coverHeight:t.clientHeight}),e&&this.setState({renaming:!0})}componentDidUpdate(e,t){var{renaming:o}=this.state;o&&!t.renaming&&this.renameInput&&this.renameInput.select()}getImageSource(){var e,{placeholder:t,model:o,shareToken:n,hideCoverPhoto:r}=this.props,{imageError:a,coverWidth:s,coverHeight:l}=this.state,c=i()(o,"coverPhoto"),d=i()(c,"cropBox");if(r||t||!s||!l)return null;if(!o||!c||a)return _.Ak;if(e=c.url?new h.A(c.url):new T.A({id:c.nodeId,ownerId:c.ownerId,groupId:o.groupId,shareToken:n}),d){var{offsetX:m,offsetY:p,cropWidth:u,cropHeight:f}=d;e.setParam("cropOffset","".concat(m,",").concat(p)),e.setParam("cropSize","".concat(u,",").concat(f)),e.setParam("viewBox",(0,g.A)(s,l,u,f,v.A.getProperty("density")))}else e.setParam("viewBox","".concat(s,",").concat(l)),e.setParam("fit","clip");return e.toString()}renameSave(){var e=this;return function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function _next(e){asyncGeneratorStep(a,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,r,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var{model:t}=e.props,{value:o}=e.renameInput,{pageContext:n}=e.context;if(e.setState({renaming:!1}),o&&o!==t.name)try{yield t.rename(o),u.A.log("ChangeGroupName",void 0,n)}catch(e){}}))()}renderRenameField(){var{model:e}=this.props;return s.createElement("input",{ref:e=>(this.renameInput=e,this.renameInput),type:"text",onBlur:this.onRenameBlur,onKeyDown:this.onRenameKeyDown,defaultValue:e.name,maxLength:_.Yi})}renderName(){var e,{renaming:t}=this.state,{model:o,allowRename:n}=this.props;return o&&o.isAlexaGroup?s.createElement("div",null,s.createElement("h3",null,o.name),s.createElement(y.A,{className:"alexa-description"},"amazon-photos-groups-share-flow-alexa")):(o&&n&&o.belongsToCurrentUser()?e=t?this.renderRenameField():s.createElement(A.A,{label:(0,f.A)("amazon-photos-accessibility-album-rename"),name:"rename",onClick:this.onRenameClick},o.name):o&&(e=o.name),s.createElement("h3",null,e))}renderFeaturedMembers(){var{model:e={},maxFeaturedMembers:t}=this.props,{memberCount:o=0,featuredMembers:n=[],nameType:a}=e,l=n.slice(0,t),c=o-l.length,d=c>0,p=E.A.getProperty("customerId");if(!("INVITE_GENERATED"===a))return s.createElement("ul",{className:m()("members",{extra:d})},r()(l,((e,t)=>{var{customerId:o}=e,n=o===p?(0,f.A)("amazon-photos-you"):i()(e,"profile.names.firstName","");return s.createElement("li",{key:t},n)})),d&&s.createElement("li",null,s.createElement(y.A,{replace:[c]},"amazon-photos-group-featured-members-more")))}renderCounts(){var{model:e={},hideCounts:t}=this.props,{contentAggregations:o={},unreadCount:n=0}=e,{photoCount:r=0,albumCount:a=0,videoCount:i=0}=o,l=r+i;return t?null:s.createElement("ul",{className:"counts"},n>0&&s.createElement("li",{className:"unread"},s.createElement(S.A,null,(0,f.A)("amazon-photos-group-unread-count",(0,I.A)(n),n))),l>0&&s.createElement("li",{className:"items"},s.createElement(y.A,{count:l,replace:l},"amazon-photos-group-items-count")),a>0&&s.createElement("li",{className:"albums"},s.createElement(y.A,{count:a,replace:a},"amazon-photos-group-albums-count")))}renderGroupCounts(){var e,{model:t={}}=this.props,{unreadCount:o=0,lastViewedDate:n}=t;return o>0?e=o:n||(e=(0,f.A)("amazon-photos-new-share")),s.createElement("div",{className:m()("counts",{"no-unread":!e})},e&&s.createElement("span",{className:"unread"},s.createElement(S.A,null,e)))}renderAddedByInfo(){var{model:e={}}=this.props,{addedBy:t}=e,o=s.createElement("span",{className:"name"},i()(t,"names.fullName"));return s.createElement("div",{className:"added-by"},s.createElement(S.A,null,(0,f.A)("amazon-photos-new-group")),s.createElement(y.A,{replace:o},"amazon-photos-groups-new-group-added-by"))}render(){var e,t,{model:o={},placeholder:n,children:r,hideDetails:a,className:i,hideCoverPhoto:l,showNewGroupInfo:c,showAvatars:d,onClick:u,maxFeaturedMembers:h,onAvatarClick:g,membersOnly:v,isSharedPage:A,addMemberEventTag:E}=this.props,{addedBy:S,nameType:N=""}=o,w=this.getImageSource();c&&S?t=this.renderAddedByInfo():e=this.renderCounts();var{featuredMembers:I=[],memberCount:T=0}=o,x=o.hasMembers&&o.hasMembers(),O=(n||!x)&&!v&&!A;return s.createElement("figure",{className:m()(i,"group-node","node",N.toLowerCase(),{placeholder:n,"hide-details":a}),onClick:u},!l&&s.createElement("div",{className:m()("cover",{default:w===_.Ak}),ref:e=>{this.imageContainer=e}},w&&s.createElement(b.A,{src:w,transition:!0,showLoading:!0,onError:this.onImageError,onLoad:this.onImageLoad})),d&&s.createElement(k.A,{featuredMembers:I,memberCount:T,maxFeaturedMembers:h,onMemberClick:g,showAddMemberButton:O,onAddMemberClick:e=>function _onAddMemberClick(e,t,o){e.stopPropagation();var{isJoinRestricted:n}=o.groupPreferences,r=s.createElement(P.A,{name:"PrivacyError",heading:(0,f.A)("amazon-photos-groups-privacy-member-only-header"),buttons:[{name:"confirm",label:(0,f.A)("amazon-photos-ok")}]},s.createElement(y.A,null,"amazon-photos-groups-privacy-member-only-message"));if(n)return p.A.emit("openDialog",{id:"privacy-error-dialog",component:r});p.A.emit("openDialog",{id:"invite-to-group",component:s.createElement(C.A,{group:o,eventTag:t})})}(e,E,o)}),s.createElement("section",{className:"details"},this.renderName(),this.renderFeaturedMembers(),e,t),r)}}_defineProperty(GroupNode,"contextTypes",{pageContext:c().string}),_defineProperty(GroupNode,"propTypes",{model:c().instanceOf(w.A),allowRename:c().bool,openInRenameMode:c().bool,placeholder:c().bool,hideDetails:c().bool,hideCoverPhoto:c().bool,showNewGroupInfo:c().bool,className:c().string,showAvatars:c().bool,maxFeaturedMembers:c().number,addMemberEventTag:c().string,onClick:c().func}),_defineProperty(GroupNode,"defaultProps",{maxFeaturedMembers:_.Hq});var x=(0,N.A)(GroupNode);const O=GroupNode},88687:(e,t,o)=>{o.d(t,{A:()=>N});var n=o(55378),r=o.n(n),a=o(63950),i=o.n(a),s=o(96540),l=o(32485),c=o.n(l),d=o(5556),m=o.n(d),p=o(73509),u=o(94788),h=o(84503),g=o(47389),v=o(43840),f=o(18742),y=o(72470),b=o(66941),A=o(14697),E=o(89873),P=o(85609);class ListAlexaGroups extends P.Ay{renderDetails(){var{model:e}=this.props,{longDate:t}=new E.A(e.modifiedDate),{shortDate:o}=new E.A(e.modifiedDate),n=new E.A(new Date).shortDate,{name:r}=e;return n===o?s.createElement("section",{className:"details"},s.createElement("div",{className:"group-name"},r),s.createElement(u.A,null,"amazon-photos-date-today")):s.createElement("section",{className:"details"},s.createElement("div",{className:"group-name"},r),s.createElement("div",null,t))}render(){var{model:e={},className:t,onClick:o}=this.props,{nameType:n=""}=e,r=this.getImageSource();return s.createElement("figure",{className:c()(t,"list-alexa-group","node",n.toLowerCase()),onClick:o},s.createElement("div",{className:c()("cover",{default:"https://dcupkcmoyuvm5.cloudfront.net/group-coverphoto.jpg"===r}),ref:e=>{this.imageContainer=e}},r&&s.createElement(A.A,{src:r,transition:!0,showLoading:!0,onError:this.onImageError,onLoad:this.onImageLoad}),this.renderGroupCounts()),this.renderDetails())}}const _=ListAlexaGroups;function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var S=300;class GroupsSlider extends s.Component{constructor(){super(...arguments),_defineProperty(this,"state",{scrollPosition:0,showAlexaGroups:!0}),_defineProperty(this,"onDragMove",(e=>{var{scrollPosition:t}=this.state,{remainingWidth:o}=this,{direction:n,offsetX:r}=e,{left:a,right:i}=n;return 0!==o&&o<S&&a?this.setState({scrollPosition:t-o}):(0===t||t+r>0)&&i?this.setState({scrollPosition:0}):(t+=r,void this.setState({scrollPosition:t}))})),_defineProperty(this,"onDragStart",(()=>this.setState({dragging:!0}))),_defineProperty(this,"onDragEnd",(()=>this.setState({dragging:!1}))),_defineProperty(this,"goToNext",(()=>{var{contentWidth:e,scrollPosition:t}=this.state,o=e+t-this._containerWidth;if(o<S)return this.setState({scrollPosition:t-o});this.setState({scrollPosition:t-S})})),_defineProperty(this,"goToPrev",(()=>{var{scrollPosition:e}=this.state;if(-e<S)return this.setState({scrollPosition:0});this.setState({scrollPosition:e+S})})),_defineProperty(this,"toggleShowAlexaGroups",(()=>{var{showAlexaGroups:e}=this.state;this.setState({showAlexaGroups:!e})})),_defineProperty(this,"_setContentDimensions",(e=>{var{width:t}=e;this.setState({contentWidth:t})}))}get remainingWidth(){var{contentWidth:e,scrollPosition:t}=this.state;return e+t-this._containerWidth}renderAlexaGroups(){var{models:e}=this.props,{scrollPosition:t,dragging:o}=this.state,n=new g.A(f.A.getProperty("urls.groups")),a={left:t};if(e&&1===e.length){var l=e[0];return s.createElement("section",null,s.createElement("div",{className:"groups-slider-container single-group",style:a},s.createElement(v.A,{name:"alexa-groups-list",href:l&&n.clone().addPath(l.id).toString()},s.createElement(_,{model:l}))),s.createElement("div",{className:"empty-state"},s.createElement("img",{src:"https://dcupkcmoyuvm5.cloudfront.net/alexaemptystate.svg",alt:""}),s.createElement(u.A,{className:"heading"},"amazon-photos-alexa-sharing-empty-state-description1"),s.createElement(u.A,{className:"description"},"amazon-photos-alexa-sharing-empty-state-description2")))}return s.createElement(y.A,{className:c()("groups-slider-container",{dragging:o}),style:a,allowMouse:!1,allowTouch:!0,allowZoom:!1,onStart:this.onDragStart,onEnd:this.onDragEnd,onMove:this.onDragMove},s.createElement(p.t$,{disableHeight:!0,onResize:this._setContentDimensions},i()),r()(e,((e,t)=>s.createElement(v.A,{key:t,name:"alexa-groups-list",href:e&&n.clone().addPath(e.id).toString()},s.createElement(_,{model:e,key:t})))))}render(){var{scrollPosition:e,contentWidth:t,showAlexaGroups:o}=this.state;return s.createElement("div",{className:"groups-slider"},s.createElement(p.t$,{disableHeight:!0},(n=>{var{width:r}=n;this._containerWidth=r;var a=0!==e,i=t+e>r,l=o?"amazon-photos-show-less":"amazon-photos-show-more";return s.createElement("div",null,s.createElement("h3",null,s.createElement(u.A,null,"amazon-photos-alexa-sharing"),s.createElement(h.A,{name:"toggle-groups",className:c()("toggle-groups",{"show-groups":o}),onClick:this.toggleShowAlexaGroups},s.createElement(u.A,null,l))),a&&s.createElement(h.A,{name:"prev",onClick:this.goToPrev}),s.createElement("div",{className:c()("groups-container",{"show-groups":o}),style:{width:r}},this.renderAlexaGroups()),i&&s.createElement(h.A,{name:"next",onClick:this.goToNext}))})))}}_defineProperty(GroupsSlider,"propTypes",{models:m().arrayOf(m().instanceOf(b.A)).isRequired});const N=GroupsSlider},33682:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(96540),r=o(32485),a=o.n(r),i=o(94788),s=o(14697),l=o(89873),c=o(85609);class ListGroups extends c.Ay{renderDate(){var{model:e}=this.props;if(!e)return n.createElement("span",null);var{longDate:t}=new l.A(e.modifiedDate),{shortDate:o}=new l.A(e.modifiedDate);return new l.A(new Date).shortDate===o?n.createElement(i.A,null,"amazon-photos-date-today"):n.createElement("span",null,t)}render(){var{model:e={},className:t,onClick:o}=this.props,{nameType:r=""}=e,i=this.getImageSource();return n.createElement("figure",{className:a()(t,"list-group","node",r.toLowerCase()),onClick:o},n.createElement("div",{className:a()("cover",{default:"https://dcupkcmoyuvm5.cloudfront.net/group-coverphoto.jpg"===i}),ref:e=>{this.imageContainer=e}},i&&n.createElement(s.A,{src:i,transition:!0,showLoading:!0,onError:this.onImageError,onLoad:this.onImageLoad})),n.createElement("section",{className:"details"},n.createElement("h3",null,n.createElement("span",null,e.name)),n.createElement("div",{className:"group-details"},this.renderFeaturedMembers(),n.createElement("section",{className:"meta-data"},this.renderDate(),this.renderGroupCounts()))))}}const d=ListGroups},91401:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(96540),r=o(5556),a=o.n(r),i=o(21572),s=o(49479);class NodeCreatorAttribution extends n.PureComponent{getNodeOwnerName(){var{model:e,contributorData:t={}}=this.props;if(!e)return null;if(e.belongsToCurrentUser())return(0,i.A)("amazon-photos-you");var o=t[e.ownerId];if(o){if(o.names)return o.names.firstName;if(o.firstName)return o.firstName}}render(){var e=this.getNodeOwnerName();return e?n.createElement("div",{className:"creator-attribution"},e):null}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(NodeCreatorAttribution,"propTypes",{model:a().instanceOf(s.A),contributorData:a().object});const l=NodeCreatorAttribution},24144:(e,t,o)=>{o.d(t,{A:()=>L});var n=o(55378),r=o.n(n),a=o(58156),i=o.n(a),s=o(56170),l=o.n(s),c=o(19747),d=o.n(c),m=o(23805),p=o.n(m),u=o(63950),h=o.n(u),g=o(96540),v=o(5556),f=o.n(v),y=o(32485),b=o.n(y),A=o(35994),E=o(18742),P=o(47389),_=o(32239),S=o(21572),N=o(94788),w=o(1683),C=o(84503),I=o(43840),T=o(85796),k=o(88632),x=o(32098),O=o(66967),M=o(88871),z=o(74671),D=o(11276),F=o(46962),R=o(78333);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var j=(0,R.A)((()=>o.e(634).then(o.bind(o,39948)))),placeholderPost=()=>g.createElement("div",null,g.createElement(PostItem,{isPlaceholderPost:!0,placeholder:!0,firstInSection:!0,lastInSection:!0,requestDelete:h()}),g.createElement(PostItem,{isPlaceholderPost:!0,placeholder:!0,lastInSection:!0,requestDelete:h()}),g.createElement(PostItem,{isPlaceholderPost:!0,placeholder:!0,firstInSection:!0,requestDelete:h()}));class PostItem extends g.Component{constructor(){super(...arguments),_defineProperty(this,"onReportReactionClick",(e=>{var t,o;e instanceof z.A?t=e.id:e.parentReaction?t=e.parentReaction.id:e.parentCollection&&(o=e.parentCollection.id);var{groupId:n,author:r}=e,a=window.location.pathname;new P.A(E.A.getProperty("urls.report"),{groupId:n,reactionId:t,ownerId:r,collectionId:o,backUrl:a}).go(),A.A.emit("closeDialog")})),_defineProperty(this,"deleteReaction",((e,t)=>{var{model:o,requestDelete:n}=this.props;o instanceof D.A||(o=null),(0,_.A)((0,S.A)("amazon-photos-reactions-delete-confirm-body"),{name:"confirm-delete-reaction",heading:(0,S.A)("amazon-photos-reactions-delete-confirm-header"),confirmText:(0,S.A)("amazon-photos-reactions-delete-reaction"),stackDialog:!0,onConfirmClick:()=>{n({model:e,event:o}),w.A.log("DeleteReaction",{eventTag:"Comment"},t)}})})),_defineProperty(this,"closeTooltip",(()=>this.menuEl.toggleMenu(!1)))}getCoverPhoto(e){var{model:t}=e;return l()(t.coverPhotos)}hasCoverPhoto(e){var{model:t}=e;return i()(t,"coverPhotos.length")>0}renderMenu(e){var{model:t}=e,{pageContext:o}=this.context,{isFirst:n,onReplyClick:r,hideReply:a}=this.props,i=t&&t.body?t.body:"",s="bottom",l="left",c=!1;if(!t||!(t instanceof z.A)||a)return null;i.length<15&&!t.parentCollection&&(c=!0);var d=t.belongsToCurrentUser(),m=this.hasCoverPhoto({model:t});return n&&(s="top"),(d&&c||!d&&!c)&&(l="right"),g.createElement("div",{className:"reaction-menu",onMouseEnter:this.openTooltip,onMouseLeave:this.closeTooltip},g.createElement(x.A,{name:"menu",position:l,alignment:s,ref:e=>{this.menuEl=e}},g.createElement("ul",null,d&&g.createElement("li",null,g.createElement(C.A,{name:"delete-reaction",onClick:()=>this.deleteReaction(t,o)},g.createElement(N.A,null,"amazon-photos-trash-delete-confirm-button"))),!d&&g.createElement("li",null,g.createElement(C.A,{name:"report-reaction",onClick:()=>this.onReportReactionClick(t)},g.createElement(N.A,null,"amazon-photos-reactions-report-reaction"))))),m&&g.createElement(C.A,{name:"reply-to-reaction",model:t,onClick:r,title:(0,S.A)("amazon-photos-groups-reply-to"),metricOverrides:{eventName:"ReplyStart"}}))}renderReplyContent(e){var{model:t}=e,{placeholder:o,isSharedPage:n,pageUrlModel:a}=this.props;if(o||!t)return null;var i=this.getCoverPhoto({model:t}),{body:s=""}=t,l=t.deepLink;return n&&a&&(l=a.toString()),i?g.createElement(I.A,{name:"comment-link",href:l,metricOverrides:{eventName:"ViewPost",eventTag:"view_commented_media"}},g.createElement(T.A,{className:"cover-photo",clip:!0,model:i}),g.createElement("div",{className:"post-info"},r()(s.split("\n"),((e,t)=>g.createElement("p",{key:t},e))))):void 0}renderCommentContent(e){var{model:t={}}=e,{body:o=""}=t;if(!this.hasCoverPhoto({model:t}))return r()(o.split("\n"),((e,t)=>g.createElement("p",{key:t},e)))}renderAvatar(){var e,{model:t={},placeholder:o,firstInSection:n,memberIdToMember:r}=this.props,{shareToken:a}=t,s=!o&&t.belongsToCurrentUser();if(!r)return null;var l=r[t.ownerId];return l&&(e={color:i()(l,"avatar.color"),customerName:i()(l,"names.firstName"),id:i()(l,"avatar.photo.nodeId"),ownerId:i()(l,"avatar.photo.ownerId"),shareToken:a}),s?void 0:g.createElement("div",{className:"avatar-wrap"},n&&g.createElement(M.A,{node:e}))}renderCollection(e){var t,o,{model:n}=e,{onReplyClick:a,hideReply:i,isSharedPage:s,addReactionOnJoin:l,pageUrlModel:c}=this.props,{caption:d,parent:m={},contentAggregations:p={},reactionSummary:u,coverNodes:h=[]}=n,{kind:v,parentCollection:f={}}=m,{caption:y}=f,b="ALBUM"===v,{photoCount:A=0,videoCount:E=0}=p,P=Math.max(A+E,n.coverNodes.length),_=h.slice(0,6),w=P>_.length,T=0,x="".concat(n.deepLink,"?collection=true");return o=s?c&&c.toString():n.deepLink,u&&(T=u.count||0),t=b?"album":P>1?"post":"single_post",g.createElement("div",{className:"message collection"},g.createElement(I.A,{href:o,name:"collection-link",metricOverrides:{eventName:"ViewPost",eventTag:t}},d&&g.createElement("div",{className:"collection-info"},d&&b&&g.createElement("div",null,g.createElement("h3",null,d,g.createElement("span",{className:"album"},g.createElement(N.A,null,"amazon-photos-group-albums-collection"))),g.createElement("p",null,y)),d&&!b&&g.createElement("p",null,d)),g.createElement(O.A,null,r()(_,((e,t)=>g.createElement("div",{key:e.id},g.createElement(k.A,{model:e}),w&&t===_.length-1&&g.createElement("div",{className:"more-count"},P-_.length+1)))))),g.createElement("div",{className:"response"},g.createElement(j,{model:n,isSharedPage:s,position:"top",addReactionOnJoin:l}),0!==T&&g.createElement(I.A,{name:"comments",href:x},g.createElement(N.A,{count:T,replace:T},"amazon-photos-groups-number-comments")),a&&!i&&g.createElement(C.A,{name:"reply",model:n,onClick:a,title:(0,S.A)("amazon-photos-groups-reply-to"),metricOverrides:{eventName:"ReplyStart"}})))}renderReaction(e){var{model:t}=e,o=this.hasCoverPhoto({model:t}),n=b()("message reaction",{"post-reply":o});return g.createElement("div",{className:n},this.renderReplyContent({model:t}),this.renderCommentContent({model:t}))}render(){var{model:e={},className:t,placeholder:o,isPlaceholderPost:n,isFirst:r,firstInSection:a,lastInSection:i}=this.props;if(o&&!n)return placeholderPost();var s,l,c=!o&&e.belongsToCurrentUser(),d=b()("post-item",t,{placeholder:o,first:r,yours:c,"first-section":a,"last-section":i});if(e instanceof z.A)s=e;else if(e.parentReaction)s=e.parentReaction;else if(e.parentCollection)s=e.parentCollection;else if(!n)return placeholderPost();return l=s instanceof z.A?this.renderReaction({model:s}):s instanceof F.A?this.renderCollection({model:s}):this.renderReaction({}),g.createElement("div",{className:d},this.renderAvatar(),l,this.renderMenu({model:s}))}}_defineProperty(PostItem,"propTypes",{model:f().oneOfType([f().instanceOf(z.A),f().instanceOf(D.A)]),firstInSection:f().bool,lastInSection:f().bool,placeholder:f().bool,requestDelete:f().func.isRequired,isPlaceholderPost:f().bool,memberIdToMember:(e,t)=>{if(e[t])return p()(e[t])?d()(e[t],(e=>e.names&&e.names.firstName))?void 0:new Error("".concat(e[t]," contains invalid data")):new Error("".concat(t," must be an object"))}}),_defineProperty(PostItem,"contextTypes",{pageContext:f().string.isRequired});const L=PostItem},49507:(e,t,o)=>{o.d(t,{C:()=>StoryNode});var n=o(32485),r=o.n(n),a=o(96540),i=o(35994),s=o(85796),l=o(5288),c=o(25266),d=o(81651);var StoryNode=e=>{var t,o,{className:n,model:m,playLinkEnabled:p=!0}=e,{collectionType:u,coverPhotoDetails:h,coverPhotoNode:g,id:v,subtitle:f,title:y}=m||{};if(!g)return null;if(h){var{focalBox:b,height:A,width:E}=h,P=(0,l.A)(b,A,E,1),{offsetX:_,offsetY:S,cropWidth:N,cropHeight:w}=P;t="".concat(_,",").concat(S),o="".concat(N,",").concat(w)}var C="best_of_year_album"===u?a.createElement(c.A,{title:y,subtitle:f}):a.createElement(d.A,{title:y,subtitle:f});return a.createElement("div",{className:r()("story-node","node",n)},a.createElement(s.A,{clip:!0,cropOffset:t,cropSize:o,model:g,thumbnail:!0}),a.createElement("div",{className:"overlay"}),p&&a.createElement("div",{className:"story-play",onClick:()=>function onStoryPlay(e){e&&i.A.emit("playStory",e)}(v)}),C)}}}]);
//# sourceMappingURL=nodes-empty-states-image-chrome-291ef30b9e541283e55f.js.map