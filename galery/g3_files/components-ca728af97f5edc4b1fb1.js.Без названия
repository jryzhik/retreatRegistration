"use strict";(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[179],{480:(e,t,o)=>{o.d(t,{A:()=>P});var r=o(88055),n=o.n(r),i=o(58156),a=o.n(i),s=o(96540),c=o(5556),l=o.n(c),m=o(32485),d=o.n(m),p=o(35994),u=o(42843),h=o(84503),g=o(21572),v=o(51158),y=o(57427),f=o(14127);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var b=function getActiveFavorites(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>"1"===a()(e,"match")))};class ToggleFavorite extends s.PureComponent{constructor(e){super(e),_defineProperty(this,"_didListenToKeyEvent",!1),_defineProperty(this,"onKeyboardShortcut",(()=>{this.toggleFavorite()})),_defineProperty(this,"onClick",(e=>{e.preventDefault(),e.stopPropagation(),this.toggleFavorite()})),_defineProperty(this,"onAppUpdate",(()=>this.forceUpdate()));var{allowKeyboardShortcut:t}=this.props;p.A.listen("update",this.onAppUpdate),t&&(p.A.listen("favorite",this.onKeyboardShortcut),this._didListenToKeyEvent=!0)}componentWillUnmount(){p.A.unListen("update",this.onAppUpdate),this._didListenToKeyEvent&&p.A.unListen("favorite",this.onKeyboardShortcut)}toggleFavorite(){var{collection:e={},model:t}=this.props;if(t&&t.toggleFavorite){var{aggregations:o}=e,{isFavorited:r}=t.serviceProperties,i=a()(e,"aggregations.favorite",[]),s=Boolean(b(i));if(s){var c=n()(i),l=r?-1:1;b(c).count+=l,o.favorite=c,e.emitChange()}!o||r||s||setTimeout((()=>e.refresh()),u.A.MID),t.toggleFavorite()}}render(){var{model:e}=this.props;if(!e||!e.belongsToUser)return null;var{isFavorited:t}=e.serviceProperties,o=t?(0,g.A)("amazon-photos-favorite-toggle-off"):(0,g.A)("amazon-photos-favorite-toggle");return s.createElement(f.A,{attribution:"favorites-component"},s.createElement(h.A,{className:d()("toggle-favorite",{active:t}),name:"favorite",metricOverrides:{eventName:"Favorite",eventTag:t?"Off":"On"},title:o,onClick:this.onClick}))}}_defineProperty(ToggleFavorite,"propTypes",{collection:l().instanceOf(v.A).isRequired,model:l().instanceOf(y.A),allowKeyboardShortcut:l().bool});const P=ToggleFavorite},73233:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(96540),n=o(94788);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{stringID:t}=e;return r.createElement(n.A,{className:"animated-string"},t)}},27110:(e,t,o)=>{o.d(t,{A:()=>M});var r,n=o(58156),i=o.n(n),a=o(35994),s=o(71468),c=o(96540),l=o(32485),m=o.n(l),d=o(71086),p=o(14324),u=o(61738),h=o(18742),g=o(78333),v=o(98742),y=o(85680),f=o(20995),b=o(74081),P=o(14127),k=o(92517),A=o(54318),_=o(79900),S=o(76202);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var w=["GroupShareView","GroupShareViewSPV","GroupDetailView","GroupDetailViewSPV","AskPhotos"];class MasterTemplate extends c.Component{constructor(){super(...arguments),_defineProperty(this,"hasShownSmartBanner",!1),_defineProperty(this,"onForceUpdate",(()=>this.forceUpdate()))}UNSAFE_componentWillMount(){var e=o.e(513).then(o.bind(o,91157));(0,A.Gg)()&&(e=o.e(513).then(o.bind(o,44118))),r=(0,g.A)((()=>e)),a.A.listen("update",this.onForceUpdate,this)}componentDidUpdate(e){var{hasFetchedOutageStatus:t,sourceId:o}=e,{hasFetchedOutageStatus:r,isActiveGenericOutage:n,sourceId:i,getInAppMessagingPrintsVendorCards:a,printsVendorCardsStatus:s}=this.props;o!==i&&i&&(0,A.L2)()&&s===S.Z.IDLE&&a(),t!==r&&(!r||n||this.hasShownSmartBanner||(this.showSmartBanner(),this.hasShownSmartBanner=!0))}componentWillUnmount(){a.A.unListen("update",this.onForceUpdate,this)}showSmartBanner(){var{device:e,route:t}=this.props,{isMobile:o}=e,r=i()(t,"metrics.viewName");if(!(i()(t,"props.query.recognitionOnly")||i()(t,"props.query.hide_nav")||i()(t,"props.query.isSaveAccess")||w.includes(r))){o&&setTimeout((()=>{a.A.emit("showToast",{id:"app-upsell-toast",name:"AppUpsellToast",className:"app-upsell-toast",closeable:!0,stay:!0,fullReplace:c.createElement(b.A,null)})}),2e3)}}render(){var e,{fullScreen:t,selectMode:o,selectionOptions:n={},editingPhoto:i,children:a}=this.props,s=m()({"full-screen":t,"select-mode":o,"selection-locked":n.locked});return i&&(e=c.createElement(r,{data:i,context:d.A.getPageContext()})),c.createElement("div",{id:"amazon-photos",className:s},c.createElement(P.A,{attribution:"uploader"},c.createElement(v.A,null),c.createElement(y.A,null)),c.createElement(P.A,{attribution:"dialog-container"},c.createElement(f.A,null)),c.createElement(P.A,{attribution:"site-content-wrap"},a),c.createElement(P.A,{attribution:"photo-editor"},e),c.createElement(k.A,null))}}var E={getInAppMessagingPrintsVendorCards:_.Mq},C=(0,s.Ng)((e=>({isActiveGenericOutage:e.outage.isActiveGenericOutage,hasFetchedOutageStatus:e.outage.hasFetchedOutageStatus,printsVendorCardsStatus:(0,_.g3)(e)})),E)(MasterTemplate);const M=a.A.connect(C,[{store:d.A,mapToProps:["route","fullScreen","editingPhoto"]},{store:p.A,mapToProps:["selectMode","selectionOptions"]},{store:u.A,mapToProps:["size"]},{store:h.A,mapToProps:["device","urls","sourceId"]}])},30631:(e,t,o)=>{o.d(t,{A:()=>y});var r=o(20414),n=o.n(r),i=o(96540),a=o(71468),s=o(14324),c=o(61738),l=o(35994),m=o(21572),d=o(92522),p=o(20995),u=o(98742),h=o(85680),g=o(51549),v=o(14127);class PrintMasterTemplate extends i.Component{UNSAFE_componentWillMount(){s.A.notifyComponent(this,null,["selection","selectionCollection"]),c.A.notifyComponent(this,"viewport",["size"]),n()(this,["onAddToProjectClick","onUploadClick"]),l.A.emit("lockSelectMode",{title:(0,m.A)("amazon-photos-pick-photos",d.A.getMaxPrintSelectionCount()),navigationOptions:["photos","family","albums"],maxSelectAllCount:d.A.getMaxPrintSelectionCount(),onCancelClick:this.onCancelClick,buttons:[{onClick:this.onUploadClick,name:"upload",allowNoSelection:!0,label:(0,m.A)("amazon-photos-upload-button"),className:"upload"},{onClick:this.onAddToProjectClick,name:"buy-prints",label:(0,m.A)("amazon-photos-add-photos-for-prints"),className:"buy-prints"}],overflowButtons:[]})}componentWillUnmount(){s.A.endNotifications(this),c.A.endNotifications(this)}onCancelClick(){d.A.redirectToPrinting({metricContext:!1})}onUploadClick(){var{startUploaderSelection:e}=this.props;e()}onAddToProjectClick(){var{selection:e}=this.state;d.A.redirectToPrinting({selection:e,metricContext:"AddToProject"})}render(){var{children:e}=this.props;return i.createElement("div",{id:"printing",className:"select-mode"},i.createElement(v.A,{attribution:"prints-uploader"},i.createElement(u.A,null),i.createElement(h.A,null)),i.createElement(v.A,{attribution:"prints-dialog-container"},i.createElement(p.A,null)),i.createElement(v.A,{attribution:"prints-site-content-wrap"},e))}}const y=(0,a.Ng)(null,{startUploaderSelection:g.vY})(PrintMasterTemplate)},18252:(e,t,o)=>{o.d(t,{A:()=>p});var r=o(96540),n=o(32485),i=o.n(n),a=o(35994),s=o(71086),c=o(14324),l=o(20995),m=o(14127),d=o(92517);const p=a.A.connect((e=>{var{fullScreen:t,selectMode:o,children:n}=e,a=i()({"full-screen":t,"select-mode":o});return r.createElement("div",{id:"amazon-photos",className:a},r.createElement(m.A,{attribution:"unauth-dialog-container"},r.createElement(l.A,null)),r.createElement(m.A,{attribution:"unauth-site-content-wrap"},n),r.createElement(d.A,null))}),[{store:s.A,mapToProps:["fullScreen"]},{store:c.A,mapToProps:["selectMode"]}])},15440:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(96540);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{children:t}=e;return r.createElement("div",{id:"webview"},t)}},55439:(e,t,o)=>{o.d(t,{A:()=>isHolidayCardVideo});var r=o(73725);function isHolidayCardVideo(e){try{var t,o;if(!e||1!==e.count)return!1;var n=null===(t=e.pages)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.contents,i=n&&Array.isArray(n)&&n[0];if(!i)return!1;var{mediaProperties:{mediaType:a},name:s,_createdBy:c}=i;return"video"===a&&("DaziService"===c||"DaziService_Devo"===c)&&(s.includes("New Year")||s.includes("Holidays")||s.includes("Father's Day")||s.includes("Mother's Day")||s.includes("Valentine's Day"))}catch(e){return r.A.fatal("Fatal error on checking is holiday card video",e),!1}}},51164:(e,t,o)=>{o.d(t,{A:()=>m});var r=o(96540),n=o(5556),i=o.n(n),a=o(35994),s=o(21572),c=o(18742),l=o(44304),DownloadAndroidAppButton=e=>{var{appStoreAndroidUrl:t,metricOverrides:o,name:n="download-android-app",refMarker:i}=e;return r.createElement(l.A,{altText:(0,s.A)("amazon-photos-download-android-app-button-alt-text"),localizedImageSrc:"digital/photos/google-play-badge.png",metricOverrides:o,name:n,refMarker:i,url:t})};DownloadAndroidAppButton.propTypes={appStoreAndroidUrl:i().string,metricOverrides:i().shape({eventName:i().string.isRequired,eventTag:i().string.isRequired,pageContext:i().string.isRequired}),name:i().string,refMarker:i().string};const m=a.A.connect(DownloadAndroidAppButton,[{store:c.A,mapToProps:e=>{var{urls:t={}}=e;return{appStoreAndroidUrl:t.appStoreAndroid}}}])},86001:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(96540),n=o(5556),i=o.n(n),a=o(18742),s=o(54205),c=o(54351),l=o(35994),m=o(94788);class DownloadDesktopButton extends r.PureComponent{render(){var{metricOverrides:e,linkName:t,urls:o}=this.props,{desktopLink:n}=o;return r.createElement(s.A,{name:t||"desktop-app",href:n,metricOverrides:e},r.createElement("div",{className:"desktop-download-button"},r.createElement(c.A,{className:"logo"},"logo-photos-white"),r.createElement("span",{className:"button-text"},r.createElement(m.A,null,"amazon-photos-growth-onboarding-download-button-download"),r.createElement(m.A,null,"amazon-photos-growth-onboarding-download-button-desktop"))))}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(DownloadDesktopButton,"propTypes",{metricOverrides:i().shape({eventName:i().string.isRequired,eventTag:i().string.isRequired,pageContext:i().string.isRequired}),linkName:i().string});const d=l.A.connect(DownloadDesktopButton,[{store:a.A,mapToProps:["urls"]}])},30272:(e,t,o)=>{o.d(t,{A:()=>m});var r=o(96540),n=o(5556),i=o.n(n),a=o(35994),s=o(21572),c=o(18742),l=o(44304),DownloadIosAppButton=e=>{var{appStoreiOSUrl:t,metricOverrides:o,name:n="download-ios-app",refMarker:i}=e;return r.createElement(l.A,{altText:(0,s.A)("amazon-photos-download-ios-app-button-alt-text"),localizedImageSrc:"digital/photos/ios-app-store-icon.svg",metricOverrides:o,name:n,refMarker:i,url:t})};DownloadIosAppButton.propTypes={appStoreiOSUrl:i().string,metricOverrides:i().shape({eventName:i().string.isRequired,eventTag:i().string.isRequired,pageContext:i().string.isRequired}),name:i().string,refMarker:i().string};const m=a.A.connect(DownloadIosAppButton,[{store:c.A,mapToProps:e=>{var{urls:t={}}=e;return{appStoreiOSUrl:t.appStoreiOS}}}])},44304:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(96540),n=o(5556),i=o.n(n),a=o(54205),s=o(47389),c=o(11711);const l="download-mobile-app-button-module__downloadMobileAppButton__ZVxS5",m="download-mobile-app-button-module__appBadge__HVVWt";var DownloadMobileAppButton=e=>{var{altText:t="",localizedImageSrc:o,metricOverrides:n,name:i="download-mobile-app",refMarker:d,url:p}=e;if(!o||!p)return null;var u=new s.A(p);return d&&u.setParam("ref_",d),r.createElement(a.A,{className:l,href:u.toString(),name:i,metricOverrides:n,target:"_blank"},r.createElement(c.A,{alt:t,className:m,src:o}))};DownloadMobileAppButton.propTypes={altText:i().string,localizedImageSrc:i().string.isRequired,metricOverrides:i().shape({eventName:i().string.isRequired,eventTag:i().string.isRequired,pageContext:i().string.isRequired}),name:i().string,refMarker:i().string,url:i().string.isRequired};const d=DownloadMobileAppButton},88871:(e,t,o)=>{o.d(t,{A:()=>CustomerAvatar});var r=o(5556),n=o.n(r),i=o(96540),a=o(40961),s=o(32485),c=o.n(s),l=o(51317),m=o(70004),d=["className","customerName","color","node"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class CustomerAvatar extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{})}componentDidMount(){var e=a.findDOMNode(this),{width:t,height:o}=e.getBoundingClientRect();this.setState({width:t,height:o})}render(){var e,t,o,r=this.props,{className:n,customerName:a,color:s,node:p}=r,u=_objectWithoutProperties(r,d),{width:h,height:g}=this.state;if(p&&h&&g){o=s||p.color,t=p.customerName||a;var v=2*Math.round(h),y=2*Math.round(g),f="".concat(v,",").concat(y);p.id&&(e=new l.A(p,{viewBox:f}).toImageUrlString())}return i.createElement(m.A,_extends({},u,{src:e,name:t,color:o,className:c()("customer-avatar",n)}))}}_defineProperty(CustomerAvatar,"propTypes",{className:n().string,node:n().shape({color:n().string,customerName:n().string,id:n().string}),customerName:n().string})},59055:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(96540),n=o(5556),i=o.n(n),a=o(32485),s=o.n(a),c=o(35994),l=o(29297),m=o(90566),d=o(32359),p=o(70004),u=["className","clusters","cdsClusterId"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class FaceCluster extends r.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{}),_defineProperty(this,"onImageLoad",(e=>{var{width:t,model:o,height:r}=this.state,{src:n}=e.target;if(o&&n!==p.C){var{id:i}=o;(0,d.xe)(i,n,t*r)}})),_defineProperty(this,"registerChildElement",(e=>{e&&e.element&&(this.element=e.element)}))}static getDerivedStateFromProps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{cdsClusterId:o,clusters:r}=e;return _objectSpread(_objectSpread({},t),{},{model:r[o]})}componentDidMount(){this.checkIfClusterNeeded(),this.setDimensions()}componentDidUpdate(e){var{cdsClusterId:t}=this.props;t!==e.cdsClusterId&&this.checkIfClusterNeeded(),this.setDimensions()}setDimensions(){var{width:e,height:t}=this.state;if(this.element){var{clientWidth:o,clientHeight:r}=this.element;o!==e&&r!==t&&this.setState({width:o,height:r})}}checkIfClusterNeeded(){var{model:e}=this.state,{cdsClusterId:t}=this.props;!e&&t&&c.A.emit("getFaceClusters",t)}render(){var{model:e,width:t,height:o}=this.state,n=this.props,{className:i,clusters:a,cdsClusterId:c}=n,l=_objectWithoutProperties(n,u),m="";return e&&t&&o&&(m=e.getFormattedPreviewUrl({width:t,height:o,zoomToFace:!0}),m=(0,d.p)(e.id,m,t*o)),r.createElement(p.A,_extends({},l,{src:m,onLoad:this.onImageLoad,ref:this.registerChildElement,className:s()("face-cluster",i)}))}}_defineProperty(FaceCluster,"propTypes",{className:i().string,cdsClusterId:i().string.isRequired,clusters:i().objectOf(i().instanceOf(m.Ay))});const h=c.A.connect(FaceCluster,{store:l.A,mapToProps:e=>({clusters:e})})},70004:(e,t,o)=>{o.d(t,{A:()=>Face,C:()=>c});var r=o(14697),n=o(96540),i=o(32485),a=o.n(i),s=["src","title","className","name","color","onLoad"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var c="https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg";class Face extends n.Component{constructor(){super(...arguments),_defineProperty(this,"state",{}),_defineProperty(this,"onError",(()=>this.setState({error:!0}))),_defineProperty(this,"registerElement",(e=>{this.element=e}))}UNSAFE_componentWillReceiveProps(e){var{src:t}=e,{src:o}=this.props,{error:r}=this.state;t!==o&&r&&this.setState({error:!1})}render(){var e,{error:t}=this.state,o=this.props,{src:i,title:l,className:m,name:d,color:p,onLoad:u}=o,h=_objectWithoutProperties(o,s),g=t||!i?c:i,v=g===c,y=v&&p&&d;return n.createElement("figure",{title:l,className:a()("face",m,{default:v}),ref:this.registerElement},!y&&n.createElement(r.A,_extends({},h,{key:g,src:g,showLoading:!1,onLoad:u,transition:!0,onError:this.onError})),y&&n.createElement("span",{className:"fill",style:{backgroundColor:p}},n.createElement("span",{className:"initial"},55296==(63488&(e=d).charCodeAt(0))?e.slice(0,2):e[0])))}}},88883:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(55378),n=o.n(r),i=o(96540),a=o(32485),s=o.n(a),c=o(88871);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{members:t}=e,o=n()(t,(t=>{var o=t.customerId===e.targetCustomerId;return i.createElement("li",{key:t.customerId},i.createElement("label",null,i.createElement("input",{type:"radio",name:"adminCandidate",id:t.customerId,className:s()("radio-button",{selected:o}),checked:o}),i.createElement(c.A,{node:{id:t.avatarNodeId,ownerId:t.customerId},customerId:t.customerId}),i.createElement("span",{className:"customer-name"},t.name)))}));return i.createElement("ul",null,o)}},53037:(e,t,o)=>{o.d(t,{Ay:()=>Se});var r=o(33031),n=o.n(r),i=o(55378),a=o.n(i),s=o(87612),c=o.n(s),l=o(66245),m=o.n(l),d=o(62193),p=o.n(d),u=o(58156),h=o.n(u),g=o(44418),v=o(35994),y=o(7138),f=o(5556),b=o.n(f),P=o(96540),k=o(42852),A=o(14324),_=o(21572),S=o(97463),w=o(25205),E=o(87937),C=o(95950),M=o.n(C),L=o(83673),T=o.n(L),N=o(39754),O=o.n(N),x=o(2404),I=o.n(x),R=o(95093),j=o.n(R),D=o(47389),z=o(17667),F=o(1683),U=o(3754),q=o(13489),B=o(99942);function logFilterHealthMetric(e){q.A.log({name:"FilterItemClicked",value:1,type:"COUNTER",segments:{FilterName:B.X[e]}})}var G=o(84503),V=o(94788),W=o(32485),K=o.n(W),H=o(51158);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}class HistogramNavGroup extends P.Component{render(){var{metricOverridesList:e,model:t,openYear:o,openMonth:r,openDay:n,onClick:i}=this.props,[s,...c]=e;return P.createElement("ul",{className:"histogram-group"},a()(t,(e=>{var t,a,{year:l,month:m,day:d,label:p,children:u,total:h}=e;a=void 0===m?(t=l===o)&&void 0===r:void 0===d?(t=m===r)&&void 0===n:n===d;var g=T()([l,m,d]).join("-"),v=K()({active:a,open:t,expandable:u});return P.createElement("li",{key:g,className:v},P.createElement(G.A,{metricOverrides:s,name:g,onClick:()=>i(e)},P.createElement("span",{className:"filter-item-text-container"},P.createElement("span",{className:"label"},p),P.createElement("span",{className:"total"},h))),u&&t&&P.createElement(HistogramNavGroup,_extends({},this.props,{metricOverridesList:c,model:u})))})))}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(HistogramNavGroup,"propTypes",{onClick:b().func.isRequired});var Y=o(86682),J=o(80218),Q=o.n(J),X=o(90128),Z=o.n(X),$=o(71086);const ee=function getBizMetricOverrides(e,t,o){var r=$.A.getPageContext(),n=o&&"type"===t,i=Z()(Q()(o));return{eventName:"".concat(e).concat(n?"Item".concat(i):B.X[t]),eventTag:"sidenav_filters",pageContext:r}};var te="amazon-photos-sort-date-added",oe="amazon-photos-filter-histogram-uploaded",re="amazon-photos-filter-histogram";function SideNavYearMonthView(e){var{collection:t,onClearClick:o,onItemClick:r,pageUrlModel:n,parsedAggregation:i,timeDay:s,timeMonth:c,timeYear:l}=e,{sort:m=""}=t.options,d=re;null!=m&&m.match(/createdDate/i)?d=oe:null!=m&&m.match(/groupModifiedDate/i)&&(d=te);var p=!!l[0],u=K()("side-nav","histogram","filters",{expanded:p}),h=[ee(B.v,"timeYear"),ee(B.v,"timeMonth")];return P.createElement("div",{className:u,name:"year-month-filter"},P.createElement("div",{className:"heading"},P.createElement("h5",null,P.createElement(V.A,null,d)),p&&P.createElement(G.A,{onClick:o,name:"clear"},P.createElement(V.A,null,"amazon-photos-filter-clear"))),P.createElement(Y.A,{className:"histogram-nav",name:"years"},a()(i,(e=>P.createElement(HistogramNavGroup,{metricOverridesList:h,model:[e],key:e.year,onClick:r,openYear:l[0],openMonth:c[0],openDay:s[0],pageUrlModel:n})))))}function year_month_filter_defineProperty(e,t,o){return(t=function year_month_filter_toPropertyKey(e){var t=function year_month_filter_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}SideNavYearMonthView.propTypes={collection:b().instanceOf(H.A).isRequired,onItemClick:b().func.isRequired,pageUrlModel:b().instanceOf(D.A),parsedAggregation:b().arrayOf(b().shape({year:b().string,label:b().string,total:b().number,children:b().arrayOf(b().shape({year:b().string,month:b().string,label:b().string,total:b().number,children:b().arrayOf(b().shape({year:b().string,month:b().string,label:b().string,total:b().number,name:b().string})),name:b().string})),name:b().string})),timeDay:b().arrayOf(b().string),timeMonth:b().arrayOf(b().string),timeYear:b().arrayOf(b().string)};class YearMonthFilter extends((0,y.A)(P.Component)){constructor(){super(...arguments),year_month_filter_defineProperty(this,"state",{}),year_month_filter_defineProperty(this,"onClearClick",(()=>{var{pageUrlModel:e}=this.props,t=e.clone();t.deleteParam("timeYear"),t.deleteParam("timeMonth"),t.deleteParam("timeDay"),t.deleteParam(U.uk,U.b0),t.go();var{eventName:o,eventTag:r,pageContext:n}=ee("ClickedClear","timeYear");F.A.log(o,{eventTag:r},n)})),year_month_filter_defineProperty(this,"onItemClick",(e=>{var{pageUrlModel:t,collection:o}=this.props,{year:r,month:n,day:i}=e,{timeYear:a=[]}=o.getSelectedFilters(),s=t.clone();s.deleteParam("timeYear"),s.deleteParam("timeMonth"),s.deleteParam("timeDay"),r&&s.setParam("timeYear",r),n&&s.setParam("timeMonth",n),i&&s.setParam("timeDay",i),i||n||r?s.setParam(U.uk,U.b0):s.deleteParam(U.uk,U.b0),s.go(),logFilterHealthMetric("time"),(n||r)&&r===a[0]&&v.A.emit("setScroll",{position:0,transition:!0})}))}UNSAFE_componentWillMount(){this.setAggregation(this.props)}UNSAFE_componentWillReceiveProps(e){this.setAggregation(e)}setAggregation(e){var{aggregation:t}=this.state,{collection:o}=e,r=h()(o,"aggregations.time");r||this.setState({aggregation:null,parsedAggregation:null}),I()(r,t)||this.setState({aggregation:r,parsedAggregation:this._parseAggregations(r)})}_parseAggregations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},o=[];return O()(e,(e=>{var{count:o,match:r}=e,[n,i,a]=r.split("-");n=parseInt(n,10),void 0!==a&&(a=parseInt(a,10)),void 0!==i&&(i=parseInt(i,10)),t[n]=t[n]||{count:0,months:{}};var s=t[n];s.months[i]=s.months[i]||{count:0,days:{}};var c=s.months[i];a&&(c.days[a]={count:0}),s.count+=o,c.count+=o,a&&(c.days[a].count+=o)})),O()(t,((e,t)=>{var r=t===U.Hz,n=r?(0,_.A)("amazon-photos-no-date"):t,{count:i}=e,a="".concat(t),s={year:t,label:n,total:i,children:[],name:a};r||O()(e.months,((e,o)=>{var r=j()({year:t,month:o-1,day:1}).format("MMMM"),{count:n}=e,i=T()([t,o]).join("-"),a={year:t,month:o,label:r,total:n,children:[],name:i};s.children.push(a),z.A.isOn("filterByDay")&&M()(e.days).length>1&&O()(e.days,((e,r)=>{var n=j()({year:t,month:o-1,day:r}).format("MMM DD"),{count:i}=e,s=T()([t,o]).join("-"),c={label:n,year:t,month:o,day:r,total:i,name:s};a.children.unshift(c)}))})),o.unshift(s)})),o}render(){var{pageUrlModel:e,collection:t}=this.props,{parsedAggregation:o}=this.state;if(!t||!o||!o.length)return null;var{timeMonth:r=[],timeYear:n=[],timeDay:i=[]}=t.getSelectedFilters();return P.createElement(SideNavYearMonthView,{collection:t,onClearClick:this.onClearClick,onItemClick:this.onItemClick,pageUrlModel:e,parsedAggregation:o,timeDay:i,timeMonth:r,timeYear:n})}}year_month_filter_defineProperty(YearMonthFilter,"propTypes",{collection:b().instanceOf(g.A).isRequired,pageUrlModel:b().instanceOf(D.A).isRequired});const ne=(0,k.A)(YearMonthFilter);var ie=o(42426),ae=o.n(ie),se=o(62216),ce=o.n(se),le=o(55488),me=o(56449),de=o.n(me),pe=o(14127),ue=o(72234),he=o(59055),ge=o(88871);function SideNavFiltersView(e){var{contributorData:t={},customerId:o,filters:r,headingClassName:n,isActive:i,isSelected:s,name:c,onClearClick:l,onFilterClick:m,title:d}=e;return P.createElement("div",{className:K()("side-nav","filters","filter-".concat(c)),name:"filter-".concat(c)},d&&P.createElement("div",{className:n},P.createElement("h5",null,d),s&&P.createElement(G.A,{onClick:l,name:"clear"},P.createElement(V.A,null,"amazon-photos-filter-clear"))),P.createElement(Y.A,{name:"filters"},a()(r,(e=>{if(e.skip)return null;var r,n,a=e.customerId===o?(0,_.A)("amazon-photos-you"):e.label;if(e.cdsClusterId&&(r=P.createElement(he.A,{cdsClusterId:e.cdsClusterId})),e.customerId){var s=t[e.customerId],l=s?{id:s.avatarNodeId,ownerId:e.customerId}:null,d=h()(s,"names.firstName"),p=h()(s,"avatar.color");n=P.createElement(ge.A,{node:l,customerName:d,color:p})}return P.createElement("li",{key:e.name,title:e.label,className:K()("filter",e.className,{active:i(e)})},P.createElement(G.A,{name:"filter-item-".concat(e.name),onClick:m,filter:e,metricOverrides:ee(B.v,c,e.name)},r,n,P.createElement("span",{className:"filter-item-text-container"},a&&P.createElement("span",{className:"label"},a),P.createElement("span",{className:"count"},(0,ue.A)(e.count)))))}))))}SideNavFiltersView.propTypes={contributorData:b().objectOf(b().object),customerId:b().string,filters:b().arrayOf(b().shape({count:b().number,match:b().string,searchData:b().objectOf(b().oneOfType([b().object,b().string])),name:b().string,label:b().string,customerId:b().string,cdsClusterId:b().string,skip:b().bool})),headingClassName:b().string,isActive:b().func,isSelected:b().bool,name:b().string,onClearClick:b().func,onFilterClick:b().func,title:b().string};const ve=SideNavFiltersView;function base_filter_defineProperty(e,t,o){return(t=function base_filter_toPropertyKey(e){var t=function base_filter_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ye="lcf";class BaseFilter extends((0,y.A)(P.Component,"propName")){constructor(e){for(var t,o=arguments.length,r=new Array(o>1?o-1:0),n=1;n<o;n++)r[n-1]=arguments[n];super(e,...r),t=this,base_filter_defineProperty(this,"onFilterClick",((e,t)=>{var{filter:o}=t,{onClick:r,name:n}=this.props,i=this.props.pageUrlModel,a=function getFilterSearchKey(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{match:t,searchData:o}=e,r=t;return o&&(o.locationId?r=o.locationId:o.thingId&&(r=o.thingId)),r}(o),s=this.updateSelectedList(a);r&&r(o,s),i&&n&&(i.deleteParam(n),i.deleteParam(ye),s.length&&(i.setParam(n,s),i.setParam(ye,n)),s.indexOf(a)>=0&&v.A.emit("facetApplied",{name:n,count:o.count}),i.go(!1)),logFilterHealthMetric(n),v.A.emit("setScroll",{position:0,transition:!0})})),base_filter_defineProperty(this,"onClearClick",(e=>{var{name:t}=this.props,o=this.props.pageUrlModel;o&&t&&(o.deleteParam(t),o.deleteParam(ye),o.go()),e.preventDefault(),e.stopPropagation();var{eventName:r,eventTag:n,pageContext:i}=ee("ClickedClear",t);F.A.log(r,{eventTag:n},i)})),base_filter_defineProperty(this,"isActive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{match:o,searchData:r}=e,n=o,{selectedFilters:i}=t.state;return r&&(r.locationId?n=r.locationId:r.thingId&&(n=r.thingId)),-1!==i.indexOf(n)}));var{selectedFilters:i}=this.props;this.state={selectedFilters:de()(i)?i:[i]}}UNSAFE_componentWillReceiveProps(e){var{selectedFilters:t}=e;this.setState({selectedFilters:de()(t)?t:[t]})}updateSelectedList(e){var{selectedFilters:t}=this.state,{allowDeselect:o,multiple:r}=this.props,n=t.slice(0),i=t.indexOf(e);return-1!==i?o&&n.splice(i,1):r?n.push(e):n=[e],n}render(){var{contributorData:e,filters:t,name:o,title:r}=this.props,{selectedFilters:n}=this.state,i=Boolean(n.length),a=K()("heading",{selected:i}),s=S.A.getProperty("customerId");return P.createElement(pe.A,{attribution:"filter-view-component"},P.createElement(ve,{contributorData:e,customerId:s,filters:t,headingClassName:a,isActive:this.isActive,isSelected:i,name:o,onClearClick:this.onClearClick,onFilterClick:this.onFilterClick,title:r}))}}base_filter_defineProperty(BaseFilter,"defaultProps",{selectedFilters:[],filters:[],allowDeselect:!0});const fe=BaseFilter;function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){facet_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function facet_defineProperty(e,t,o){return(t=function facet_toPropertyKey(e){var t=function facet_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var be=["people","things"],Pe={PHOTOS:"amazon-photos-filter-photos",VIDEOS:"amazon-photos-filter-videos",ALBUMS:"amazon-photos-albums-nav"},ke=le.Ay.filterCategories,Ae=["things","people"];class FacetFilter extends((0,y.A)(P.Component,"FacetFilter")){constructor(){super(...arguments),facet_defineProperty(this,"state",{filters:[]})}componentDidMount(){this.parseFilterData()}componentDidUpdate(e){var{contributorData:t,filterAggregations:o,filterName:r,keyword:n}=this.props;e.contributorData===t&&e.filterAggregations===o&&e.filterName===r&&e.keyword===n||this.parseFilterData()}convertYou(e){return e===(0,_.A)("amazon-photos-you")?(0,_.A)("amazon-photos-you-object-preposition"):e}parseFilterData(){for(var{contributorData:e,filterAggregations:t=[],filterName:o,keyword:r={}}=this.props,n=[],i=r.category&&o&&Ae.includes(o),a=new Set,s=0;s<t.length&&!(n.length>=15);s++){var c=t[s],{match:l}=c,m=void 0,d=void 0,p=void 0,u=void 0,g=l,v=void 0;if(a.has(g))break;if(a.add(g),i&&l===r.name)v=!0;else switch(o){case"familyMembers":case"groupMembers":if(u=e&&e[l]){var{customerId:y,firstName:f,names:b={}}=u,P=b.firstName||f;d=y,p=this.convertYou(P)}else v=!0;break;case"favorite":"0"===l?v=!0:(g="FAVORITE",p=(0,_.A)("amazon-photos-favorites-filter"));break;case"people":m=l,p=h()(c,"searchData.clusterName","");break;case"things":p=l.replace(/_/g," ");break;case"type":p=(0,_.A)(Pe[l])}p=ce()(p)?l:p,n.push(_objectSpread(_objectSpread({},c),{},{name:g,label:p,customerId:d,cdsClusterId:m,skip:v}))}this.setState({filters:n})}render(){var{contributorData:e,filterName:t,pageUrlModel:o}=this.props,{filters:r}=this.state,n=be.includes(t),{title:i}=ke[t]||{};return("familyMembers"!==t&&"groupMembers"!==t||e)&&ae()(r,(e=>!e.skip))?P.createElement(fe,{key:t,contributorData:e,title:i?(0,_.A)(i):null,filters:r,multiple:n,selectedFilters:o.query[t],pageUrlModel:o,name:t}):null}}facet_defineProperty(FacetFilter,"propTypes",{contributorData:b().objectOf(b().object),filterName:b().string.isRequired,filterAggregations:b().arrayOf(b().shape({count:b().number,match:b().string,searchData:b().objectOf(b().oneOfType([b().object,b().string]))})),pageUrlModel:b().instanceOf(D.A).isRequired,keyword:b().instanceOf(E.A)});const _e=FacetFilter;function aggregation_defineProperty(e,t,o){return(t=function aggregation_toPropertyKey(e){var t=function aggregation_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class AggregationFilter extends((0,y.A)(P.Component)){render(){var{isThingsRecognitionEnabled:e,isPeopleRecognitionEnabled:t,isPlacesRecognitionEnabled:o,collection:r,aggregationFilters:i,contributorData:s,pageUrlModel:l,keyword:d}=this.props,u=h()(r,"aggregations");if(!r||p()(u))return null;var g=A.A.getProperty("selectionOptions.hiddenFacets"),v=i;return g&&(v=m()(i,g)),v=v.filter((r=>!("things"===r&&!e||"people"===r&&!t||"location"===r&&!o))),v=c()(v,(e=>u[e]&&u[e].length)),v.length?P.createElement("div",{name:"AggregationFilter"},P.createElement("h4",null,(0,_.A)("amazon-photos-filters-heading")),a()(v,(e=>{var t=u[e];return"people"===e&&(t=n()(t,(e=>-e.count))),"time"===e?P.createElement(ne,{collection:r,key:e,pageUrlModel:l}):P.createElement(_e,{key:e,keyword:d,contributorData:s,filterName:e,filterAggregations:t,pageUrlModel:l})}))):null}}aggregation_defineProperty(AggregationFilter,"propTypes",{pageUrlModel:b().object.isRequired,collection:b().instanceOf(g.A).isRequired,aggregationFilters:b().arrayOf(b().string),contributorData:b().objectOf(b().object),keyword:b().instanceOf(E.A)}),aggregation_defineProperty(AggregationFilter,"defaultProps",{aggregationFilters:["type","time","familyMembers","people","things","location"]});const Se=v.A.connect((0,k.A)(AggregationFilter),[{store:S.A,mapToProps:["isThingsRecognitionEnabled","isPeopleRecognitionEnabled","isPlacesRecognitionEnabled"]},{store:w.A,mapToProps:e=>{var{memberIdToMember:t}=e;return{contributorData:t}}}])},92034:(e,t,o)=>{o.d(t,{A:()=>_});var r=o(62193),n=o.n(r),i=o(58156),a=o.n(i),s=o(55378),c=o.n(s),l=o(96540),m=o(21572),d=o(61738),p=o(3754),u=o(5556),h=o.n(u),g=o(84503),v=o(32098),y=o(94788),f=o(32485),b=o.n(f),P={sortDateTaken:"contentDate",sortDateCreated:"creationDate",sortDateUploaded:"uploadDate",sortDateModified:"dateModified",sortAlphaName:"name",sortNewestToOldest:"contentDateNewest",sortOldestToNewest:"contentDateOldest"};function SideNavSortView(e){var{navPosition:t,selectedSortStringID:o,filters:r,isActive:n,onFilterClick:i}=e;return l.createElement(v.A,{name:"sort-filter",position:t,text:l.createElement(y.A,{replace:l.createElement("strong",null,(0,m.A)(o))},"amazon-photos-filter-sorted-by")},l.createElement("ul",null,c()(r,((e,t)=>l.createElement("li",{key:t,className:b()({active:n(e)})},l.createElement(g.A,{onClick:i,filter:e,name:"sort-".concat(e.name),metricOverrides:{eventName:"ChangeSort",eventTag:P[e.name]||e.name}},e.label))))))}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}SideNavSortView.propTypes={filters:h().arrayOf(h().shape({name:h().string,label:h().string})),isActive:h().func,navPosition:h().string,onFilterClick:h().func,selectedSortStringID:h().string};var k={sortDateTaken:"amazon-photos-filter-sort-taken",sortDateCreated:"amazon-photos-filter-sort-created",sortDateUploaded:"amazon-photos-filter-sort-uploaded",sortDateModified:"amazon-photos-filter-sort-recent",sortRecentActivity:"amazon-photos-filter-sort-recent",sortAlphaName:"amazon-photos-filter-sort-name",sortAddedToGroup:"amazon-photos-sort-date-added",sortNewestToOldest:"amazon-photos-sort-newest",sortOldestToNewest:"amazon-photos-sort-oldest",sortRelevance:"amazon-photos-sort-relevance"},A="sortDateTaken";class SortSelector extends l.Component{constructor(){super(...arguments),_defineProperty(this,"onSortClick",((e,t)=>{var{pageUrlModel:o}=this.props,{lcf:r}=o.query;t&&t.filter&&(o.setParam("sort",t.filter.name),o.deleteParam("timeYear"),o.deleteParam("timeMonth"),"time"===r&&o.deleteParam(p.uk),o.go())})),_defineProperty(this,"getSortOptions",(()=>{var{options:e}=this.props;return c()(e,(e=>{var t=k[e];return{name:e,label:(0,m.A)("amazon-photos-filter-sort-by",(0,m.A)(t))}}))})),_defineProperty(this,"isActive",(e=>{var{selectedSort:t}=this.props;return t===e.name}))}render(){var{selectedSort:e,navPosition:t=(d.A.getProperty("size.mobile")?"center":"right"),pageUrlModel:o}=this.props,r=k[e],i=this.getSortOptions();r||(r=k[e=A]);var s=a()(o,"query.sort","");return l.createElement(SideNavSortView,{isActive:this.isActive,filters:i,name:"sort",navPosition:t,isSelected:!n()(s),onFilterClick:this.onSortClick,selectedSortStringID:r})}}_defineProperty(SortSelector,"defaultProps",{selectedSort:A,options:["sortDateTaken","sortDateUploaded"]});const _=SortSelector},70476:(e,t,o)=>{o.d(t,{Ay:()=>w});var r=o(90179),n=o.n(r),i=o(34921),a=o.n(i),s=o(62193),c=o.n(s),l=o(96540),m=o(5556),d=o.n(m),p=o(89649),u=o(35994),h=o(9029),g=o(32485),v=o.n(g),y=o(94788);const f="auto-complete-list-box-module__examplesHeader__k3W9h";var AutoCompleteListBox=e=>{var{items:t,selectedIndex:o,onItemSelect:r,onItemHighlight:n,renderItem:i,shouldShowExamplesHeader:a=!1}=e;return l.createElement("div",{className:"result"},a&&l.createElement("header",{className:f},l.createElement(y.A,null,"amazon-photos-search-semantic-examples")),l.createElement("ul",null,t.map(((e,t)=>l.createElement("li",{key:JSON.stringify(e),className:v()({selected:t===o}),onMouseEnter:()=>n(t),onMouseLeave:()=>n(-1),onMouseDown:e=>e.preventDefault(),onClick:()=>r(e)},i(e))))))};function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var b=13,P=27,k=37,A=38,_=39,S=40;class AutoCompleteInput extends l.Component{constructor(){super(...arguments),_defineProperty(this,"state",{showAutoComplete:!1,selectedIndex:-1}),_defineProperty(this,"onInputFocus",(()=>{var{onFocus:e}=this.props;this.showAutoComplete(),e&&e()})),_defineProperty(this,"onInputBlur",(()=>{var{hideOnBlur:e,onBlur:t}=this.props;e&&this.hideAutoComplete(),t&&t()})),_defineProperty(this,"onInputChange",(()=>{var{maxLength:e,onChange:t}=this.props,o=this.inputRef.value,r=e>0?o.slice(0,e):o;return this.showAutoComplete(),this.setState({selectedIndex:-1}),t&&t(r)||!0})),_defineProperty(this,"onInputKeyDown",(e=>{var{onKeyDown:t,result:o}=this.props,{selectedIndex:r}=this.state,n=o[r];switch((0,p.A)(e,!1,!0),e.which){case A:this.moveUp(e);break;case S:this.moveDown(e);break;case b:n&&(this.onInputChange(),this.selectItem(n),(0,p.A)(e)),this.hideAutoComplete();break;case P:this.inputRef&&this.inputRef.blur(),(0,p.A)(e);break;case k:case _:this.onInputChange()}t&&t(e)}))}componentDidUpdate(e,t){var{isMobileSearchVisible:o,value:r}=this.props,{selectedIndex:n}=this.state;if(this.inputRef&&(r!==e.value||n!==t.selectedIndex)){var i=this.getDisplayValue();i!==r&&this.inputRef.setSelectionRange(r.length,i.length)}!e.isMobileSearchVisible&&o&&this.inputRef.focus()}getDisplayValue(){var e,{autoComplete:t,itemToString:o,result:r,value:n}=this.props,{selectedIndex:i}=this.state;return!c()(r)&&t&&i>=0&&(e=o(r[i])),e||n}selectItem(e){var{onItemSelect:t}=this.props;return this.onInputChange(),this.hideAutoComplete(),this.inputRef.blur(),t(e)}showAutoComplete(){this.setState({showAutoComplete:!0})}hideAutoComplete(){this.setState({showAutoComplete:!1,selectedIndex:-1})}highlightItem(e){this.setState({selectedIndex:e})}moveUp(e){var{selectedIndex:t}=this.state;this.setState({selectedIndex:Math.max(t-1,-1)}),this.showAutoComplete(),(0,p.A)(e)}moveDown(e){var{limit:t,result:o}=this.props,{selectedIndex:r}=this.state,n=Math.max(Math.min(r+1,o.length-1,t-1),0);n!==r&&this.setState({selectedIndex:n}),this.showAutoComplete(),(0,p.A)(e)}renderList(){var{limit:e,listItemRenderer:t,result:o,shouldShowExamplesHeader:r}=this.props,{selectedIndex:n,showAutoComplete:i}=this.state;return i?c()(o)?null:l.createElement(AutoCompleteListBox,{items:a()(o,e),selectedIndex:n,onItemSelect:e=>this.selectItem(e),onItemHighlight:e=>this.highlightItem(e),renderItem:t,shouldShowExamplesHeader:r}):null}render(){var{widgetClassName:e,className:t,inputButton:o,accessibilityLabel:r}=this.props,i=n()(this.props,Object.keys(AutoCompleteInput.propTypes)),a=this.getDisplayValue();return l.createElement("div",{className:e},r&&l.createElement("label",{className:"autocomplete-input-label",id:"autocomplete-label-id",htmlFor:"auto-complete-input-id"},r),l.createElement("input",_extends({},i,{value:a,type:"text",onFocus:this.onInputFocus,onBlur:this.onInputBlur,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,autoComplete:"off",id:"auto-complete-input-id","aria-labelledby":"autocomplete-label-id",className:t,ref:e=>{this.inputRef=e}})),o,this.renderList())}}_defineProperty(AutoCompleteInput,"propTypes",{widgetClassName:d().string,result:d().arrayOf(Object).isRequired,listItemRenderer:d().func.isRequired,itemToString:d().func,limit:d().number,onChange:d().func,onItemSelect:d().func,hideOnBlur:d().bool,autoComplete:d().bool,isMobileSearchVisible:d().bool,value:d().string,inputButton:d().node,shouldShowExamplesHeader:d().bool,maxLength:d().number,accessibilityLabel:d().string}),_defineProperty(AutoCompleteInput,"defaultProps",{widgetClassName:"auto-complete-widget",limit:5,itemToString:e=>e,hideOnBlur:!0,autoComplete:!0,value:"",shouldShowExamplesHeader:!1,maxLength:0});const w=u.A.connect(AutoCompleteInput,{store:h.h,mapToProps:["isMobileSearchVisible"]})},11250:(e,t,o)=>{o.d(t,{A:()=>ContentEditableInput});var r=o(64112),n=o.n(r),i=o(38221),a=o.n(i),s=o(96540),c=o(5556),l=o.n(c),m=o(32485),d=o.n(m),p=["placeholder","className","focus"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ContentEditableInput extends s.Component{constructor(){super(...arguments),_defineProperty(this,"reportInput",a()((e=>{var{onInput:t}=this.props;t&&t(e)}),200)),_defineProperty(this,"onInput",(()=>{var{commentInput:e}=this,t=e.innerText.trim();this.value=t,this.reportInput(t)})),_defineProperty(this,"onKeyDown",(e=>{var{onInput:t,onSubmit:o}=this.props;e.stopPropagation(),13===e.which&&!e.shiftKey&&o&&(e.preventDefault(),t&&t(this.commentInput.innerText.trim()),n()((()=>{o()})))})),_defineProperty(this,"clear",(()=>{this.commentInput.innerText=""})),_defineProperty(this,"focus",(()=>{this.commentInput&&this.commentInput.focus()})),_defineProperty(this,"onCommentPaste",(e=>{e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))}componentDidMount(){var{focus:e}=this.props;e&&n()((()=>this.commentInput.focus()))}render(){var e=this.props,{placeholder:t,className:o,focus:r}=e,n=_objectWithoutProperties(e,p);return s.createElement("div",_extends({},n,{className:d()("content-editable-input",o),contentEditable:!0,placeholder:t,onInput:this.onInput,onPaste:this.onCommentPaste,role:"textbox",tabIndex:0,ref:e=>{this.commentInput=e},onKeyDown:this.onKeyDown}))}}ContentEditableInput.propTypes={placeholder:l().string.isRequired,onInput:l().func,onSubmit:l().func,focus:l().bool}},13925:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(55378),n=o.n(r),i=o(96540),a=o(21572),s=o(51650),c=o(21533),ToggleSetting=e=>{var{setting:t,active:o,onChange:r,children:n}=e;return i.createElement("div",{className:"toggle-setting"},i.createElement("label",{className:"name"},n),i.createElement(c.A,{name:t,onChange:r,checked:o},(0,a.A)("amazon-photos-".concat(o?"on":"off"))))},RadioSetting=e=>{var{setting:t,active:o,onChange:r,children:n,label:a}=e;return i.createElement("div",{className:"radio-setting"},i.createElement(s.A,{name:t,onChange:r,checked:o,label:a},n))};const __WEBPACK_DEFAULT_EXPORT__=e=>{var{sets:t,groupId:o,onChange:r,InputType:a}=e;return i.createElement("div",{className:"preference-sets"},n()(t,(e=>{var{preferences:t,id:s,title:c}=e,l="RadioButton"===a?RadioSetting:ToggleSetting;return i.createElement("section",{className:"setting-group",key:s},c&&i.createElement("h4",null,c),n()(t,(e=>{var{id:t,title:a,value:c,valueKind:m,availableValues:d}=e,p=!1;return"ENUM"===m?"PRIVACY_LEVEL"===t?c="PRIVATE"!==c:p=!0:"BOOL"===m&&(c="true"===c),p?n()(d,(e=>{var{description:t,id:n,title:a}=e;return i.createElement(l,{name:n,key:n,setting:n,active:c===n,label:a,onChange:()=>r({groupId:o,setId:s,optionId:n,value:n})},i.createElement("p",null,t))})):i.createElement(l,{key:t,setting:t,active:c,onChange:()=>r({groupId:o,setId:s,id:t,value:!c})},a)})))})))}},25981:(e,t,o)=>{o.d(t,{A:()=>ReportAbuseForm});var r=o(84503),n=o(35994),i=o(96540),a=o(94788),s=o(46266),c=o(21572),l=o(18742),m=o(97463),d=o(1683),p=o(71086),u=o(13489),h=o(73725),g=o(14127),v=o(5556),y=o.n(v),ReportAbuseFormFields=e=>{var{onAcknowlegmentUpdate:t,submissionAcknowleged:o}=e;return i.createElement("div",null,i.createElement("label",{className:"email-disclaimer",name:"email-disclaimer"},i.createElement(a.A,null,"amazon-photos-report-abuse-email-disclaimer-with-email")),i.createElement("div",{className:"submission-disclaimer-checkbox"},i.createElement("button",{"aria-checked":o,className:o?"checkbox-selected":"checkbox-unselected",onClick:()=>{t(!o)},role:"checkbox",type:"button"}),i.createElement(a.A,{className:"report-form-submission-acknowledgement"},"amazon-photos-report-abuse-submission-acknowledgement")))};ReportAbuseFormFields.propTypes={onAcknowlegmentUpdate:y().func,submissionAcknowleged:y().bool};const f=ReportAbuseFormFields;var ReportAbuseFormDropdown=e=>{var{onTypeChange:t}=e,o=i.createElement(i.Fragment,null,i.createElement("option",{value:""},(0,c.A)("amazon-photos-report-abuse-select-type")),i.createElement("option",{value:"Discrimination"},(0,c.A)("amazon-photos-report-abuse-discrimination")),i.createElement("option",{value:"CSAM"},(0,c.A)("amazon-photos-report-abuse-csam")),i.createElement("option",{value:"Copyrighted"},(0,c.A)("amazon-photos-report-abuse-intellectual")),i.createElement("option",{value:"Defamatory"},(0,c.A)("amazon-photos-report-abuse-defamatory")),i.createElement("option",{value:"Indecent"},(0,c.A)("amazon-photos-report-abuse-objectionable")),i.createElement("option",{value:"Pornographic"},(0,c.A)("amazon-photos-report-abuse-pornographic")),i.createElement("option",{value:"Terrorist"},(0,c.A)("amazon-photos-report-abuse-extremist")),i.createElement("option",{value:"Other"},(0,c.A)("amazon-photos-report-abuse-other")));return i.createElement("div",null,i.createElement("label",{htmlFor:"abuse-type"},i.createElement(a.A,null,"amazon-photos-report-abuse-select-type-heading")),i.createElement("select",{onChange:t,id:"abuse-type"},o))};ReportAbuseFormDropdown.propTypes={onTypeChange:y().func.isRequired};const b=ReportAbuseFormDropdown;function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var P=["Copyrighted","CSAM","Indecent","Defamatory","Pornographic","Discrimination","Terrorist","Other"];class ReportAbuseForm extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{abuseType:"",submissionAcknowleged:!1}),_defineProperty(this,"onSubmit",(e=>{e.preventDefault(),this.submit()})),_defineProperty(this,"onTypeChange",(e=>{d.A.log("ReportAbuseSelect",{eventTag:e.target.value},p.A.getPageContext()),this.setState({abuseType:e.target.value})})),_defineProperty(this,"onAcknowledgmentUpdate",(e=>{this.setState({submissionAcknowleged:e})}))}isAcknowledged(){var{submissionAcknowleged:e}=this.state;return e}isTypeValid(){var{abuseType:e}=this.state;return P.includes(e)}isFormValid(){return this.isTypeValid()&&this.isAcknowledged()}submit(){var{abuseType:e}=this.state,{onSubmit:t,successMetricName:o="SharingReportAbuseSuccessToast",failureMetricName:r="SharingReportAbuseFailureToast",successStringId:i="amazon-photos-report-abuse-success",failureStringId:a="amazon-photos-report-abuse-failure",shareType:l,nodeId:d,shareId:p,ownerId:g}=this.props,v={custBrow:window.navigator.userAgent||"unknown",custURL:window.location.href.toString(),feedbackTypeText:e.toUpperCase(),custID:m.A.getProperty("customerId"),sessionID:m.A.getProperty("sessionId"),hostname:window.location.hostname,rid:m.A.getProperty("requestId"),locale:m.A.getProperty("language"),shareType:l,nodeId:d,shareId:p,ownerId:g};if(this.isFormValid())return s.A.post("/photos/utils/reportabuse",v,{headers:{"Content-Type":"application/json"}}).then((()=>{u.A.log({name:"ReportAbuseSuccess",value:1,type:"COUNTER"}),n.A.emit("showToast",{name:o,message:(0,c.A)(i),className:"success"}),t&&t()})).catch((()=>{u.A.log({name:"ReportAbuseFailure",value:1,type:"COUNTER"}),n.A.emit("showToast",{name:r,message:(0,c.A)(a),className:"failure"})})),!0;h.A.error("Invalid report abuse form")}renderFooter(){var e,{abuseType:t}=this.state,{hideFormButton:o}=this.props;switch(t){case"Copyrighted":o||(e=i.createElement("a",{name:"download-form",className:"button",href:l.A.getProperty("urls.reportFormLink"),target:"_blank",rel:"noopener noreferrer"},i.createElement(a.A,null,"amazon-photos-report-abuse-download-form")));break;case"Indecent":case"Terrorist":case"Defamatory":case"Pornographic":case"Discrimination":case"CSAM":case"Other":e=i.createElement(r.A,{type:"submit",name:"submit",className:"button",disabled:!this.isFormValid()},i.createElement(a.A,null,"amazon-photos-report-abuse-submit"))}return e}renderForm(){var{abuseType:e,submissionAcknowleged:t}=this.state,{hideFormButton:o}=this.props,r=o?"amazon-photos-report-abuse-copyright-info-groups":"amazon-photos-report-abuse-copyright-info";switch(e){case"Copyrighted":return i.createElement("p",null,i.createElement(a.A,null,r));case"Indecent":case"Terrorist":case"Defamatory":case"Pornographic":case"Discrimination":case"CSAM":case"Other":return i.createElement(f,{onAcknowlegmentUpdate:this.onAcknowledgmentUpdate,submissionAcknowleged:t})}}renderHeading(){return i.createElement(a.A,null,"amazon-photos-report-abuse")}renderDetail(){return i.createElement("p",null,i.createElement(a.A,null,"amazon-photos-abuse-dialog-message"))}renderSelector(){return i.createElement(b,{onTypeChange:this.onTypeChange})}render(){return i.createElement(g.A,{attribution:"report-abuse-form"},i.createElement("form",{className:"report-abuse",action:"#",onSubmit:this.onSubmit},i.createElement("h1",null,this.renderHeading()),this.renderDetail(),this.renderSelector(),this.renderForm(),this.renderFooter()))}}},53358:(e,t,o)=>{o.d(t,{A:()=>TagInput});var r=o(55378),n=o.n(r),i=o(62193),a=o.n(i),s=o(38221),c=o.n(s),l=o(96540),m=o(5556),d=o.n(m),p=o(84503);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class TagInput extends l.Component{constructor(){super(...arguments),_defineProperty(this,"reportInput",c()((e=>{var{onChange:t}=this.props;t&&t(e)}),200)),_defineProperty(this,"onChange",(e=>{var{value:t}=e.target;this.reportInput(t)})),_defineProperty(this,"onDeleteClick",((e,t)=>{var{id:o}=t,{onDeleteTag:r}=this.props;r&&r(o),this.focus()})),_defineProperty(this,"onKeyDown",(e=>{var{value:t}=e.target;if(8===e.which&&""===t){var{onDeleteTag:o}=this.props;o&&o()}})),_defineProperty(this,"clear",(()=>{this.commentInput.value="",this.focus()})),_defineProperty(this,"focus",(()=>{this.commentInput&&this.commentInput.focus()}))}componentDidMount(){var{focus:e}=this.props;e&&this.commentInput.focus()}render(){var{placeholder:e,tags:t}=this.props,o=a()(t)?e:"";return l.createElement("ul",{className:"tag-input"},n()(t,(e=>l.createElement("li",{className:"tags",key:e.id},e.name,l.createElement(p.A,{name:"delete-tag",id:e.id,onClick:this.onDeleteClick})))),l.createElement("li",{className:"input"},l.createElement("input",{type:"text",placeholder:o,ref:e=>{this.commentInput=e},onChange:this.onChange,onKeyDown:this.onKeyDown})))}}_defineProperty(TagInput,"propTypes",{placeholder:d().string.isRequired,onChange:d().func,focus:d().bool,tags:d().arrayOf(d().shape({name:d().string.isRequired,id:d().string.isRequired})).isRequired})},2175:(e,t,o)=>{o.d(t,{A:()=>ExpandableList});var r=o(34921),n=o.n(r),i=o(39754),a=o.n(i),s=o(96540),c=o(5556),l=o.n(c),m=o(74692),d=o.n(m),p=o(32485),u=o.n(p);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ExpandableList extends s.Component{constructor(e){super(e),_defineProperty(this,"updateMaxHeightIfNeeded",(()=>{var e,t=this.expandableListRef.current,{children:o,expand:r,limit:i}=this.props;if(s.Children.count(o)<=i)t.style.maxHeight="";else{if(r)e=t.scrollHeight;else{var c=0,l=Array.from(t.children);a()(n()(l,i),(e=>{var t=e?d()(e).outerHeight(!0):0;c+=t})),e=c}t.style.maxHeight="".concat(e,"px")}})),this.expandableListRef=s.createRef()}componentDidMount(){this.updateMaxHeightIfNeeded()}componentDidUpdate(){this.updateMaxHeightIfNeeded()}render(){var{expand:e,className:t,children:o}=this.props;return t=u()("expandable-list",t,{expand:e}),s.createElement("ul",{className:t,ref:this.expandableListRef},o)}}_defineProperty(ExpandableList,"propTypes",{children:l().node.isRequired,limit:l().number.isRequired,expand:l().bool}),_defineProperty(ExpandableList,"defaultProps",{expand:!1})},7160:(e,t,o)=>{o.d(t,{A:()=>J});var r=o(96540),n=o(5556),i=o.n(n),a=o(73509),s=o(14324),c=o(35994),l=o(49479),_isRowLoaded=(e,t)=>void 0!==e[t],ListInfiniteLoaderViewBase=e=>{var{children:t,fetchContent:o,infiniteScrollRowCount:n,models:i,lastSelectedId:s,selectionOptions:c,useWindowScroller:l=!0}=e,getShiftSelectModels=e=>{var{singleSelect:t}=c;return function getModelsForShiftSelect(e,t,o){if(!o||arguments.length>3&&void 0!==arguments[3]&&arguments[3])return[];var r=e.map((e=>e.id)),n=r.indexOf(o),i=r.indexOf(t.id);return-1===n||-1===i?[]:i<n?e.slice(i,n):e.slice(n+1,i+1)}(i,e,s,t)},listRowRenderer=e=>{var{index:o,key:n,style:a}=e;return r.createElement("div",{key:n,style:a},t({model:i[o],height:42,isRowLoaded:_isRowLoaded(i,o),getShiftSelectModels}))};return r.createElement(a.wK,{isRowLoaded:e=>{var{index:t}=e;return _isRowLoaded(i,t)},rowCount:n,loadMoreRows:()=>{o()}},(e=>{var{onRowsRendered:t,registerChild:o}=e;return l?r.createElement(a.PG,{scrollingResetTimeInterval:100},(e=>{var{height:i,scrollTop:s,onChildScroll:c}=e;return r.createElement(a.t$,{disableHeight:!0},(e=>{var{width:l}=e;return r.createElement(a.B8,{autoHeight:!0,height:i,ref:o,onScroll:c,onRowsRendered:t,rowCount:n,rowHeight:42,scrollTop:s,width:l,rowRenderer:listRowRenderer})}))})):r.createElement(r.Fragment,null,r.createElement(a.t$,null,(e=>{var{width:i,height:s}=e;return r.createElement(a.B8,{height:s,ref:o,onRowsRendered:t,rowCount:n,rowHeight:42,width:i,rowRenderer:listRowRenderer})})))}))};ListInfiniteLoaderViewBase.propTypes={models:i().arrayOf(i().instanceOf(l.A)),infiniteScrollRowCount:i().number,fetchContent:i().func.isRequired,useWindowScroller:i().bool.isRequired};const m=c.A.connect(ListInfiniteLoaderViewBase,[{store:s.A,mapToProps:["lastSelectedId","selectionOptions"]}]);var d=o(13489),p=o(1683),u=o(71086),h=o(53540),g=o(32485),v=o.n(g);const y="list-table-item-module__listTableItem__blwfy",f="list-table-item-module__visuallyHidden__JES_A",b="list-table-item-module__listTableItemNoSecondaryInfo__TyMCq",P="list-table-item-module__selector__KT0gM",k="list-table-item-module__unselected__ooUCu",A="list-table-item-module__selected__GBSla",_="list-table-item-module__preview___kiKJ",S="list-table-item-module__name__OpIKV",w="list-table-item-module__secondaryInfo__Iy35W",E="list-table-item-module__dateCreated__D9ciz",C="list-table-item-module__size__w2bz3";var ListTableItem=e=>{var{name:t,date:o,size:n,preview:i,selected:a,shouldHideInactiveCheckbox:s,isDisabled:c,onClick:l,onToggleSelect:m,isSelectable:d}=e,p=o;return r.createElement("div",{className:v()(y,!p&&b),onClick:l,role:"button",tabIndex:"0"},d&&r.createElement("span",{className:P},r.createElement("button",{"aria-checked":a,className:a?A:v()(k,s&&f),disabled:c,role:"checkbox",type:"button",onClick:m})),i&&r.createElement("span",{className:_},i),r.createElement("span",{className:S},t),o&&r.createElement("span",{className:w},r.createElement("span",{className:E},o),n&&r.createElement("span",{className:C},n)))};ListTableItem.propTypes={preview:i().node,name:i().oneOfType([i().string,i().node]).isRequired,date:i().oneOfType([i().string,i().node]),size:i().oneOfType([i().string,i().node]),onClick:i().func,onToggleSelect:i().func,selected:i().bool,isSelectable:i().bool},ListTableItem.defaultProps={isSelectable:!0};const M=ListTableItem;var L=o(21572),T="select-all-operation",SelectAllToast=e=>{var{isSelectAllInProgress:t,selectionLimit:o,totalCount:n}=e,i=(0,r.useRef)(t),a=n<o?n:o;return(0,r.useEffect)((()=>{var e=null;!1===i.current&&!0===t&&(e={closeable:!1,icon:"spinner",id:T,message:(0,L.A)("amazon-photos-select-all-in-progress",[a],a),name:"selectAllRange",stay:!0}),!0===i.current&&!1===t&&(e={id:T,stay:!1,timeout:333,icon:"checkmark"}),null!==e&&c.A.emit("showToast",e),i.current=t}),[t]),null};SelectAllToast.propTypes={isSelectAllInProgress:i().bool,selectionLimit:i().number.isRequired,totalCount:i().number.isRequired};const N=SelectAllToast,O={add:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add.svg"',"add-album":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20album.svg"',"add-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20image.svg"',"add-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add%20inline.svg"',alexa:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/alexa.svg"',albums:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/albums.svg"',"aspect-ratio":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/aspect%20ratio.svg"',back:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back.svg"',"blocked-contacts":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/blocked-contacts.svg"',"back-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back%20android.svg"',"broken-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/broken%20image.svg"',burst:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/burst.svg"',calendar:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/calendar.svg"',camera:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/camera.svg"',cancel:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel.svg"',"cancel-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel%20inline.svg"',"caret-down":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20down.svg"',"caret-left":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20left.svg"',"caret-right":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20right.svg"',"caret-up":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20up.svg"',"checkbox-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-on.svg"',"checkbox-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-off.svg"',"checkmark-circle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark_Hover.svg"',checkmark:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark.svg"',"cloud-upload":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cloud%20upload.svg"',contact:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact.svg"',"contact-inverted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg"',"contact-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20add.svg"',"contact-group":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20group.svg"',delete:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/delete.svg"',device:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/device.svg"',dislike:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/dislike.svg"',done:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done.svg"',"done-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done%20inline.svg"',download:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download.svg"',"download-cloud":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download-cloud.svg"',"down-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/down-arrow.svg"',"drive-logo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/drive-logo.svg"',dropdown:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown.svg"',"dropdown-active":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown%20active.svg"',edit:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit.svg"',"edit-text":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/edit%20text.svg"',email:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/email.svg"',error:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/error.svg"',"external-link":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/external-link.svg"',"face-tags":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit-tags.svg"',"family-storage":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/family-storage.svg"',"family-vault":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/family_vault.svg"',filter:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/filter.svg"',"fire-tv":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/fire%20tv.svg"',flag:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/flag.svg"',folder:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder.svg"',"folder-move":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder_move.svg"',"group-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/group-add.svg"',"heart-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20off.svg"',"heart-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20on.svg"',help:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/help.svg"',hide:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/hide.svg"',hyperlink:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/hyperlink.svg"',image:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image.svg"',"image-landscape":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image%20landscape.svg"',information:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/information.svg"',"jump-back":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/jump%20back.svg"',like:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/like.svg"',"live-photo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live%20photo.svg"',"live-photo-play":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-play.svg"',"live-photo-pause":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-pause.svg"',location:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/location.svg"',"magic-sparkle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/magic%20sparkle.svg"',menu:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/menu.svg"',magnify:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify.svg"',"magnify-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify-out.svg"',merge:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/merge.svg"',microphone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/microphone.svg"',more:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/more.svg"',music:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/music.svg"',"network-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20error.svg"',"network-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20off.svg"',"notification-bell":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/notification%20bell.svg"',overflow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/overflow.svg"',pause:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause.svg"',"pause-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause%20inline.svg"',phone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/phone.svg"',photos:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/photos.svg"',play:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play.svg"',"play-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play%20inline.svg"',"radio-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-off.svg"',"radio-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-on.svg"',remove:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove.svg"',"remove-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove%20inline.svg"',reply:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/reply.svg"',search:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/search.svg"',secure:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure.svg"',"secure-locked":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure%20locked.svg"',"send-message":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/send%20message.svg"',settings:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/settings.svg"',share:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share.svg"',"share-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share%20android.svg"',sharing:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing.svg"',"sharing-bubble":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing%20bubble.svg"',"shopping-cart":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/shopping%20cart.svg"',show:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/show.svg"',signout:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/signout.svg"',slideshow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/slideshow.svg"',"star-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20off.svg"',"star-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20on.svg"',"stop-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/stop%20inline.svg"',storage:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/storage.svg"',sync:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/sync.svg"',upload:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/upload.svg"',"up-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/up-arrow.svg"',video:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/video.svg"',volume:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume.svg"',"volume-muted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20muted.svg"',"volume-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20off.svg"',warning:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/warning.svg"',"wifi-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20error.svg"',"wifi-not-connected":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20not%20connected.svg"',"wifi-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20off.svg"',"zoom-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/zoom%20out.svg"',tableHeading:"list-table-heading-module__tableHeading__ExRcg",headingText:"list-table-heading-module__headingText__mwqeo",sortable:"list-table-heading-module__sortable__j_SVl",sortIndicator:"list-table-heading-module__sortIndicator__klm0_",upArrow:"list-table-heading-module__upArrow__GpbkU",downArrow:"list-table-heading-module__downArrow__KLSIv"};function asyncGeneratorStep(e,t,o,r,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void o(e)}s.done?t(c):Promise.resolve(c).then(r,n)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)}))}}var ListTableHeading=e=>{var{currentSelectionSize:t,date:o,hydrateAllPages:n,models:i,name:a,selectionLimit:s,size:m,totalCount:g,pageUrlModel:y,currentSortToken:f,currentSortOrder:b}=e,[P,k]=(0,r.useState)(!1),A=((e,t,o)=>!(t<1)&&e>=Math.min(o,t))(t,g,s),handleSortClick=e=>{y&&(e!==f?(y.setParam("sortToken",e),y.setParam("sortOrder",h.xB.Ascending)):b===h.xB.Ascending?(y.setParam("sortToken",e),y.setParam("sortOrder",h.xB.Descending)):(y.deleteParam("sortToken"),y.deleteParam("sortOrder")),y.go())},getSortIndicator=e=>{if(e!==f)return null;var t=b===h.xB.Ascending?O.upArrow:O.downArrow;return r.createElement("span",{className:v()(O.sortIndicator,t)})},getColumnClassName=e=>v()(O.headingText,y?O.sortable:null,e===f?O.activeSortColumn:null);return r.createElement("div",{className:O.tableHeading},r.createElement(M,{name:r.createElement("span",{className:getColumnClassName(h._6.SortAlphaName),onClick:y?()=>handleSortClick(h._6.SortAlphaName):null},a,getSortIndicator(h._6.SortAlphaName)),date:r.createElement("span",{className:getColumnClassName(h._6.SortDateCreated),onClick:y?()=>handleSortClick(h._6.SortDateCreated):null},o,getSortIndicator(h._6.SortDateCreated)),size:m&&r.createElement("span",{className:getColumnClassName(h._6.SortSize),onClick:y?()=>handleSortClick(h._6.SortSize):null},m,getSortIndicator(h._6.SortSize)),isDisabled:P||0===g,selected:A,onToggleSelect:_asyncToGenerator((function*(){if(!P){if(A)return d.A.log({name:"".concat(u.A.getPageContext(),"ToggleDeselectAll")}),void c.A.emit("unselectItem",i);d.A.log({name:"".concat(u.A.getPageContext(),"ToggleSelectAll")}),p.A.log("clicked.select-all",{},u.A.getPageContext());var e=i,t=!((e,t,o)=>t<1||e>=Math.min(o,t))(i.length,g,s);if(t)k(!0),e=(yield n()).map((e=>new l.A(e))),k(!1);c.A.emit("selectItem",e)}}))}),r.createElement(N,{totalCount:g,isSelectAllInProgress:P,selectionLimit:s}))};ListTableHeading.propTypes={currentSelectionSize:i().number.isRequired,hydrateAllPages:i().func.isRequired,models:i().arrayOf(i().instanceOf(l.A)),selectionLimit:i().number.isRequired,totalCount:i().number.isRequired,name:i().oneOfType([i().string,i().node]).isRequired,date:i().oneOfType([i().string,i().node]).isRequired,size:i().oneOfType([i().string,i().node]),pageUrlModel:i().shape({base:i().string,toQueryString:i().func}),currentSortToken:i().string,currentSortOrder:i().string};const x=c.A.connect(ListTableHeading,[{store:s.A,mapToProps:e=>{var{selection:t,maxSelectAllCount:o}=e;return{currentSelectionSize:t.getSize(),selectionLimit:o}}}]),I="list-table-item-loading-placeholder-module__loadingPlaceholder__job6C",R="list-table-item-loading-placeholder-module__innerMasker__P8bGs";var ListTableItemLoadingPlaceholder=e=>{var{height:t}=e;return r.createElement("div",{className:I,style:{height:"".concat(t,"px")}},r.createElement("div",{className:R}))};ListTableItemLoadingPlaceholder.propTypes={height:i().number.isRequired};const j=ListTableItemLoadingPlaceholder;var D=o(61365),z=o(33218);const F="list-table-node-module__listTableNode__lDQye",U="list-table-node-module__selected__Il8ON",q="list-table-node-module__nonClickableListTableNode__rlWiu",B="list-table-node-module__listTableNodeContents__M7f3S",G="list-table-node-module__nameText__g0u1e",V="list-table-node-module__nameTextDate__x7O0J",W="list-table-node-module__nodePreviewContainer__vhVtd",K="list-table-node-module__secondaryText__r4PCh";var ListTableNode=e=>{var{getShiftSelectModels:t,hasSizeColumn:o=!1,itemPropsFactory:n,model:i}=e;if(!i)return null;var{isSelectable:a,showSecondaryInfo:s,nodePreview:l,name:m,canClickRow:d,onClick:p,isNodeSelected:u}=n(i),{contentProperties:h}=i,{createdDate:g}=i.serviceProperties,{size:y}=h||{};return r.createElement("li",{className:v()(d?F:q,u&&U)},r.createElement("div",{className:B},r.createElement(M,{preview:r.createElement("div",{className:W},l),name:r.createElement("span",{className:v()(G,g&&V)},m),date:s&&r.createElement("span",{className:K},(0,D.eK)(g)),size:o&&s&&r.createElement("span",{className:K},"number"==typeof y?(0,z.A)(y):null),selected:u,onClick:e=>{if(p)p(e);else if(a){if(e.stopPropagation(),e.shiftKey&&t){var o=t(i);if(!o||0===o.length)return;return window.getSelection().removeAllRanges(),void c.A.emit("selectItem",o)}c.A.emit(u?"unselectItem":"selectItem",[i])}},shouldHideInactiveCheckbox:!0,isSelectable:a})))};ListTableNode.propTypes={hasSizeColumn:i().bool,itemPropsFactory:i().func,model:i().instanceOf(l.A)};const H=ListTableNode;var ListTableRow=e=>{var{model:t,getShiftSelectModels:o,hasSizeColumn:n,height:i,isRowLoaded:a,itemPropsFactory:s}=e,c=r.createElement(j,{height:i});return a&&(c=r.createElement(H,{itemPropsFactory:s,model:t,hasSizeColumn:n,getShiftSelectModels:o})),c};ListTableRow.propTypes={isRowLoaded:i().bool.isRequired,itemPropsFactory:i().func,model:i().instanceOf(l.A),height:i().number.isRequired};const Y=ListTableRow;var ListTable=e=>{var{models:t,fetchContent:o,hydrateAllPages:n,infiniteScrollRowCount:i,totalCount:a,isHeadless:s=!1,headingName:c,headingDate:l,headingSize:d,itemPropsFactory:p,useWindowScroller:u=!0,pageUrlModel:h,currentSortToken:g,currentSortOrder:v,isLoading:y=!1}=e;if(!s&&!n)throw new Error("ListTableHeading requires function hydrateAllPages");return r.createElement(r.Fragment,null,!s&&r.createElement(x,{date:l,hydrateAllPages:n,models:t,name:c,size:d,totalCount:a,pageUrlModel:h,currentSortToken:g,currentSortOrder:v}),y?r.createElement("div",{"aria-live":"polite",className:"list-table-loading-content"},Array(8).fill().map(((e,t)=>r.createElement(j,{key:"loading-placeholder-".concat(t),height:42})))):r.createElement(m,{models:t,infiniteScrollRowCount:i,fetchContent:o,useWindowScroller:u},(e=>{var{model:t,height:o,isRowLoaded:n,getShiftSelectModels:i}=e;return r.createElement(Y,{getShiftSelectModels:i,hasSizeColumn:!!d,height:o,isRowLoaded:n,itemPropsFactory:p,model:t})})))};ListTable.propTypes={fetchContent:i().func.isRequired,headingName:i().oneOfType([i().string,i().node]),headingDate:i().oneOfType([i().string,i().node]),headingSize:i().oneOfType([i().string,i().node]),hydrateAllPages:i().func,infiniteScrollRowCount:i().number,itemPropsFactory:i().func.isRequired,models:i().arrayOf(i().instanceOf(l.A)),totalCount:i().number,isHeadless:i().bool,isLoading:i().bool,pageUrlModel:i().shape({base:i().string,toQueryString:i().func}),currentSortToken:i().string,currentSortOrder:i().string};const J=ListTable},40248:(e,t,o)=>{o.d(t,{A:()=>he});var r=o(58156),n=o.n(r),i=o(96540),a=o(32485),s=o.n(a),c=o(71086),l=o(97463),m=o(35994),d=o(94788),p=o(46756),u=o(23805),h=o.n(u),g=o(55378),v=o.n(g),y=o(95950),f=o.n(y),b=o(5556),P=o.n(b),k=o(71468),A=o(43840),_=o(21572),S=o(14324),w=o(25205),E=o(32608),C=o(50749),M=o(30257),L=o(96721),T=o(48705),N=o.n(T),O=o(17667),x=o(18742),I=o(78733),R=o(84723),j=o(1683),D=o(84503),z=o(54205),F=o(2175);const U="mobile-menu-view-module__downloadAppsMobileMenu__hVU1F",q="mobile-menu-view-module__mobileTitle__lw4EN";var MobileMenuView=e=>{var{name:t,label:o,menuClassNames:r,downloadLink:n,eventTag:a,handleExpandClick:s,isOpen:l}=e;return i.createElement(F.A,{className:r,expand:l,limit:1},i.createElement(D.A,{className:"toggle",name:t,onClick:s},o),i.createElement("div",{className:U,"data-testid":"mobileMenuContent"},i.createElement("header",null,i.createElement(d.A,{className:q},"amazon-photos-your-devices-mobile"),i.createElement(z.A,{name:"mobile-app-link",href:n,metricOverrides:{eventName:"YourDevicesCTA",eventTag:a,context:c.A.getPageContext()}},i.createElement(d.A,null,"amazon-photos-your-devices-get-the-app"))),i.createElement("p",null,i.createElement(d.A,null,"amazon-photos-your-devices-about"))))};MobileMenuView.propTypes={name:P().string.isRequired,label:P().string.isRequired,menuClassNames:P().string.isRequired,downloadLink:P().string.isRequired,eventTag:P().string.isRequired,handleExpandClick:P().func.isRequired,isOpen:P().bool.isRequired};const B=MobileMenuView;var G=o(32098),V=o(59786),W=o(96158);const K="download-apps-menu-qrcode-module__qrCodeContainer__jZcVG";var DownloadAppsMenuQRCode=e=>{var{downloadAppUrlString:t}=e,o=new V.A(t).setParam("ref_","ph_downloadapps").toString();return i.createElement("div",{className:K},i.createElement(W.A,{content:o,classStyle:"no-border",dimension:100,marginSize:0,title:(0,_.A)("amazon-photos-download-the-apps-scan-the-qrcode")}),i.createElement(d.A,null,"amazon-photos-download-the-apps-scan-the-qrcode"))};DownloadAppsMenuQRCode.propTypes={downloadAppUrlString:P().string.isRequired};const H=DownloadAppsMenuQRCode,Y="download-apps-menu-view-module__downloadAppsMenuView__C81l5",J="download-apps-menu-view-module__downloadAppTitle__qIE3i",Q="download-apps-menu-view-module__menuItem__D3lkF";var DownloadAppsMenuView=e=>{var{name:t,label:o,menuClassNames:r,handleMenuOpen:n,handleMenuClose:a,isTablet:s,desktopLink:l,downloadAppUrlString:m}=e;return i.createElement(G.A,{position:"left",name:t,text:o,closeOnClick:!1,className:r,onOpen:n,onClose:a},i.createElement("section",{className:Y},i.createElement("header",null,i.createElement(d.A,{className:J},"amazon-photos-download-the-apps-title")),i.createElement("div",null,!s&&i.createElement("div",{className:Q},i.createElement(d.A,null,"amazon-photos-your-devices-desktop"),i.createElement(z.A,{name:"desktop-app",href:l,metricOverrides:{eventName:"YourDevicesCTA",eventTag:"Desktop",context:c.A.getPageContext()}},i.createElement(d.A,null,"amazon-photos-your-devices-get-the-app"))),i.createElement("div",{className:Q},i.createElement(d.A,null,"amazon-photos-your-devices-mobile"),i.createElement(H,{downloadAppUrlString:m})))))};DownloadAppsMenuView.propTypes={name:P().string.isRequired,label:P().string.isRequired,menuClassNames:P().string.isRequired,handleMenuOpen:P().func.isRequired,handleMenuClose:P().func.isRequired,isTablet:P().bool.isRequired,desktopLink:P().string.isRequired,downloadAppUrlString:P().string.isRequired};const X=DownloadAppsMenuView;function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Z="Unbadged",$="Badged",ee="YourDevicesClicked";class DownloadAppsMenuContainer extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{isOpen:!1}),_defineProperty(this,"recordBizMetrics",(()=>{var{seenYourDevices:e}=this.props,t=e?Z:$;j.A.log(ee,{eventTag:t},c.A.getPageContext())})),_defineProperty(this,"handleExpandClick",(()=>{var{isOpen:e}=this.state;this.setState({isOpen:!e}),this.handleMenuOpen()})),_defineProperty(this,"handleMenuOpen",(()=>{var{seenYourDevices:e}=this.props;this.recordBizMetrics(),e||(R.A.setCDPref("seenYourDevices"),x.A.setData({seenYourDevices:!0}))})),_defineProperty(this,"handleMenuClose",(()=>this.setState({isOpen:!1})))}render(){var{seenYourDevices:e,name:t,label:o,device:{isMobile:r,isTablet:n,isIOS:a},urls:{universalAppLink:c,appDownloadiOS:l,appDownloadAndroid:m,desktopLink:d}}=this.props,{protocol:p,hostname:u}=window.location,h="".concat(p,"//").concat(u).concat(c),{isOpen:g}=this.state,v=s()("apps-menu",{indicator:!e&&!r}),y=a?l:m,f=a?"iOSDownload":"AndroidDownload";return i.createElement(i.Fragment,null,r?i.createElement(B,{name:t,label:o,menuClassNames:v,downloadLink:y,eventTag:f,handleExpandClick:this.handleExpandClick,isOpen:g}):i.createElement(X,{name:t,label:o,menuClassNames:v,handleMenuOpen:this.handleMenuOpen,handleMenuClose:this.handleMenuClose,isTablet:n,desktopLink:d,downloadAppUrlString:h}))}}_defineProperty(DownloadAppsMenuContainer,"propTypes",{name:P().string.isRequired,label:P().string.isRequired,urls:P().shape({universalAppLink:P().string.isRequired,appDownloadiOS:P().string.isRequired,appDownloadAndroid:P().string.isRequired,desktopLink:P().string.isRequired}).isRequired,seenYourDevices:P().bool.isRequired,device:P().shape({isMobile:P().bool.isRequired,isTablet:P().bool.isRequired,isIOS:P().bool.isRequired}).isRequired});const te=m.A.connect(DownloadAppsMenuContainer,[{store:x.A,mapToProps:["device","seenYourDevices","urls"]}]);var oe=o(54318),re=o(9240);function getNavItems(e){var{hasSeenFolderView:t,hasVisitedGroupsPage:o,hasVisitedStoriesPage:r,isOverQuota:n,storiesFtue:i,unseenGroupCount:a=0,unseenStoriesCount:s=0,familyVaultMemberCount:c=0}=e,l=x.A.getProperty("urls",{}),m=i?(0,_.A)("amazon-photos-count-new-nav"):s;return function filterItems(e){return N()(e,(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t}))}({photos:{href:l.all,className:"photos",label:"amazon-photos-photos-nav-label"},family:{href:l.familyArchive,className:"family",label:"amazon-photos-family-photos-nav",isDisplayed:(0,re.Z)(c)},groups:{href:l.groups,className:"groups",label:"amazon-photos-sharing-nav",isDisplayed:O.A.isOn(oe.jy.GroupsEnabled),badge:o?0:a},albums:{href:l.albums,className:"albums",label:"amazon-photos-albums-nav"},stories:{href:l.stories,className:"stories",label:"amazon-photos-stories-nav",isDisplayed:O.A.isOn("stories"),badge:r?0:m},people:{href:l.people,className:"people",label:"amazon-photos-people-nav",isDisplayed:O.A.isOn("people")},askPhotos:{href:l.askPhotos,className:"ask",label:"amazon-photos-ask-photos-nav-label",isDisplayed:(0,oe.Qr)()},places:{href:l.places,className:"places",label:"amazon-photos-nav-places",isDisplayed:O.A.isOn("places")},"folder-view":{href:l.folderView,className:"folders",label:"amazon-photos-nav-folders",badge:!t},trash:{href:l.trash,className:"trash",label:"amazon-photos-trash-nav"},personalStorage:{href:l.storage,className:"storage",label:"amazon-photos-storage-nav-label",badge:n},familyStorage:{href:l.familyStorage,className:"family-storage",label:"amazon-photos-family-storage-nav-label",isDisplayed:(0,oe.cp)()},devicePersonalization:{className:"device-personalization-nav",label:"amazon-photos-device-personalization-nav",component:I.A},yourAppsMenu:{className:"your-apps",label:"amazon-photos-download-the-apps-title",component:te,badge:1}})}var ne=["className","label","badge","component"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var PrimaryNav=e=>{var{activePage:t,hasVisitedGroupsPage:o,hasVisitedStoriesPage:r,isOverQuota:n,selectionOptions:a,storiesFtue:c,unseenGroupCount:l,unseenStoriesCount:m,familyVaultMemberCount:d}=e,p=getNavItems({hasSeenFolderView:(0,k.d4)(E.he),hasVisitedStoriesPage:r,hasVisitedGroupsPage:o,isOverQuota:n,storiesFtue:c,unseenGroupCount:l,unseenStoriesCount:m,familyVaultMemberCount:d}),u=a.navigationOptions||f()(p);return i.createElement("nav",{className:"side-nav primary-nav"},i.createElement("ul",null,v()(u,((e,o)=>{var r=h()(e)?e:p[e];if(!r)return null;var n,{className:a,label:c,badge:l,component:m}=r,d=_objectWithoutProperties(r,ne),u="nav-".concat(a),g=null;if(l&&(g=Number.isFinite(l)?i.createElement(C.A,null,(0,M.A)(l)):i.createElement("span",{className:"notification-dot"})),m){var v=m;n=i.createElement(v,_extends({},d,{className:"nav-item",textBadge:g,label:(0,_.A)(c),name:u}))}else n=i.createElement(A.A,_extends({},d,{className:"nav-item",name:u}),g,(0,_.A)(c));return i.createElement("li",{key:o,className:s()(a,{active:e===t})},n)}))))};PrimaryNav.propTypes={hasVisitedGroupsPage:P().bool,hasVisitedStoriesPage:P().bool,isOverQuota:P().bool,selectionOptions:P().shape({navigationOptions:P().arrayOf(P().string)}).isRequired,storiesFtue:P().bool,unseenGroupCount:P().number,familyVaultMemberCount:P().number};const ie=m.A.connect(PrimaryNav,[{store:l.A,mapToProps:["hasVisitedGroupsPage","hasVisitedStoriesPage","storiesFtue","unseenGroupCount","unseenStoriesCount"]},{store:S.A,mapToProps:["selectionOptions"]},{store:w.A,mapToProps:function mapToProps(){var e,{members:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{familyVaultMemberCount:null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0}}},{store:L.A,mapToProps:["isOverQuota"]}]);var ae=o(46698),se=o(35110),ce=o(15761),le=o(14127),me=o(39655),de=o(91380),pe=o(44541),ue=o(83900);function primary_site_layout_extends(){return primary_site_layout_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},primary_site_layout_extends.apply(this,arguments)}const he=m.A.connect((e=>{var{buttonMetricOverrides:t,children:o,className:r,collection:n,downloadCountLimit:a,edgeless:c,enableSelectionDrag:l,header:m,hideNav:u,hideSelectAll:h,id:g,overflowButtons:v=[],onReportAbuseClick:y,page:f,parentModel:b,selectionButtons:P=[],showPrimaryNav:k=!0,sideNavContent:A,style:_,unauthorized:S}=e,w={collection:n,enableDrag:l,options:[...P,...v],hideSelectAll:h,metricOverrides:t,parentModel:b,downloadCountLimit:a,onReportAbuseClick:y};if(S)return null;var E=(0,ue.A)(["Welcome","GroupShareView","GroupShareViewSPV","SharedLanding","SharedLandingSPV","ShareLanding","ShareLandingSPV","SharedAlbumLanding","SharedAlbumLandingSPV"])?i.createElement(de.h,null):i.createElement(pe.A,null);return i.createElement(ce.A,primary_site_layout_extends({className:s()("primary-site-layout",r,{edgeless:c}),id:g||f,style:_},w),i.createElement("button",{type:"button",className:"skip-to-main-content",onClick:()=>{document.getElementById("main-content").focus({preventScroll:!0})}},i.createElement(d.A,null,"amazon-photos-skip-to-main-content")),i.createElement(le.A,{attribution:"header"},E),m&&!u&&i.createElement(p.A,null,m),i.createElement("section",{className:"site-content-wrap"},(k||A)&&i.createElement(ae.A,{showBackToTop:!1},k&&i.createElement(le.A,{attribution:"primary-nav"},i.createElement(ie,{activePage:f})),i.createElement(le.A,{attribution:"side-nav-content"},A)),i.createElement("section",{id:"main-content",className:"site-content",tabIndex:"-1"},i.createElement(le.A,{attribution:"site-content"},o))),i.createElement(se.A,null),i.createElement(me.A,null))}),[{store:c.A,mapToProps:e=>{var{route:t={}}=e;return{hideNav:n()(t,"props.query.hide_nav",!1)}}},{store:l.A,mapToProps:["unauthorized"]}])},86682:(e,t,o)=>{o.d(t,{A:()=>ShowMoreList});var r=o(96540),n=o(5556),i=o.n(n),a=o(84503),s=o(94788),c=o(32485),l=o.n(c),m=o(2175);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ShowMoreList extends r.Component{constructor(){super(...arguments),_defineProperty(this,"state",{showMore:!1}),_defineProperty(this,"onShowMoreButtonClick",(()=>{this.setState({showMore:!this.state.showMore})}))}render(){var e,t,o=l()("show-more-list",this.props.className);return r.Children.count(this.props.children)>this.props.limit&&(e=this.state.showMore?"amazon-photos-show-less":"amazon-photos-show-more",t=r.createElement(a.A,{onClick:this.onShowMoreButtonClick,name:"show-toggle",className:l()("show-more-button",{"show-more":this.state.showMore})},r.createElement(s.A,null,e))),r.createElement("div",{className:o,name:this.props.name},r.createElement(m.A,{limit:this.props.limit,expand:this.state.showMore},this.props.children),t)}}_defineProperty(ShowMoreList,"displayName","ShowMoreList"),_defineProperty(ShowMoreList,"propTypes",{limit:i().number}),_defineProperty(ShowMoreList,"defaultProps",{limit:5})},93092:(e,t,o)=>{o.d(t,{o:()=>BackButton});var r=o(96540),n=o(43840),i=o(21572),a=o(94788);const s="back-button-module__backButton__Q5oco";var BackButton=e=>{var{href:t,shouldShowLabel:o=!0}=e;return r.createElement(n.A,{className:s,href:t,name:"back",title:o?void 0:(0,i.A)("amazon-photos-go-back-link")},o&&r.createElement(a.A,null,"amazon-photos-go-back-link"))}},82354:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(96540),n=o(5556),i=o.n(n),a=o(21572),s=o(42852),c=o(51158),l=o(84503),m=o(42341);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class DownloadLink extends r.Component{constructor(){super(...arguments),_defineProperty(this,"onClick",(()=>{var{collection:e,shareId:t}=this.props,{pageContext:o}=this.context;(0,m.A)({collection:e,shareId:t,pageContext:o})}))}render(){var{collection:e,removeOnDisabled:t,children:o}=this.props,{disabled:n}=this.props;return e.count||(n=!0),n&&t?null:r.createElement(l.A,_extends({},this.props,{name:"download",onClick:this.onClick,disabled:n}),o||(0,a.A)("amazon-photos-download"))}}_defineProperty(DownloadLink,"propTypes",{disabled:i().bool,removeOnDisabled:i().bool,collection:i().instanceOf(c.A).isRequired}),_defineProperty(DownloadLink,"contextTypes",{pageContext:i().string.isRequired}),_defineProperty(DownloadLink,"defaultProps",{removeOnDisabled:!0,disabled:!1});const d=(0,s.A)(DownloadLink)},15711:(e,t,o)=>{o.d(t,{A:()=>c});var r=o(96540),n=o(5556),i=o.n(n),a=o(13489),s=o(6687);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class HealthMetricWidgetTimer extends r.Component{constructor(e){super(e),_defineProperty(this,"onBeaconBroadcast",(e=>{var{metricName:t,triggerOn:o}=this.props;if(e.status===o){var r=e.timestamp-this.startTime;a.A.stopTimerAndLog({name:t,value:r,type:"TIMER"})}}));var{children:t,metricName:o}=this.props,r=t.type;this.IlbDecoratedTimedComponent=(0,s.A)(r),this.startTime=a.A.startTimer({name:o,type:"TIMER"})}getChildContext(){return{beaconListener:this.onBeaconBroadcast}}componentDidUpdate(){this.startTime=Date.now()}render(){var{IlbDecoratedTimedComponent:e}=this,{children:t,ilbConfig:o}=this.props;return r.createElement(e,_extends({},t.props,{ilbConfig:o}))}}_defineProperty(HealthMetricWidgetTimer,"propTypes",{metricName:i().string.isRequired,triggerOn:i().string.isRequired,ilbConfig:i().shape({name:i().string.isRequired,isActive:i().bool.isRequired,changeHash:i().string}).isRequired,children:i().element.isRequired}),_defineProperty(HealthMetricWidgetTimer,"childContextTypes",{beaconListener:i().func});const c=HealthMetricWidgetTimer},86737:(e,t,o)=>{o.d(t,{A:()=>ArchiveToggle});var r=o(96540),n=o(32485),i=o.n(n),a=o(35994),s=o(21572),c=o(47389),l=o(5556),m=o.n(l),d=o(56424);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ArchiveToggle extends r.Component{constructor(){super(...arguments),_defineProperty(this,"onToggleChange",(e=>{var{pageUrlModel:t}=this.props;a.A.emit("deselectAll"),t.setParam("searchContext",e.id),t.go()}))}render(){var{activeTab:e,className:t,tabs:o}=this.props;return r.createElement(d.A,{activeTab:e,className:i()(t,"archive-toggle"),onChange:this.onToggleChange,tabs:o})}}_defineProperty(ArchiveToggle,"propTypes",{activeTab:m().string,className:m().string,pageUrlModel:m().instanceOf(c.A).isRequired,tabs:m().arrayOf(m().shape({id:m().string,title:m().string}))}),_defineProperty(ArchiveToggle,"defaultProps",{activeTab:"customer",tabs:[{id:"customer",title:(0,s.A)("amazon-photos-photos-nav-label")},{id:"family",title:(0,s.A)("amazon-photos-family-photos-nav")}]})},35564:(e,t,o)=>{o.d(t,{A:()=>P});var r=o(62193),n=o.n(r),i=o(96540),a=o(5556),s=o.n(a),c=o(84503),l=o(32098),m=o(35994),d=o(94788),p=o(21572),u=o(70476),h=o(59055),g=o(87937),v=o(94171),y=o(68064),f=o(69958),b=o(31194);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class RenameMenu extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{newName:""}),_defineProperty(this,"onSubmit",(e=>{e.preventDefault();var{person:t}=this.props,{newName:o}=this.state;if(0!==o.trim().length){var r=this.getMatchingNames(o);if(0===r.length||r[0].searchData.clusterName.trim()!==o.trim()){o=o.trim(),new y.A({items:[t],context:"customer",newName:o}).start(),this.setState({newName:""})}else{var n=r[0];m.A.emit("openDialog",{component:v.A,props:{clusterIds:[t.id,n.id],newName:n.searchData.clusterName,enteredName:o,originalName:t.searchData.clusterName},id:"merge-dialog"})}this.expandableMenu.toggleMenu(!1)}})),_defineProperty(this,"onInputChange",(e=>{this.setState({newName:e})})),_defineProperty(this,"onInputKeyDown",(e=>{27===e.which&&this.expandableMenu.toggleMenu(!1)})),_defineProperty(this,"onAutocompleteItemSelect",(e=>{var{person:t}=this.props;m.A.emit("openDialog",{component:v.A,props:{clusterIds:[t.id,e.id],newName:e.searchData.clusterName},id:"merge-dialog"}),this.expandableMenu.toggleMenu(!1)})),_defineProperty(this,"onMenuClose",(()=>{this.setState({newName:""})})),_defineProperty(this,"autoCompleteItemToString",(e=>e.searchData.clusterName)),_defineProperty(this,"renderAutocompleteItem",(e=>{var{newName:t}=this.state;return i.createElement("div",{className:"item",title:e.searchData.clusterName},i.createElement(h.A,{cdsClusterId:e.name}),i.createElement(b.A,{highlight:t,text:e.searchData.clusterName,onlyBeginning:!0}))}))}UNSAFE_componentWillMount(){f.A.notifyComponent(this,null,["namedPeople"])}componentWillUnmount(){f.A.endNotifications(this,!1)}getMatchingNames(e){var{person:t}=this.props,{namedPeople:o=[]}=this.state;return o.filter((o=>{var{clusterName:r}=o.searchData;return t.id!==o.id&&r.toLowerCase().startsWith(e.toLowerCase())}))}render(){var{text:e}=this.props,{newName:t}=this.state,o=this.getMatchingNames(t),r=i.createElement(c.A,{name:"rename-menu-submit",type:"submit",disabled:n()(t)},i.createElement(d.A,null,"amazon-photos-done-btn"));return i.createElement(l.A,{name:"rename-menu",className:"rename-menu",text:e,closeOnClick:!1,ref:e=>{this.expandableMenu=e},onClose:this.onMenuClose},i.createElement("form",{onSubmit:this.onSubmit},i.createElement(u.Ay,{value:t,placeholder:(0,p.A)("amazon-photos-new-name"),listItemRenderer:this.renderAutocompleteItem,itemToString:this.autoCompleteItemToString,onItemSelect:this.onAutocompleteItemSelect,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,onBlur:this.onInputBlur,result:o,hideOnBlur:!1,autoFocus:!0,inputButton:r})))}}_defineProperty(RenameMenu,"propTypes",{person:s().instanceOf(g.A).isRequired}),_defineProperty(RenameMenu,"contextTypes",{pageContext:s().string.isRequired});const P=RenameMenu},56424:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(84503),n=o(32485),i=o.n(n),a=o(96540),s=o(5556),c=o.n(s),Toggle=e=>{var{activeTab:t,onChange:o,tabs:n,className:s,id:c}=e,onTabClick=(e,r)=>{var{tab:n}=r;t!==n.id&&o&&o(n)};return a.createElement("nav",{id:c,className:i()("toggle-component",s)},n.map((e=>{var o="".concat(e.id,"-tab");return a.createElement(r.A,{key:e.id,name:o,className:i()(o,{active:e.id===t}),tab:e,onClick:onTabClick},e.title)})))};Toggle.propTypes={activeTab:c().string.isRequired,tabs:c().arrayOf(c().shape({id:c().string,title:c().string})).isRequired,onChange:c().func.isRequired,className:c().string,id:c().string};const l=Toggle},17059:(e,t,o)=>{o.d(t,{Ay:()=>I});var r=o(62193),n=o.n(r),i=o(58156),a=o.n(i),s=o(38221),c=o.n(s),l=o(96540),m=o(35994),d=o(21572),p=o(94788),u=o(84503),h=o(18742),g=o(14324),v=o(54205),y=o(1683),f=o(71086),b=o(32485),P=o.n(b),k=o(56347),A=o(71468),_=o(26408),S=o(96721),w=o(61950);const E="non-media-download-banner-module__bannerContainer__CL1GB",C="non-media-download-banner-module__bannerContents__IHLVn",M="non-media-download-banner-module__bannerDescription__M0r4y",L="non-media-download-banner-module__bannerDownloadButton__vD9wu",T="non-media-download-banner-module__bannerExternalLink__wAJUx";var N="download_toast";function handleError(e){m.A.emit("closeToast",{id:N}),m.A.emit("showToast",{id:"non-media-download-error-toast",message:(0,d.A)(e.status===_.r?"amazon-photos-one-click-bulk-download-size-limit-error-toast":"amazon-photos-generic-service-error"),stay:!0})}var O=c()((()=>{(0,_.I)({onError:handleError})}),500);var x=m.A.connect((e=>{var{usage:t,device:o,urls:r,selection:i,rootFolderId:s}=e,{folderId:c}=(0,k.g)(),h=(c||s)===s,g=a()(t,"doc.total.bytes",0)+a()(t,"other.total.bytes",0),b=a()(t,"doc.total.count",0)+a()(t,"other.total.count",0),A=function shouldDisplayDownloadButton(e,t){return t<1e4&&e<=5368709120}(g,b),_=h&&b>0;if((0,l.useEffect)((()=>{_&&y.A.log("BulkDownloadBannerDisplayed",{eventTag:A?"webDownload":"desktopAppDownload"},f.A.getPageContext())}),[_]),!_)return null;var S,w=!n()(i.selectionData),x=function getDownloadDesktopAppComponent(e,t){var{isDesktop:o}=e;return o&&l.createElement(v.A,{name:"one-click-download-app",href:t.desktopLink,className:P()(T),type:"button"},l.createElement(p.A,null,"amazon-photos-one-click-bulk-download-desktop-button"))}(o,r),I="amazon-photos-one-click-bulk-download-app";if(A){x=function getDownloadButtonComponent(e){return l.createElement(u.A,{name:"one-click-download",disabled:e,className:L,onClick:()=>{m.A.emit("showToast",{id:N,message:(0,d.A)("amazon-photos-one-click-bulk-download-starting-toast"),stay:!0}),O()}},l.createElement(p.A,null,"amazon-photos-one-click-bulk-download-content-download-button"))}(w),I="amazon-photos-one-click-bulk-download-non-media-content";var R=l.createElement(p.A,null,"amazon-photos-one-click-bulk-download-banner-desktop-app-link");S=o.isDesktop?l.createElement(v.A,{name:"one-click-download-banner-url",href:r.desktopLink},R):R}return l.createElement("div",{className:E},l.createElement("div",{className:C},l.createElement(p.A,{className:M,replace:S},I),x))}),[{store:S.A,mapToProps:["usage"]},{store:h.A,mapToProps:["device","urls"]},{store:g.A,mapToProps:["selection"]}]);const I=(0,A.Ng)((e=>({rootFolderId:(0,w.eI)(e)})))(x)},40959:(e,t,o)=>{o.d(t,{A:()=>A});var r=o(63950),n=o.n(r),i=o(64112),a=o.n(i),s=o(38221),c=o.n(s),l=o(24713),m=o.n(l),d=o(32629),p=o.n(d),u=o(5556),h=o.n(u),g=o(96540),v=o(73509),y=o(42852),f=o(81774),b=o(46600),P=o(76313),k=["collection","useGridLayout","before","renderSection","reverseScroll","count","children"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class InfiniteGrouper extends b.GV{constructor(){super(...arguments),_defineProperty(this,"state",{scrollToIndex:void 0,cmCache:new v.jS({fixedWidth:!0,fixedHeight:!1,defaultHeight:500}),doneLoadingPages:!1,isFirstPageGenerated:!1,sectionKeys:{},sectionIndexes:[],pages:[]}),_defineProperty(this,"_rowLoadedCache",{}),_defineProperty(this,"scrollToNodeIndex",(e=>{var t=this.getPageFromIndex(e),o=this.getPage(t);o&&(this._tryingToScrollToIndex||this.isSectionComplete(o.sectionIndex)?this._tryingToScrollToIndex=null:this._tryingToScrollToIndex=e,this.setState({scrollToIndex:t}))})),_defineProperty(this,"isRowLoaded",(e=>{var{index:t}=e;return Boolean(this._rowLoadedCache[t])})),_defineProperty(this,"debouncedUpdatePages",c()(this.updatePages,200))}UNSAFE_componentWillMount(){this.generateFirstSections()}generateFirstSections(e){var t=this,{collection:o}=this.props;o.getPage(0).done((function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t._unMounted){var r=p()(o);r.pop(),t.generateSections(_objectSpread({startIndex:0,items:r},t.props),e)}}))}UNSAFE_componentWillReceiveProps(e){var{collection:t,currentSort:o,uid:r}=this.props;t===e.collection&&r===e.uid||(this._pendingDataReload=!0,t.getPage(0).done((()=>{if(!this._unMounted){var r={};if(o!==e.currentSort)r={isFirstPageGenerated:!1,pages:[],sectionIndexes:[],sectionKeys:{}};else{for(var{count:n=0}=t,{sectionIndexes:i}=this.state,a=[...i],s=0;s<a.length;s++)if(a[s]>=n){a.splice(s,a.length-s);break}r={sectionIndexes:a}}this.setState(_objectSpread({doneLoadingPages:!1},r),(()=>{this._rowLoadedCache={},this._pendingDataReload=!1,this.generateFirstSections((()=>{this.loadMoreRows({startIndex:this._firstRowRendered||0,stopIndex:this._lastRowRendered||0})}))}))}})))}onRowsRendered(e){var{startIndex:t,stopIndex:o}=e,{onRowsRendered:r,before:n=[],after:i=[],collection:a}=this.props,{count:s}=a,{rowCount:c}=this;if(this.resetScrollToIndex(t,o),this._firstRowRendered=t,this._lastRowRendered=o,s&&r){var l=c-n.length-i.length-1,m=Math.min(Math.max(t-n.length,0),l),d=Math.max(Math.min(l,o-n.length),0),p=this.getPage(m),u=this.getPage(d);r(p?p.start:0,u?u.end:s-1)}}getPage(e){var t,o,r,n,{collection:i,pageSize:a}=this.props,{count:s}=i,{pages:c,sectionIndexes:l}=this.state,m=c[c.length-1],d=!1,p=!1,u=!1;if("number"==typeof e){if(e<c.length)t=c[e];else if(m){t=m;var h=c.length-1;o=s-1,t+=(e-h)*a}else t=e*a,o=s-1;if(!l.length||t<l[0]?(d=!0,r=0,o=l.length?l[0]-1:s-1):((n=l.findIndex((e=>e>t)))>-1?(o=l[n]-1,n-=1):(o=s-1,n=l.length-1),r=l[n]),!(t>o)){var g=Math.min(t+a-1,o);return t===r&&(u=!0),g===o&&(p=!0),{start:t,end:g,last:p,first:u,sectionIndex:r,unsectioned:d}}}}getPageFromIndex(e){var{collection:t,pageSize:o,before:r=[]}=this.props,{count:n}=t,{pages:i}=this.state,a=i[i.length-1]||0;if(!(e>n-1||e<0)){if(e<a)return m()(i,(t=>t>e))-1+r.length;var s=e-a;return Math.floor(s/o)+(i.length?i.length-1:0)+r.length}}createPages(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,o=[],r=e;if(!e.length)return[];0!==r[0]&&(r=[0,...r]);for(var n=0;n<r.length;n++){var i=r[n],a=r[n+1];if(o.push(i),a)for(var s=Math.ceil((a-i)/t),c=1;c<s;c++)o.push(i+c*t)}return o}updatePages(e){if(!this._unMounted){var{pageSize:t}=this.props,{sectionIndexes:o,pages:r,isFirstPageGenerated:n}=this.state,i=this.createPages(o,t),{before:a=[]}=this.props,s=this._firstRowRendered;n&&!this._tryingToScrollToIndex&&s&&r[s=Math.max(s-a.length,0)]!==i[s]&&s>0&&(this._tryingToScrollToIndex=r[s]),this.setState({pages:i,isFirstPageGenerated:!0},(()=>{e&&e(),this._tryingToScrollToIndex&&this.scrollToNodeIndex(this._tryingToScrollToIndex)}))}}findFirstSectionAfterIndex(e,t){for(var o=0;o<e.length;o++)if(e[o]>=t)return o;return-1}findLastSectionBeforeIndex(e,t){for(var o=e.length-1;o>=0;o--)if(e[o]<=t)return o;return-1}generateSections(){var{startIndex:e=0,items:t=[],collection:o,placeSection:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,{count:i}=o,{sectionKeys:a,doneLoadingPages:s,sectionIndexes:c,isFirstPageGenerated:l}=this.state,m=!l,d=e+t.length-1,p=this.findFirstSectionAfterIndex(c,e),u=this.findLastSectionBeforeIndex(c,d),h=[];-1!==p&&-1!==u&&(h=c.splice(p,u-p+1));for(var g=0;g<h.length;g++)delete a[h[g]];for(var v=0;v<t.length;v++){var y=t[v],f=void 0,b=void 0;0===v&&e>0?b=o.atIndex(e-1):v>0&&(b=t[v-1]),v===t.length-1&&e+v<i-1?f=o.atIndex(e+v+1):v<t.length-1&&(f=t[v+1]);var P=r(y,f,b);P&&(a[e+v]=P,-1===h.indexOf(e+v)&&(m=!0),c.push(e+v))}c.sort(((e,t)=>e-t));var k=s;!k&&e+t.length+1>=i&&(k=!0,m=!0),m?this.setState({doneLoadingPages:k,sectionIndexes:c,sectionKeys:a},(()=>{this._unMounted||(this._rowLoadedCache=[],l?this.debouncedUpdatePages(n):this.updatePages(n))})):n&&n()}get rowCount(){var{before:e=[],after:t=[],pageSize:o,collection:r}=this.props,{count:n}=r,{pages:i}=this.state,a=i.length+e.length+t.length,s=i[i.length-1];return void 0===n?this._lastRowCount?this._lastRowCount:void 0:(s?s<n-1&&(a+=Math.floor((n-s-1)/o)):a+=Math.ceil(n/o)-i.length,this._lastRowCount=a,a)}isSectionComplete(e){var{sectionIndexes:t,doneLoadingPages:o}=this.state,r=t.indexOf(e);return-1!==r&&(r<t.length-1||o)}sectionCount(e){var{collection:t}=this.props,{sectionIndexes:o}=this.state,{count:r}=t,n=o.indexOf(e);if(-1===n||!r)return 0;var i=o[n],a=o[n+1];return a?a-i:r-i}loadContent(e,t,o){var r=this,{collection:n}=o,{count:i}=n,a=e,s=t;return 0!==e&&(a-=1),i&&t<i-1&&(s+=1),new Promise(((i,c)=>{i(),n.getByIndexRange(a,s).done((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a!==e&&n.shift(),s!==t&&n.pop(),r.generateSections(_objectSpread({startIndex:e,items:n},o))})).fail(c)}))}loadMoreRows(e){return this.loadMoreRowsWithProps(e,this.props)}loadMoreRowsWithProps(e,t){var{startIndex:o,stopIndex:r}=e,{before:i=[],after:s=[]}=t,{rowCount:c}=this,l=c-i.length-s.length,m=o,d=r;if(i.length&&(m=Math.max(o-i.length,0),d=Math.max(r-i.length,0)),s.length){var p=l-1;m=Math.min(m,p),d=Math.min(d,p)}var u=this.getPage(m),h=this.getPage(d);if(void 0===u||void 0===h)return new Promise(((e,t)=>a()(t))).catch(n());for(var g=u.start,v=h.end,y=o;y<=r;y++)this._rowLoadedCache[y]=!0;return this.loadContent(g,v,t)}renderRow(e){var t,o,r,n,i,{index:a,key:s,style:c,parent:l}=e,m=this.props,{collection:d,useGridLayout:p,before:u=[],renderSection:h,reverseScroll:y,count:f,children:b}=m,A=_objectWithoutProperties(m,k),{sectionKeys:_,cmCache:S}=this.state,w=a-u.length,E=this.isBeforeOrAfter(a),C=this.getBeforeAfter(a);if(!E){var M=this.getPage(w);if(!M)return null;var L=void 0===M.sectionIndex?void 0:_[M.sectionIndex],T=this.isSectionComplete(M.sectionIndex);i=this.sectionCount(M.sectionIndex),r=M.start,n=M.end,o=M.last,t=M.first,!M.unsectioned&&h&&(y&&M.last||!y&&M.first)&&(C=h({key:L,isComplete:T,count:i,startIndex:M.sectionIndex,endIndex:M.sectionIndex+i-1}))}return g.createElement(v.dl,{cache:S,parent:l,columnIndex:0,key:s,rowIndex:a},(e=>{var{measure:i}=e;return g.createElement(P.A,_extends({},A,{count:f,firstInSection:t,lastInSection:o,first:0===r,last:n===f-1,collection:d,style:c,grid:p,startIndex:r,endIndex:n,reverse:y,renderItems:b,measure:i,onSelectShiftClick:l.props.onSelectShiftClick,height:c.height,width:l.props.width,isDataReloading:this._pendingDataReload}),C)}))}}_defineProperty(InfiniteGrouper,"propTypes",_objectSpread(_objectSpread({},b.GV.propTypes),{},{currentSort:h().string,placeSection:h().func.isRequired,renderSection:h().func.isRequired}));const A=(0,f.A)((0,y.A)(InfiniteGrouper))},76313:(e,t,o)=>{o.d(t,{A:()=>u});var r=o(2404),n=o.n(r),i=o(96540),a=o(5556),s=o.n(a),c=o(32485),l=o.n(c),m=o(51158),d=["renderItems"],p=["renderItems"];function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class InfiniteLoaderRow extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{models:[]})}UNSAFE_componentWillMount(){this.setModels()}componentDidMount(){this.checkHeight()}shouldComponentUpdate(e,t){var o=this.props,{renderItems:r}=o,i=_objectWithoutProperties(o,d),{renderItems:a}=e,s=_objectWithoutProperties(e,p);return!e.isDataReloading&&(!n()(i,s)||!n()(this.state,t))}componentDidUpdate(e){var{startIndex:t,endIndex:o,uid:r,count:n,isDataReloading:i}=this.props;t===e.startIndex&&o===e.endIndex&&r===e.uid&&n===e.count&&i===e.isDataReloading||this.setModels(),this.checkHeight()}componentWillUnmount(){this._unMounted=!0,this.abortRequest()}setModels(){var{collection:e,startIndex:t,endIndex:o,reverse:r}=this.props,{models:n}=this.state,i=!1;if("number"==typeof o&&"number"==typeof t&&o-t+1){if(n.length)i=!0;else{n=e.getByIndexRange(t,o,{synchronous:!0})||[],r&&n.reverse(),this.setState({models:n});for(var a=0;a<n.length;a++)if(!n[a]){i=!0;break}}this.abortRequest(),i&&(this._loadingRequest=e.getByIndexRange(t,o).done((e=>{this._unMounted||(r&&e.reverse(),delete this._loadingRequest,this.setState({models:e}))})))}else this.setState({models:[]})}checkHeight(){var{height:e,measure:t}=this.props;"number"==typeof e&&e!==this.el.clientHeight&&t()}abortRequest(){this._loadingRequest&&this._loadingRequest.abort&&this._loadingRequest.abort()}render(){var{renderItems:e,children:t,width:o,height:r,onSelectShiftClick:n,style:a={},className:s,grid:c,first:m,last:d,firstInSection:p,lastInSection:u,startIndex:h,endIndex:g,measure:v}=this.props,{models:y=[]}=this.state;return i.createElement("div",{ref:e=>{this.el=e},style:_objectSpread(_objectSpread({},a),{},{height:"auto"}),className:l()("infinite-loader-row",s,{grid:c,first:m,last:d})},t&&i.createElement("div",{className:"row-content"},t),y.length>0&&e({models:y,width:o,height:r,startIndex:h,endIndex:g,onSelectShiftClick:n,isFirst:m,isLast:d,firstInSection:p,lastInSection:u,onComponentHeightChange:v}))}}_defineProperty(InfiniteLoaderRow,"propTypes",{renderItems:s().func.isRequired,children:s().node,width:s().number.isRequired,height:s().oneOfType([s().number,s().oneOf(["auto"])]).isRequired,startIndex:s().number,endIndex:s().number,collection:s().instanceOf(m.A).isRequired,uid:s().string.isRequired,count:s().number,reverse:s().bool,onSelectShiftClick:s().func.isRequired,style:s().shape({top:s().number.isRequired}).isRequired,grid:s().bool,first:s().bool,last:s().bool,firstInSection:s().bool,lastInSection:s().bool,measure:s().func.isRequired,isDataReloading:s().bool});const u=InfiniteLoaderRow},46600:(e,t,o)=>{o.d(t,{Ay:()=>b,GV:()=>CollectionInfiniteLoader});var r=o(74692),n=o.n(r),i=o(96540),a=o(5556),s=o.n(a),c=o(32485),l=o.n(c),m=o(73509),d=o(35994),p=o(51158),u=o(42852),h=o(81774),g=o(76313),v=["collection","pageSize","count","useGridLayout","before","reverseScroll","children"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var y=new m.jS({fixedHeight:!1,fixedWidth:!0}).defaultHeight,f="infinite-loader-list";class CollectionInfiniteLoader extends i.Component{constructor(){super(...arguments),_defineProperty(this,"state",{allowOverscan:!1,scrollToIndex:void 0,cmCache:new m.jS({fixedWidth:!0,fixedHeight:!1,defaultHeight:400})}),_defineProperty(this,"scrollToNodeIndex",(e=>{var{before:t=[],pageSize:o}=this.props,r=Math.floor(e/o);r+=t.length,this.setState({scrollToIndex:r})})),_defineProperty(this,"resetScrollToIndex",((e,t)=>{var{scrollToIndex:o}=this.state;void 0!==o&&o>=e&&o<=t&&this.setState({scrollToIndex:void 0})})),_defineProperty(this,"_onWheel",(e=>this.onWheel(e))),_defineProperty(this,"_isRowLoaded",(e=>this.isRowLoaded(e))),_defineProperty(this,"_loadMoreRows",(e=>this.loadMoreRows(e))),_defineProperty(this,"_renderRow",(e=>this.renderRow(e)));var{collection:e,registerCollection:t,internalRef:o}=this.props;e.getPage(0),e&&t&&d.A.emit("listCollectionInitialized",e),o&&o(this)}componentDidMount(){n()(this.el).on("wheel",".".concat(f),this._onWheel),this.allowOverscanTimeout=setTimeout((()=>{var{cmCache:e}=this.state;e._defaultHeight=y,this.setState({allowOverscan:!0})}),2e3)}UNSAFE_componentWillReceiveProps(e){var{count:t}=this.props;t&&!e.count&&(this._pendingDataReload=!0,e.collection.getPage(0).done((()=>{this._pendingDataReload=!1})))}componentDidUpdate(){this.windowScroller&&this.windowScroller.updatePosition()}componentWillUnmount(){n()(this.el).off("wheel",this._onWheel),this._unMounted=!0,clearTimeout(this.allowOverscanTimeout)}onWheel(e){var{reverseScroll:t,useWindowScroll:o}=this.props;if(t&&!o){e.preventDefault(),e.stopPropagation();var{deltaY:r}=e.originalEvent,{currentTarget:n}=e;n.scrollTop-=r}}onRowsRendered(e){var{startIndex:t,stopIndex:o}=e,{onRowsRendered:r,pageSize:n,before:i=[],after:a=[],count:s}=this.props,{rowCount:c}=this;if(this.resetScrollToIndex(t,o),c&&r){var l=c-i.length-a.length-1,m=Math.min(Math.max(t-i.length,0),l),d=Math.max(Math.min(l,o-i.length),0);r(m*n,Math.min(d*n+n-1,s-1))}}get rowCount(){var{count:e,before:t,after:o,pageSize:r}=this.props;if(void 0===e)return this._lastRowCount?this._lastRowCount:t||o?(t||[]).length+(o||[]).length:void 0;var n=Math.ceil(e/r);return t&&(n+=t.length),o&&(n+=o.length),this._lastRowCount=n,n}getBeforeAfter(e){if(!this.isBeforeOrAfter(e))return null;var t,{before:o=[],after:r=[]}=this.props,{rowCount:n}=this;e<o.length?t=o[e]:t=r[e-(n-1-r.length)-1];return t}loadMoreRows(){return new Promise((e=>e()))}isBeforeOrAfter(e){var{before:t,after:o}=this.props,{rowCount:r}=this;return Boolean(t&&e<t.length||o&&e>r-1-o.length)}isRowLoaded(){return!0}renderRow(e){var t,o,{index:r,key:n,style:a,parent:s}=e,c=this.props,{collection:l,pageSize:d,count:p,useGridLayout:u,before:h,reverseScroll:y,children:f}=c,b=_objectWithoutProperties(c,v),{cmCache:P}=this.state,k=this.isBeforeOrAfter(r),A=this.getBeforeAfter(r),_=r;return k||(h&&(_-=h.length),t=_*d,o=Math.min(t+d-1,p?p-1:0)),i.createElement(m.dl,{cache:P,parent:s,columnIndex:0,key:n,rowIndex:r},(e=>{var{measure:r}=e;return i.createElement(g.A,_extends({},b,{collection:l,count:p,style:a,grid:u,startIndex:t,endIndex:o,reverse:y,renderItems:f,measure:r,onSelectShiftClick:s.props.onSelectShiftClick,height:a.height,width:s.props.width,first:0===t,last:o===p-1}),A)}))}render(){var e,t=this,{count:o,pageSize:r,overscanRowCount:n,className:a,emptyState:s,useWindowScroll:c,onSelectShiftClick:d,reverseScroll:p}=this.props,{cmCache:u,scrollToIndex:h,allowOverscan:g}=this.state,v=r,{rowCount:y}=this;return y||(e=!0),s&&0===o?s:i.createElement("div",{className:l()("infinite-loader",a,{reverse:p}),ref:e=>{this.el=e}},!e&&i.createElement(m.wK,{isRowLoaded:this._isRowLoaded,loadMoreRows:this._loadMoreRows,rowCount:y,minimumBatchSize:v},(e=>{var{onRowsRendered:o,registerChild:r}=e,a={className:l()(f,{"use-window":c}),rowCount:y,scrollToIndex:h,rowRenderer:this._renderRow,deferredMeasurementCache:u,rowHeight:u.rowHeight,overscanRowCount:g?n:0,ref:e=>{r(e),this.grid=e},onRowsRendered:function onRowsRendered(){o(...arguments),t.onRowsRendered(...arguments)},onSelectShiftClick:d};return c?i.createElement(m.PG,{scrollingResetTimeInterval:100,ref:e=>{this.windowScroller=e}},(e=>{var{height:t,scrollTop:o,onChildScroll:r}=e;return i.createElement(m.t$,{disableHeight:!0},(e=>{var{width:n}=e;return i.createElement(m.B8,_extends({},a,{autoHeight:!0,width:n,height:t,scrollTop:h?void 0:o,scrollToAlignment:"start",onScroll:r}))}))})):i.createElement(m.t$,null,(e=>{var{width:t,height:o}=e;return i.createElement(m.B8,_extends({},a,{width:t,height:o,scrollingResetTimeInterval:100}))}))})))}}_defineProperty(CollectionInfiniteLoader,"propTypes",{count:s().number,collection:s().instanceOf(p.A).isRequired,useGridLayout:s().bool,pageSize:s().number,overscanRowCount:s().number,before:s().arrayOf(s().node),after:s().arrayOf(s().node),emptyState:s().node,useWindowScroll:s().bool,onSelectShiftClick:s().func.isRequired,registerCollection:s().bool,reverseScroll:s().bool,internalRef:s().func,onRowsRendered:s().func,children:s().func.isRequired}),_defineProperty(CollectionInfiniteLoader,"defaultProps",{useWindowScroll:!1,pageSize:60,overscanRowCount:1,registerCollection:!1,useGridLayout:!1});const b=(0,h.A)((0,u.A)(CollectionInfiniteLoader))},33004:(e,t,o)=>{o.d(t,{A:()=>u});var r=o(96540),n=o(43840),i=o(14697),a=o(5556),s=o.n(a),c=o(73509),l=o(32485),m=o.n(l),d=o(21572),p=o(55123);class LocationPreview extends r.Component{renderDisplayName(){var{model:e,showFullName:t}=this.props;if(!e)return"";var{city:o,state:n,country:i,name:a}=e;if(t){var s=n?"".concat(n,", ").concat(i):i;return r.createElement("div",null,r.createElement("p",{className:"name",title:o},o),r.createElement("p",{title:s},s))}return r.createElement("p",{className:"name",title:a},a)}render(){var{model:e,href:t,className:o}=this.props,a=(0,d.A)("amazon-photos-photo-counter",e.count,e.count),s=t?n.A:"div";return r.createElement("div",{"data-id":e&&e.id,className:m()("location-preview",o)},r.createElement(s,{href:t,name:"location-item-link",className:"preview-container"},r.createElement(c.t$,null,(t=>{var{width:o,height:n}=t;if(0===o)return null;var a="https://images-na.ssl-images-amazon.com/images/S/amazon-avatars/no-photo.gif";return e&&(a=e.getFormattedPreviewUrl({width:o,height:n,fit:"clip"})||a),r.createElement(i.A,{className:"preview-image",src:a,transition:!0})}))),r.createElement("div",{className:"description"},this.renderDisplayName(e),r.createElement("p",{className:"count"},a)))}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(LocationPreview,"propTypes",{model:s().instanceOf(p.A),showFullName:s().bool,href:s().string,className:s().string});const u=LocationPreview},50287:(e,t,o)=>{o.d(t,{X:()=>StapStatusToasts});var r=o(1683),n=o(71086),i=o(35994),a=o(96540),s=o(95871),c=o(94621),l=o(21572),m=o(84503),d=o(97463),p=o(21327),u=o(77506),h=o(23152),g=o(52105),v=o(4995);const y="stap-status-toast-content-module__stapToast__GJl1y",f="stap-status-toast-content-module__inProgressSpinner__Pb6H3",b="stap-status-toast-content-module__primaryCtaButton__etdCj",P="stap-status-toast-content-module__dismissButton__o8TgG";function asyncGeneratorStep(e,t,o,r,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void o(e)}s.done?t(c):Promise.resolve(c).then(r,n)}var StapStatusCompleted=e=>{var{onCloseToast:t}=e,o=(0,s.GV)(h.rT),r=null==o?void 0:o.savedNodesList,n=null==o?void 0:o.successfulNodes,delay=e=>new Promise((t=>setTimeout(t,e)));if(!o||!n)return null;var c=function(){var e=function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){if(r){t();for(var e=new Set(r),n=(null==o?void 0:o.pageNumber)||1,s=(null==o?void 0:o.totalPages)||1,c=s-n,l=Math.ceil(c/10),m=0;m<l;m++){m>0&&(yield delay(1e3));for(var h=n+10*m+1,y=Math.min(h+10-1,s),f=[],b=h;b<=y;b++)f.push(v.A.getCloneCollectionJob(o.jobId,b));(yield Promise.allSettled(f)).forEach((t=>{"fulfilled"===t.status&&t.value.savedNodesList&&t.value.savedNodesList.forEach((t=>e.add(t)))}))}var P=d.A.getProperty("customerId"),k=new p.A([...e].map((e=>new u.A({id:e,ownerId:P}))));i.A.emit("openDialog",{component:a.createElement(g.A,{selection:k}),id:"stap-uploader-add-to-album-dialog"})}}));return function onAddToAlbumClick(){return e.apply(this,arguments)}}();return a.createElement(a.Fragment,null,a.createElement(m.A,{className:P,name:"dismiss-button",label:(0,l.A)("amazon-photos-stap-status-toast-dismiss-button-label"),onClick:t}),(0,l.A)("amazon-photos-stap-status-toast-success",n,n),a.createElement(m.A,{className:b,name:"primary-cta-button",label:(0,l.A)("amazon-photos-stap-status-toast-album-cta-label"),onClick:c},(0,l.A)("amazon-photos-stap-status-toast-album-cta")))},k=o(21203),StapStatusDuplicates=e=>{var t,o,{onCloseToast:r}=e,n=(0,s.GV)(h.rT),i=null!==(t=null==n||null===(o=n.failedNodes)||void 0===o?void 0:o[k.Jk.DUPLICATE])&&void 0!==t?t:0;return a.createElement(a.Fragment,null,a.createElement(m.A,{className:P,name:"dismiss-button",label:(0,l.A)("amazon-photos-stap-status-toast-dismiss-button-label"),onClick:r}),(0,l.A)("amazon-photos-stap-status-toast-duplicates",i,i))},StapStatusError=e=>{var{onCloseToast:t}=e;return a.createElement(a.Fragment,null,a.createElement(m.A,{className:P,name:"dismiss-button",label:(0,l.A)("amazon-photos-stap-status-toast-dismiss-button-label"),onClick:t}),(0,l.A)("amazon-photos-stap-status-toast-error"))},A=o(94788),StapStatusInProgress=()=>{var e=(0,s.GV)(h.rT),t=null!=e&&e.totalNodes?a.createElement(A.A,{replace:e.totalNodes},"amazon-photos-stap-status-toast-in-progress-with-items"):a.createElement(A.A,null,"amazon-photos-stap-status-toast-in-progress");return a.createElement(a.Fragment,null,a.createElement("div",{className:f}),t)},_=o(43840),S=o(18742),StapStatusOverquota=e=>{var{onCloseToast:t}=e;return a.createElement(a.Fragment,null,a.createElement(m.A,{className:P,name:"dismiss-button",label:(0,l.A)("amazon-photos-stap-status-toast-dismiss-button-label"),onClick:t}),(0,l.A)("amazon-photos-stap-status-toast-overquota"),a.createElement(_.A,{name:"manage-storage",href:S.A.getProperty("urls.storage"),onClick:t},(0,l.A)("amazon-photos-stap-status-toast-overquota-cta")))},StapStatusUnshared=e=>{var{onCloseToast:t}=e;return a.createElement(a.Fragment,null,a.createElement(m.A,{className:P,name:"dismiss-button",label:(0,l.A)("amazon-photos-stap-status-toast-dismiss-button-label"),onClick:t}),(0,l.A)("amazon-photos-stap-status-toast-unshared"))},StapStatusToastContent=e=>{var{toastType:t,onCloseToast:o,onCloseClick:r}=e,onClose=()=>{null==r||r(),o()};switch(t){case c.Ck.InProgress:return a.createElement(StapStatusInProgress,null);case c.Ck.Saved:return a.createElement(StapStatusCompleted,{onCloseToast:onClose});case c.Ck.Duplicates:return a.createElement(StapStatusDuplicates,{onCloseToast:onClose});case c.Ck.Overquota:return a.createElement(StapStatusOverquota,{onCloseToast:onClose});case c.Ck.Cancelled:return a.createElement(StapStatusError,{onCloseToast:onClose});case c.Ck.Unshared:return a.createElement(StapStatusUnshared,{onCloseToast:onClose});case c.Ck.Error:default:return a.createElement(StapStatusError,{onCloseToast:onClose})}},{selectToastQueue:w}=c.Me.selectors,{closeToast:E}=c.Me.actions;function areQueueItemsTheSame(e,t){return(null==e?void 0:e.job)===(null==t?void 0:t.job)&&(null==e?void 0:e.toast)===(null==t?void 0:t.toast)}var StapStatusToasts=()=>{var e=(0,s.jL)(),t=(0,s.GV)(w),o=(0,a.useRef)(t);return(0,a.useEffect)((()=>{var[s]=t,[l]=o.current;if(!areQueueItemsTheSame(s,l)){var m=o.current.findIndex((e=>areQueueItemsTheSame(e,s))),d=m>=0?m:o.current.length;o.current.slice(0,d).forEach((e=>{i.A.emit("showToast",{id:(0,c.VO)(e),close:!0})})),o.current=t,s&&(!function recordToastShownBusinessMetric(e){var t={[c.Ck.Saved]:"CloneToastDisplayed",[c.Ck.InProgress]:null,[c.Ck.Duplicates]:"CloneToastError",[c.Ck.Overquota]:"CloneToastError",[c.Ck.Unshared]:"CloneToastError",[c.Ck.Error]:"CloneToastError",[c.Ck.Cancelled]:null},o={[c.Ck.Saved]:"Success",[c.Ck.InProgress]:null,[c.Ck.Duplicates]:"Duplicates",[c.Ck.Overquota]:"Overquota",[c.Ck.Unshared]:"NoShare",[c.Ck.Error]:"Generic",[c.Ck.Cancelled]:null},i=t[e],a=o[e];if(!i||!a)return;r.A.log(i,{eventTag:a},n.A.getPageContext())}(s.toast),i.A.emit("showToast",{className:y,closeable:!0,fullReplace:a.createElement(StapStatusToastContent,{onCloseToast:()=>{setTimeout((()=>{e(E(s))}),333)},toastType:s.toast}),id:(0,c.VO)(s),name:"stap-status",stay:!0,tall:!0}))}}),[t]),null}},68286:(e,t,o)=>{o.d(t,{A:()=>AutoAddToFamilyArchive});var r=o(38221),n=o.n(r),i=o(96540),a=o(35994),s=o(94788),c=o(84503),l=o(97463),m=o(32485),d=o.n(m),p=o(40874),u=o(86779),h=o(13575),g=o(21533),v=o(28403);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var y="settings-family-vault",f=1e3,b="PENDING";class AutoAddToFamilyArchive extends i.Component{constructor(){super(...arguments),_defineProperty(this,"onAutoAddToFamilyArchiveChange",n()((()=>{var{autoAddContentToFamilyArchive:e}=this.state;e?a.A.emit("autoAddToFamilyArchive",!1):a.A.emit("openDialog",{component:p.A})}),f,{leading:!0})),_defineProperty(this,"onBulkAddButtonClick",n()((()=>{a.A.emit("openDialog",{component:u.A})}),f,{leading:!0})),_defineProperty(this,"onBulkRemoveButtonClick",n()((()=>{a.A.emit("openDialog",{component:h.A})}),f,{leading:!0}))}UNSAFE_componentWillMount(){a.A.emit("getAccountPreferences"),a.A.emit("updateAccountStatus"),a.A.emit("updateFamilyMediaStatus"),a.A.emit("checkBulkAddJobStatus"),a.A.emit("checkBulkRemoveJobStatus"),l.A.pickComponentState(this,["numMedia","numFamilyMedia","autoAddContentToFamilyArchive","bulkAddToFamilyArchiveStatus","bulkRemoveFromFamilyArchiveStatus"])}componentWillUnmount(){l.A.endComponentState(this),a.A.emit("clearBulkAddJobStatusInterval"),a.A.emit("clearBulkRemoveJobStatusInterval")}renderBulkRemoveSection(){var e,{numFamilyMedia:t}=this.state;return e=t?i.createElement("div",null,i.createElement("div",null,i.createElement(s.A,{replace:[t],count:t},"amazon-photos-settings-bulk-remove-count")),i.createElement("div",null,i.createElement(s.A,null,"amazon-photos-settings-bulk-remove-something"))):i.createElement("p",null,i.createElement(s.A,null,"amazon-photos-settings-bulk-remove-nothing")),i.createElement("div",null,i.createElement(c.A,{disabled:!t,name:"bulk-remove-from-family",className:"button bulk-remove-from-family",onClick:this.onBulkRemoveButtonClick},i.createElement(s.A,null,"amazon-photos-settings-bulk-remove-button-title")),e)}renderJobProgress(){var e,{bulkAddToFamilyArchiveStatus:t,bulkRemoveFromFamilyArchiveStatus:o}=this.state,r=t===b;if(r||o===b)return e=r?i.createElement(s.A,null,"amazon-photos-settings-add-operation-msg"):i.createElement(s.A,null,"amazon-photos-settings-remove-operation-msg"),i.createElement("div",{className:"operation-in-progress"},i.createElement("div",{className:"alert"},i.createElement("div",{className:"message"},i.createElement("span",{className:"icon icon-spinner"}),e)))}renderBulkAddSection(){var e,{numMedia:t,numFamilyMedia:o}=this.state,r=t-o;return e=r?i.createElement("div",null,i.createElement("div",null,i.createElement(s.A,{replace:[r],count:r},"amazon-photos-settings-bulk-add-count"))):i.createElement("p",null,i.createElement(s.A,null,"amazon-photos-settings-bulk-add-nothing")),i.createElement("div",null,i.createElement(c.A,{disabled:!r,name:"bulk-add-to-family",className:"button bulk-add-to-family",onClick:this.onBulkAddButtonClick},i.createElement(s.A,null,"amazon-photos-settings-bulk-add-button-title")),e)}renderAutoAddSection(){var{autoAddContentToFamilyArchive:e}=this.state,t=e?"amazon-photos-settings-personal-pattern-on":"amazon-photos-settings-personal-pattern-off";return i.createElement("div",null,i.createElement(v.A,{title:i.createElement(s.A,null,"amazon-photos-settings-auto-add-title"),content:i.createElement(s.A,null,"amazon-photos-settings-auto-add-content")}),i.createElement("div",{className:"settings-interactive"},i.createElement("div",{className:y},i.createElement(g.A,{name:"autoAddToFamilyArchive",checked:e,onChange:this.onAutoAddToFamilyArchiveChange,metricOverrides:{eventName:["","AutoAddDisabled"],eventTag:["","AddAll"]}},i.createElement(s.A,null,t)),i.createElement("p",null,i.createElement(s.A,null,"amazon-photos-settings-auto-add-toggle")))))}render(){var e=this.renderJobProgress(),t=this.renderAutoAddSection(),o=this.renderBulkAddSection(),r=this.renderBulkRemoveSection();return i.createElement("section",{className:d()("settings-section",y)},e,t,i.createElement("div",{id:"bulkAdd",className:"bulk-add-remove-wrapper"},i.createElement(v.A,{title:i.createElement(s.A,null,"amazon-photos-settings-manage-vault-title"),content:i.createElement(s.A,null,"amazon-photos-settings-manage-vault-content")}),i.createElement("div",{className:"settings-interactive"},i.createElement("div",{className:y},o,r))))}}},8316:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(96540),n=o(35994),i=o(94788),a=o(21572),s=o(21533),c=o(28403);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ContactBook extends r.Component{constructor(){super(...arguments),_defineProperty(this,"state",{toggleStatus:void 0}),_defineProperty(this,"onChange",(()=>{var{toggleStatus:e}=this.state,t={preferences:{contacts:{ALEXA:e?"NO_SYNC":"SYNC"}}};this.setState({toggleStatus:!e}),n.A.emit("updateProfile",t)}))}componentDidMount(){var{isAlexaSyncOn:e}=this.props;this.setState({toggleStatus:e})}render(){var{toggleStatus:e}=this.state;return r.createElement("section",{className:"contact-book settings-section"},r.createElement(c.A,{title:(0,a.A)("amazon-photos-sharing-alexa-contact-book-heading"),content:(0,a.A)("amazon-photos-sharing-alexa-contact-book-description")}),r.createElement(s.A,{name:"enableRecognition",checked:e,onChange:this.onChange},r.createElement(i.A,null,e?"amazon-photos-on":"amazon-photos-off")))}}const l=ContactBook},71730:(e,t,o)=>{o.d(t,{A:()=>w});var r=o(96540),n=o(32485),i=o.n(n),a=o(35994),s=o(84503),c=o(97463),l=o(94788),m=o(25205),d=o(55378),p=o.n(d),u=o(87612),h=o.n(u),g=o(21572),v=o(77506),y=o(80066),f=o(88871),b=o(72879),P=o(85723);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var k={ADMIN:(0,g.A)("amazon-photos-archive-owner")};class FamilyArchiveMembers extends r.Component{constructor(){super(...arguments),_defineProperty(this,"onRemoveSelfClick",((e,t)=>{a.A.emit("openDialog",{component:b.A,props:{name:t.member.name,customerId:t.member.customerId}})})),_defineProperty(this,"onAdminLeaveFamilyClick",((e,t)=>{var{members:o}=this.props,r=h()(o,(e=>"MEMBER"===e.role));a.A.emit("openDialog",{component:P.A,props:{members:r,customerId:t.member.customerId}})})),_defineProperty(this,"onAdminRemoveMemberClick",((e,t)=>{a.A.emit("openDialog",{component:y.A,props:{name:t.member.name,customerId:t.member.customerId}})}))}render(){var{members:e,adminId:t,customerId:o}=this.props,n=o===t;return r.createElement("ul",{className:"family-archive-members"},p()(e,((e,i,a)=>{var c,{customerId:l,name:m,avatarNodeId:d,role:p}=e,u=k[p];a.length>1&&(n&&t===l?c={name:"leave-family",member:e,onClick:this.onAdminLeaveFamilyClick,title:(0,g.A)("amazon-photos-leave-family")}:n?c={name:"remove-family-member",member:e,onClick:this.onAdminRemoveMemberClick,title:(0,g.A)("amazon-photos-remove-member")}:l===o&&(c={name:"remove-self-from-family",member:e,onClick:this.onRemoveSelfClick,title:(0,g.A)("amazon-photos-leave-family")}));var h=d?new v.A({id:d,ownerId:l}):void 0;return r.createElement("li",{key:l,className:"family-member"},r.createElement(f.A,{customerId:l,node:h}),m,r.createElement("span",{className:"member-status"},u),c&&r.createElement(s.A,_extends({},c,{className:"remove-family"})))})))}}const A=FamilyArchiveMembers;var _=o(74474),S=o(28403);function family_members_defineProperty(e,t,o){return(t=function family_members_toPropertyKey(e){var t=function family_members_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class FamilyMembers extends r.Component{constructor(){super(...arguments),family_members_defineProperty(this,"onInviteClick",(()=>{a.A.emit("openDialog",r.createElement(_.A,null))}))}UNSAFE_componentWillMount(){a.A.emit("checkCanInvite")}render(){var e,t,{members:o,adminId:n,canInvite:a}=this.props,m=o?o.length:0,d=c.A.getProperty("customerId"),p=d===n?"amazon-photos-family-members-admin-text":"amazon-photos-family-members-invitee-text";return m>0?(e=r.createElement(A,{members:o,adminId:n,familyId:n,customerId:d}),a&&(t=r.createElement(s.A,{name:"invite",className:"button invite-button",onClick:this.onInviteClick,metricOverrides:{eventName:"FamilyPhotoInviteClicked",eventTag:"Settings"}},r.createElement(l.A,null,"amazon-photos-invite-button")))):e=r.createElement(l.A,null,"amazon-photos-not-a-member"),r.createElement("section",{className:i()("settings-section","settings-family-members")},r.createElement(S.A,null,r.createElement("h4",null,r.createElement(l.A,null,"amazon-photos-family-members-heading")),r.createElement("p",null,r.createElement(l.A,{replace:[5]},p))),r.createElement("div",{className:"settings-interactive"},e,t))}}const w=a.A.connect(FamilyMembers,{store:m.A})},42437:(e,t,o)=>{o.d(t,{A:()=>y});var r=o(96540),n=o(35994),i=o(97463),a=o(32485),s=o.n(a),c=o(94788),l=o(21572),m=o(25205),d=o(62216),p=o.n(d),u=o(84503);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var h=/^[^.\\\u202E]{1,100}$/i;class FamilyArchiveName extends r.Component{constructor(e){super(e),_defineProperty(this,"onEscape",(()=>{var{archiveName:e}=this.props;document.activeElement===this.familyName&&this.setState({familyName:e})})),_defineProperty(this,"onFormChange",(e=>{this.setState({familyName:e.currentTarget.value})})),_defineProperty(this,"onButtonClick",(()=>{var e=this.familyName.value.trim();n.A.emit("setFamilyName",{name:e})}));var{archiveName:t}=e;this.state={familyName:t}}UNSAFE_componentWillMount(){n.A.listen("escape",this.onEscape)}UNSAFE_componentWillReceiveProps(e){var{archiveName:t}=this.props;e.archiveName!==t&&this.setState({familyName:e.archiveName})}componentWillUnmount(){n.A.unListen("escape",this.onEscape)}render(){var e,{archiveName:t,customerId:o,adminId:n}=this.props,{familyName:i}=this.state,a=!p()(i)&&i.trim().length>0&&h.test(i);return n&&(e=n===o),r.createElement("form",{id:"family-name-form"},r.createElement("input",{type:"text",className:s()({invalid:!a}),placeholder:t,maxLength:100,ref:e=>{this.familyName=e},value:i,disabled:!e,onChange:this.onFormChange}),r.createElement(u.A,{disabled:!e||!a||i===t,name:"rename-family",className:"button form-button",onClick:this.onButtonClick},r.createElement(c.A,null,"amazon-photos-change-button")))}}const g=n.A.connect(FamilyArchiveName,{store:m.A,mapToProps:["adminId"]});var v=o(28403);class FamilyName extends r.Component{render(){var{adminId:e,familyName:t}=this.props;return!(!e||e!==i.A.getProperty("customerId"))&&(t=t||(0,l.A)("amazon-photos-default-family-name"),r.createElement("section",{className:s()("settings-section","settings-family-name")},r.createElement(v.A,null,r.createElement("h4",null,r.createElement(c.A,null,"amazon-photos-archive-name-title")),r.createElement("p",null,r.createElement(c.A,null,"amazon-photos-archive-name-text"))),r.createElement("div",{className:"settings-interactive"},r.createElement(g,{customerId:i.A.getProperty("customerId"),archiveName:t}))))}}const y=n.A.connect(FamilyName,{store:m.A,mapToProps:["adminId","familyName"]})},54303:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(96540),n=o(32485),i=o.n(n),a=o(21572),s=o(12910),c=o(28403);const __WEBPACK_DEFAULT_EXPORT__=()=>r.createElement("section",{className:i()("settings-section","image-recognition-settings-view")},r.createElement(c.A,{title:(0,a.A)("amazon-photos-image-recognition-settings-help-title")}),r.createElement("div",{className:"settings-interactive edit-image-recognition"},r.createElement(s.h,{showExternalLink:!1})))},12910:(e,t,o)=>{o.d(t,{h:()=>D});var r=o(62216),n=o.n(r),i=o(38221),a=o.n(i),s=o(96540),c=o(84503),l=o(35994),m=o(94788),d=o(21572),p=o(18742),u=o(97463),h=o(79050),g=o(1683),v=o(71086),y=o(13489),f=o(25205),b=o(21533),P=o(38374),k=o(5887),A=o(96734),_=o(5556),S=o.n(_),w=o(32485),E=o.n(w);const C={add:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add.svg"',"add-album":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20album.svg"',"add-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20image.svg"',"add-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add%20inline.svg"',alexa:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/alexa.svg"',albums:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/albums.svg"',"aspect-ratio":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/aspect%20ratio.svg"',back:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back.svg"',"blocked-contacts":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/blocked-contacts.svg"',"back-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back%20android.svg"',"broken-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/broken%20image.svg"',burst:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/burst.svg"',calendar:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/calendar.svg"',camera:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/camera.svg"',cancel:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel.svg"',"cancel-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel%20inline.svg"',"caret-down":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20down.svg"',"caret-left":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20left.svg"',"caret-right":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20right.svg"',"caret-up":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20up.svg"',"checkbox-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-on.svg"',"checkbox-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-off.svg"',"checkmark-circle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark_Hover.svg"',checkmark:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark.svg"',"cloud-upload":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cloud%20upload.svg"',contact:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact.svg"',"contact-inverted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg"',"contact-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20add.svg"',"contact-group":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20group.svg"',delete:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/delete.svg"',device:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/device.svg"',dislike:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/dislike.svg"',done:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done.svg"',"done-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done%20inline.svg"',download:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download.svg"',"download-cloud":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download-cloud.svg"',"down-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/down-arrow.svg"',"drive-logo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/drive-logo.svg"',dropdown:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown.svg"',"dropdown-active":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown%20active.svg"',edit:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit.svg"',"edit-text":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/edit%20text.svg"',email:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/email.svg"',error:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/error.svg"',"external-link":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/external-link.svg"',"face-tags":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit-tags.svg"',"family-storage":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/family-storage.svg"',"family-vault":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/family_vault.svg"',filter:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/filter.svg"',"fire-tv":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/fire%20tv.svg"',flag:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/flag.svg"',folder:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder.svg"',"folder-move":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder_move.svg"',"group-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/group-add.svg"',"heart-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20off.svg"',"heart-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20on.svg"',help:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/help.svg"',hide:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/hide.svg"',hyperlink:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/hyperlink.svg"',image:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image.svg"',"image-landscape":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image%20landscape.svg"',information:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/information.svg"',"jump-back":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/jump%20back.svg"',like:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/like.svg"',"live-photo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live%20photo.svg"',"live-photo-play":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-play.svg"',"live-photo-pause":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-pause.svg"',location:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/location.svg"',"magic-sparkle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/magic%20sparkle.svg"',menu:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/menu.svg"',magnify:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify.svg"',"magnify-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify-out.svg"',merge:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/merge.svg"',microphone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/microphone.svg"',more:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/more.svg"',music:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/music.svg"',"network-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20error.svg"',"network-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20off.svg"',"notification-bell":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/notification%20bell.svg"',overflow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/overflow.svg"',pause:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause.svg"',"pause-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause%20inline.svg"',phone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/phone.svg"',photos:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/photos.svg"',play:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play.svg"',"play-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play%20inline.svg"',"radio-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-off.svg"',"radio-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-on.svg"',remove:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove.svg"',"remove-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove%20inline.svg"',reply:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/reply.svg"',search:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/search.svg"',secure:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure.svg"',"secure-locked":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure%20locked.svg"',"send-message":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/send%20message.svg"',settings:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/settings.svg"',share:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share.svg"',"share-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share%20android.svg"',sharing:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing.svg"',"sharing-bubble":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing%20bubble.svg"',"shopping-cart":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/shopping%20cart.svg"',show:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/show.svg"',signout:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/signout.svg"',slideshow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/slideshow.svg"',"star-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20off.svg"',"star-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20on.svg"',"stop-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/stop%20inline.svg"',storage:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/storage.svg"',sync:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/sync.svg"',upload:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/upload.svg"',"up-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/up-arrow.svg"',video:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/video.svg"',volume:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume.svg"',"volume-muted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20muted.svg"',"volume-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20off.svg"',warning:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/warning.svg"',"wifi-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20error.svg"',"wifi-not-connected":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20not%20connected.svg"',"wifi-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20off.svg"',"zoom-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/zoom%20out.svg"',section:"image-recognition-setting-section-module__section__yKCxB",title:"image-recognition-setting-section-module__title__peeQf",contentColor:"image-recognition-setting-section-module__contentColor__WN49N",black:"image-recognition-setting-section-module__black__lwZDn",gray:"image-recognition-setting-section-module__gray__UkOfj"};var ImageRecognitionSettingSection=e=>{var t,o,{title:r,content:n,contentColor:i,children:a}=e;return r&&(t=s.createElement("p",{"data-testid":"title",className:C.title},r)),n&&(o=s.createElement("p",{"data-testid":"content",className:E()(C.contentColor,C[i])},n)),s.createElement("div",{className:C.section},t,o,a)};ImageRecognitionSettingSection.propTypes={title:S().string,content:S().string,contentColor:S().oneOf(["black","gray"]),children:S().object},ImageRecognitionSettingSection.defaultProps={contentColor:"black"};const M=ImageRecognitionSettingSection,L="image-recognition-settings-module__toggleError__w4_OK",T="image-recognition-settings-module__saveChangesButton__zkPnH",N="image-recognition-settings-module__imageRecognitionSettingsSection__oYjsu",O="image-recognition-settings-module__toggleSwitch__ZGBHm";function asyncGeneratorStep(e,t,o,r,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void o(e)}s.done?t(c):Promise.resolve(c).then(r,n)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var x="Ineligible",I="SingleToggle",R="DoubleToggle",j=function(e){return e[e.active=0]="active",e[e.disabled=1]="disabled",e[e.text=2]="text",e[e.hidden=3]="hidden",e}(j||{});class ImageRecognitionSettings extends s.Component{constructor(){super(...arguments),_defineProperty(this,"state",{photosToggleStatus:!1,peopleToggleStatus:!1,basicTaggingRestriction:void 0,peopleTaggingRestriction:void 0,permissionsPending:!0}),_defineProperty(this,"turningOffPhotoTaggingInNonPeopleTaggingRegionsProps",{title:"amazon-photos-turn-off-photo-tagging-title",header:"amazon-photos-turn-off-one-toggle-photo-tagging-header",subHeader:"amazon-photos-turn-off-confirm-checkboxes",checkboxes:["amazon-photos-turn-off-one-toggle-photo-tagging-checkbox-1","amazon-photos-turn-off-one-toggle-photo-tagging-checkbox-2","amazon-photos-turn-off-one-toggle-photo-tagging-checkbox-3"]}),_defineProperty(this,"turningOffPhotoTaggingInPeopleTaggingRegionsProps",{title:"amazon-photos-turn-off-photo-tagging-title",header:"amazon-photos-turn-off-photo-tagging-header",subHeader:"amazon-photos-turn-off-confirm-checkboxes",checkboxes:["amazon-photos-turn-off-photo-tagging-checkbox-1","amazon-photos-turn-off-photo-tagging-checkbox-2","amazon-photos-turn-off-photo-tagging-checkbox-3","amazon-photos-turn-off-photo-tagging-checkbox-4"]}),_defineProperty(this,"turningOffPeopleTaggingInPeopleTaggingRegionsProps",{title:"amazon-photos-turn-off-people-tagging-title",header:"amazon-photos-turn-off-people-tagging-header",subHeader:"amazon-photos-turn-off-confirm-checkboxes",checkboxes:["amazon-photos-turn-off-people-tagging-checkbox-1","amazon-photos-turn-off-people-tagging-checkbox-2","amazon-photos-turn-off-people-tagging-checkbox-3"]}),_defineProperty(this,"onTagPhotosChange",(()=>{var{photosToggleStatus:e,peopleToggleStatus:t}=this.state;this.setToggleState(!e,t&&!e)})),_defineProperty(this,"onTagPeopleChange",(()=>{var{photosToggleStatus:e,peopleToggleStatus:t}=this.state;this.setToggleState(e||!t,!t)})),_defineProperty(this,"onConfirmation",(()=>{var{photosToggleStatus:e,peopleToggleStatus:t}=this.state;l.A.emit("setImageRecognition",e,t)})),_defineProperty(this,"onSave",(()=>{var e,{isThingsRecognitionEnabled:t,isPeopleRecognitionEnabled:o}=this.props,{photosToggleStatus:r,peopleToggleStatus:n}=this.state,i=t&&!r;i||o&&!n?(e=i?this.isPeopleToggleVisible?this.turningOffPhotoTaggingInPeopleTaggingRegionsProps:this.turningOffPhotoTaggingInNonPeopleTaggingRegionsProps:this.turningOffPeopleTaggingInPeopleTaggingRegionsProps,l.A.emit("openDialog",{component:s.createElement(P.A,_extends({},e,{onConfirmButtonClick:this.onConfirmation}))})):l.A.emit("setImageRecognition",r,n)})),_defineProperty(this,"onSaveWithDebounce",a()(this.onSave,1e3,{leading:!0})),_defineProperty(this,"onTogglePhotoTaggingAndSave",(()=>{var{photosToggleStatus:e}=this.state;this.setState({photosToggleStatus:!e},this.onSaveWithDebounce)}))}componentDidMount(){var{isThingsRecognitionEnabled:e,isPeopleRecognitionEnabled:t}=this.props;this.setToggleState(e,t),this.initializeTogglePermissions()}componentDidUpdate(e){var{isThingsRecognitionEnabled:t,isPeopleRecognitionEnabled:o,recognitionSettingChangeStatus:r}=this.props,{recognitionSettingChangeStatus:n}=e;n!==r&&r===h.CE.error&&this.setToggleState(t,o)}getViewMode(){return this.isBasicToggleVisible?this.isPeopleToggleVisible?R:I:x}get isAdmin(){var{adminId:e,members:t,customerId:o}=this.props,r=e===o,i=n()(t)||t.length<=1;return r||i}get basicToggleState(){if(this.isAdmin){var e,{basicTaggingRestriction:t}=this.state;return!0===(null==t?void 0:t.allowed)?j.active:null!=t&&null!==(e=t.criteria)&&void 0!==e&&e.includes(A.d.TAGGING_CONFLICT)?j.disabled:j.hidden}var{recognitionAvailable:o}=this.props;return o?j.text:j.hidden}get peopleToggleState(){if(!this.isBasicToggleVisible)return j.hidden;if(this.isAdmin){var e,t,o,{peopleTaggingRestriction:r}=this.state;return!0===(null==r?void 0:r.allowed)?j.active:null!=r&&null!==(e=r.criteria)&&void 0!==e&&e.includes(A.d.LOCATION_RESTRICTION)?j.hidden:null!=r&&null!==(t=r.criteria)&&void 0!==t&&t.includes(A.d.TAGGING_CONFLICT)?j.disabled:null!=r&&null!==(o=r.criteria)&&void 0!==o&&o.includes(A.d.PREFERENCE_CONFLICT)?j.active:j.hidden}var{recognitionHidden:n}=this.props;return this.isBasicToggleVisible&&!n?j.text:j.hidden}get isBasicToggleVisible(){return this.basicToggleState!==j.hidden}get isPeopleToggleVisible(){return this.peopleToggleState!==j.hidden}get shouldShowEmptyView(){return!this.isBasicToggleVisible&&!this.isPeopleToggleVisible}setToggleState(e,t){this.setState({photosToggleStatus:e,peopleToggleStatus:t})}getToggleStringForStatus(e){return e?(0,d.A)("amazon-photos-settings-personal-pattern-on"):(0,d.A)("amazon-photos-settings-personal-pattern-off")}initializeTogglePermissions(){var e=this;return function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function _next(e){asyncGeneratorStep(i,r,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){try{var t=yield k.g.isPreferenceChangeAllowed([A.L.basicTagging,A.L.peopleTagging]),o=t[A.L.basicTagging],r=t[A.L.peopleTagging];!o.allowed&&r.allowed&&y.A.log({name:"InvalidTaggingPermissionCombination"}),e.setState({basicTaggingRestriction:o,peopleTaggingRestriction:r,permissionsPending:!1},(()=>{e.logVisitMetrics()}))}catch(t){e.setState({permissionsPending:!1}),y.A.log({name:"IsPreferenceChangeAllowedFailed"})}}))()}logVisitMetrics(){y.A.log({name:"ImageRecognitionSetingsShown",segments:{Mode:this.getViewMode()}}),g.A.log("ImageRecognitionSetingsShown",{eventTag:this.getViewMode()},v.A.getPageContext())}statusChanged(){var{isThingsRecognitionEnabled:e,isPeopleRecognitionEnabled:t}=this.props,{photosToggleStatus:o,peopleToggleStatus:r}=this.state;return o!==e||r!==t}renderLearnMoreLink(){var{showExternalLink:e}=this.props;return s.createElement("a",{className:"help",href:p.A.getProperty("urls.recognitionHelp")+(e?"":"?pop-up=1"),target:"_blank",rel:"noopener noreferrer"},s.createElement(m.A,null,"amazon-photos-settings-learn-more"))}render(){var{recognitionSettingChangeErrorType:e,recognitionSettingChangeStatus:t}=this.props,{photosToggleStatus:o,peopleToggleStatus:r,permissionsPending:n}=this.state,{isMobile:i}=p.A.getProperty("device"),a=t===h.CE.inProgress,l=this.basicToggleState===j.disabled||a,u=l||this.peopleToggleState===j.disabled||a||!o;if(n)return null;var g=this.isPeopleToggleVisible?(0,d.A)("amazon-photos-tag-photos-toggle-content"):(0,d.A)("amazon-photos-no-people-tag-photos-toggle-content"),v=t===h.CE.error;return s.createElement(s.Fragment,null,v&&null!==e&&s.createElement("section",{className:N},s.createElement("span",{className:L},function recognitionErrorToLocalizedString(e){switch(e){case h.Sh.throttle:return(0,d.A)("amazon-photos-image-recognition-change-too-often-error-message");case h.Sh.generic:default:return(0,d.A)("amazon-photos-image-recognition-change-generic-error-message")}}(e))),this.shouldShowEmptyView&&s.createElement("section",{className:N},s.createElement(M,{content:(0,d.A)("amazon-photos-recognition-ineligible-content")}),this.renderLearnMoreLink()),this.isBasicToggleVisible&&s.createElement("section",{className:N},s.createElement(M,{title:(0,d.A)("amazon-photos-tag-photos-toggle-title"),content:g},this.renderLearnMoreLink()),s.createElement("div",{className:O},this.basicToggleState!==j.text&&s.createElement("div",null,s.createElement(b.A,{name:"enablePhotoRecognition",checked:o,onChange:this.isPeopleToggleVisible?this.onTagPhotosChange:this.onTogglePhotoTaggingAndSave,title:(0,d.A)("amazon-photos-settings-personal-pattern-tooltip"),disabled:l},!i&&this.getToggleStringForStatus(o))),this.basicToggleState===j.text&&s.createElement("div",null,s.createElement("h4",{className:"recognition-state"},s.createElement(m.A,{replace:s.createElement("strong",null,this.getToggleStringForStatus(o))},"amazon-photos-settings-personal-photo-tagging-state")),s.createElement("p",null,s.createElement(m.A,null,"amazon-photos-settings-personal-pattern-purpose-user"))))),this.isPeopleToggleVisible&&s.createElement("section",{className:N},s.createElement(M,{title:(0,d.A)("amazon-photos-tag-specific-people-toggle-title"),content:(0,d.A)("amazon-photos-tag-specific-people-toggle-content")},this.renderLearnMoreLink()),s.createElement("div",{className:O},this.peopleToggleState!==j.text&&s.createElement("div",null,s.createElement(b.A,{name:"enablePeopleRecognition",checked:r,onChange:this.onTagPeopleChange,title:(0,d.A)("amazon-photos-settings-personal-pattern-tooltip"),disabled:u},!i&&this.getToggleStringForStatus(r))),this.peopleToggleState===j.text&&s.createElement("div",null,s.createElement("h4",{className:"recognition-state"},s.createElement(m.A,{replace:s.createElement("strong",null,this.getToggleStringForStatus(r))},"amazon-photos-settings-personal-people-tagging-state")),s.createElement("p",null,s.createElement(m.A,null,"amazon-photos-settings-personal-pattern-purpose-user")))),!o&&s.createElement("span",{className:L},s.createElement(m.A,null,"amazon-photos-tag-specific-people-toggle-disabled-message"))),this.isBasicToggleVisible&&s.createElement("section",{className:N},s.createElement(M,{content:(0,d.A)("amazon-photos-settings-image-recog-disclaimer"),contentColor:"gray"},this.renderLearnMoreLink())),this.isPeopleToggleVisible&&this.isAdmin&&s.createElement("section",{className:N},s.createElement(c.A,{name:"save-image-recognition-changes",className:T,disabled:!this.statusChanged(),onClick:this.onSaveWithDebounce},s.createElement(m.A,null,"amazon-photos-settings-image-recog-save-changes"))))}}_defineProperty(ImageRecognitionSettings,"displayName","ImageRecognitionSettings"),_defineProperty(ImageRecognitionSettings,"defaultProps",{showExternalLink:!0});const D=l.A.connect(ImageRecognitionSettings,[{store:f.A,mapToProps:["adminId","members"]},{store:u.A,mapToProps:["recognitionSettingChangeStatus","recognitionSettingChangeErrorType","isThingsRecognitionEnabled","isPeopleRecognitionEnabled","recognitionHidden","recognitionAvailable","customerId"]}])},56456:(e,t,o)=>{o.d(t,{A:()=>p});var r=o(55378),n=o.n(r),i=o(96540),a=o(3489),s=o(35994),c=o(21572),l=o(18742),m=o(97463),d=o(28403);function onSelectorChange(e){s.A.emit("changeLanguagePreference",e.target.value)}class LanguagePicker extends i.Component{constructor(e){super(e),this.state={language:"en_US"}}UNSAFE_componentWillMount(){m.A.notifyComponent(this,null,["language","languagePending"])}componentWillUnmount(){m.A.endNotifications(this)}render(){var{language:e,languagePending:t}=this.state,o=l.A.getProperty("locales");return i.createElement("section",{className:"language-picker settings-section"},i.createElement(d.A,{title:(0,c.A)("amazon-photos-settings-select-language-title"),content:(0,c.A)("amazon-photos-settings-select-language-content")}),i.createElement("div",{className:"settings-interactive"},i.createElement(a.A,{onChange:onSelectorChange,value:e,disabled:t},n()(o,(e=>i.createElement("option",{key:e,value:e},(0,c.A)("adrive_language_"+e.toLowerCase()))))),t&&i.createElement("div",{className:"loading"})))}}const p=LanguagePicker},75805:(e,t,o)=>{o.d(t,{A:()=>g});var r=o(5556),n=o.n(r),i=o(43840),a=o(54205),s=o(35994),c=o(47389),l=o(96540),m=o(94788),d=o(21572),p=o(18742),u=o(71086),h=o(28403);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ManageStorage extends l.Component{constructor(){super(...arguments),_defineProperty(this,"_getDesktopAppLink",(()=>{var{appsUrl:e,device:t}=this.props;return!(t.isMobile||t.isIOS||!t.isMac&&!t.isWindows)&&new c.A(e,{ref_:"IP_US_X_P_ST_SC_428_synclink"}).toString()}))}render(){var e=this._getDesktopAppLink(),{manageStorageUrl:t}=this.props;return l.createElement("section",{id:"storage",className:"settings-section settings-manage-storage"},l.createElement(h.A,{title:(0,d.A)("amazon-photos-settings-personal-storage-title"),content:(0,d.A)("amazon-photos-settings-personal-storage-content")}),l.createElement("div",{className:"settings-interactive"},l.createElement("div",{className:"settings-link"},l.createElement(i.A,{href:t,name:"manageStorage",historyState:{personalStorageBackUrl:u.A.getProperty("fragment")}},l.createElement(m.A,null,"amazon-photos-view-storage"))),e&&l.createElement("div",{className:"settings-link desktop-app"},l.createElement(a.A,{name:"desktop-app-link",href:e},l.createElement(m.A,{replace:l.createElement(m.A,{className:"highlight"},"amazon-photos-desktop-app")},"amazon-photos-settings-personal-storage-download-with-app")))))}}_defineProperty(ManageStorage,"propTypes",{appsUrl:n().string,device:n().shape({isMobile:n().bool,isIOS:n().bool,isMac:n().bool,isWindows:n().bool}),manageStorageUrl:n().string});const g=s.A.connect(ManageStorage,{store:p.A,mapToProps:e=>{var{urls:t={},device:o={}}=e;return{appsUrl:t.apps,device:o,manageStorageUrl:t.manageStorage}}})},8156:(e,t,o)=>{o.d(t,{A:()=>m});var r=o(96540),n=o(94788),i=o(18742),a=o(47389),s=o(32485),c=o.n(s),l=o(28403);class ManageThirdParty extends r.PureComponent{render(){return r.createElement("section",{className:c()("settings-section","settings-manage-third-party")},r.createElement(l.A,null,r.createElement("h4",null,r.createElement(n.A,null,"amazon-photos-settings-personal-manage-title")),r.createElement("p",null,r.createElement(n.A,null,"amazon-photos-settings-personal-manage-content"),r.createElement("a",{name:"3rd-party-help",className:"help inline",href:i.A.getProperty("urls.thirdPartyAppsHelp"),target:"_blank"},r.createElement(n.A,null,"amazon-photos-settings-learn-more"))),r.createElement("a",{href:new a.A(i.A.getProperty("urls.manageThirdParty"),{ref_:"cd_mglwa"}).toString(),target:"_blank"},r.createElement(n.A,null,"amazon-photos-settings-personal-manage-3rd-party-apps"))))}}const m=ManageThirdParty},64e3:(e,t,o)=>{o.d(t,{A:()=>k});var r=o(62216),n=o.n(r),i=o(38221),a=o.n(i),s=o(96540),c=o(35994),l=o(94788),m=o(21572),d=o(18742),p=o(97463),u=o(32485),h=o.n(u),g=o(79050),v=o(25205),y=o(21533),f=o(38374),b=o(28403);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var P="settings-pattern-recognition";class PatternRecognition extends s.Component{constructor(){super(...arguments),_defineProperty(this,"onConfirmation",(()=>{c.A.emit("setRecognitionEnabledFamily",!1),c.A.emit("closeToast",{id:"tagging-in-progress"})})),_defineProperty(this,"onChange",a()((()=>{var{recognitionEnabled:e}=this.props;e?c.A.emit("openDialog",{component:s.createElement(f.A,{onConfirmButtonClick:this.onConfirmation})}):c.A.emit("setRecognitionEnabledFamily",!0)}),1e3,{leading:!0}))}render(){var e,t,o,{adminId:r,members:i,recognitionEnabled:a,recognitionSettingChangeStatus:c,recognitionSettingChangeErrorType:u,showExternalLink:v}=this.props,f=r===p.A.getProperty("customerId"),k=n()(i)||i.length<=1,A=u===g.Sh.throttle?"amazon-photos-recognition-opt-change-error":"amazon-photos-image-recognition-change-generic-error-message",_=s.createElement(l.A,null,"amazon-photos-settings-image-recog");return f||k?e=s.createElement("div",{className:P},s.createElement(y.A,{name:"enableRecognition",checked:a,onChange:this.onChange,title:(0,m.A)("amazon-photos-settings-personal-pattern-tooltip"),disabled:c===g.CE.inProgress},s.createElement(l.A,null,a?"amazon-photos-settings-personal-pattern-on":"amazon-photos-settings-personal-pattern-off")),c===g.CE.error&&s.createElement("p",{className:"toggle-error"},s.createElement("strong",null,(0,m.A)(A))),s.createElement("p",null,s.createElement(l.A,null,a?"amazon-photos-settings-personal-pattern-purpose-admin-on":"amazon-photos-settings-personal-pattern-purpose-admin-off"))):(t=a?(0,m.A)("amazon-photos-settings-personal-pattern-on"):(0,m.A)("amazon-photos-settings-personal-pattern-off"),o=s.createElement("h4",{className:"recognition-state"},s.createElement(l.A,{replace:s.createElement("strong",null,t)},"amazon-photos-settings-personal-pattern-state")),e=s.createElement("div",{className:P},o,s.createElement("p",null,s.createElement(l.A,null,"amazon-photos-settings-personal-pattern-purpose-user")))),s.createElement("section",{className:h()("settings-section",P)},s.createElement(b.A,{title:(0,m.A)("amazon-photos-settings-personal-pattern-title"),content:(0,m.A)("amazon-photos-settings-personal-pattern-content")},s.createElement("a",{name:"recog-help",className:"help",href:d.A.getProperty("urls.recognitionHelp")+(v?"":"?pop-up=1"),target:"_blank",rel:"noopener noreferrer"},s.createElement(l.A,null,"amazon-photos-settings-learn-more"))),s.createElement("div",{className:"settings-interactive"},e,_&&s.createElement("p",null,_)))}}_defineProperty(PatternRecognition,"displayName","PatternRecognition"),_defineProperty(PatternRecognition,"defaultProps",{showExternalLink:!0});const k=c.A.connect(PatternRecognition,[{store:v.A,mapToProps:["adminId","members"]},{store:p.A,mapToProps:["recognitionSettingChangeStatus","recognitionSettingChangeErrorType","recognitionEnabled"],setup:()=>c.A.emit("getAccountPreferences")}])},87942:(e,t,o)=>{o.d(t,{A:()=>C});var r=o(62193),n=o.n(r),i=o(62216),a=o.n(i),s=o(7309),c=o.n(s),l=o(96540),m=o(71468),d=o(84503),p=o(35994),u=o(94788),h=o(32485),g=o.n(h),v=o(21572),y=o(37763),f=o(97463),b=o(25205),P=o(98835),k=o(95248),A=o(51549),_=o(88871),S=o(77112),w=o(28403);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var E=/^[^.\\\u202E]{1,100}$/i;class PersonalProfile extends l.Component{constructor(){super(...arguments),_defineProperty(this,"state",{profileName:void 0}),_defineProperty(this,"doNameChange",(e=>{this.setState({nameChanged:!0,profileName:e.currentTarget.value})})),_defineProperty(this,"doUpdateProfileName",(e=>{var{profileName:t}=this.state,o=c()(b.A.getProperty("members"),(t=>t.customerId===e)),r={};this.isMemberNameValid()&&(r.profileName=t.trim()),r.hasFamily=!a()(o),p.A.emit("updatePersonalProfileName",r),this.setState({nameChanged:!1})})),_defineProperty(this,"doUploadNewAvatar",(()=>{var{startUploaderSelection:e}=this.props;(0,y.A)((0,v.A)("amazon-photos-settings-personal-profile-avatar-body"),{name:"ChangeAvatarDialog",heading:(0,v.A)("amazon-photos-settings-personal-profile-avatar-upload-dialog"),buttons:[{label:(0,v.A)("amazon-photos-settings-personal-profile-avatar-upload"),name:"upload-avatar",noClose:!0,onClick(){p.A.emit("closeDialog"),e({isAvatar:!0})}},{label:(0,v.A)("amazon-photos-settings-personal-profile-avatar-select"),name:"select-avatar",onClick:P.A}]})})),_defineProperty(this,"isMemberNameValid",(()=>{var{profileName:e}=this.state;return!a()(e)&&e.trim().length>=0&&E.test(e)}))}componentDidMount(){k.A.componentState(this),p.A.emit("getPersonalProfile")}componentWillUnmount(){k.A.endComponentState(this)}render(){var{nameChanged:e,profileName:t}=this.state,{ownAvatarNodeId:o}=this.props,r=f.A.getProperty("customerId"),i=this.isMemberNameValid(),s=o?{id:o,owner:r}:null,c=!i&&!(n()(t)||a()(t));return l.createElement("section",{className:g()("settings-section","settings-personal-profile")},l.createElement(w.A,{title:(0,v.A)("amazon-photos-settings-personal-profile-help-title"),content:(0,v.A)("amazon-photos-settings-personal-profile-help-content")}),l.createElement("div",{className:"settings-interactive edit-personal-profile"},l.createElement("form",null,l.createElement("div",{className:"profile-image"},l.createElement("h4",null,l.createElement(u.A,null,"amazon-photos-settings-personal-profile-avatar-title")),l.createElement(d.A,{type:"button",onClick:this.doUploadNewAvatar,name:"edit-avatar",className:"edit-avatar link"},l.createElement(_.A,{customerId:r,node:s}))),l.createElement("div",{className:"profile-name"},l.createElement("h4",{id:"profile-name-id"},l.createElement(u.A,null,"amazon-photos-settings-personal-profile-name-title")),l.createElement("input",{type:"text",maxLength:100,value:t||"",onChange:this.doNameChange,className:g()("personal-profile",{invalid:c}),spellCheck:"false","aria-labelledby":"profile-name-id"}),l.createElement(d.A,{name:"edit-profile-name",className:"button personal-profile",disabled:!i||!e,onClick:()=>this.doUpdateProfileName(r)},l.createElement(u.A,null,"amazon-photos-settings-personal-profile-button"))))))}}const C=(0,m.Ng)((e=>({ownAvatarNodeId:(0,S.r2)(e)})),{startUploaderSelection:A.vY})(PersonalProfile)},28403:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(96540),n=o(32485),i=o.n(n);class SettingsHelp extends r.Component{render(){var e,t;return this.props.title&&(e=r.createElement("h4",null,this.props.title)),this.props.content&&(t=r.createElement("p",null,this.props.content)),r.createElement("div",{className:i()("settings-help",this.props.className)},e,t,this.props.children)}}const a=SettingsHelp},67361:(e,t,o)=>{o.d(t,{n:()=>g});var r=o(96540),n=o(35994),i=o(47389),a=o(42852),s=o(74169),c=o(1040),l=o(55858),m=o(75758),d=o(62076),p=o(95871),u=o(5467),h=o(3330);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function fluxUpdater(e){n.A.emit("getShared",function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e))}var g=n.A.connect((0,a.A)((e=>{var{albumModel:t,collection:o,error:a,nodeId:c,shareData:g,shareId:v,query:y={}}=e,f=(0,p.jL)(),b=(0,r.useRef)(!1),P=null==o?void 0:o.count,k=new i.A(s.DS.share,y).addPath(v);return(0,r.useEffect)((()=>{var e;f((0,d.qL)(d.I9.cds)),f((0,d.xL)(v)),f((0,d.ze)(null==g||null===(e=g.nodeInfo)||void 0===e?void 0:e.id))}),[v,g]),(0,r.useEffect)((()=>{void 0===P||b.current||((0,u.A)(P),b.current=!0)}),[P]),r.createElement(h.A,{albumModel:t,collection:o,error:a,nodeId:c,shareData:g,shareId:v,pageUrlModel:k,onReportAbuseClick:()=>function openReportAbuse(e){n.A.emit("openDialog",{component:l.A,props:{shareType:m.u_,nodeId:null,shareId:e,ownerId:null}})}(v)})})),[{store:c.A,setup:fluxUpdater,onUpdate:fluxUpdater,teardown:()=>c.A.suspend()}])},59816:(e,t,o)=>{o.d(t,{A:()=>I});var r=o(96540),n=o(5556),i=o.n(n),a=o(35994),s=o(90801),c=o(42852),l=o(54260),m=o(55439),d=o(47389),p=o(74169),u=o(75758),h=o(95871),g=o(62076),v=o(55858),y=o(5467),f=o(3330);var b=a.A.connect((0,c.A)((e=>{var{collection:t,group:o,nodeId:n,query:i={},shareToken:s}=e,c=(0,h.jL)(),l=(0,r.useRef)(!1),m=new d.A(p.DS.shareV2,i).addPath(s),{count:b}=t;return(0,r.useEffect)((()=>{void 0===b||l.current||((0,y.A)(b),l.current=!0)}),[b]),(0,r.useEffect)((()=>{c((0,g.qL)(g.I9.group)),c((0,g.zs)(o.id)),c((0,g.$0)(s))}),[o.id,s]),r.createElement(f.A,{collection:t,count:b,group:o,nodeId:n,query:i,shareToken:s,pageUrlModel:m,onReportAbuseClick:()=>function openReportAbuse(e,t,o){var{ownerProfile:r}=o;a.A.emit("openDialog",{component:v.A,props:{shareType:u.V8,nodeId:e,shareId:t,ownerId:null==r?void 0:r.customerId}})}(n,s,o)})})),[{store:l.A,mapToProps:["collection","group"]}]),P=o(58156),k=o.n(P),A=o(18742),_=o(21572),S=o(49907),w=o(80286),E=o(84503),C=o(94788),M=o(32485),L=o.n(M),T=o(74081),N=o(14127),O=o(40248);const x=a.A.connect((0,c.A)((e=>{var{collection:t,group:o,device:n}=e,[i,s]=(0,r.useState)(!0),c=(0,r.useRef)(!1);if(a.A.listen("endVideo",(()=>{var{isMobile:e}=n;e&&!c.current&&(a.A.emit("showToast",{id:"app-upsell-toast",name:"AppUpsellToast",className:"app-upsell-toast",closeable:!0,stay:!0,fullReplace:r.createElement(T.A,null)}),c.current=!0)})),1!==t.count)throw new Error("Story share landing page loaded for a collection size = ".concat(t.count,". Expected 1."));var l=t.atIndex(0),m=k()(o,"ownerProfile.names.firstName"),d=i?"amazon-photos-sharing-tap-unmute":"amazon-photos-sharing-tap-mute",p=L()("mute-toggle","button-secondary",{isMuted:i}),u=r.createElement("div",{className:"shared-story-landing-page-header"},(0,_.A)("amazon-photos-sharing-digital-greeting-cards-default-title",m)),h=l.getFormattedVideoUrl();return r.createElement(O.A,{collection:t,edgeless:!0,header:u,page:"story-share-landing",showPrimaryNav:!1},r.createElement("div",{className:"shared-story-landing-page-content"},r.createElement(N.A,{attribution:"story-share-landing-page"},r.createElement(E.A,{name:"mute-toggle",label:"amazon-photos-sharing-tap-unmute",onClick:()=>s(!i),className:p},r.createElement(C.A,null,d)),r.createElement(w.A,{autoplay:!0,eventTag:"SharedStorytellingVideo",hasVideoOverlay:!0,isActive:!0,model:l,muted:i,onMuteChange:e=>s(e),preload:"auto",src:h,thumbnail:!1,videoId:l.id}),r.createElement(S.A,{status:"completed"}))))})),[{store:l.A,mapToProps:["collection"]},{store:A.A,mapToProps:["device"]}]);var LinkShareLandingWrapper=e=>{var{collection:t,shareToken:o,group:n,nodeId:i,query:a}=e;return t&&void 0!==t.count?(0,m.A)(t)?r.createElement(x,{group:n}):r.createElement(b,{shareToken:o,group:n,nodeId:i,query:a}):null};LinkShareLandingWrapper.propTypes={collection:i().instanceOf(s.A)};const I=a.A.connect((0,c.A)(LinkShareLandingWrapper),[{store:l.A,setup:e=>a.A.emit("getGroupShare",{shareToken:e.shareToken,redirectMembers:!1,query:e.query}),onUpdate:e=>{a.A.emit("getGroupShare",{shareToken:e.shareToken,redirectMembers:!1,query:e.query})},teardown:()=>l.A.suspend(),mapStateToProps:e=>{var{collection:t}=e;return{collection:t}}}])},5467:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(1683),n=o(13489),i=o(71086),a="ShareLandingPageNodeCount";const __WEBPACK_DEFAULT_EXPORT__=e=>{Number.isFinite(e)&&(n.A.log({name:a,type:"COUNTER",value:e}),r.A.log(a,{eventCount:e},i.A.getPageContext()))}},3330:(e,t,o)=>{o.d(t,{A:()=>ke});var r=o(96540),n=o(5556),i=o.n(n),a=o(54351),s=o(47389),c=o(6687),l=o(90801),m=o(18742),d=o(35994),p=o(42852),u=o(97463),h=o(94788),g=o(74169),v=o(80442),y=o(40248),f=o(42026),b=o(36482),P=o(91747),k=o(66941),A=o(57427),_=o(65329),S=o(69604),w=o(21572),E=o(95871),C=o(62076),M=o(54318),L=o(14324),T=o(63734),N=o(84503),O=o(54205);const x="share-landing-title-module__container__SUbXH",I="share-landing-title-module__downloadButton__uGoYF",R="share-landing-title-module__stapButton__IXbIH",j="share-landing-title-module__joinButton__CWlNJ",D="share-landing-title-module__actions__RJRLY";var z=o(36898),F=o(14681),U=o(44592),q=o(82354),B=o(23152),ShareLandingTitleButtonBar=e=>{var{collection:t,album:o}=e,n=(0,E.jL)(),i=(0,T.N)(L.A,(e=>e.selectMode)),{baseAppUrl:a,all:s}=(0,T.N)(m.A,(e=>e.urls)),c=(0,E.GV)(C.Cc),l=(0,E.GV)(C.dA),d=(0,E.GV)(C.z2),p=getHeaderType(t,o),h=c===C.I9.sharedAlbum,g=p===M.ZB.GoToAmazonPhotos&&!h,v=p!==M.ZB.GoToAmazonPhotos&&!h,y=p===M.ZB.DownloadAndStap&&!h,f=u.A.getProperty("customerId"),b=void 0!==(0,C.HM)(d,f);return r.createElement("section",{className:D},h&&!b&&f&&r.createElement(N.A,{className:j,name:"join-shared-album",onClick:()=>{if(l&&c===C.I9.sharedAlbum){var e=z.CT.toShortFormString(z.CT.builder().resourceType(F.vt.customer).resourceId(f).build()),t=z.CT.toShortFormString(z.CT.builder().resourceType(F.vt.shareToken).resourceId(l).build());U.y.addShareParticipant({participantId:e,resourceId:t})}}},(0,w.A)("amazon-photos-shared-album-join")),g&&r.createElement(O.A,{name:"try-amazon-photos",href:"".concat(a).concat(s,"?ref_=").concat("AP_S_G_SL_CTA_sharing"),type:"button"},(0,w.A)("amazon-photos-go-to-photos")),y&&r.createElement(q.A,{className:I,collection:t,disabled:i},(0,w.A)("amazon-photos-stap-button-download")),v&&r.createElement(N.A,{className:R,name:"save-to-amazon-photos",metricOverrides:{eventName:"ClickCloneButton",eventTag:"ShareHeader"},disabled:i,onClick:()=>{n((0,B.gj)([]))}},(0,w.A)("amazon-photos-stap-button-save")))},ShareLandingTitleSubheading=e=>{var{collection:t,album:o}=e;if((0,E.GV)(C.Cc)===C.I9.sharedAlbum)return null;var n=getHeaderType(t,o)!==M.ZB.GoToAmazonPhotos,i=function getSubheadingText(e,t){if(t){var o=(0,w.A)("amazon-photos-stap-description-prime"),r=(0,w.A)("amazon-photos-stap-description-non-prime");return e?o:r}var n=(0,w.A)("amazon-photos-shared-content-subhead-prime"),i=(0,w.A)("amazon-photos-shared-content-subhead-no-prime"),a=e?n:i;return a}(u.A.getProperty("isPrimeExperienceAvailable"),n);return r.createElement("summary",null,i)};var ShareLandingTitle=e=>{var{collection:t,group:o,album:n}=e,i=function getShareTitle(e,t,o,n,i,a){switch(e){case C.I9.group:return function groupShareTitle(e,t){var o;if(!e)return;var{photoCount:r=0,videoCount:n=0}=e.contentAggregations,{ownerName:i}=e,a={[G.photo]:"amazon-photos-stap-photo",[G.video]:"amazon-photos-stap-video",[G.mixed]:"amazon-photos-stap-photo-and-video"},s=function stringTypeFromCounts(e,t){if(e>0&&t>0)return G.mixed;if(t>0)return G.video;return G.photo}(r,n),c=a[s],l=null!==(o=null==t?void 0:t.count)&&void 0!==o?o:0,m=n+r||l,d=[i];1!==m&&d.push(m);var p=(0,w.A)(c,d,m);return p}(t,o);case C.I9.cds:return function cdsShareTitle(e,t){if(e)return e.name;if(t){var o,n=m.A.getProperty("urls.baseAppUrl",""),i=r.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},(0,w.A)("amazon-photos-brand-name")),a=null!==(o=t.count)&&void 0!==o?o:0,s="amazon-photos-stap-title-no-name";return(0,w.A)(s,[i,a],a)}return null}(n,o);case C.I9.sharedAlbum:return function sharedAlbumsTitle(e,t){return(0,w.A)("amazon-photos-shared-album-title",[e,t])}(i,a);default:return null}}((0,E.GV)(C.Cc),o,t,n,(0,E.GV)(C.D0),(0,E.GV)(C.hH));return i?r.createElement("header",{className:x},r.createElement("h1",null,i),r.createElement(ShareLandingTitleSubheading,{collection:t,album:n}),r.createElement(ShareLandingTitleButtonBar,{collection:t,album:n})):null};var G=function(e){return e.photo="photo",e.video="video",e.mixed="mixed",e}(G||{});function getHeaderType(e,t){return(0,_.U)(e,t)?(0,M.t1)():M.ZB.GoToAmazonPhotos}var V=o(17667),W=o(71086),K=o(55439),H=o(74081),Y=o(14127),J=o(59786),Q=o(1683);const X="share-app-upsell-bottom-sheet-module__shareAppUpsell__mckd9",Z="share-app-upsell-bottom-sheet-module__closeButtonContainer__O1m3U",$="share-app-upsell-bottom-sheet-module__closeButton__Y4H6F",ee="share-app-upsell-bottom-sheet-module__card__yCMFB",te="share-app-upsell-bottom-sheet-module__title__GRNB0",oe="share-app-upsell-bottom-sheet-module__description__w3943",re="share-app-upsell-bottom-sheet-module__buttonContainer__nxJgn",ne="share-app-upsell-bottom-sheet-module__buttonLink__nrroR",ie="share-app-upsell-bottom-sheet-module__buttonTertiary__phT5w";var ae="IOS",se="Android",ce="Other",le="SharedDGCCardShown",me="SharedDGCCardPlayed",de="SharedDGCAppUpsellShown",pe="SharedDGCAppUpsellDismissed",ue="SharedDGCAppUpsellGetAppTapped";function logSharedDGCCardMetric(e,t,o,r){var n;n=t&&o?ae:t&&r?se:ce,Q.A.log(e,{eventTag:n},W.A.getPageContext())}var SharedAppUpsellBottomSheet=e=>{var{appStoreiOSUrl:t,isIOS:o,isAndroid:n,isMobile:i,hasPlayedVideo:s,videoPlaying:c}=e,l=new J.A(t),[m,d]=(0,r.useState)(!1),[p,u]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{logSharedDGCCardMetric(le,i,o,n)}),[]),(0,r.useEffect)((()=>{s&&!g&&(v(!0),logSharedDGCCardMetric(me,i,o,n))}),[s]),(0,r.useEffect)((()=>{i&&o&&s&&!c&&!p&&(d(!0),u(!0),Q.A.log(de,{eventTag:ae},W.A.getPageContext()))}),[s,c]);var onDismissHandler=()=>{Q.A.log(pe,{eventTag:ae},W.A.getPageContext()),d(!1)};return m?r.createElement("div",{className:X},r.createElement("span",{className:Z},r.createElement("button",{type:"button",className:$,onClick:onDismissHandler,"aria-label":(0,w.A)("amazon-photos-sharing-digital-greeting-cards-dismiss-aria-label")})),r.createElement("span",{className:ee,"aria-hidden":"true"},r.createElement(a.A,null,"holiday-card-upsell")),r.createElement("h1",{className:te},r.createElement(h.A,null,"amazon-photos-sharing-digital-greeting-cards-upsell-title")),r.createElement(h.A,{className:oe},"amazon-photos-sharing-digital-greeting-cards-upsell-description"),r.createElement("div",{className:re},r.createElement(O.A,{name:"GetTheApp",href:l.toString(),metricOverrides:{eventName:ue,eventTag:ae},target:"_blank",type:"button",className:ne},r.createElement(h.A,null,"amazon-photos-sharing-digital-greeting-cards-upsell-get-the-app-button-label")),r.createElement("button",{className:ie,type:"button",onClick:onDismissHandler},r.createElement(h.A,null,"amazon-photos-sharing-digital-greeting-cards-upsell-not-now")))):null};SharedAppUpsellBottomSheet.propTypes={appStoreiOSUrl:i().string,isIOS:i().bool,isAndroid:i().bool,isMobile:i().bool,hasPlayedVideo:i().bool,videoPlaying:i().bool};const he=d.A.connect(SharedAppUpsellBottomSheet,[{store:m.A,mapToProps:e=>{var{device:t={},urls:o={}}=e;return{isIOS:t.isIOS,isAndroid:t.isAndroid,isMobile:t.isMobile,appStoreiOSUrl:o.appStoreiOS}}},{store:W.A,mapToProps:["hasPlayedVideo","videoPlaying"]}]);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ge=["ShareLandingSPV","SharedLandingSPV"];class ShareLandingToastWrapper extends r.PureComponent{constructor(){super(...arguments),_defineProperty(this,"hasDismissedAppUpsell",!1),_defineProperty(this,"onRouteChanged",(e=>{var t,o=null==e||null===(t=e.metrics)||void 0===t?void 0:t.viewName;ge.includes(o)?d.A.emit("closeToast",{}):this.shouldRenderAppUpsellToast(o)&&this.renderAppUpsellToast()})),_defineProperty(this,"onAppUpsellClose",(()=>{this.hasDismissedAppUpsell=!0}))}componentDidMount(){var e,{route:t}=this.props,o=null==t||null===(e=t.metrics)||void 0===e?void 0:e.viewName;this.shouldRenderAppUpsellToast(o)&&this.renderAppUpsellToast(),d.A.listen("routeChanged",this.onRouteChanged,this)}componentWillUnmount(){d.A.unListen("routeChanged",this.onRouteChanged,this)}shouldRenderGreetingCardBottomSheet(){var{collection:e}=this.props;return V.A.isOn(M.jy.SharedDigitalGreetingCardAppUpsell)&&(0,K.A)(e)}shouldRenderAppUpsellToast(e){var{device:t}=this.props;return((null==t?void 0:t.isMobile)||!1)&&!this.shouldRenderGreetingCardBottomSheet()&&!ge.includes(e)&&!this.hasDismissedAppUpsell}renderAppUpsellToast(){d.A.emit("showToast",{id:"app-upsell-toast",name:"AppUpsellToast",className:"app-upsell-toast",closeable:!0,stay:!0,fullReplace:r.createElement(H.A,{onCloseClick:this.onAppUpsellClose,refMarker:"AP_S_G_SL_APP_sharing"})})}render(){var e=this.shouldRenderGreetingCardBottomSheet()&&r.createElement(he,null);return r.createElement(Y.A,{attribution:"SharedAppUpsellBottomSheet"},e)}}_defineProperty(ShareLandingToastWrapper,"propTypes",{collection:i().instanceOf(l.A)});const ve=d.A.connect((0,p.A)(ShareLandingToastWrapper),[{store:m.A,mapToProps:["device"]},{store:W.A,mapToProps:["route"]}]);var ye=o(38530);const cookie_notice_dialog=()=>{var e=r.createElement(O.A,{name:"cookies-notice-link",href:m.A.getProperty("urls.cookieNotice"),target:"_blank"},r.createElement("strong",null,r.createElement(h.A,null,"amazon-photos-cookie-notice-url")));return r.createElement(ye.A,{heading:(0,w.A)("amazon-photos-cookie-notice-dialog-title"),name:"CookieNoticeDialog"},r.createElement("p",null,(0,w.A)("amazon-photos-cookie-notice-dialog-description",e)))};var fe=["download","reportAbuse"],be=(0,c.A)(P.A),Pe=(0,c.A)(v.A);class SharedLandingView extends r.PureComponent{renderGallery(){var{collection:e,nodeId:t,error:o,pageUrlModel:n,onReportAbuseClick:i}=this.props;return e&&t&&!o?r.createElement(be,{ilbConfig:{name:"shareGallery",isActive:!0,changeHash:t},shareMode:!0,reportAbuseVisible:!0,onReportAbuseClick:i,collection:e,nodeId:t,pageUrlModel:n}):null}renderGrid(){var{collection:e,device:t,nodeId:o,pageUrlModel:n={}}=this.props,i=n.clone().addPath(g.DS.gallery),a=null!=t&&t.isMobile?["grid-sm"]:["grid-med"];return r.createElement(Pe,{centerSinglePhoto:!0,collection:e,displayOptions:a,emptyState:r.createElement("span",null),ilbConfig:{name:"shareGrid",isActive:!o},showShareButton:!1},(e=>{var t,{height:o,index:n,model:a,onSelectShiftClick:s,width:c}=e,l=a?a.id:n;return a&&(t=i.clone().addPath(a.id).toString()),r.createElement(b.A,{height:o,href:t,requireSelectMode:!0,key:l,model:a,onShiftClick:s,width:c})}))}renderError(){var{error:e}=this.props;if(!e)return null;var t=r.createElement(a.A,{className:"scene share-landing"},"empty-state-share-landing");return r.createElement(f.A,{beacon:!1,body:"amazon-photos-share-not-found-body",header:"amazon-photos-share-not-found-header",sceneContent:t,sceneName:"share-landing"})}render(){var{collection:e,onReportAbuseClick:t,isCookieBannerRequired:o,group:n,albumModel:i}=this.props,a=(0,_.U)(e,S.A),s=[...fe];return a&&!s.includes("stapSave")&&s.unshift("stapSave"),r.createElement(y.A,{collection:e,page:"share-landing",showPrimaryNav:!1,selectionButtons:s,onReportAbuseClick:t,edgeless:!0,header:r.createElement(ShareLandingTitle,{album:i,collection:e,group:n})},this.renderGallery(),this.renderError(),this.renderGrid(),r.createElement(ve,{collection:e}),o&&r.createElement("div",{className:"cookie-notice",onClick:()=>d.A.emit("openDialog",cookie_notice_dialog)},r.createElement(h.A,null,"amazon-photos-cookie-notice-footer")))}}!function share_landing_view_defineProperty(e,t,o){return(t=function share_landing_view_toPropertyKey(e){var t=function share_landing_view_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(SharedLandingView,"propTypes",{collection:i().instanceOf(l.A),error:i().bool,device:i().shape({isMobile:i().bool}),nodeId:i().string,onReportAbuseClick:i().func.isRequired,pageUrlModel:i().instanceOf(s.A).isRequired,group:i().instanceOf(k.A),albumModel:i().instanceOf(A.A)});const ke=d.A.connect((0,p.A)(SharedLandingView),[{store:m.A,mapToProps:["device"]},{store:u.A,mapToProps:["isCookieBannerRequired"]}])},60730:(e,t,o)=>{o.d(t,{A:()=>group_share_sheet});var r=o(35994),n=o(96540),i=o(54318),a=o(14127),s=o(58156),c=o.n(s),l=o(32629),m=o.n(l),d=o(95950),p=o.n(d),u=o(56170),h=o.n(u),g=o(5556),v=o.n(g),y=o(74692),f=o.n(y),b=o(18742),P=o(21327),k=o(1683),A=o(42852),_=o(21572),S=o(47389),w=o(97463),E=o(67172),C=o(73725),M=o(58049),L=o(45463),T=o(91491),N=o(63059),O=o(96389),x=o(24903),I=o(77112),R=o(28249),j=o(66941),D=o(44592),z=o(36898),F=o(14681),U=o(88339),q=o(78316);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var B="group-share-dialog";function onEmailClientChange(e){var t,o=null==e||null===(t=e.target)||void 0===t?void 0:t.value;(0,x.JD)((0,I.BB)(o))}class GroupShareSheet extends U.A{deselectAllAndClose(){r.A.emit("deselectAll"),r.A.emit("closeDialog")}resetDialogStateAndNavigateToGroup(e){return this.deselectAllAndClose(),new S.A("".concat(b.A.getProperty("urls.groups"),"/").concat(e)).go()}onCreateGroupClick(e,t,o,r,n){var{metricOverrides:{eventTag:i}}=t,a=o.getNodes(),{pageContext:s}=this.context,onGroupCreated=(e,t)=>{var o=new N.A({items:e,groups:[t],eventTag:i}).start();o.getPromise().done((()=>{var e=h()(o.groupCollections),{groupId:t,collectionId:i}=e;n?E.A.getGroupShare({groupId:t}).done((e=>this.setState({groupInviteLink:e.shareUrl}))):r?(E.A.patchGroupCollection({groupId:t,caption:r,collectionId:i}).done((()=>{this.resetDialogStateAndNavigateToGroup(h()(o.groupCollections).groupId)})),k.A.log("AddPostCaption",{eventTag:"share_flow"},s)):this.resetDialogStateAndNavigateToGroup(h()(o.groupCollections).groupId)})).done((()=>{(0,q.A)("CreateGroupFromShareSheetSuccess")})).fail((()=>{(0,q.A)("CreateGroupFromShareSheetFailure"),this.deselectAllAndClose()}))};this.preprocessSharedItems(a).then((e=>{(0,L.A)({navigate:!1,eventTag:i,ingressPoint:M.E}).done(onGroupCreated.bind(this,e))}))}constructor(){super(...arguments),_defineProperty(this,"state",_objectSpread(_objectSpread({},this.state),{},{familyVaultSelected:!1,createNewGroup:!1,activeSection:h()(p()(this.getShareOptions())),groupSelection:new P.A,groupInviteLink:"",activeRadioBtn:"choose"})),_defineProperty(this,"onGroupSelect",(e=>{var{groupSelection:t,isAlexaSelected:o}=this.state,r=0,n=e.isAlexaGroup;t.isSelected(e.id)?(t.deselect(e),r=t.getNodes().filter((e=>e.isAlexaGroup)).length,r||this.setState({isAlexaSelected:!1})):(t.select(e),n&&!o&&this.setState({isAlexaSelected:!0})),this.setState({groupSelection:t,createNewGroup:!1,activeRadioBtn:"choose"})})),_defineProperty(this,"patchGroupCollection",(e=>{var{groups:t,caption:o,groupCollections:r}=e,{pageContext:n}=this.context;if(o){var i=0,addReactionServiceCall=()=>{var{collectionId:e}=r[i];E.A.patchGroupCollection({groupId:t[i].id,caption:o,collectionId:e}).then((()=>(i+=1)>=t.length?new Promise((e=>{e()})):addReactionServiceCall())),k.A.log("AddPostCaption",{eventTag:"share_flow"},n)};return addReactionServiceCall()}})),_defineProperty(this,"onGroupShareClick",(()=>{var{selection:e,groupSelection:t,commentInput:o}=this.state,r=m()(t.getNodes()),n=e.getNodes();r.length>0&&this.preprocessSharedItems(n).then((e=>{var t=new N.A({items:e,groups:r,eventTag:B}).start();t.getPromise().done((()=>{this.patchGroupCollection({groups:r,caption:o,groupCollections:t.groupCollections})})).done((()=>{(0,q.A)("ShareToGroupSuccess")})).fail((()=>{(0,q.A)("ShareToGroupFailure")})),this.deselectAllAndClose()}))})),_defineProperty(this,"onClickCreateGroup",((e,t)=>{var{selection:o,commentInput:r}=this.state;this.onCreateGroupClick(e,t,o,r,!1)})),_defineProperty(this,"onAddToFamilyClick",(()=>{var{selection:e}=this.state,t=e.getNodes();this.preprocessSharedItems(t).then((e=>{var o=new O.A({items:e,eventTag:t.length>1?"MultiSelect":"SingleItem"});o.start(),o.getPromise().done((()=>{(0,q.A)("AddToFamilyFromShareSheetSuccess")})).fail((()=>{(0,q.A)("AddToFamilyFromShareSheetFailure")})),r.A.emit("closeDialog")}))})),_defineProperty(this,"onInput",(e=>{this.commentInput!==e&&this.setState({commentInput:e})})),_defineProperty(this,"onSubmit",(()=>{this.onGroupShareClick()})),_defineProperty(this,"onSectionClick",((e,t)=>this.setState({activeSection:t.section}))),_defineProperty(this,"getIsEmpty",(()=>{var{count:e}=this.props;return 0===e})),_defineProperty(this,"getIsDisabled",(()=>{var{operation:e}=this.state;return Boolean(e)})),_defineProperty(this,"getIsLoading",(()=>{var{count:e}=this.props;return void 0===e})),_defineProperty(this,"getHasSelection",(()=>{var{groupSelection:e}=this.state;return e.getSize()>0})),_defineProperty(this,"getInviteLink",((e,t)=>{var{selection:o,commentInput:r}=this.state;this.onCreateGroupClick(e,t,o,r,!0)})),_defineProperty(this,"onEmailClientOpened",(()=>{r.A.emit("closeDialog")})),_defineProperty(this,"beforeEmailClientOpens",((e,t)=>{var o,r,{selection:n}=this.state,{cdsProfileName:i}=this.props,a=n.getNodes();1===a.length&&a[0].isAlbum()?(o=(0,_.A)("amazon-photos-shared-album-email-subject"),r=(0,_.A)("amazon-photos-shared-album-email-body")):(o=(0,_.A)("amazon-photos-share-photos-email-subject",i),r=(0,_.A)("amazon-photos-share-photos-email-body",i)),this.loadShareNode().done((()=>t(_objectSpread(_objectSpread({},e),{},{subject:o,body:"".concat(r," \n ").concat(this.getShareUrl())})))).done((()=>{(0,q.A)("ShareToEmailSuccess")})).fail((()=>{(0,q.A)("ShareToEmailFailure")}))})),k.A.log("AddtoGroupStart",{eventTag:B},this.context.pageContext)}fetchSharedAlbumShareLink(e){var t=e.getFirst().id,o=f().Deferred(),r=z.CT.builder().resourceType(F.vt.album).resourceId(t).build();return D.y.getPublicShareLink({resourceId:z.CT.toShortFormString(r)}).then((e=>{var{link:t}=e,r=t.split("/").at(-1),n="https://".concat(window.location.hostname,"/photos/shared/album/").concat(r);this.setState({groupShareUrl:n}),o.resolve(n)})).catch((e=>{o.reject(e)})),o.promise()}loadShareNode(){var{selection:e,groupShareUrl:t}=this.state;if(t)return f().Deferred().resolve().promise();if((0,i.li)()&&e.hasAlbums()&&1===e.getSize()&&e.belongsToUser())return this.fetchSharedAlbumShareLink(e);if(!e.belongsToUser())return super.loadShareNode(...arguments);var o,r=e.getNodes(),n=f().Deferred();return this.preprocessSharedItems(r).then((e=>{E.A.createShareLink().then((t=>{var r=[o=new j.A(t)],n=new N.A({items:e,groups:r,showToast:!1,eventTag:"add-to-shared-link"}).start(),i=n.getPromise().progress(this.onOperationProgress);return this.setState({operation:n}),i})).then((()=>E.A.getGroupShare({groupId:o.groupId}))).done((e=>{var{shareUrl:t}=e;return this.setState({groupShareUrl:t,shareNode:o,operation:null},n.resolve)})).fail((()=>{C.A.fatal("Unable to create group share."),this.setState({serviceError:!0,operation:null},n.reject)}))})),k.A.log("implicit_link",{eventCount:e.getSize()},this.context.pageContext),n.promise()}getShareUrl(){var{selection:e,groupShareUrl:t}=this.state;if(!e.belongsToUser())return super.getShareUrl();if(!t)return null;var o=b.A.getProperty("urls.shareV2"),r=b.A.getProperty("urls.groupShare");return t.replace(r,o)}getShareOptions(){var{tabs:e}=this.props,{selection:t}=this.state,o={};e.forEach((e=>{var{key:t,headingStringId:r,labelStringId:n,featureFlag:i,component:a}=e;o[t]={headingStringId:r,label:(0,_.A)(n),featureFlag:i,component:a}}));var r=(0,T.A)(o);return(t.hasAlbums()||t.hasStories())&&delete r.family,t.belongsToUser()||(delete r.groups,delete r["amazon-photos"]),r}getTabProps(){var{activeSection:e,operation:t,selection:o,serviceError:r,groupSelection:n,isAlexaSelected:i,commentInput:a}=this.state,{collection:s,parentModel:c}=this.props,l=Boolean(t),m=c&&c.isAlexaGroup,d=this.getIsEmpty(),p=this.getIsDisabled(),u=this.getIsLoading(),h=this.getHasSelection(),g={};switch(e){case"groups":g={collection:s,isEmpty:d,isLoading:u,hasSelection:h,groupSelection:n,isAlexaSelected:i,isAlexaGroup:m,isDisabled:p,onCreateGroupClick:this.onClickCreateGroup,onInput:this.onInput,onSubmit:this.onSubmit,onGroupSelect:this.onGroupSelect,commentInput:a,onGroupShareClick:this.onGroupShareClick};break;case"link":g={hasServiceError:r,isDisabled:p,onCopyClick:this.onLinkCopy,onShareClick:this.handleGetLink,shareUrl:this.getShareUrl(),shouldUseLegacySharesLink:!o.belongsToUser()};break;case"email":g={isLoading:l,onEmailClientChange,onEmailClientOpened:this.onEmailClientOpened,beforeEmailClientOpens:this.beforeEmailClientOpens};break;case"facebook":g={isDisabled:p,onClick:this.handleFacebookMultiShare};break;case"family":g={isDisabled:p,onClick:this.onAddToFamilyClick};break;default:g={}}return g}renderSelectionPreview(){var{activeSection:e}=this.state;if("groups"===e)return null;for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return super.renderSelectionPreview(o)}render(){var{activeSection:e,operation:t}=this.state,{onClose:o,dialogComponent:r}=this.props,i=r,a=this.getShareOptions(),s=this.getTabProps(),l=this.renderSelectionPreview(),m=this.renderMetadataNotice(),d=c()(a[e],"component",null);return n.createElement(i,{activeSection:e,activeTabCTA:d,metaDataNoticeComponent:m,onClose:o,onSectionClick:this.onSectionClick,progressPercentage:t?t.progressPercent:null,selectedPreviewComponent:l,sharingOptions:a,shouldClose:Boolean(t),tabComponentProps:s})}}_defineProperty(GroupShareSheet,"contextTypes",{pageContext:v().string.isRequired});const G=r.A.connect((0,A.A)(GroupShareSheet),[{store:R.A,setup:e=>{r.A.emit("enterFullScreen"),r.A.emit("getShareDialogGroups",_objectSpread(_objectSpread({},e),{},{quickList:!0}))},teardown:()=>{r.A.emit("exitFullScreen"),R.A.suspend()}},{store:w.A,mapToProps:["cdsProfileName"]}]);var V=o(32485),W=o.n(V),K=o(56718),BaseShareDialog=e=>{var{activeSection:t,dialogClass:o,dialogName:r,footerContent:i,heading:a,shouldClose:s,content:c,onClose:l,progressPercent:m}=e;return n.createElement(K.A,{name:r,className:W()(o,"share-dialog",t,"share"),footer:i,heading:a,noClose:s,onClose:l,progressPercent:m},c)};BaseShareDialog.propTypes={activeSection:v().string,dialogClass:v().string,dialogName:v().string,footerContent:v().element,heading:v().oneOfType([v().element,v().string]),shouldClose:v().bool,content:v().element,progressPercent:v().number,onClose:v().func};const H=BaseShareDialog;var Y=o(55378),J=o.n(Y),Q=o(84503);const X={add:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add.svg"',"add-album":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20album.svg"',"add-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20image.svg"',"add-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add%20inline.svg"',alexa:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/alexa.svg"',albums:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/albums.svg"',"aspect-ratio":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/aspect%20ratio.svg"',back:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back.svg"',"blocked-contacts":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/blocked-contacts.svg"',"back-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back%20android.svg"',"broken-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/broken%20image.svg"',burst:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/burst.svg"',calendar:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/calendar.svg"',camera:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/camera.svg"',cancel:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel.svg"',"cancel-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel%20inline.svg"',"caret-down":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20down.svg"',"caret-left":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20left.svg"',"caret-right":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20right.svg"',"caret-up":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20up.svg"',"checkbox-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-on.svg"',"checkbox-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-off.svg"',"checkmark-circle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark_Hover.svg"',checkmark:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark.svg"',"cloud-upload":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cloud%20upload.svg"',contact:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact.svg"',"contact-inverted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg"',"contact-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20add.svg"',"contact-group":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20group.svg"',delete:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/delete.svg"',device:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/device.svg"',dislike:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/dislike.svg"',done:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done.svg"',"done-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done%20inline.svg"',download:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download.svg"',"download-cloud":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download-cloud.svg"',"down-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/down-arrow.svg"',"drive-logo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/drive-logo.svg"',dropdown:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown.svg"',"dropdown-active":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown%20active.svg"',edit:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit.svg"',"edit-text":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/edit%20text.svg"',email:"share-options-legacy-module__email__AGC6q",error:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/error.svg"',"external-link":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/external-link.svg"',"face-tags":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit-tags.svg"',"family-storage":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/family-storage.svg"',"family-vault":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/family_vault.svg"',filter:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/filter.svg"',"fire-tv":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/fire%20tv.svg"',flag:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/flag.svg"',folder:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder.svg"',"folder-move":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder_move.svg"',"group-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/group-add.svg"',"heart-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20off.svg"',"heart-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20on.svg"',help:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/help.svg"',hide:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/hide.svg"',hyperlink:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/hyperlink.svg"',image:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image.svg"',"image-landscape":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image%20landscape.svg"',information:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/information.svg"',"jump-back":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/jump%20back.svg"',like:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/like.svg"',"live-photo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live%20photo.svg"',"live-photo-play":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-play.svg"',"live-photo-pause":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-pause.svg"',location:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/location.svg"',"magic-sparkle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/magic%20sparkle.svg"',menu:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/menu.svg"',magnify:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify.svg"',"magnify-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify-out.svg"',merge:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/merge.svg"',microphone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/microphone.svg"',more:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/more.svg"',music:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/music.svg"',"network-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20error.svg"',"network-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20off.svg"',"notification-bell":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/notification%20bell.svg"',overflow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/overflow.svg"',pause:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause.svg"',"pause-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause%20inline.svg"',phone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/phone.svg"',photos:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/photos.svg"',play:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play.svg"',"play-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play%20inline.svg"',"radio-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-off.svg"',"radio-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-on.svg"',remove:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove.svg"',"remove-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove%20inline.svg"',reply:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/reply.svg"',search:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/search.svg"',secure:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure.svg"',"secure-locked":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure%20locked.svg"',"send-message":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/send%20message.svg"',settings:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/settings.svg"',share:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share.svg"',"share-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share%20android.svg"',sharing:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing.svg"',"sharing-bubble":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing%20bubble.svg"',"shopping-cart":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/shopping%20cart.svg"',show:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/show.svg"',signout:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/signout.svg"',slideshow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/slideshow.svg"',"star-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20off.svg"',"star-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20on.svg"',"stop-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/stop%20inline.svg"',storage:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/storage.svg"',sync:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/sync.svg"',upload:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/upload.svg"',"up-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/up-arrow.svg"',video:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/video.svg"',volume:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume.svg"',"volume-muted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20muted.svg"',"volume-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20off.svg"',warning:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/warning.svg"',"wifi-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20error.svg"',"wifi-not-connected":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20not%20connected.svg"',"wifi-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20off.svg"',"zoom-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/zoom%20out.svg"',shareOptions:"share-options-legacy-module__shareOptions__jrTkc",shareOption:"share-options-legacy-module__shareOption__PILKW",active:"share-options-legacy-module__active__mxAqC",shareOptionButton:"share-options-legacy-module__shareOptionButton__X1k9I",groups:"share-options-legacy-module__groups__kSsjI","amazon-photos":"share-options-legacy-module__amazon-photos__s9lMC",link:"share-options-legacy-module__link__HjEym",family:"share-options-legacy-module__family__j2rGh",facebook:"share-options-legacy-module__facebook__S8hw4"};var ShareOptions=e=>{var{activeSection:t,onSectionClick:o,shareOptions:r}=e;return n.createElement("ul",{className:X.shareOptions},J()(r,((e,r)=>n.createElement("li",{key:r,className:W()(X.shareOption,{[X.active]:r===t})},n.createElement(Q.A,{className:W()(X.shareOptionButton,X[r]),section:r,onClick:o,name:"share-".concat(r),title:e.label,key:r},e.label)))))};ShareOptions.propTypes={activeSection:v().string.isRequired,shareOptions:v().object.isRequired,onSectionClick:v().func.isRequired};const Z=ShareOptions;var LegacyGroupShareDialog=e=>{var{activeSection:t,onClose:o,onSectionClick:r,progressPercentage:i,selectedPreviewComponent:a,metaDataNoticeComponent:s,sharingOptions:c,shouldClose:l,tabComponentProps:m,activeTabCTA:d}=e,p=(0,_.A)("amazon-photos-share-heading"),u=d;return n.createElement(H,{activeSection:t,dialogClass:"group-share-dialog",dialogName:"group-share-dialog",footerContent:n.createElement(n.Fragment,null,s,n.createElement(Z,{shareOptions:c,activeSection:t,onSectionClick:r})),heading:p,shouldClose:l,progressPercent:i,content:n.createElement(n.Fragment,null,a,u&&n.createElement(u,m)),onClose:o})};LegacyGroupShareDialog.propTypes={activeSection:v().string.isRequired,activeTabCTA:v().func,metaDataNoticeComponent:v().element,onClose:v().func,onSectionClick:v().func.isRequired,progressPercentage:v().number,selectedPreviewComponent:v().element,sharingOptions:v().object.isRequired,shouldClose:v().bool,tabComponentProps:v().object.isRequired};const $=LegacyGroupShareDialog;var ee=o(71468),te=o(28584),EmailTabContentView=e=>{var{isLoading:t,onEmailClientChange:o,onEmailClientOpened:r,beforeEmailClientOpens:i}=e,a=(0,ee.d4)((e=>{var{accountSettings:t}=e;return t.preferredEmailClient}));return t?n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading"})):n.createElement(te.A,{value:a,onChange:o,onClientOpened:r,beforeClientOpens:i,buttonLabel:(0,_.A)("amazon-photos-share-dialog-email-client"),alignment:"top"})};EmailTabContentView.propTypes={isLoading:v().bool,onEmailClientChange:v().func.isRequired,onEmailClientOpened:v().func.isRequired,beforeEmailClientOpens:v().func.isRequired};const oe=EmailTabContentView;var re=o(85906),FamilyVaultTabContentView=e=>{var{isDisabled:t,onClick:o}=e;return n.createElement(Q.A,{onClick:o,name:"add-to-family",disabled:t},(0,_.A)("amazon-photos-add-to-family-photos"))};FamilyVaultTabContentView.propTypes={isDisabled:v().bool,onClick:v().func.isRequired};const ne=FamilyVaultTabContentView;var ie=o(94788),ae=o(51158),se=o(11250),ce=o(18123),le=o(46600),me=o(61068),de=o(85609);function group_share_item_defineProperty(e,t,o){return(t=function group_share_item_toPropertyKey(e){var t=function group_share_item_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class GroupShareItem extends n.Component{constructor(){super(...arguments),group_share_item_defineProperty(this,"onClick",(e=>{var{onSelect:t,model:o}=this.props;e.stopPropagation(),t(o),this.forceUpdate()}))}render(){var{model:e,selection:t}=this.props;if(!(e instanceof j.A))return null;var{id:o,isAlexaGroup:r}=e,i=t&&t.isSelected(o);return n.createElement(de.Ay,{className:W()({"alexa-group":r}),model:e,onClick:this.onClick},n.createElement(me.A,{checked:i,onClick:this.onClick}))}}group_share_item_defineProperty(GroupShareItem,"propTypes",{model:v().instanceOf(j.A),onSelect:v().func.isRequired,selection:v().instanceOf(P.A)});const pe=GroupShareItem;var CreateGroupButton=e=>{var{isLoading:t,isEmpty:o,disabled:r,onCreateGroupClick:i,buttonClass:a,content:s}=e,c=o?"empty_state_add":"add_to_group";return t?null:n.createElement(Q.A,{name:"create-group",className:a||"create-group",onClick:i,metricOverrides:{metricName:"CreateGroupStart",eventTag:c},disabled:r},s)};CreateGroupButton.propTypes={isLoading:v().bool,isEmpty:v().bool,disabled:v().bool,onCreateGroupClick:v().func.isRequired,buttonClass:v().string,content:v().node.isRequired};const ue=CreateGroupButton;var he=o(49709),GroupShareOptions=e=>{var{commentInput:t,disabled:o,onGroupShareClick:r}=e,i=!!t&&t.length>he.wT;return n.createElement("div",{className:"group-share-options"},n.createElement("div",{className:"share-link"},n.createElement(Q.A,{onClick:r,name:"share",disabled:i||o},n.createElement(ie.A,null,"amazon-photos-share-link"))))};GroupShareOptions.propTypes={commentInput:v().string,disabled:v().bool,onGroupShareClick:v().func.isRequired};const ge=GroupShareOptions;var GroupsTabContentView=e=>{var{collection:t,isEmpty:o,isLoading:r,isAlexaGroup:i,hasSelection:a,groupSelection:s,isAlexaSelected:c,isDisabled:l,onCreateGroupClick:m,onInput:d,onSubmit:p,onGroupSelect:u,commentInput:h,onGroupShareClick:g}=e,v=n.createElement(ue,{isLoading:r,isEmpty:o,disabled:l,buttonClass:"create-new-group",onCreateGroupClick:m,content:n.createElement(n.Fragment,null,n.createElement("span",{className:"cover"},n.createElement("span",{className:"add-icon"})),n.createElement("span",{className:"label"},n.createElement(ie.A,{className:"label"},"amazon-photos-create-sharing")))});return n.createElement("div",null,!i&&n.createElement("div",null,n.createElement(se.A,{placeholder:(0,_.A)("amazon-photos-groups-add-comment"),onInput:d,onSubmit:p,focus:!1}),c&&n.createElement("div",{className:"alexa-error-message"},n.createElement(ie.A,null,"amazon-photos-groups-share-flow-alexa-error"))),o&&n.createElement(ce.N_,null,n.createElement(ue,{isLoading:r,isEmpty:o,disabled:l,onCreateGroupClick:m,content:n.createElement(ie.A,null,"amazon-photos-group-start-sharing")})),!o&&n.createElement(le.Ay,{collection:t,useWindowScroll:!1,pageSize:1,before:[v]},(e=>{var{models:t}=e;return n.createElement(pe,{model:t[0],onSelect:u,selection:s})})),a&&n.createElement(ge,{commentInput:h,disabled:l,onGroupShareClick:g}))};GroupsTabContentView.propTypes={collection:v().instanceOf(ae.A),isEmpty:v().bool,isLoading:v().bool,hasSelection:v().bool,isAlexaGroup:v().bool,groupSelection:v().instanceOf(P.A),isAlexaSelected:v().bool,isDisabled:v().bool,onCreateGroupClick:v().func,onInput:v().func,onSubmit:v().func,onGroupSelect:v().func,commentInput:v().string,onGroupShareClick:v().func};const ve=GroupsTabContentView;function groups_tab_content_container_defineProperty(e,t,o){return(t=function groups_tab_content_container_toPropertyKey(e){var t=function groups_tab_content_container_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class GroupsTabContentContainer extends n.Component{constructor(){super(...arguments),groups_tab_content_container_defineProperty(this,"state",{hasLoggedMetric:!1})}componentDidMount(){var{isLoading:e,hasLoggedMetric:t}=this.props;e||t||this.logMetric()}componentDidUpdate(){var{hasLoggedMetric:e}=this.state,{isLoading:t}=this.props;t||e||this.logMetric()}logMetric(){var{pageContext:e}=this.context,{isEmpty:t}=this.props,o=t?"ShowEmptyGroupsTab":"ShowGroupsTab";k.A.log(o,{eventTag:"group-share-dialog"},e),this.setState({hasLoggedMetric:!0})}render(){return n.createElement(ve,this.props)}}groups_tab_content_container_defineProperty(GroupsTabContentContainer,"contextTypes",{pageContext:v().string});const ye=GroupsTabContentContainer;var fe=o(9052);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}var Tab=(e,t,o)=>{var{key:r,labelStringId:n,featureFlag:i}=e;return{key:r,headingStringId:o,labelStringId:n,featureFlag:i,component:t}},be=[Tab({key:"groups",labelStringId:"amazon-photos-sharing-nav",featureFlag:i.jy.GroupsEnabled},ye),Tab({key:"link",labelStringId:"amazon-photos-share-url"},fe.A),Tab({key:"family",labelStringId:"amazon-photos-share-family-vault",featureFlag:"family-vault"},ne),Tab({key:"email",labelStringId:"amazon-photos-share-email"},oe),Tab({key:"facebook",labelStringId:"amazon-photos-share-facebook"},re.A)];const group_share_sheet=e=>n.createElement(a.A,{attribution:"legacy-group-share-sheet-dialog",onCatch:()=>r.A.emit("closeDialog")},n.createElement(G,_extends({},e,{tabs:be,dialogComponent:$})))},78316:(e,t,o)=>{o.d(t,{A:()=>logHealthMetric});var r=o(13489),n=o(17667),i=o(54318);function logHealthMetric(e){var t=n.A.isOn(i.jy.GroupsEnabled)?"LegacyGroup":"NonGroup";r.A.log({name:e,value:1,type:"COUNTER",segments:{ShareSheet:t}})}},88339:(e,t,o)=>{o.d(t,{A:()=>L});var r=o(55378),n=o.n(r),i=o(74692),a=o.n(i),s=o(11354),c=o(84503),l=o(32485),m=o.n(l),d=o(10384),p=o(56718),u=o(35994),h=o(49744),g=o(21572),v=o(73725),y=o(86777),f=o(96540),b=o(14324),P=o(94788),k=o(57427),A=o(11031),_=o(49507),S=o(61510),w=o(9052),E=o(85906),C=o(78316);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var M={link:"amazon-photos-share-url",email:"amazon-photos-share-email",facebook:"amazon-photos-share-facebook",twitter:"cloud-photos-twitter"};class ShareSheet extends f.Component{constructor(){super(...arguments),_defineProperty(this,"state",{selection:this.props.selection||b.A.getProperty("selection"),shareNode:null,serviceError:!1,activeSection:"link"}),_defineProperty(this,"widgets",["link","email","facebook"]),_defineProperty(this,"onOperationProgress",(()=>{this.forceUpdate()})),_defineProperty(this,"onShareModeClick",((e,t)=>{this.setState({activeSection:t.name})})),_defineProperty(this,"handleGetLink",(()=>{this.loadShareNode().done((()=>{(0,C.A)("ShareLinkCreationSuccess")})).fail((()=>{(0,C.A)("ShareLinkCreationFailure")}))})),_defineProperty(this,"handleEmailShare",(()=>{this.loadShareNode().done((()=>this.openEmailClient())).done((()=>{(0,C.A)("ShareToEmailSuccess")})).fail((()=>{(0,C.A)("ShareToEmailFailure")}))})),_defineProperty(this,"handleFacebookMultiShare",(()=>{this.loadShareNode().done((()=>this.facebookMultiShare())).done((()=>{(0,C.A)("ShareToFacebookSuccess")})).fail((()=>{(0,C.A)("ShareToFacebookFailure")}))})),_defineProperty(this,"handleTwitterShare",(()=>{this.loadShareNode().done((()=>this.twitterShare()))}))}UNSAFE_componentWillMount(){var{shareNode:e}=this.props;e&&this.setState({shareNode:e})}componentDidMount(){(0,C.A)("OpenShareDialogCount")}onLinkCopy(){u.A.emit("showToast",{name:"CopyLinkSuccessToast",message:(0,g.A)("amazon-photos-successful-copy-to-clipboard"),className:"success"})}getShareUrl(){var{shareNode:e}=this.state;return e&&e.shareId?(0,d.A)(e.shareId):null}openEmailClient(){var{selection:e}=this.state,t=(0,h.A)({template:"mailto:?subject=#SUBJECT&body=#BODY",nodes:e.getNodes(),url:this.getShareUrl()});window.location.href=t,u.A.emit("closeDialog")}facebookMultiShare(){var e=(e=>"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e)))(this.getShareUrl());this.openExternalPopupShare(e)}twitterShare(){var e=(e=>{var t=encodeURIComponent("".concat(e,"?ref=cd_ph_twtr_share_link"));return"https://twitter.com/intent/tweet?&url=".concat(t)})(this.getShareUrl());this.openExternalPopupShare(e)}openExternalPopupShare(e){window.open(e)?(u.A.emit("closeDialog"),u.A.emit("deselectAll")):u.A.emit("showToast",{message:(0,g.A)("cloud-photos-disable-popup-blocker-message"),className:"fail"})}loadShareNode(){var{selection:e,shareNode:t}=this.state,o=e.getNodes(),r=e.getFirst(),n=a().Deferred();if(t&&t.shareId)return n.resolve(t),n.promise();return this.preprocessSharedItems(o).then((e=>{var t=new A.A({showToast:!1,shareName:(0,g.A)("amazon-photos-share-collection-name",[r.name,o.length-1],o.length),items:e,success:e=>{this.setState({shareNode:e,operation:null},n.resolve)},failure:()=>{v.A.fatal("Unable to create share."),this.setState({serviceError:!0,operation:null},n.reject)}});t.start(),t.getPromise().progress(this.onOperationProgress),this.setState({operation:t})})),n.promise()}preprocessSharedItems(e){var t=a().Deferred(),o=e.map(((t,o)=>t.sharePreprocessOperation?new Promise(((e,o)=>{var r=t.sharePreprocessOperation(t.id);r.getPromise().done(e).fail((()=>{this.setState({serviceError:!0,operation:null}),o()})).progress(this.onOperationProgress),this.setState({operation:r})})):new Promise((t=>{t(e[o])}))));return Promise.all(o).then((e=>{t.resolve(e.concat.apply([],e))})).catch(t.reject),t.promise()}renderShareOptions(){return f.createElement("div",{className:"share-options"},n()(this.widgets,(e=>{var{activeSection:t,operation:o}=this.state,r=e===t;return f.createElement(c.A,{name:e,disabled:!!o,className:m()("share-box",e,{active:r}),key:e,onClick:this.onShareModeClick},f.createElement(P.A,null,M[e]))})))}renderMetadataNotice(){return f.createElement("div",{className:"metadata-notice"},(0,g.A)("amazon-photos-sharing-metadata-warning"))}renderSelectionPreview(){var{disablePreview:e}=this.props,{selection:t}=this.state,o=t.getFirst();if(!e)return o instanceof k.A&&o.contentType===k.y.ALBUM?f.createElement(s.A,{model:o}):o instanceof S.A?f.createElement(_.C,{model:o,playLinkEnabled:!1}):f.createElement("div",{className:"photo-tiles-container"},f.createElement(y.A,{models:t.getNodes(),total:t.getSize()}))}renderDialogFooter(){var{activeSection:e,operation:t,serviceError:o}=this.state,r=Boolean(t);if(r)return f.createElement("div",{className:"loading-container"},f.createElement("div",{className:"loading"}));switch(e){case"link":return f.createElement(w.A,{hasServiceError:o,isDisabled:r,onCopyClick:this.onLinkCopy,onShareClick:this.handleGetLink,shareUrl:this.getShareUrl(),shouldUseLegacySharesLink:!0});case"email":return this.renderEmail();case"facebook":return f.createElement(E.A,{isDisabled:r,onClick:this.handleFacebookMultiShare});case"twitter":return this.renderTwitter();default:return null}}renderEmail(){var{operation:e}=this.state;return f.createElement(c.A,{onClick:this.handleEmailShare,className:"email-share button",name:"email-share",disabled:!!e},f.createElement(P.A,null,"amazon-photos-share-dialog-email-client"))}renderTwitter(){var{operation:e}=this.state;return f.createElement(c.A,{onClick:this.handleTwitterShare,className:"twitter-share button",name:"twitter-share",disabled:!!e},f.createElement(P.A,null,"adrive-twitter-share-continue"))}render(){var{onClose:e}=this.props,{operation:t,selection:o}=this.state,r=o.getFirst(),n=r instanceof k.A&&r.contentType===k.y.ALBUM;return f.createElement(p.A,{name:"share-dialog",heading:(0,g.A)("amazon-photos-share-heading".concat(n?"-album":"")),onClose:e,progressPercent:t?t.progressPercent:null,footer:this.renderDialogFooter()},f.createElement("div",{className:"share-content"},this.renderSelectionPreview(),this.renderMetadataNotice(),this.renderShareOptions()))}}const L=ShareSheet},85906:(e,t,o)=>{o.d(t,{A:()=>c});var r=o(84503),n=o(5556),i=o.n(n),a=o(96540),s=o(94788),FacebookTabContentView=e=>{var{isDisabled:t,onClick:o}=e;return a.createElement(r.A,{onClick:o,name:"facebook-share",disabled:t},a.createElement(s.A,null,"amazon-photos-facebook-share-continue"))};FacebookTabContentView.propTypes={isDisabled:i().bool,onClick:i().func.isRequired};const c=FacebookTabContentView},9052:(e,t,o)=>{o.d(t,{A:()=>b});var r=o(58556),n=o(84503),i=o(5556),a=o.n(i),s=o(96540),c=o(94788),l=o(32485),m=o.n(l),d=o(35994),p=o(18742),u=o(43840),SharesListPageLinkView=e=>{var{onClick:t,shareListUrl:o}=e,r=s.createElement(c.A,null,"amazon-photos-share-link-disclaimer-shared-files");return s.createElement(u.A,{onClick:t,href:o,name:"shared-items"},r)};SharesListPageLinkView.propTypes={onClick:a().func.isRequired,shareListUrl:a().string.isRequired,shouldUseLegacySharesLink:a().bool};const h=SharesListPageLinkView;var onClick=()=>{d.A.emit("closeDialog")},SharesListLinkPageContainer=e=>{var{shouldUseLegacySharesLink:t}=e,o=t?p.A.getProperty("urls.shareListPrevious"):p.A.getProperty("urls.shareList");return s.createElement(h,{onClick,shareListUrl:o})};SharesListLinkPageContainer.propTypes={shouldUseLegacySharesLink:a().bool};const g=SharesListLinkPageContainer,v="link-share-disclaimer-view-module__linkShareDisclaimer__uLyOO";var LinkShareDisclaimerView=e=>{var{shouldUseLegacySharesLink:t}=e,o=s.createElement(g,{shouldUseLegacySharesLink:t});return s.createElement("p",{className:v},s.createElement(c.A,{count:1,replace:o},"amazon-photos-share-link-disclaimer"))};LinkShareDisclaimerView.propTypes={shouldUseLegacySharesLink:a().bool};const y=LinkShareDisclaimerView,f="link-tab-content-view-module__get-link__XlrGS";var LinkTabContentView=e=>{var t,{hasServiceError:o,isDisabled:i,onCopyClick:a,onShareClick:l,shareUrl:d,shouldUseLegacySharesLink:p}=e;return t=o?s.createElement(c.A,null,"amazon-photos-share-service-error"):d?s.createElement("div",null,s.createElement("h5",null,s.createElement(c.A,null,"amazon-photos-share-copy-link")),s.createElement(r.A,{inputContent:d,onCopy:a})):s.createElement(n.A,{className:m()(f,"button"),disabled:i,name:"get-link",onClick:l},s.createElement(c.A,null,"amazon-photos-share-get-link")),s.createElement("div",null,t,s.createElement(y,{shouldUseLegacySharesLink:p}))};LinkTabContentView.propTypes={hasServiceError:a().bool,isDisabled:a().bool,onCopyClick:a().func.isRequired,onShareClick:a().func.isRequired,shareUrl:a().string,shouldUseLegacySharesLink:a().bool};const b=LinkTabContentView},25363:(e,t,o)=>{o.d(t,{Oy:()=>FamilyAvatar,PR:()=>d});var r=o(96540),n=o(32485),i=o.n(n),a=o(21572),s=o(95871),c=o(71560),l=o(74769);const m={add:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add.svg"',"add-album":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20album.svg"',"add-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20image.svg"',"add-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add%20inline.svg"',alexa:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/alexa.svg"',albums:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/albums.svg"',"aspect-ratio":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/aspect%20ratio.svg"',back:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back.svg"',"blocked-contacts":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/blocked-contacts.svg"',"back-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back%20android.svg"',"broken-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/broken%20image.svg"',burst:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/burst.svg"',calendar:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/calendar.svg"',camera:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/camera.svg"',cancel:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel.svg"',"cancel-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel%20inline.svg"',"caret-down":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20down.svg"',"caret-left":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20left.svg"',"caret-right":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20right.svg"',"caret-up":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20up.svg"',"checkbox-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-on.svg"',"checkbox-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-off.svg"',"checkmark-circle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark_Hover.svg"',checkmark:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark.svg"',"cloud-upload":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cloud%20upload.svg"',contact:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact.svg"',"contact-inverted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg"',"contact-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20add.svg"',"contact-group":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20group.svg"',delete:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/delete.svg"',device:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/device.svg"',dislike:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/dislike.svg"',done:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done.svg"',"done-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done%20inline.svg"',download:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download.svg"',"download-cloud":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download-cloud.svg"',"down-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/down-arrow.svg"',"drive-logo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/drive-logo.svg"',dropdown:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown.svg"',"dropdown-active":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown%20active.svg"',edit:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit.svg"',"edit-text":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/edit%20text.svg"',email:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/email.svg"',error:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/error.svg"',"external-link":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/external-link.svg"',"face-tags":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit-tags.svg"',"family-storage":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/family-storage.svg"',"family-vault":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/family_vault.svg"',filter:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/filter.svg"',"fire-tv":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/fire%20tv.svg"',flag:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/flag.svg"',folder:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder.svg"',"folder-move":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder_move.svg"',"group-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/group-add.svg"',"heart-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20off.svg"',"heart-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20on.svg"',help:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/help.svg"',hide:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/hide.svg"',hyperlink:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/hyperlink.svg"',image:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image.svg"',"image-landscape":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image%20landscape.svg"',information:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/information.svg"',"jump-back":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/jump%20back.svg"',like:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/like.svg"',"live-photo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live%20photo.svg"',"live-photo-play":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-play.svg"',"live-photo-pause":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-pause.svg"',location:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/location.svg"',"magic-sparkle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/magic%20sparkle.svg"',menu:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/menu.svg"',magnify:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify.svg"',"magnify-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify-out.svg"',merge:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/merge.svg"',microphone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/microphone.svg"',more:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/more.svg"',music:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/music.svg"',"network-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20error.svg"',"network-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20off.svg"',"notification-bell":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/notification%20bell.svg"',overflow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/overflow.svg"',pause:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause.svg"',"pause-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause%20inline.svg"',phone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/phone.svg"',photos:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/photos.svg"',play:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play.svg"',"play-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play%20inline.svg"',"radio-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-off.svg"',"radio-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-on.svg"',remove:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove.svg"',"remove-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove%20inline.svg"',reply:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/reply.svg"',search:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/search.svg"',secure:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure.svg"',"secure-locked":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure%20locked.svg"',"send-message":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/send%20message.svg"',settings:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/settings.svg"',share:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share.svg"',"share-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share%20android.svg"',sharing:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing.svg"',"sharing-bubble":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing%20bubble.svg"',"shopping-cart":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/shopping%20cart.svg"',show:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/show.svg"',signout:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/signout.svg"',slideshow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/slideshow.svg"',"star-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20off.svg"',"star-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20on.svg"',"stop-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/stop%20inline.svg"',storage:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/storage.svg"',sync:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/sync.svg"',upload:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/upload.svg"',"up-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/up-arrow.svg"',video:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/video.svg"',volume:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume.svg"',"volume-muted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20muted.svg"',"volume-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20off.svg"',warning:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/warning.svg"',"wifi-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20error.svg"',"wifi-not-connected":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20not%20connected.svg"',"wifi-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20off.svg"',"zoom-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/zoom%20out.svg"',avatar:"family-avatar-module__avatar__Q2D7i",position1:"family-avatar-module__position1__yYdD0",position2:"family-avatar-module__position2__DACPb",position3:"family-avatar-module__position3__YKeJC",position4:"family-avatar-module__position4__M4R5n",position5:"family-avatar-module__position5__Hp30H",position6:"family-avatar-module__position6__OZbJs",position7:"family-avatar-module__position7__i2exw",position8:"family-avatar-module__position8__QuTAQ",position9:"family-avatar-module__position9__Eud3z",position10:"family-avatar-module__position10__l5bEO",positionPending:"family-avatar-module__positionPending__Mh379",small:"family-avatar-module__small__eyjJF",large:"family-avatar-module__large__w1pD0"};var d=function(e){return e.small="small",e.large="large",e}({}),FamilyAvatar=e=>{var t,{customerID:o,size:n=d.small}=e,p=(0,s.GV)(c.Wd),u=(0,s.GV)(c.IS),h=(0,s.GV)(c.sh),g=(null===(t=u[o])||void 0===t?void 0:t.customerName)||(0,a.A)(l.J),v=h.findIndex((e=>e===o))+1,y=p[o]?"position".concat(v):"positionPending",f=i()(m.avatar,m[y],m[n]);return r.createElement("div",{className:f},function extractInitials(e){var t,o=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*(?:[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]+((?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])))?/.exec(e);return o?"".concat(o[1]).concat(null!==(t=o[2])&&void 0!==t?t:""):""}(g))}},49666:(e,t,o)=>{o.d(t,{x:()=>SegmentedProgressBar});var r=o(96540),n=o(32485),i=o.n(n);const a="segmented-progress-bar-module__barContainer__VCTyq",s="segmented-progress-bar-module__barSegment__l4yas";var SegmentedProgressBar=e=>{var{segments:t,total:o,className:n}=e;return r.createElement("div",{className:i()(a,n)},t.filter((e=>e.size>0)).map(((e,t)=>{var{color:n,size:i,key:a}=e;return r.createElement("div",{key:a,className:s,style:{backgroundColor:n,"--finalWidth":"".concat(i/o*100,"%"),"--animationDelay":"".concat(.15*t,"s")}})})))}},63138:(e,t,o)=>{o.d(t,{W:()=>StorageCard});var r=o(96540),n=o(32485),i=o.n(n);const a="storage-card-module__storageCard___Os3L",s="storage-card-module__contents__vL37o",c="storage-card-module__heading__ctFQC";var StorageCard=e=>{var{children:t,headingText:o,className:n}=e;return r.createElement("div",{className:i()(a,n)},o&&r.createElement("h3",{className:c},o),r.createElement("div",{className:s},t))}},88941:(e,t,o)=>{o.d(t,{Z:()=>StorageNotificationBanner,o:()=>m});var r=o(32485),n=o.n(r),i=o(96540),a=o(1683),s=o(13489),c=o(71086);const l={add:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add.svg"',"add-album":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20album.svg"',"add-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/add%20image.svg"',"add-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/add%20inline.svg"',alexa:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/alexa.svg"',albums:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/albums.svg"',"aspect-ratio":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/aspect%20ratio.svg"',back:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back.svg"',"blocked-contacts":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/blocked-contacts.svg"',"back-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/back%20android.svg"',"broken-image":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/broken%20image.svg"',burst:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/burst.svg"',calendar:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/calendar.svg"',camera:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/camera.svg"',cancel:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel.svg"',"cancel-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cancel%20inline.svg"',"caret-down":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20down.svg"',"caret-left":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20left.svg"',"caret-right":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20right.svg"',"caret-up":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/caret%20up.svg"',"checkbox-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-on.svg"',"checkbox-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkbox-off.svg"',"checkmark-circle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark_Hover.svg"',checkmark:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/checkmark.svg"',"cloud-upload":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/cloud%20upload.svg"',contact:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact.svg"',"contact-inverted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact-inverted.svg"',"contact-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20add.svg"',"contact-group":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/contact%20group.svg"',delete:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/delete.svg"',device:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/device.svg"',dislike:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/dislike.svg"',done:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done.svg"',"done-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/done%20inline.svg"',download:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download.svg"',"download-cloud":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/download-cloud.svg"',"down-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/down-arrow.svg"',"drive-logo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/drive-logo.svg"',dropdown:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown.svg"',"dropdown-active":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/dropdown%20active.svg"',edit:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit.svg"',"edit-text":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/edit%20text.svg"',email:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/email.svg"',error:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/error.svg"',"external-link":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/external-link.svg"',"face-tags":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/edit-tags.svg"',"family-storage":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/family-storage.svg"',"family-vault":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/family_vault.svg"',filter:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/filter.svg"',"fire-tv":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/brands/fire%20tv.svg"',flag:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/flag.svg"',folder:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder.svg"',"folder-move":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/folder_move.svg"',"group-add":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/group-add.svg"',"heart-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20off.svg"',"heart-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/heart%20on.svg"',help:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/help.svg"',hide:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/hide.svg"',hyperlink:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/hyperlink.svg"',image:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image.svg"',"image-landscape":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/image%20landscape.svg"',information:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/information.svg"',"jump-back":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/jump%20back.svg"',like:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/like.svg"',"live-photo":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live%20photo.svg"',"live-photo-play":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-play.svg"',"live-photo-pause":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/live-photo-pause.svg"',location:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/location.svg"',"magic-sparkle":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/magic%20sparkle.svg"',menu:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/menu.svg"',magnify:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify.svg"',"magnify-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/magnify-out.svg"',merge:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/merge.svg"',microphone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/microphone.svg"',more:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/more.svg"',music:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/music.svg"',"network-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20error.svg"',"network-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/network%20off.svg"',"notification-bell":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/notification%20bell.svg"',overflow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/overflow.svg"',pause:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause.svg"',"pause-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/pause%20inline.svg"',phone:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/phone.svg"',photos:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/photos.svg"',play:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play.svg"',"play-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/play%20inline.svg"',"radio-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-off.svg"',"radio-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/radio/radio-on.svg"',remove:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove.svg"',"remove-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/remove%20inline.svg"',reply:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/reply.svg"',search:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/search.svg"',secure:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure.svg"',"secure-locked":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/secure%20locked.svg"',"send-message":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/send%20message.svg"',settings:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/settings.svg"',share:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share.svg"',"share-android":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/share%20android.svg"',sharing:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing.svg"',"sharing-bubble":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/communications/sharing%20bubble.svg"',"shopping-cart":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/shopping%20cart.svg"',show:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/show.svg"',signout:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/signout.svg"',slideshow:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/slideshow.svg"',"star-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20off.svg"',"star-on":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/star%20on.svg"',"stop-inline":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/stop%20inline.svg"',storage:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/storage.svg"',sync:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/sync.svg"',upload:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/upload.svg"',"up-arrow":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/common/up-arrow.svg"',video:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/video.svg"',volume:'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume.svg"',"volume-muted":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20muted.svg"',"volume-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/volume%20off.svg"',warning:"storage-notification-banner-module__warning__E8y1K","wifi-error":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20error.svg"',"wifi-not-connected":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20not%20connected.svg"',"wifi-off":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/network/wifi%20off.svg"',"zoom-out":'"https://dcupkcmoyuvm5.cloudfront.net/cooper/icons/LightMode%20Primary/media/zoom%20out.svg"',storageNotificationBanner:"storage-notification-banner-module__storageNotificationBanner__ZIgst",success:"storage-notification-banner-module__success__xY72v",headingText:"storage-notification-banner-module__headingText__Ml5YY",contents:"storage-notification-banner-module__contents__h8Oh8"};var m=function(e){return e.Success="success",e.Warning="warning",e}({}),d="StorageNotificationBannerShown",StorageNotificationBanner=e=>{var{bannerName:t,bannerType:o=m.Warning,children:r,headingText:p}=e;return(0,i.useEffect)((()=>{s.A.log({name:d,segments:{BannerName:t}}),a.A.log(d,{eventTag:t},c.A.getPageContext())}),[]),i.createElement("div",{className:n()(l.storageNotificationBanner,l[o])},i.createElement("h5",{className:n()(l.headingText,l[o])},p),r&&i.createElement("div",{className:l.contents},r))}},46713:(e,t,o)=>{o.d(t,{y:()=>StorageSummaryRow});var r=o(32485),n=o.n(r),i=o(21572),a=o(96540),s=o(18398),c=o(95871),l=o(71560);const m="storage-summary-row-module__row__our71",d="storage-summary-row-module__summary__ovs8n",p="storage-summary-row-module__title__kLLRD",u="storage-summary-row-module__count__zkBSr",h="storage-summary-row-module__usage__E0AQE",g="storage-summary-row-module__nearOrOverQuota__zyztN",v="storage-summary-row-module__breakdown__S_mBL";var StorageSummaryRow=e=>{var{title:t,count:o,bytesUsed:r,bytesAvailable:y,children:f,isFamilyStorage:b}=e,P=(0,c.GV)(l.EN),k=(0,c.GV)(l.Hb),A=b?P:k,_=(0,c.GV)(l.Rs);return a.createElement("div",{className:m},a.createElement("div",{className:d},a.createElement("div",null,a.createElement("span",{className:p},t),void 0!==o&&a.createElement("span",{className:u}," (",(0,s.B)(o),")")),a.createElement("div",null,a.createElement("span",{className:h},function formatUsage(e,t,o,r){if("unlimited"===t)return(0,i.A)("amazon-photos-storage-bytes-of-unlimited",(0,s.$)(e));var c=a.createElement("span",{className:n()({[g]:o||r})},(0,s.$)(e));return(0,i.A)("amazon-photos-storage-summary-usage",[c,(0,s.$)(t)])}(r,y,A,_)))),a.createElement("div",{className:v},f))}},25266:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(96540),n=o(76767),i={maxFont:20.8,minFont:5.9,maxLength:37,lineHeightScalingFactor:1.2},a={maxFont:7.8,minFont:3.2,maxLength:20,lineHeightScalingFactor:1};const __WEBPACK_DEFAULT_EXPORT__=e=>{var{title:t,subtitle:o}=e;return r.createElement("div",{className:"best-of-year-cover-photo-details"},r.createElement(n.A,{title:t,subtitle:o,titleAutoSizeStyle:i,subtitleAutoSizeStyle:a}))}},76767:(e,t,o)=>{o.d(t,{A:()=>cover_photo_captions});var r=o(96540),n=o(5556),i=o.n(n),a=o(73509);class AutoSizeText extends r.Component{getFontSize(e,t,o,r,n){var i=e-t;return Math.floor(r*((e-i*n.length/o)/100))}renderText(e){var{maxFont:t,minFont:o,maxLength:n,lineHeightScalingFactor:i,children:a}=this.props,s=this.getFontSize(t,o,n,e,a),c={fontSize:s,lineHeight:"".concat(s*i,"px")};return r.createElement("p",{style:c},a)}render(){var{children:e}=this.props;return e?r.createElement("div",{className:"auto-size-text"},r.createElement(a.t$,{disableHeight:!0},(e=>{var{width:t}=e;return this.renderText(t)}))):null}}!function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(AutoSizeText,"propTypes",{children:i().string,maxLength:i().number.isRequired,minFont:i().number.isRequired,maxFont:i().number.isRequired,lineHeightScalingFactor:i().number.isRequired});const s=AutoSizeText;const cover_photo_captions=e=>{var{title:t,subtitle:o,titleAutoSizeStyle:n,subtitleAutoSizeStyle:i}=e;return r.createElement("section",{className:"story-title"},r.createElement("div",{className:"subtitle"},r.createElement(s,i,o)),r.createElement("div",{className:"title"},r.createElement(s,n,t)))}},37796:(e,t,o)=>{o.d(t,{A:()=>z});var r=o(63950),n=o.n(r),i=o(64112),a=o.n(i),s=o(7350),c=o.n(s),l=o(18742),m=o(37763),d=o(21572),p=o(96540),u=o(35994),h=o(5556),g=o.n(h),v=o(32485),y=o.n(v),f=o(71086),b=o(54205),P=o(59786),k=o(92854),A=o(49507),_=o(61510),S=o(84632),w=o(11711),E=o(72470),C=o(95093),M=o.n(C),L=o(1683),T=o(13489),N="initializing",O="loading",x="paused",I="playing",R="error";class StoryPlayerMetrics{constructor(e){this.pageContext=e}logWatchLength(e,t){if(t){var{recipe:o}=e,r=Date.now()-t;L.A.log("ViewStory",{eventTag:o,eventCount:r},this.pageContext)}}logPlayerReady(e){if(e){var{duration:t,telemetry:o}=e;if(t&&L.A.log("StoryLength",{eventCount:t},this.pageContext),o){var{musicLoadDuration:r,tetherReadyDuration:n}=o;r&&T.A.stopTimerAndLog({name:"StoryPlayerAudioReady",value:r,type:"TIMER"}),n&&T.A.stopTimerAndLog({name:"StoryPlayerAnimatorReady",value:n,type:"TIMER"})}}}logAnimatorError(e,t){if(e){var{message:o,error:r}=e,n=o||r;n&&(n=n.substring(0,256)),L.A.log(t,{eventTag:n},this.pageContext),T.A.log({name:t,value:1,type:"COUNTER"})}}logPlayerLoadComplete(e){var t=Date.now()-e;T.A.stopTimerAndLog({name:"StoryPlayerLoadComplete",value:t,type:"TIMER"})}startPlayerLoadCompleteTimer(){return T.A.startTimer({name:"StoryPlayerLoadComplete",type:"TIMER"})}startPlayerReadyTimer(){T.A.startTimer({name:"StoryPlayerAudioReady",type:"TIMER"}),T.A.startTimer({name:"StoryPlayerAnimatorReady",type:"TIMER"})}}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class StoryPlayerControls extends p.Component{constructor(){super(...arguments),_defineProperty(this,"playbackScrubberCurrentPositionRef",null),_defineProperty(this,"_setPlaybackScrubberCurrentPositionRef",(e=>{this.playbackScrubberCurrentPositionRef=e})),_defineProperty(this,"_onDragMove",(e=>{var t=this._getSeekMillisForScrubberPosition(e.x),{onSeeking:o}=this.props;o(t)})),_defineProperty(this,"_onDragStart",(()=>{var{onSeekStart:e}=this.props;e()})),_defineProperty(this,"_onDragEnd",(e=>{var t=this._getSeekMillisForScrubberPosition(e.x),{onSeekEnd:o}=this.props;o(t)})),_defineProperty(this,"_onScrubberClick",(e=>{var t=this._getSeekMillisForScrubberPosition(e.clientX),{onSeekStart:o,onSeekEnd:r}=this.props;o(),r(t)}))}_getSeekMillisForScrubberPosition(e){var{duration:t}=this.props,o=this.playbackScrubberCurrentPositionRef.parentNode,r=(e-o.getBoundingClientRect().left)/o.offsetWidth*t;return r<0&&(r=0),r>t&&(r=t),Math.round(r)}_formatTimestring(e,t){return"".concat(e,":").concat(1==="".concat(t).length?"0".concat(t):t)}_getTimestring(e,t){var o=e.minutes(),r=e.seconds(),n=t.minutes(),i=t.seconds(),a=this._formatTimestring(o,r),s=this._formatTimestring(n,i);return"".concat(a," / ").concat(s)}render(){var{millisLoaded:e,duration:t,currentTime:o,muted:r,playerState:n,onPlayPauseToggle:i,onVolumeControlClick:a}=this.props,s=this._getTimestring(M().duration(o),M().duration(t)),c=n===I?"playing":"paused",l=r?"muted":"high",m={width:"".concat(e/t*100,"%")},d={width:"".concat(o/t*100,"%")},u={left:"".concat(o/t*100,"%")};return p.createElement("div",{className:"story-player-controls"},p.createElement(E.A,{className:"playback-scrubber",onMove:this._onDragMove,onStart:this._onDragStart,onEnd:this._onDragEnd,onClick:this._onScrubberClick},p.createElement("div",{className:"playback-scrubber-load-progress",style:m}),p.createElement("div",{className:"playback-scrubber-play-progress",style:d}),p.createElement("div",{className:"playback-scrubber-current-position",style:u,ref:this._setPlaybackScrubberCurrentPositionRef})),p.createElement("button",{type:"button",className:y()("play-pause-button",c),onClick:i}),p.createElement("button",{type:"button",className:y()("volume-control",l),onClick:a}),p.createElement("div",{className:"animation-time"},s))}}_defineProperty(StoryPlayerControls,"propTypes",{millisLoaded:g().number,currentTime:g().number,onSeekStart:g().func,onSeeking:g().func,onSeekEnd:g().func,onPlayPauseToggle:g().func,onVolumeControlClick:g().func});const j=StoryPlayerControls;function story_player_defineProperty(e,t,o){return(t=function story_player_toPropertyKey(e){var t=function story_player_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var D,browserSupportsWebAudio=()=>"AudioContext"in window||"webkitAudioContext"in window;class StoryPlayer extends p.Component{constructor(){super(...arguments),story_player_defineProperty(this,"storyPlayerContainerRef",null),story_player_defineProperty(this,"loadDetailsPromise",null),story_player_defineProperty(this,"currentLoadProgress",0),story_player_defineProperty(this,"seekToAfterLoad",null),story_player_defineProperty(this,"playerStateBeforeSeek",null),story_player_defineProperty(this,"_unMounted",!1),story_player_defineProperty(this,"storyPlayerMetrics",new StoryPlayerMetrics(f.A.getPageContext())),story_player_defineProperty(this,"hasLoggedPlayCompleteMetric",!1),story_player_defineProperty(this,"state",{width:null,height:null,muted:!1,millisLoaded:0,currentTime:0,duration:0,playerState:N}),story_player_defineProperty(this,"_onWindowResize",c()((()=>{var{width:e,height:t}=this._calculatePlayerDimensions();this.setState({width:e,height:t}),this.storyAnimator.width(e),this.storyAnimator.height(t)}),200)),story_player_defineProperty(this,"_unloadStoryAnimator",(()=>{this.storyAnimator&&(this._pauseStory(),this._removeEventListeners(),this.storyAnimator.destroy(),this.storyAnimator=null)})),story_player_defineProperty(this,"_setStoryPlayerContainerRef",(e=>{this.storyPlayerContainerRef=e})),story_player_defineProperty(this,"_onAnimatorLoadProgress",(e=>{var{millisLoaded:t}=e,{seekToAfterLoad:o}=this,{duration:r}=this.state;this.currentLoadProgress=t,this.completelyLoaded=this.currentLoadProgress>=r,this.setState({millisLoaded:t}),o&&(t>1.2*o||t>=r)&&(this._seek(o),this.seekToAfterLoad=null)})),story_player_defineProperty(this,"_onAnimatorPlayerLoadComplete",(()=>{this.playerLoadStartTime&&this.storyPlayerMetrics.logPlayerLoadComplete(this.playerLoadStartTime)})),story_player_defineProperty(this,"_onAnimatorPlayerReady",(e=>{var{storyPlaying:t,storyId:o,model:r}=this.props;this.playerLoadStartTime=this.storyPlayerMetrics.startPlayerLoadCompleteTimer(),this.storyPlayerMetrics.logPlayerReady(e),this.setState({duration:this.storyAnimator.duration(),playerState:x},(()=>{t&&o===r.id&&this._playStory()})),this._notify("imageLoaded")})),story_player_defineProperty(this,"_onAnimatorProgressUpdate",(e=>{var{currentTime:t}=e,{model:o}=this.props,{duration:r}=this.state;this.setState({currentTime:t}),!this.hasLoggedPlayCompleteMetric&&r>0&&t>=r-3e3&&(u.A.emit("registerStoryEvent",{storyId:o.id,eventType:S.g.playComplete,startTime:new Date}),this.hasLoggedPlayCompleteMetric=!0)})),story_player_defineProperty(this,"_onAnimatorAnimationEnded",(()=>{var{model:e}=this.props;this.storyAnimator.pause(),this.setState({playerState:x}),this.storyPlayerMetrics.logWatchLength(e,this.playStreakStartTime),this.storyAnimator.currentTime(0)})),story_player_defineProperty(this,"_onAnimatorPageError",(e=>{this.storyPlayerMetrics.logAnimatorError(e,"StoryPlayerPageError"),this.setState({playerState:R})})),story_player_defineProperty(this,"_onAnimatorLoadError",(e=>{this.storyPlayerMetrics.logAnimatorError(e,"StoryPlayerLoadError"),this.setState({playerState:R}),this._notify("imageError")})),story_player_defineProperty(this,"_lazyLoadStoryAnimator",(()=>{o.e(996).then(o.t.bind(o,82657,23)).then((e=>{({StoryAnimator:D}=e),a()((()=>this._loadStoryAnimator()))}))})),story_player_defineProperty(this,"_loadStoryAnimator",(()=>{if(this._notify("imageStart"),!browserSupportsWebAudio())return this._showBrowserNotSupportedDialog(),void this._notify("imageCancel");this.storyAnimator=new D(this.storyPlayerContainerRef,{webViewBridge:!1});var{model:e}=this.props,{width:t,height:o}=this._calculatePlayerDimensions();this.setState({width:t,height:o,playerState:O}),this._bindEventListeners(),this.loadDetailsPromise.then((()=>{var{isActive:r}=this.props;if(!this._unMounted&&r){var{urls:{thumbnailServiceEndpoint:n}}=this.props,i={storyNarrative:e,width:t,height:o,config:{thumbnailServiceEndpoint:n}};this.storyAnimator.start(i),this.storyAnimator.setMute(!1),this.storyPlayerMetrics.startPlayerReadyTimer()}})).catch(this._showErrorDialog)})),story_player_defineProperty(this,"_showErrorDialog",(()=>{(0,m.A)((0,d.A)("amazon-photos-generic-service-error"),{name:"ErrorStory",heading:(0,d.A)("amazon-photos-error"),buttons:[{label:(0,d.A)("amazon-photos-ok"),onClick:()=>{this._loadModelDetails(),this._lazyLoadStoryAnimator()}}]})})),story_player_defineProperty(this,"_showBrowserNotSupportedDialog",(()=>{var{urls:{appStoreiOS:e,appStoreAndroid:t}}=this.props,o=new P.A(t).setParam("ref_","IP_US_P_P_PA_SC_818").toString(),r=new P.A(e).setParam("ref_","IP_US_P_P_PI_SC_818").toString(),n=p.createElement("div",null,p.createElement("p",null,(0,d.A)("amazon-photos-stories-browser-not-supported-dialog-message")),p.createElement("p",null,(0,d.A)("amazon-photos-edit-story-dialog-download-message")),p.createElement(b.A,{name:"ios",href:r,target:"_blank"},p.createElement(w.A,{src:"digital/photos/ios-app-store-icon.svg",alt:(0,d.A)("amazon-photos-empty-state-download-ios-app"),className:"mobile-app-store-link"})),p.createElement(b.A,{name:"android",href:o,target:"_blank"},p.createElement(w.A,{src:"digital/photos/google-play-badge.png",alt:(0,d.A)("amazon-photos-empty-state-download-android-app"),className:"mobile-app-store-link"})));(0,m.A)(n,{name:"stories-browser-not-supported-dialog",heading:(0,d.A)("amazon-photos-stories-browser-not-supported-dialog-heading"),buttons:["ok"]})})),story_player_defineProperty(this,"_onPlayPauseToggle",(e=>{var{playerState:t}=this.state;t===I?this._pauseStory():this._playStory(),e&&e.stopPropagation()})),story_player_defineProperty(this,"_onSpace",(()=>{var{isActive:e,storyId:t}=this.props;e&&!t&&this._onPlayPauseToggle()})),story_player_defineProperty(this,"_pauseStory",(()=>{var{model:e}=this.props;this.storyAnimator.pause(),this.setState({playerState:x}),u.A.emit("pauseStory"),this.storyPlayerMetrics.logWatchLength(e,this.playStreakStartTime)})),story_player_defineProperty(this,"_playStory",(()=>{var{playerState:e}=this.state,{model:t}=this.props;e===x&&null!==this.storyAnimator&&(this.playStreakStartTime=Date.now(),this.storyAnimator.play(),u.A.emit("registerStoryEvent",{storyId:t.id,eventType:S.g.play,startTime:new Date}),this.setState({playerState:I}))})),story_player_defineProperty(this,"_onVolumeControlClick",(()=>{var{muted:e}=this.state;e=!e,this.setState({muted:e}),this.storyAnimator.setMute(e)})),story_player_defineProperty(this,"_seekStart",(()=>{var{playerState:e}=this.state;this.playerStateBeforeSeek||(this.playerStateBeforeSeek=e),this._pauseStory()})),story_player_defineProperty(this,"_seekEnd",(e=>{this._seek(e)})),story_player_defineProperty(this,"_seeking",(e=>{(this.currentLoadProgress>=1.2*e||this.completelyLoaded)&&this.storyAnimator.currentTime(e)})),story_player_defineProperty(this,"_seek",(e=>{this.currentLoadProgress>=1.2*e||this.completelyLoaded?(this.storyAnimator.currentTime(e),this._pauseStory(),this.playerStateBeforeSeek===I&&this._playStory(),this.playerStateBeforeSeek=null):(this.seekToAfterLoad=e,this.setState({currentTime:e,playerState:O}))}))}componentDidMount(){var{isActive:e}=this.props;this._loadModelDetails(),this.loadDetailsPromise&&this.loadDetailsPromise.then((()=>{this._registerSeenStory()})),e&&this._lazyLoadStoryAnimator()}componentDidUpdate(e){var{isActive:t}=this.props;t!==e.isActive&&(t?setTimeout((()=>{this._lazyLoadStoryAnimator()}),1):this._unloadStoryAnimator())}componentWillUnmount(){this._unMounted=!0,this._unloadStoryAnimator()}_registerSeenStory(){var{model:e}=this.props,t=[];e&&!e.seen&&t.push(e.id),t.length&&k.A.registerMultipleStoryEvents({collectionIds:t,eventType:S.g.seen,startTime:(new Date).toISOString()})}_notify(e){var t=Date.now(),{imageStatusListener:o=n()}=this.context,{model:r}=this.props;a()((()=>o(e,r.id,this.storyPlayerContainerRef,t)))}_loadModelDetails(){var{model:e}=this.props;this.loadDetailsPromise=e.loadDetails()}_bindEventListeners(){this.storyAnimator.on("loadProgress",this._onAnimatorLoadProgress),this.storyAnimator.on("playerReady",this._onAnimatorPlayerReady),this.storyAnimator.on("progressUpdate",this._onAnimatorProgressUpdate),this.storyAnimator.on("animationEnded",this._onAnimatorAnimationEnded),this.storyAnimator.on("playerLoadComplete",this._onAnimatorPlayerLoadComplete),this.storyAnimator.on("loadError",this._onAnimatorLoadError),this.storyAnimator.on("pageError",this._onAnimatorPageError),window.addEventListener("resize",this._onWindowResize),u.A.listen("space",this._onSpace,this)}_removeEventListeners(){this.storyAnimator&&this.storyAnimator.removeAllListeners(),window.removeEventListener("resize",this._onWindowResize),u.A.unListen("space",this._onSpace,this)}_calculatePlayerDimensions(){var e=this.storyPlayerContainerRef.parentElement.offsetWidth,t=this.storyPlayerContainerRef.parentElement.offsetHeight;return e>t?{width:t,height:t}:e<=t?{width:e,height:e}:void 0}renderPlayer(){var{showChrome:e}=this.props,{width:t,height:o,duration:r,currentTime:n,millisLoaded:i,playerState:a,muted:s}=this.state,c=a===x?"visible":"hidden",l={width:t,height:o},m=y()("story-player",{"chrome-visible":e});return p.createElement("div",{className:m,style:l,ref:this._setStoryPlayerContainerRef},p.createElement("div",{className:"story-player-animator",onClick:this._onPlayPauseToggle}),p.createElement("button",{type:"button",className:y()("story-play",c),onClick:this._playStory}),a===O&&p.createElement("div",{className:y()("story-loading","loading"),onClick:this._playStory}),p.createElement(j,{millisLoaded:i,duration:r,currentTime:n,muted:s,playerState:a,onPlayPauseToggle:this._onPlayPauseToggle,onVolumeControlClick:this._onVolumeControlClick,onSeekStart:this._seekStart,onSeeking:this._seeking,onSeekEnd:this._seekEnd}))}renderError(){return p.createElement("p",{className:"story-player-error"},(0,d.A)("amazon-photos-error-fatal-header"),p.createElement("br",null),(0,d.A)("amazon-photos-error-fatal-body"))}renderBrowserNotSupported(){var{model:e}=this.props;return p.createElement(A.C,{model:e,playLinkEnabled:!1})}render(){var{className:e}=this.props,{playerState:t}=this.state;return e=y()(e,"story-node","story-player-container"),p.createElement("div",{className:e},t!==R&&browserSupportsWebAudio()&&this.renderPlayer(),t===R&&this.renderError(),!browserSupportsWebAudio()&&this.renderBrowserNotSupported())}}story_player_defineProperty(StoryPlayer,"contextTypes",{pageContext:g().string.isRequired,imageStatusListener:g().func}),story_player_defineProperty(StoryPlayer,"propTypes",{className:g().string,isActive:g().bool,model:g().instanceOf(_.A),storyPlaying:g().bool,storyId:g().string});const z=u.A.connect(StoryPlayer,[{store:f.A,mapToProps:["storyId","storyPlaying"]},{store:l.A,mapToProps:["urls"]}])},81651:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(96540),n=o(76767),i={maxFont:11.8,minFont:5.9,maxLength:37,lineHeightScalingFactor:1.2},a={maxFont:4.2,minFont:3.2,maxLength:20,lineHeightScalingFactor:1};const __WEBPACK_DEFAULT_EXPORT__=e=>{var{title:t,subtitle:o}=e,s=!t&&!o;return r.createElement("div",{className:"trip-cover-photo-details"},r.createElement("div",{className:"brackets"},s&&r.createElement("div",{className:"bottom-left"}),r.createElement("div",{className:"bottom-right"}),r.createElement("div",{className:"top-left"}),r.createElement("div",{className:"top-right"})),r.createElement(n.A,{title:t,subtitle:o,titleAutoSizeStyle:i,subtitleAutoSizeStyle:a}))}},4340:(e,t,o)=>{o.d(t,{A:()=>y});var r=o(96540),n=o(95093),i=o.n(n),a=o(32485),s=o.n(a),c=o(35994),l=o(97463),m=o(21572),d=o(94788),p=o(32098),u=o(84503),h=o(88871),g=o(42233),v=o(37096);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class GroupMember extends r.Component{constructor(){super(...arguments),_defineProperty(this,"onRemoveMemberClick",((e,t)=>{var{group:o,eventTag:n}=this.props,{member:i}=t;c.A.emit("pushDialog",{component:r.createElement(g.A,{member:i,group:o,eventTag:n}),isStacked:!0})})),_defineProperty(this,"onBlockMemberClick",((e,t)=>{var{group:o}=this.props,{member:n}=t;c.A.emit("pushDialog",r.createElement(v.A,{member:n,group:o}))}))}render(){var e,t,o,{group:n,member:a,showMemberControls:c,showReadStatus:g}=this.props,v=l.A.getProperty("customerId"),y=n.belongsToCurrentUser(),f=new Date(n.modifiedDate),{profile:b,customerId:P,role:k}=a,A=a.lastViewedDate&&new Date(a.lastViewedDate),_="NONE"===a.lastViewStatus,S=v===P,w="OWNER"===k,{isAlexaGroup:E}=n;A&&g&&(e=A>=f,t=(t=i()(A).calendar()).replace(t[0],t[0].toLowerCase()));o=_?"amazon-photos-group-member-not-seen":e?"amazon-photos-group-member-seen":"amazon-photos-group-member-visited";var C=c&&!w&&!S&&y||E&&!S;return r.createElement("div",{className:"group-member"},r.createElement(h.A,{node:a.avatar}),r.createElement("span",{className:"name"},S?(0,m.A)("amazon-photos-you"):b.name,w&&r.createElement("strong",null,(0,m.A)("amazon-photos-group-owner")),t&&!S&&r.createElement(d.A,{className:s()("last-seen",{"up-to-date":e,unseen:_}),replace:t},o)),C&&r.createElement(p.A,{name:"owner-options",position:"right",alignment:"top"},r.createElement("li",null,r.createElement(u.A,{onClick:this.onRemoveMemberClick,member:a,disabled:E,name:"remove-member",title:(0,m.A)("amazon-photos-group-remove-member",b.name)},r.createElement(d.A,null,"amazon-photos-sharing-remove-member-placeholder"))),r.createElement("li",null,r.createElement(u.A,{onClick:this.onBlockMemberClick,member:a,name:"block-member",title:(0,m.A)("amazon-photos-group-block-member",b.name)},r.createElement(d.A,null,"amazon-photos-sharing-block-member")))))}}const y=GroupMember},14127:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(13489),n=o(96540),i=o(5556),a=o.n(i),s=o(73725),c=o(35994),l=o(21572),m=o(74169);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ErrorBoundary extends n.Component{constructor(){super(...arguments),_defineProperty(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var{attribution:t,onCatch:o}=this.props;s.A.fatal("Fatal at error boundary: ","@".concat(t),e),r.A.log({name:"ReactErrorBoundaryShown",segments:{Attribution:t}});var i=m.Vb||m.wS?n.createElement("button",{type:"button",onClick:()=>console.log(e)},"Log"):null,a=Boolean(m.Vb||m.wS);if(c.A.emit("showToast",{message:(0,l.A)("amazon-photos-error-fatal-header"),className:"error",action:i,stay:a}),o)try{o()}catch(e){s.A.fatal("Fatal in onCatch handler passed to error boundary: ","@".concat(t),e)}}render(){var{children:e}=this.props,{hasError:t}=this.state;return t||!e?null:e}}_defineProperty(ErrorBoundary,"propTypes",{attribution:a().string.isRequired,onCatch:a().func});const d=ErrorBoundary},31194:(e,t,o)=>{o.d(t,{A:()=>p});var r=o(55378),n=o.n(r),i=o(96540),a=o(5556),s=o.n(a),c=o(32485),l=o.n(c),m=o(77914),d=["className","highlightedClass","onlyBeginning","caseSensitive","text","highlight"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class TextHighlight extends i.Component{constructor(){super(...arguments),_defineProperty(this,"_createRegExp",(()=>{var e="".concat(this.props.onlyBeginning?"^":"","(").concat((0,m.A)(this.props.highlight),")"),t=this.props.caseSensitive?"":"i";return new RegExp(e,t)}))}render(){var e=this.props,{className:t,highlightedClass:o,onlyBeginning:r,caseSensitive:a,text:s,highlight:c}=e,m=_objectWithoutProperties(e,d),p=this._createRegExp(),u=n()(s.split(p),((e,t)=>{if(e)return i.createElement("span",{key:t,className:e.toUpperCase()===c.toUpperCase()?o:""},e)}));return i.createElement("span",_extends({},m,{className:l()("text-highlight",t)}),u)}}_defineProperty(TextHighlight,"propTypes",{highlightedClass:s().string,onlyBeginning:s().bool,caseSensitive:s().bool,text:s().string.isRequired,highlight:s().string.isRequired}),_defineProperty(TextHighlight,"defaultProps",{highlight:"",highlightedClass:"highlighted",onlyBeginning:!1,caseSensitive:!1});const p=TextHighlight},40418:(e,t,o)=>{o.d(t,{A:()=>E});var r=o(55378),n=o.n(r),i=o(40860),a=o.n(i),s=o(96540),c=o(32485),l=o.n(c),m=o(43840),d=o(84503),p=o(35994),u=o(7138),h=o(94788),g=o(53540),v=o(78439),y=o(18742),f=o(21572),b=o(14324),P=o(97463),k=o(88871),A=o(62156),_=o(25205),S=o(74267),w=o(74474);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class FamilyMembersWidget extends((0,u.A)(s.Component)){constructor(){super(...arguments),_defineProperty(this,"state",{mediaCount:0}),_defineProperty(this,"onUncache",(()=>this.updateFamilyMediaCount())),_defineProperty(this,"onFaceClick",(()=>{p.A.emit("facetApplied",{name:"familyMembers"})}))}componentDidMount(){this.updateFamilyMediaCount(),p.A.listen("uncache",this.onUncache,this)}componentWillUnmount(){p.A.unListen("uncache",this.onUncache,this)}updateFamilyMediaCount(){v.A.search({asset:"NONE",limit:1,sort:(0,g.Ay)({sortToken:"sortDateTaken",order:"asc"}),searchContext:"family"}).done((e=>{this.setState({mediaCount:e.count})}))}_sortMembers(e){return a()(e,((e,t)=>t.customerId===P.A.getProperty("customerId")?[t,...e]:[...e,t]),[])}_memberContent(e,t){var o="fam-member-".concat(t||""),{memberIdToMember:r}=this.props,n=r[e.customerId],i=n?{id:n.avatarNodeId,ownerId:e.customerId}:null,a="".concat(y.A.getProperty("urls.familyArchive"),"?lcf=familyMembers&familyMembers=").concat(e.customerId);return s.createElement(m.A,{key:o,href:a,name:o,onClick:this.onFaceClick},s.createElement("div",{className:"member"},s.createElement(k.A,{node:i}),s.createElement("div",{className:"name",title:e.firstName},e.firstName)))}_inviteOthersContent(){var{invitations:e}=this.props,t=e.length>0,o=e.length===S.m7,r=o?this._onPendingInvitationClick:this._openInviteScreen,n=l()("member",{"has-invitations":t,"max-invitations":o});return s.createElement("div",{className:n},s.createElement(d.A,{name:"invite-link",onClick:r,metricOverrides:{eventName:"FamilyPhotoInviteClicked",eventTag:"Masthead"}},s.createElement("div",{className:"face"}),s.createElement("div",{className:"name"},!o&&s.createElement(h.A,null,"amazon-photos-invite-others"),o&&s.createElement(h.A,{replace:[e.length]},"amazon-photos-pending"))),t&&!o&&s.createElement(d.A,{name:"pending-invitations",onClick:this._onPendingInvitationClick},s.createElement(h.A,{replace:[e.length]},"amazon-photos-pending")))}_openInviteScreen(){p.A.emit("openDialog",s.createElement(w.A,null))}_onPendingInvitationClick(){p.A.emit("openDialog",s.createElement(A.A,null))}render(){var{members:e,selectMode:t,canInvite:o,invitations:r}=this.props,{mediaCount:i}=this.state,a=this._sortMembers(e),c=this.props.familyName||(0,f.A)("amazon-photos-default-family-name"),l=null;Number.isFinite(i)&&(l=s.createElement("span",{className:"count"},s.createElement(h.A,{replace:i,count:i},"amazon-photos-num-photos-shared")));var m=null;return t||!o&&r.length!==S.m7||(m=this._inviteOthersContent()),s.createElement("div",{className:"family-members-widget"},s.createElement("h3",null,s.createElement(h.A,{replace:[c]},"amazon-photos-family-name-photos")),l,s.createElement("div",{className:"members-wrapper"},n()(a,((e,t)=>this._memberContent(e,t))),m))}}const E=p.A.connect(FamilyMembersWidget,[{store:_.A,mapToProps:["members","familyName","canInvite","memberIdToMember","invitations"],setup:()=>{p.A.emit("checkCanInvite")}},{store:b.A,mapToProps:["selectMode"]}])},61737:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(96540),n=o(35994),i=o(42852),a=o(32250),s=o(803),c=o(59115);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var getContent=e=>{n.A.emit("getPosts",e)},startPolling=e=>{n.A.emit("startPollingPosts",e)},stopPolling=e=>{n.A.emit("stopPollingPosts",e)},addComment=e=>{n.A.emit("addPost",e)},deleteComment=e=>{n.A.emit("deletePost",e)};const l=n.A.connect((0,i.A)(c.A),{store:a.A,setup:e=>{var{groupId:t,topic:o,includeCoverPhotos:r,shareToken:n}=e;getContent({groupId:t,topic:o,includeCoverPhotos:r,shareToken:n})},teardown:()=>a.A.suspend(),mapToProps:e=>_objectSpread(_objectSpread({},e),{},{addComment,startPolling,stopPolling,getContent,deleteComment,emptyState:r.createElement(s.A,null)})})},82192:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(96540),n=o(35994),i=o(42852),a=o(35042),s=o(803),c=o(59115);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var getContent=e=>{n.A.emit("getPosts",e)},startPolling=e=>{n.A.emit("startPollingPosts",e)},stopPolling=e=>{n.A.emit("stopPollingPosts",e)},addComment=e=>{n.A.emit("addPost",e)},deleteComment=e=>{n.A.emit("deletePost",e)};const l=n.A.connect((0,i.A)(c.A),{store:a.A,setup:e=>{var{groupId:t,topic:o,includeCoverPhotos:r,shareToken:n}=e;getContent({groupId:t,topic:o,includeCoverPhotos:r,shareToken:n})},teardown:()=>a.A.suspend(),mapToProps:e=>_objectSpread(_objectSpread({},e),{},{addComment,startPolling,stopPolling,getContent,deleteComment,emptyState:r.createElement(s.A,null)})})},88769:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(96540),n=o(35994),i=o(42852),a=o(5697),s=o(76028),c=o(59115);function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var getContent=e=>{n.A.emit("getReactions",e)},startPolling=e=>{n.A.emit("startPollingReactions",e)},stopPolling=e=>{n.A.emit("stopPollingReactions",e)},addComment=e=>{n.A.emit("addReaction",e)},deleteComment=e=>{n.A.emit("deleteReaction",e)};const l=n.A.connect((0,i.A)(c.A),{store:a.A,setup:e=>{var{groupId:t,topic:o,includeCoverPhotos:r,shareToken:n}=e;getContent({groupId:t,topic:o,includeCoverPhotos:r,shareToken:n})},teardown:()=>a.A.suspend(),mapToProps:e=>_objectSpread(_objectSpread({},e),{},{addComment,startPolling,stopPolling,getContent,deleteComment,emptyState:r.createElement(s.A,null)})})},59115:(e,t,o)=>{o.d(t,{A:()=>S});var r=o(58156),n=o.n(r),i=o(32485),a=o.n(i),s=o(5556),c=o.n(s),l=o(96540),m=o(95093),d=o.n(m),p=o(84503),u=o(1683),h=o(21572),g=o(94788),v=o(60788),y=o(90801),f=o(40959),b=o(88871),P=o(49709),k=o(89873),A=o(24144),_=o(11250);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ReactionsWidget extends l.Component{constructor(){super(...arguments),_defineProperty(this,"state",{commentInput:""}),_defineProperty(this,"onReplyClick",((e,t)=>{var{model:o}=t;this.setState({replyingToModel:o}),this.elCommentInput&&this.elCommentInput.focus()})),_defineProperty(this,"onCancelReplyClick",(()=>{this.setState({replyingToModel:null})})),_defineProperty(this,"onAddCommentClick",(()=>{var{onAddComment:e,topic:t}=this.props,{commentInput:o,replyingToModel:r}=this.state,{pageContext:n}=this.context;e?e(o,t):""!==o&&this.addComment(),r&&u.A.log("ReplyCompleted",null,n)})),_defineProperty(this,"onInput",(e=>{this._unmounted||this.setState({commentInput:e})})),_defineProperty(this,"renderSectionHeader",(e=>{var{endIndex:t}=e,{collection:o,memberIdToMember:r={}}=this.props,n=o.atIndex(t),i=o.atIndex(t+1),a=!1,s=!1;if(i?n&&(Math.abs(d()(n.createdDate).unix()-d()(i.createdDate).unix())>3600&&(a=!0),i.ownerId!==n.ownerId&&(s=!0)):(a=!0,s=!0),n){var c,{ownerId:m,createdDate:p}=n,u=d()(p),h=new k.A(u).displayDate,g=u.format("LT"),v="".concat(h,", ").concat(g);return s&&!n.belongsToCurrentUser()&&r[m]&&(c=l.createElement("div",{className:"author"},r[m].names.firstName)),l.createElement("h5",null,a&&l.createElement("div",{className:"time"},v),c)}}))}UNSAFE_componentWillMount(){this.togglePollingUpdates()}UNSAFE_componentWillReceiveProps(e){var{newCommentPending:t,groupId:o,topic:r,hideReactions:n,getContent:i}=this.props;!t||e.newCommentPending||e.newCommentFailed||this.clear(),(o!==e.groupId||r!==e.topic||n&&!e.hideReactions)&&i({groupId:e.groupId,topic:e.topic,includeCoverPhotos:e.includeCoverPhotos,shareToken:e.shareToken})}componentDidUpdate(){this.togglePollingUpdates()}componentWillUnmount(){this._unmounted=!0,this.togglePollingUpdates()}togglePollingUpdates(){var{groupId:e,topic:t,hideReactions:o,startPolling:r,stopPolling:n,isSharedPage:i}=this.props,{isUpdatePolling:a}=this;i?this.isUpdatePolling=!1:this._unmounted||o||a?(this._unmounted||o)&&a&&(n({topic:t,groupId:e}),this.isUpdatePolling=!1):(r({topic:t,groupId:e}),this.isUpdatePolling=!0)}shouldPlaceSection(e,t,o){return!!e&&(!o||o.ownerId!==e.ownerId||(Math.abs(d()(e.createdDate).unix()-d()(o.createdDate).unix())>3600||void 0))}addComment(){var{groupId:e,topic:t="",newCommentPending:o,addComment:r}=this.props,{commentInput:n,replyingToModel:i}=this.state,{pageContext:a}=this.context,s=i?i.reactionTopic||i.topic:t;if(!o){var c=n;if((c=c.replace(""," ").trim()).length&&c.length<=P.wT)return r({groupId:e,topic:s,body:c}),u.A.log("AddReaction",{eventTag:"Comment"},a),this.setState({replyingToModel:void 0}),!0}}clear(){this.elCommentInput&&(this.elCommentInput.clear(),this.setState({commentInput:""}))}renderReplyContent(){var e,t,{replyingToModel:o}=this.state,{memberIdToMember:r={}}=this.props;if(!o)return null;var i=r[o.ownerId];return i&&(e={color:n()(i,"avatar.color"),customerName:n()(i,"names.firstName"),id:n()(i,"avatar.photo.nodeId"),ownerId:n()(i,"avatar.photo.ownerId")},t=o.belongsToCurrentUser()?(0,h.A)("amazon-photos-you"):e.customerName),l.createElement("div",{className:"replying-to"},e&&l.createElement(b.A,{node:e}),t&&l.createElement(g.A,{replace:t},"amazon-photos-groups-replying-to-name"),!t&&l.createElement(g.A,null,"amazon-photos-groups-replying-to"),l.createElement(p.A,{name:"cancel-reply",onClick:this.onCancelReplyClick}))}render(){var e,t,{collection:o,newCommentPending:r,className:n,onInputFocus:i,onInputBlur:s,focusInput:c,deleteComment:m,hideReactions:d,disabledButtonView:u,placeholderText:g,emptyState:y,isSharedPage:b,memberIdToMember:k,hideReply:S,addReactionOnJoin:w,pageUrlModel:E}=this.props,{commentInput:C}=this.state,{complete:M,count:L}=o,T=L>0,N=C.length>P.wT,O=(0,h.A)("amazon-photos-reactions-add-comment"),x=""===C||r||N,I=g||(0,h.A)("amazon-photos-reactions-placeholder");return o instanceof v.A?(e=!T&&!M,t=!T&&M):(t=0===L,e=void 0===L),l.createElement("div",{className:a()("reactions-widget",n)},e&&!d&&l.createElement("div",{className:"loading"}),t&&!d&&y,T&&!d&&l.createElement(f.A,{collection:o,pageSize:1,overscanRowCount:10,placeSection:this.shouldPlaceSection,renderSection:this.renderSectionHeader,useGridLayout:!1,reverseScroll:!0},(e=>{var{models:t,isFirst:o,placeholder:r,firstInSection:n,lastInSection:i}=e;return l.createElement(A.A,{model:t[0],onReplyClick:this.onReplyClick,requestDelete:m,isFirst:o,memberIdToMember:k,firstInSection:n,lastInSection:i,placeholder:r||!t[0],isSharedPage:b,hideReply:S,addReactionOnJoin:w,pageUrlModel:E})})),l.createElement("div",{className:"new-reaction"},this.renderReplyContent(),l.createElement(_.A,{ref:e=>{this.elCommentInput=e},onFocus:i,onBlur:s,placeholder:I,onSubmit:this.onAddCommentClick,onInput:this.onInput,focus:c}),x&&u&&u,(!x||!u)&&l.createElement(p.A,{title:O,name:"add-comment",onClick:this.onAddCommentClick,disabled:x})))}}_defineProperty(ReactionsWidget,"contextTypes",{pageContext:c().string.isRequired}),_defineProperty(ReactionsWidget,"propTypes",{getContent:c().func.isRequired,startPolling:c().func.isRequired,stopPolling:c().func.isRequired,addComment:c().func.isRequired,deleteComment:c().func.isRequired,hideReactions:c().bool,topic:c().string.isRequired,groupId:c().string.isRequired,newCommentPending:c().bool,newCommentFailed:c().bool,collection:c().oneOfType([c().instanceOf(v.A),c().instanceOf(y.A)]).isRequired,emptyState:c().node.isRequired});const S=ReactionsWidget},71976:(e,t,o)=>{o.d(t,{A:()=>S});var r=o(96540),n=o(5556),i=o.n(n),a=o(32485),s=o.n(a),c=o(35994),l=o(43840),m=o(90801),d=o(21572),p=o(37763),u=o(18742),h=o(54205),g=o(59786),v=o(17667),y=o(71086),f=o(31468),b=o(83271),P=o(37796),k=o(68865),A=o(11711),_=o(54318);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class StoriesGallery extends r.Component{constructor(){super(...arguments),_defineProperty(this,"state",{showChrome:!0}),_defineProperty(this,"setChromeTimeout",(()=>{window.clearTimeout(this.chromeTimeout),this.chromeTimeout=window.setTimeout(this.hideChrome,3e3)})),_defineProperty(this,"hideChrome",(()=>{window.clearTimeout(this.chromeTimeout),this.setState({showChrome:!1})})),_defineProperty(this,"showChrome",(()=>{this.setState({showChrome:!0})})),_defineProperty(this,"bindUXEvents",(()=>{c.A.listen("mouseJiggle",this.onMouseJiggle,this)})),_defineProperty(this,"unbindUXEvents",(()=>{c.A.unListen("mouseJiggle",this.onMouseJiggle,this)})),_defineProperty(this,"onMouseJiggle",(()=>{var{showChrome:e}=this.state;e||(this.showChrome(),this.setChromeTimeout())})),_defineProperty(this,"toggleChrome",(()=>{var{showChrome:e}=this.state;this.setState({showChrome:!e})})),_defineProperty(this,"onNodeChange",(e=>{var{pageUrlModel:t}=this.props;t.clone().addPath(e.id).go({replace:!0}),this.setState({activeNode:e})})),_defineProperty(this,"onEditStory",(()=>{var{urls:{appStoreiOS:e,appStoreAndroid:t}}=this.props,o=new g.A(t).setParam("ref_","IP_US_P_P_PA_SC_818").toString(),n=new g.A(e).setParam("ref_","IP_US_P_P_PI_SC_818").toString(),i=r.createElement("div",null,r.createElement("p",null,(0,d.A)("amazon-photos-edit-story-dialog-ftue-message")),r.createElement("div",{className:"ftue-download"},r.createElement("p",null,(0,d.A)("amazon-photos-edit-story-dialog-question")),r.createElement("p",null,(0,d.A)("amazon-photos-edit-story-dialog-download-message"))),r.createElement(h.A,{name:"ios",href:n,target:"_blank"},r.createElement(A.A,{src:"digital/photos/ios-app-store-icon.svg",alt:(0,d.A)("amazon-photos-empty-state-download-ios-app"),className:"mobile-app-store-link"})),r.createElement(h.A,{name:"android",href:o,target:"_blank"},r.createElement(A.A,{src:"digital/photos/google-play-badge.png",alt:(0,d.A)("amazon-photos-empty-state-download-android-app"),className:"mobile-app-store-link"})));(0,p.A)(i,{name:"stories-edit-ftue-dialog",heading:(0,d.A)("amazon-photos-edit-story-dialog-heading"),buttons:["ok"]})})),_defineProperty(this,"onSimplePhotoBookClick",(()=>{var{activeNode:{id:e}}=this.state;(0,f.A)(e)}))}UNSAFE_componentWillMount(){c.A.emit("enterFullScreen"),this.bindUXEvents(),this.setChromeTimeout()}componentWillUnmount(){c.A.emit("exitFullScreen"),this.unbindUXEvents()}render(){var{startNodeId:e,collection:t,backUrl:o,isPrintsEnabled:n}=this.props,{showChrome:i,activeNode:a}=this.state,c=s()("stories-gallery",{"chrome-visible":i}),m={eventName:"ShareStory",eventCount:1,eventTag:a&&a.recipe,pageContext:y.A.getPageContext()},p=["share",...n&&a&&"this_day_story_album"!==a.collectionType?[{name:"simpleBook",className:"simple-book",onClick:this.onSimplePhotoBookClick,string:"amazon-photos-simple-book-link",metricOverrides:{eventName:"EnterPrintsProjectFromStory"}}]:[],{name:"editStory",onClick:this.onEditStory,string:"amazon-photos-edit-story"}];return r.createElement("div",{className:c,onClick:this.toggleChrome},r.createElement("div",{className:"stories-gallery-header"},r.createElement(l.A,{name:"back",href:o},(0,d.A)("amazon-photos-go-back-link")),r.createElement(k.A,{pick:p,model:a,hideOverflowOptions:!0,shareMetricOverrides:m,className:"visible-options"})),r.createElement(b.A,{collection:t,startNodeId:e,onNodeChange:this.onNodeChange},(e=>{var{model:t,visible:o}=e;return r.createElement(P.A,{model:t,isActive:o,showChrome:i})})))}}_defineProperty(StoriesGallery,"propTypes",{startNodeId:i().string.isRequired,collection:i().instanceOf(m.A).isRequired,backUrl:i().string.isRequired,pageUrlModel:i().instanceOf(g.A).isRequired});const S=c.A.connect(StoriesGallery,[{store:u.A,mapToProps:["urls"]},{store:v.A,mapToProps:e=>({isPrintsEnabled:e[_.jy.PhotosPrinting]&&!e[_.jy.PrintsSideBarShutterflyOnly]})}])},30928:(e,t,o)=>{o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=o(55378),n=o.n(r),i=o(96540),a=o(95093),s=o.n(a),c=o(18742),l=o(43840),m=o(85796),d=o(47389),p=o(94788);const __WEBPACK_DEFAULT_EXPORT__=e=>{var{years:t,selected:o}=e,{thisday:r}=c.A.getProperty("urls"),a=Object.keys(t).sort().reverse();return!(a.length<2)&&i.createElement("div",{className:"this-day-picker"},i.createElement("ul",null,n()(a,((e,n)=>{var a=s().utc(e),c=new d.A("".concat(r,"/").concat(a.month()+1,"-").concat(a.date(),"-").concat(a.year())),{node:u}=t[e],h="this-day-year-picker-".concat(a.year(),"-").concat(n),g=a.year(),v=Number(o)===g?"selected":"";return i.createElement("li",{key:h,className:v},i.createElement(l.A,{name:h,href:c.toString(),metricOverrides:{eventName:"ThisDayYearClicked"}},i.createElement(m.A,{key:u.id,model:u},i.createElement("div",{className:"title-text"},i.createElement(p.A,{replace:g},"amazon-photos-this-day-view-moments-year")))))}))))}},21533:(e,t,o)=>{o.d(t,{A:()=>v});var r=o(68090),n=o.n(r),i=o(56170),a=o.n(i),s=o(58156),c=o.n(s),l=o(96540),m=o(5556),d=o.n(m),p=o(73725),u=o(1683),h=o(6783);function _defineProperty(e,t,o){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g=p.A.createLogger("ClickMetrics","info");class ToggleSwitchWidget extends l.Component{constructor(){super(...arguments),_defineProperty(this,"onChange",(e=>{var t=c()(this.props,"metricOverrides.eventName",[]),o=c()(this.props,"metricOverrides.eventTag",[]),{disabled:r,name:i,onChange:s}=this.props,{metricContextName:l,pageContext:m}=this.context;s&&!r&&(s(e),t=e?a()(t):n()(t),o=e?a()(o):n()(o),t||o||(t="toggled-".concat(e?"on":"off",".").concat(i),o=l),g("ToggleSwitchWidget ".concat(t," (").concat(e,"), eventTag=").concat(o,", metricContext: ").concat(l,", ")+"pageContext: ".concat(m)),u.A.log(t,{eventTag:o},m))}))}render(){var{checked:e,children:t,disabled:o,name:r,id:n,title:i,value:a}=this.props;return l.createElement("span",{className:"toggle-switch"},l.createElement(h.lM,{checked:e,disabled:o,label:t,id:n,name:r,onChange:this.onChange,title:i,value:a}))}}_defineProperty(ToggleSwitchWidget,"propTypes",{checked:d().bool.isRequired,children:d().node,disabled:d().bool,id:d().string,metricOverrides:d().shape({eventName:d().arrayOf(String),eventTag:d().arrayOf(String)}),name:d().string.isRequired,onChange:d().func.isRequired,title:d().string,value:d().string}),_defineProperty(ToggleSwitchWidget,"contextTypes",{pageContext:d().string.isRequired,metricContextName:d().string.isRequired});const v=ToggleSwitchWidget}}]);
//# sourceMappingURL=components-ca728af97f5edc4b1fb1.js.map