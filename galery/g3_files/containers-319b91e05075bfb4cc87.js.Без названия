"use strict";(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[267],{66362:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(96540),o=n(5556),i=n.n(o),a=n(95093),l=n.n(a),s=n(94932);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="days",generateFullWeekFromMidWeekDate=e=>{for(var t=[],n=0;n<7;n++){var r=l()(e).subtract(n-3,c);t.unshift(r)}return t};class HorizontalDatePickerContainer extends r.PureComponent{constructor(e){super(e),_defineProperty(this,"generatePreviousWeek",(()=>{var{visibleDates:e}=this.state,{startDate:t}=this.props,n=e.map((e=>e.subtract(7,c))).filter((e=>e.isSameOrAfter(t,"day")));this.setState({visibleDates:n})})),_defineProperty(this,"generateNextWeek",(()=>{var{visibleDates:e}=this.state,{endDate:t}=this.props,n=e.map((e=>e.add(7,c))).filter((e=>e.isSameOrBefore(t,"day")));this.setState({visibleDates:n})})),_defineProperty(this,"updateSelectedDate",(e=>{var{onDateClick:t}=this.props;this.setState({selectedDate:l()(e)}),t(e)}));var{initialSelectedDate:t}=this.props;this.state={selectedDate:t,visibleDates:generateFullWeekFromMidWeekDate(t)}}render(){var{endDate:e,startDate:t}=this.props,{selectedDate:n,visibleDates:o}=this.state;return r.createElement(s.A,{endDate:e,selectedDate:n,onPreviousNavigationClick:this.generatePreviousWeek,onNextNavigationClick:this.generateNextWeek,startDate:t,visibleDates:o,onDateClick:this.updateSelectedDate})}}_defineProperty(HorizontalDatePickerContainer,"propTypes",{initialSelectedDate:i().instanceOf(l()).isRequired,startDate:i().instanceOf(l()).isRequired,endDate:i().instanceOf(l()).isRequired,onDateClick:i().func.isRequired});const u=HorizontalDatePickerContainer},78797:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(96540),o=n(71468),i=n(1683),a=n(35994),l=n(18742),s=n(5556),c=n.n(s),u=n(71086),d=n(80753),p=n(84956);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class DevicePersonalizationDeviceListContainer extends r.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{hasLoggedListContentsMetric:!1})}componentDidMount(){var{devicesCallStatus:e}=this.props,{pageContext:t}=this.context,{CALL_STATUSES:n}=p.A;i.A.log("ViewDevicesList",void 0,t),e===n.SUCCESS&&this.logListContentsMetric()}componentDidUpdate(e){var{devicesCallStatus:t}=this.props,{devicesCallStatus:n}=e,{hasLoggedListContentsMetric:r}=this.state,{CALL_STATUSES:o}=p.A;r||t!==n&&t===o.SUCCESS&&this.logListContentsMetric()}logListContentsMetric(){var{devicesCount:e}=this.props,{pageContext:t}=this.context;e>0?i.A.log("DevicesListNonEmpty",{eventCount:e},t):i.A.log("DevicesListEmpty",void 0,t),this.setState({hasLoggedListContentsMetric:!0})}render(){var{devices:e,fragment:t,isLoading:n,voiceUrl:o}=this.props;return r.createElement(d.A,{devices:e,fragment:t,isLoading:n,voiceUrl:o})}}_defineProperty(DevicePersonalizationDeviceListContainer,"propTypes",{devicesCallStatus:c().string,devicesCount:c().number}),_defineProperty(DevicePersonalizationDeviceListContainer,"contextTypes",{pageContext:c().string.isRequired});var m=a.A.connect(DevicePersonalizationDeviceListContainer,[{store:l.A,mapToProps:e=>{var{urls:t={}}=e;return{voiceUrl:t.voice}}},{store:u.A,mapToProps:["fragment"]}]);const v=(0,o.Ng)((e=>{var{devicePersonalization:t}=e,{devicesCallStatus:n,devices:r}=t;return{devices:r,devicesCallStatus:n,devicesCount:r.length,isLoading:n===p.A.CALL_STATUSES.PENDING}}))(m)},78733:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(96540),o=n(71468),i=n(1683),a=n(35994),l=n(5556),s=n.n(l),c=n(18742),u=n(84723),d=n(61738),p=n(64925),m=n(84956),v=n(20827);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class DevicePersonalizationMenuContainer extends r.Component{constructor(){super(...arguments),_defineProperty(this,"onMenuOpen",(()=>{var{devicesCallStatus:e,fetchCompositeDataAction:t,hasSeenPersonalizeDevices:n}=this.props,{pageContext:r}=this.context;e!==m.A.CALL_STATUSES.SUCCESS&&t(),n||(i.A.log("DevicesListBadge",{eventTag:"Clicked"},r),u.A.setCDPref("hasSeenPersonalizeDevices"),c.A.setData({hasSeenPersonalizeDevices:!0}))}))}componentDidMount(){var{hasSeenPersonalizeDevices:e,isMobile:t}=this.props,{pageContext:n}=this.context;e||t||i.A.log("DevicesListBadge",{eventTag:"Shown"},n)}render(){var{hasSeenPersonalizeDevices:e,isMobile:t,name:n,label:o}=this.props;return r.createElement(p.A,{hasSeenPersonalizeDevices:e,isMobile:t,label:o,name:n,onMenuOpen:this.onMenuOpen})}}_defineProperty(DevicePersonalizationMenuContainer,"propTypes",{devicesCallStatus:s().string,fetchCompositeDataAction:s().func.isRequired,hasSeenPersonalizeDevices:s().bool,isMobile:s().bool,name:s().string.isRequired,label:s().string.isRequired}),_defineProperty(DevicePersonalizationMenuContainer,"contextTypes",{pageContext:s().string.isRequired});var h=a.A.connect(DevicePersonalizationMenuContainer,[{store:c.A,mapToProps:e=>{var{hasSeenPersonalizeDevices:t}=e;return{hasSeenPersonalizeDevices:t}}},{store:d.A,mapToProps:e=>{var{size:t={}}=e;return{isMobile:t.mobile}}}]);const g=(0,o.Ng)((e=>{var{devicePersonalization:t}=e,{devicesCallStatus:n}=t;return{devicesCallStatus:n}}),{fetchCompositeDataAction:v.i$})(h)},45462:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(96540),o=n(71468),i=n(35994),a=n(5556),l=n.n(a),s=n(18742),c=n(98230),u=n(20827),d=n(84956);class DevicePersonalizationMenuMobilePageContainer extends r.PureComponent{componentDidMount(){var{devicesCallStatus:e,fetchCompositeDataAction:t}=this.props;e!==d.A.CALL_STATUSES.SUCCESS&&t()}render(){var{baseAppUrl:e,devices:t,lastFragment:n}=this.props;return r.createElement(c.A,{backUrl:n||e,devices:t})}}!function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(DevicePersonalizationMenuMobilePageContainer,"propTypes",{fetchCompositeDataAction:l().func.isRequired,devicesCallStatus:l().string});var p=i.A.connect(DevicePersonalizationMenuMobilePageContainer,[{store:s.A,mapToProps:e=>{var{urls:t={}}=e;return{baseAppUrl:t.baseAppUrl}}}]);const m=(0,o.Ng)((e=>{var{devicePersonalization:t}=e,{devices:n,devicesCallStatus:r}=t;return{devices:n,devicesCallStatus:r}}),{fetchCompositeDataAction:u.i$})(p)},67187:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(58156),o=n.n(r),i=n(96540),a=n(1683),l=n(71468),s=n(5556),c=n.n(s),u=n(35994),d=n(21572),p=n(18742),m=n(38530),v=n(94788),h=n(71086),g=n(49907),f=n(84956),y=n(13217),b=n(20827),P=n(62193),_=n.n(P),A=n(2404),S=n.n(A),C=n(60788),O=n(39138),w=n(8912);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=new O.A([]),{DEVICE_SETTINGS_MAXIMUM:T}=f.A;class AddCollectionDialogContainer extends i.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{selectedCollectionIds:[],selectedCollections:[],activeCollection:D}),_defineProperty(this,"onCollectionClick",(e=>{var t,{selectedCollectionIds:n,selectedCollections:r}=this.state,{collectionId:o,collectionType:l}=e,{pageContext:s}=this.context,{EVENT_TAGS:c}=f.A,p=n.findIndex((e=>e===o));if(n=[...n],r=[...r],-1!==p?(t="DeviceCollectionDeselected",n.splice(p,1),r=r.filter((e=>e.collectionId!==o))):(t="DeviceCollectionSelected",n.push(o),r.push(e)),n.length<=T)a.A.log(t,{eventTag:c[l]},s),this.setState({selectedCollectionIds:n,selectedCollections:r});else{u.A.emit("pushDialog",{component:i.createElement(m.A,{name:"device-personalization-too-many-collections",heading:(0,d.A)("amazon-photos-device-personalization-collection-limit-heading"),buttons:[{name:"confirm",label:(0,d.A)("amazon-photos-ok")}]},(0,d.A)("amazon-photos-device-personalization-collection-limit-reached",[T])),isStacked:!0});var{device:v}=this.props,{type:h}=v,{DEVICE_TYPES:g}=f.A,y=h===g.FIRE_TV?c.FIRE_TV:c.MULTIMODAL;a.A.log("DeviceCollectionSelectionLimit",{eventTag:y},s)}})),_defineProperty(this,"onConfirmationDialogClose",(()=>{var{pageContext:e}=this.context,t=this._saved?"DeviceCollectionsUnsavedSave":"DeviceCollectionsUnsavedNoSave";a.A.log(t,void 0,e)})),_defineProperty(this,"onDialogClose",(()=>{if(this._saved||!this.hasSelectionChanged())return!1;var{pageContext:e}=this.context;a.A.log("DeviceCollectionsUnsavedWarn",void 0,e),u.A.emit("openDialog",i.createElement(m.A,{name:"device-personalization-collection-not-saved",heading:(0,d.A)("amazon-photos-device-personalization-unsaved-changes"),buttons:[{name:"do-not-save",className:"button-secondary",label:(0,d.A)("amazon-photos-device-personalization-unsaved-changes-decline")},{name:"save",className:"button",label:(0,d.A)("amazon-photos-device-personalization-unsaved-changes-save"),onClick:()=>this.saveSelection()}],onClose:this.onConfirmationDialogClose},(0,d.A)("amazon-photos-device-personalization-unsaved-changes-message",[T])))})),_defineProperty(this,"onSaveClick",(()=>{!this._saved&&this.hasSelectionChanged()&&this.saveSelection(),u.A.emit("closeDialog")})),_defineProperty(this,"registerInfiniteLoader",(e=>this.setState({loaderInstance:e}))),_defineProperty(this,"toggleActiveCollection",(e=>{this.setState({activeCollection:e},(()=>{var{loaderInstance:e}=this.state;e&&e.scrollToNodeIndex(0)}))}))}componentDidMount(){var{getCollections:e,deviceAccount:t,alreadySelectedCollectionIds:n=[]}=this.props,{pageContext:r}=this.context;e(t),this.setState({selectedCollectionIds:[...n]}),u.A.emit("enterFullScreen"),a.A.log("DeviceCollectionsOpen",void 0,r)}componentWillUnmount(){u.A.emit("exitFullScreen")}saveSelection(){var{updateCollections:e}=this.props,{selectedCollectionIds:t,selectedCollections:n}=this.state;this._saved=!0,e(t,n)}hasSelectionChanged(){var{alreadySelectedCollectionIds:e}=this.props,{selectedCollectionIds:t}=this.state;return!S()(t,e)}render(){var{collections:e,collectionPreviews:t}=this.props,{activeCollection:n,selectedCollectionIds:r}=this.state;return _()(e)?null:i.createElement(w.A,{onClose:this.onDialogClose,selectedCollectionIds:r,registerLoader:this.registerInfiniteLoader,collections:e,collectionPreviews:t,activeCollection:n,onCollectionClick:this.onCollectionClick,toggleActiveCollection:this.toggleActiveCollection,onSaveClick:this.onSaveClick})}}_defineProperty(AddCollectionDialogContainer,"propTypes",{alreadySelectedCollectionIds:c().arrayOf(c().string),device:c().shape({type:c().string}),deviceAccount:c().string.isRequired,getCollections:c().func.isRequired,updateCollections:c().func.isRequired,collections:c().objectOf(c().instanceOf(C.A)),collectionPreviews:c().objectOf(c().arrayOf(c().shape({collectionId:c().string})))}),_defineProperty(AddCollectionDialogContainer,"contextTypes",{pageContext:c().string.isRequired});const k=(0,l.Ng)((e=>{var{devicePersonalization:t}=e,{collections:n,collectionPreviews:r}=t;return{collections:n,collectionPreviews:r}}),{getCollections:b.Gn,updateCollections:b.aG})(AddCollectionDialogContainer);function device_personalization_page_container_defineProperty(e,t,n){return(t=function device_personalization_page_container_toPropertyKey(e){var t=function device_personalization_page_container_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var{DEVICE_SETTINGS_MAXIMUM:j}=f.A;class DevicePersonalizationPageContainer extends i.PureComponent{constructor(){super(...arguments),device_personalization_page_container_defineProperty(this,"state",{collectionIdsToDelete:[]}),device_personalization_page_container_defineProperty(this,"onCollectionClick",((e,t)=>{var n,{collectionIdsToDelete:r}=this.state,{pageContext:o}=this.context,{EVENT_TAGS:i}=f.A,l=[...r],s=r.indexOf(e);-1!==s?(n="DeviceCollectionDeselected",l.splice(s,1)):(n="DeviceCollectionSelected",l.push(e)),a.A.log(n,{eventTag:i[t]},o),this.setState({collectionIdsToDelete:l})})),device_personalization_page_container_defineProperty(this,"onSelectedCollectionRemoveCancel",(()=>{var{pageContext:e}=this.context;a.A.log("DeviceCollectionsCTA",{eventTag:"Cancel"},e),this.setState({collectionIdsToDelete:[]})})),device_personalization_page_container_defineProperty(this,"onSelectedCollectionRemoveSubmit",(()=>{var{selectedCollectionsRemoveAction:e}=this.props,{collectionIdsToDelete:t}=this.state,{pageContext:n}=this.context;a.A.log("DeviceCollectionsCTA",{eventTag:"Remove"},n),e(t),this.setState({collectionIdsToDelete:[]})})),device_personalization_page_container_defineProperty(this,"onAddCollectionClick",(()=>{var{device:e,deviceAccount:t,selectedCollectionIds:n}=this.props,{pageContext:r}=this.context;a.A.log("ViewAddCollections",{eventTag:this.getDeviceTypeEventTag()},r),u.A.emit("openDialog",i.createElement(k,{alreadySelectedCollectionIds:n,device:e,deviceAccount:t}))})),device_personalization_page_container_defineProperty(this,"onToggleDailyMemories",(()=>{var{isDailyMemoriesEnabled:e,selectedCollections:t,toggleDailyMemoriesAction:n}=this.props,{pageContext:r}=this.context;if(t.length>=j&&!e)this.handleCollectionsOverLimit();else{var o=e?"DailyMemoriesDisabled":"DailyMemoriesEnabled";a.A.log(o,{eventTag:this.getDeviceTypeEventTag()},r),n(e)}})),device_personalization_page_container_defineProperty(this,"handleCollectionsOverLimit",(()=>{var{pageContext:e}=this.context;a.A.log("DeviceCollectionSelectionLimit",{eventTag:this.getDeviceTypeEventTag()},e),u.A.emit("openDialog",{component:i.createElement(m.A,{name:"device-personalization-error",heading:i.createElement(v.A,null,"amazon-photos-device-personalization-dialog-error-heading"),buttons:[{name:"daily-memories-error-okay",label:(0,d.A)("amazon-photos-ok")}]},i.createElement(v.A,null,"amazon-photos-device-personalization-dialog-error-body"))})}))}componentDidMount(){var{deviceAccount:e,devicesCallStatus:t,fetchCompositeDataAction:n,fetchSelectedCollectionsAction:r}=this.props;t!==f.A.CALL_STATUSES.SUCCESS&&n(),r(e)}componentWillUnmount(){var{clearSelectedCollectionsAction:e}=this.props;e()}getDeviceTypeEventTag(){var{device:e}=this.props;if(e){var{type:t}=e,{EVENT_TAGS:n,DEVICE_TYPES:r}=f.A;return t===r.FIRE_TV?n.FIRE_TV:n.MULTIMODAL}}render(){var{baseAppUrl:e,deviceBackUrl:t,device:n,isDailyMemoriesEnabled:r,isLoading:o,selectedCollections:a,selectedCollectionsHasRetrievalError:l}=this.props,{collectionIdsToDelete:s}=this.state,c=t||e;return i.createElement(y.A,{onAddCollectionClick:this.onAddCollectionClick,backUrl:c,device:n,isDailyMemoriesEnabled:r,isDailyMemoriesUnavailable:l,isLoading:o,onCollectionClick:this.onCollectionClick,onToggleDailyMemories:this.onToggleDailyMemories,selectedCollections:a,collectionIdsToDelete:s,onSelectedCollectionRemoveCancel:this.onSelectedCollectionRemoveCancel,onSelectedCollectionRemoveSubmit:this.onSelectedCollectionRemoveSubmit},i.createElement(g.A,{status:"completed"}))}}device_personalization_page_container_defineProperty(DevicePersonalizationPageContainer,"propTypes",{baseAppUrl:c().string,clearSelectedCollectionsAction:c().func.isRequired,device:c().shape({type:c().string}),deviceAccount:c().string.isRequired,deviceBackUrl:c().string,devicesCallStatus:c().string,isDailyMemoriesEnabled:c().bool,isLoading:c().bool,fetchCompositeDataAction:c().func.isRequired,fetchSelectedCollectionsAction:c().func.isRequired,selectedCollections:c().arrayOf(c().shape({collectionId:c().string,collectionName:c().string,count:c().number,coverPhotoUrl:c().string})),selectedCollectionsRemoveAction:c().func.isRequired,toggleDailyMemoriesAction:c().func.isRequired}),device_personalization_page_container_defineProperty(DevicePersonalizationPageContainer,"contextTypes",{pageContext:c().string.isRequired});var E=u.A.connect(DevicePersonalizationPageContainer,[{store:p.A,mapToProps:e=>{var{urls:t={}}=e;return{baseAppUrl:t.baseAppUrl}}},{store:h.A,mapToProps:e=>{var{history:t={}}=e;return{deviceBackUrl:o()(t,"location.state.deviceBackUrl")}}}]);const x=(0,l.Ng)(((e,t)=>{var{devicePersonalization:n}=e,{devices:r,devicesCallStatus:o,isDailyMemoriesEnabled:i,selectedCollectionIds:a,selectedCollections:l,selectedCollectionsCallStatus:s}=n,{deviceAccount:c}=t;return{device:r.find((e=>e.deviceAccount===c)),devicesCallStatus:o,isDailyMemoriesEnabled:i,selectedCollections:l,selectedCollectionIds:a,isLoading:s!==f.A.CALL_STATUSES.SUCCESS}}),{clearSelectedCollectionsAction:b.So,fetchCompositeDataAction:b.i$,fetchSelectedCollectionsAction:b.$o,toggleDailyMemoriesAction:b.VO,selectedCollectionsRemoveAction:b.F2})(E)},80075:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(96540),o=n(35994),i=n(97463),a=n(25205),l=n(94451);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AcceptFamilyVaultInvitationDialogContainer extends r.PureComponent{constructor(){super(...arguments),_defineProperty(this,"onAccept",(()=>{var{inviteId:e}=this.props;o.A.emit("respondFamilyVaultInvitation",{inviteId:e,isAccepted:!0})})),_defineProperty(this,"onDecline",(()=>{var{inviteId:e}=this.props;o.A.emit("respondFamilyVaultInvitation",{inviteId:e,isAccepted:!1})})),_defineProperty(this,"onDismiss",(()=>{o.A.emit("closeDialog")}))}render(){var{numFamilyMedia:e,isInviteResponsePending:t,invitationError:n,invitationSucceeded:o}=this.props;return r.createElement(l.A,{isLoading:t,invitationSucceeded:o,errorMessage:n,hasFamilyContent:e>0,onAccept:this.onAccept,onDecline:this.onDecline,onDismiss:this.onDismiss})}}const s=o.A.connect(AcceptFamilyVaultInvitationDialogContainer,[{store:a.A,mapToProps:["isInviteResponsePending","invitationError","invitationSucceeded"]},{store:i.A,mapToProps:["numFamilyMedia"]}])},74474:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(96540),o=n(35994),i=n(58992),a=n(76774),l=n(25205);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class InviteToFamilyVaultDialogContainer extends r.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{canSubmit:!1,currentInputValue:"",isInputBlurred:!0}),_defineProperty(this,"onInvite",(e=>{var{currentInputValue:t}=this.state;e.preventDefault(),o.A.emit("sendFamilyVaultInvitation",{address:t})})),_defineProperty(this,"onSkipClick",(()=>{o.A.emit("closeDialog")})),_defineProperty(this,"onFormInputChange",(e=>{var{value:t}=e.target,n=(0,i.x)(t)||(0,i.O)(t);this.setState({currentInputValue:t,canSubmit:n,isInputBlurred:!1})})),_defineProperty(this,"onInputBlur",(()=>{this.setState({isInputBlurred:!0})}))}render(){var{isInviteResponsePending:e}=this.props,{canSubmit:t,currentInputValue:n,isInputBlurred:o}=this.state,i=Boolean(n&&!t&&o);return r.createElement(a.A,{inputValue:n,onInputChange:this.onFormInputChange,onInputBlur:this.onInputBlur,showInputError:i,canSubmit:t&&!e,onSkipClick:this.onSkipClick,onInvite:this.onInvite})}}const s=o.A.connect(InviteToFamilyVaultDialogContainer,[{store:l.A,mapToProps:["isInviteResponsePending"]}])},90581:(e,t,n)=>{n.d(t,{Ay:()=>v});var r=n(35994),o=n(5556),i=n.n(o),a=n(96540),l=n(49709),s=n(77390),c=n(54260),u=n(66941),d=n(50017),p=n(31864),m=n(33461),GroupSidebarContainer=e=>{var{allowRename:t,group:n,isNewGroup:o,isSharedPage:i,shareToken:s,shouldHideMembers:c}=e;return a.createElement(d.A,{allowRename:t,group:n,isNewGroup:o,isSharedPage:i,onAvatarClick:()=>(e=>{r.A.emit("openDialog",{id:"group-settings",component:a.createElement(p.A,{group:e,eventTag:l.Y$})})})(n),onChangeCoverClick:()=>(e=>{(0,m.A)({group:e})})(n),shareToken:s,shouldHideMembers:c})};GroupSidebarContainer.propTypes={allowRename:i().bool,group:i().instanceOf(u.A),isNewGroup:i().bool,isSharedPage:i().bool,shareToken:i().string,shouldHideMembers:i().bool};class GroupsSidebarContainerConnector extends a.PureComponent{constructor(e){super(e);var{isSharedPage:t}=this.props,n=t?{store:c.A,mapToProps:["group","shareToken"]}:{store:s.A,mapToProps:["group"]};this.ConnectedComponent=r.A.connect(GroupSidebarContainer,n)}render(){var{ConnectedComponent:e}=this;return a.createElement(e,this.props)}}const v=GroupsSidebarContainerConnector},77319:(e,t,n)=>{n.d(t,{Ay:()=>h});var r=n(58156),o=n.n(r),i=n(35994),a=n(5556),l=n.n(a),s=n(96540),c=n(49709),u=n(93834),d=n(77390),p=n(66941),m=n(54260),v=n(25395),GroupSidebarMembersContainer=e=>{var{group:t,isSharedPage:n,members:r,shouldHideMembers:a}=e;if(a||!r||!t)return null;var l=!1;if(!n){var d=t.belongsToCurrentUser();l=!o()(t,"groupPreferences.isJoinRestricted")||d}return s.createElement(v.A,{onAddMembersClick:()=>(e=>{i.A.emit("openDialog",{id:"invite-to-group",component:s.createElement(u.A,{group:e,eventTag:c.Y$})})})(t),group:t,members:r,shouldShowAddMembersButton:l})};GroupSidebarMembersContainer.propTypes={group:l().instanceOf(p.A),isSharedPage:l().bool,members:l().arrayOf(l().shape({avatar:Object,createdBy:String,createdDate:String,customerId:String,groupId:String,lastViewStatus:String,lastViewedDate:String,modifiedBy:String,modifiedDate:String,profile:Object,role:String,version:Number})),shouldHideMembers:l().bool};class GroupSidebarMembersContainerConnector extends s.PureComponent{constructor(e){super(e);var{isSharedPage:t}=this.props,n=t?{store:m.A,mapToProps:e=>{var{group:t}=e;return{group:t,members:t&&t.featuredMembers}}}:{store:d.A,mapToProps:["group","members"]};this.ConnectedComponent=i.A.connect(GroupSidebarMembersContainer,n)}render(){var{ConnectedComponent:e}=this;return s.createElement(e,this.props)}}const h=GroupSidebarMembersContainerConnector},95785:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(96540),o=n(5556),i=n.n(o),a=n(14324),l=n(35994),s=n(71086),c=n(74169),u=n(38915),d=n(20939),p=n(36482),m=["children","height","href","isSelectable","model","onLinkClick","selection","selectFromAnywhere","selectMode","showShareList","width"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var{isIOS:v}=c.jO||{};class AlbumSelectionContainer extends p.C{render(){var e=this.props,{children:t,height:n,href:o,isSelectable:i,model:a,onLinkClick:l,selection:c,selectFromAnywhere:p,selectMode:h,showShareList:g,width:f}=e,y=_objectWithoutProperties(e,m),b=s.A.getProperty("printingMode"),P=a&&c.isSelected(a.id);return r.createElement(d.A,_extends({},y,{showShareList:g,model:a,width:f,height:n,isSelected:P}),a&&r.createElement(u.A,{showSelectorAtMobile:v,id:a.id,isSelected:P,selectFromAnywhere:!b&&(p||h),isSelectable:i,href:o,onSelectClick:this.onSelectClick,onLinkClick:l,onLongPress:this.onLongPress}),t)}}_defineProperty(AlbumSelectionContainer,"propTypes",_objectSpread(_objectSpread({},p.C.propTypes),{},{showShareList:i().bool,height:i().number,width:i().number}));const h=l.A.connect(AlbumSelectionContainer,{store:a.A,mapToProps:["selection","selectMode"]})},88859:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(96540),o=n(5556),i=n.n(o),a=n(14324),l=n(35994),s=n(74169),c=n(38915),u=n(87937),d=n(74985),p=n(36482);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var{isIOS:m}=s.jO||{};class FaceSelectionContainer extends p.C{render(){var{model:e,href:t,allowRename:n,selectFromAnywhere:o,selectMode:i,selection:a,isSelectable:l,onLinkClick:s}=this.props,u=e&&a.isSelected(e.id);return r.createElement(d.A,{person:e,cdsClusterId:e.id,name:e.searchData.clusterName,allowRename:n,isSelected:u,count:e.count},r.createElement(c.A,{showSelectorAtMobile:m,id:e.id,isSelected:u,selectFromAnywhere:o||i,isSelectable:l,href:t,onSelectClick:this.onSelectClick,onLinkClick:s,onLongPress:this.onLongPress}))}}_defineProperty(FaceSelectionContainer,"propTypes",_objectSpread(_objectSpread({},p.C.propTypes),{},{model:i().instanceOf(u.A)})),_defineProperty(FaceSelectionContainer,"defaultProps",_objectSpread(_objectSpread({},p.C.defaultProps),{},{allowRename:!0}));const v=l.A.connect(FaceSelectionContainer,{store:a.A,mapToProps:["selection","selectMode"]})},4256:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(96540),o=n(5556),i=n.n(o),a=n(14324),l=n(35994),s=n(71086),c=n(21327),u=n(18742),d=n(38915),p=n(3478),m=n(79585),SimpleSelectionContainer=e=>{var{children:t,device:n,height:o,href:i,isSelectable:a=!0,model:s,onLinkClick:c,onShiftClick:u,printingMode:m,selection:v,selectFromAnywhere:h,selectMode:g,width:f}=e,selectOrDeselect=()=>{s&&v&&a&&(v.isSelected(s.id)?l.A.emit("unselectItem",[s]):l.A.emit("selectItem",[s]))},{isIOS:y}=n||{},b=s&&v.isSelected(s.id);return s&&r.createElement(p.A,{model:s,width:f,height:o,isSelected:b},r.createElement("div",{className:"simple-thumbnail-selection"},r.createElement(d.A,{showSelectorAtMobile:y,id:s.id,isSelected:b,isSelectable:a,selectFromAnywhere:!m&&(h||g),href:i,onSelectClick:e=>{if(e.preventDefault(),e.stopPropagation(),e.shiftKey&&u){var t=v.isSelected(s.id);u(s,!t)}else selectOrDeselect()},onLinkClick:c,onLongPress:selectOrDeselect})),t)};SimpleSelectionContainer.propTypes={children:i().node,device:i().shape({isMobile:i().bool,isIOS:i().bool,isMac:i().bool,isWindows:i().bool}),height:i().number.isRequired,href:i().string,isSelectable:i().bool,model:i().instanceOf(m.A),onLinkClick:i().func,onShiftClick:i().func,printingMode:i().bool,selection:i().instanceOf(c.A).isRequired,selectFromAnywhere:i().bool,selectMode:i().bool,width:i().number.isRequired};const v=l.A.connect(SimpleSelectionContainer,[{store:a.A,mapToProps:["selection","selectMode"]},{store:u.A,mapToProps:["device"]},{store:s.A,mapToProps:["printingMode"]}])},36482:(e,t,n)=>{n.d(t,{A:()=>y,C:()=>ThumbnailSelectionContainer});var r=n(96540),o=n(5556),i=n.n(o),a=n(13489),l=n(14324),s=n(35994),c=n(21327),u=n(21572),d=n(74169),p=n(87433),m=n(38915),v=n(32359),h=n(79585),g=n(57427);function asyncGeneratorStep(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var{isIOS:f}=d.jO||{};class ThumbnailSelectionContainer extends r.Component{constructor(){super(...arguments),_defineProperty(this,"state",{error:void 0}),_defineProperty(this,"_retryCount",0),_defineProperty(this,"onImageError",(()=>{var{model:e={}}=this.props,{name:t}=e;this.notify("imageError"),this.setState({error:t}),this.logHealthMetric("ImageLoadFail",1),this._retryCount>0&&this.logHealthMetric("ImageLoadRetry",this._retryCount)})),_defineProperty(this,"onImageLoad",((e,t)=>{var{width:n,model:r,height:o}=this.props,{id:i}=r;(0,v.xe)(i,e.target.src,n*o),this._retryCount>0&&this.logHealthMetric("ImageLoadRetry",this._retryCount),this.notify("imageLoaded",t)})),_defineProperty(this,"onImageCancel",(()=>{this.notify("imageCancel")})),_defineProperty(this,"onImageStart",(()=>{this.notify("imageStart")})),_defineProperty(this,"onImageRetry",(()=>{this._retryCount+=1})),_defineProperty(this,"onSelectClick",(e=>{var{model:t,selection:n,onShiftClick:r}=this.props;(e.preventDefault(),e.stopPropagation(),e.shiftKey&&r)?r(t,!n.isSelected(t.id)):this.selectOrDeselect()})),_defineProperty(this,"registerElement",(e=>{this._el=e})),_defineProperty(this,"onLongPress",(()=>{this.selectOrDeselect()})),_defineProperty(this,"onPlayClick",(()=>{var{model:e}=this.props;s.A.emit("playVideo",e.id)}))}isSelectionAllowed(){var{isSelectable:e,selectMode:t,requireSelectMode:n}=this.props;return n?t:e}selectOrDeselect(){var{model:e,selection:t}=this.props;e&&t&&this.isSelectionAllowed()&&(t.isSelected(e.id)?s.A.emit("unselectItem",[e]):s.A.emit("selectItem",[e]))}logHealthMetric(e,t){a.A.log({name:e,value:t})}notify(e,t){var n=this;return function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var{imageStatusListener:r}=n.context,{model:o={}}=n.props,{id:i}=o;if(r){var a=Date.now();yield!0,r(e,i,n._el,a,t)}}))()}render(){var e,{error:t}=this.state,{width:n,height:o,model:i,children:a,selection:l,selectFromAnywhere:s,href:c,selectMode:d,onLinkClick:h}=this.props,y=window.devicePixelRatio||1,b=Math.round(n*y),P=Math.round(o*y),_=i?i.getFormattedPreviewUrl({width:b,height:P,fill:!0}):void 0,A=!_,S=i&&i.contentType===g.y.VIDEO,C=_?(0,v.p)(i.id,_,n*o):_,O=i&&l.isSelected(i.id),w=S?(0,u.A)("amazon-photos-video"):(0,u.A)("amazon-photos-photo");return r.createElement(p.A,{width:n,height:o,error:t,src:C,isPlaceholder:A,onLoad:this.onImageLoad,onError:this.onImageError,onStart:this.onImageStart,onCancel:this.onImageCancel,onRetry:this.onImageRetry,registerElement:this.registerElement,isSelected:O},i&&r.createElement(m.A,{showSelectorAtMobile:f,id:i.id,isSelected:O,selectFromAnywhere:s||d,isSelectable:this.isSelectionAllowed(),href:c,showPlayIcon:S,onSelectClick:this.onSelectClick,onLinkClick:h,onLongPress:this.onLongPress,onPlayClick:this.onPlayClick,additionalText:i?null===(e=i.mediaProperties)||void 0===e?void 0:e.formattedDuration:void 0,ariaLabel:w}),a)}}_defineProperty(ThumbnailSelectionContainer,"propTypes",{model:i().instanceOf(h.A),width:i().number.isRequired,height:i().number.isRequired,selection:i().instanceOf(c.A).isRequired,children:i().node,selectFromAnywhere:i().bool,href:i().string,isSelectable:i().bool,selectMode:i().bool,requireSelectMode:i().bool,onShiftClick:i().func,onLinkClick:i().func}),_defineProperty(ThumbnailSelectionContainer,"defaultProps",{isSelectable:!0,requireSelectMode:!1}),_defineProperty(ThumbnailSelectionContainer,"contextTypes",{imageStatusListener:i().func});const y=s.A.connect(ThumbnailSelectionContainer,{store:l.A,mapToProps:["selection","selectMode"]})},90426:(e,t,n)=>{n.d(t,{A:()=>subscription_card_container});var r=n(96540),o=n(54318),i=n(11741),a=n.n(i),l=n(62193),s=n.n(l),c=n(58156),u=n.n(c),d=n(5556),p=n.n(d),m=n(99227),v=n.n(m),h=n(95093),g=n.n(h),f=n(35994),y=n(18742),b=n(73256),P=n(78258),_=n(96721),A=n(20702),S=n(88975),C=n(7908),O=n(17117),w=n(99775),D=n(97042),T=n(57497),k=n(89873),j=n(38530),E=n(94788),x=n(21572);const toggle_auto_renew_dialog=e=>{var{cancelButtonName:t,cancelButtonLabelStringId:n,confirmButtonName:o,confirmButtonLabelStringId:i,dialogName:a,dialogBodyTextStringId:l,dialogBodyTextStringParameters:s=[],dialogHeadingStringId:c,onConfirmPress:u}=e;return r.createElement(j.A,{name:a,heading:r.createElement(E.A,null,c),buttons:[{name:t,className:"button-secondary",label:(0,x.A)(n)},{name:o,label:(0,x.A)(i),onClick:u}]},r.createElement("p",null,(0,x.A)(l,s)))};const enable_auto_renew_dialog=e=>{var{formattedBillDate:t,formattedPrice:n,formattedSize:o,isMonthlyPlan:i,onConfirmPress:a}=e,l="amazon-photos-storage-auto-renewal-enable-confirmation";return i&&(l="amazon-photos-storage-auto-renewal-enable-confirmation-monthly"),r.createElement(toggle_auto_renew_dialog,{cancelButtonName:"cancel-enable-auto-renew",cancelButtonLabelStringId:"amazon-photos-cancel",confirmButtonName:"enable-auto-renew",confirmButtonLabelStringId:"amazon-photos-storage-enable-auto-renewal",dialogBodyTextStringId:l,dialogBodyTextStringParameters:[t,n,o],dialogName:"auto-renew-dialog",dialogHeadingStringId:"amazon-photos-storage-enable-auto-renewal-title",onConfirmPress:a})};const disable_auto_renew_dialog=e=>{var{formattedBillDate:t,formattedSize:n,onConfirmPress:o}=e;return r.createElement(toggle_auto_renew_dialog,{cancelButtonName:"cancel-disable-auto-renew",cancelButtonLabelStringId:"amazon-photos-cancel",confirmButtonName:"disable-auto-renew",confirmButtonLabelStringId:"amazon-photos-storage-disable-auto-renewal",dialogBodyTextStringId:"amazon-photos-storage-auto-renewal-disable-confirmation",dialogBodyTextStringParameters:[t,n],dialogName:"disable-auto-renew",dialogHeadingStringId:"amazon-photos-storage-disable-auto-renewal-title",onConfirmPress:o})};var M=n(39570),I=n(46709);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class CdsSubscriptionCardContainer extends T.qy{constructor(){super(...arguments),_defineProperty(this,"onEnableAutoRenew",(()=>{var{currentPlan:e}=this.props,{formattedBillDate:t,formattedPrice:n,formattedSize:o}=this;f.A.emit("openDialog",{id:"enable-auto-renew",component:r.createElement(enable_auto_renew_dialog,{formattedBillDate:t,formattedPrice:n,formattedSize:o,isMonthlyPlan:"month"===u()(e,"billingSchedule.billingPeriod.timeInterval","").toLowerCase(),onConfirmPress:()=>f.A.emit("enableAutoRenew")})})})),_defineProperty(this,"onChangePaymentClick",(()=>{if(this.didOpenMFAPlanBlockedDialog())return!1})),_defineProperty(this,"onDisableAutoRenew",(()=>{var{formattedBillDate:e,formattedSize:t}=this;f.A.emit("openDialog",{id:"disable-auto-renew",component:r.createElement(disable_auto_renew_dialog,{formattedBillDate:e,formattedSize:t,onConfirmPress:()=>f.A.emit("disableAutoRenew")})})}))}get formattedBillDate(){var{subscription:e}=this.props,t=null==e?void 0:e.nextBillDate;return t?g()(t).format("LL"):""}get formattedPrice(){var{plan:e}=this.props;if(!e)return"";var{billingSchedule:t}=e,{price:n,currencyCode:r}=t;return(0,b.A)(n,r)}get formattedSize(){var{plan:e}=this.props;if(!e)return"";var{size:t}=e;return v()(t).format("0 ib").replace("i","")}get pendingStatePlan(){var{plans:e,subscription:t,shouldDisplayChangeApplePlanSection:n}=this.props;if(!t||!n)return null;var r=null==t?void 0:t.pendingPlan,{servicePlans:o}=e||{};if(s()(o)||!r||!r.planId||!g()(r.startDate,g().ISO_8601).isValid())return null;var i=o.find((e=>r.planId===e.planId));return i&&i.storageMap&&i.storageMap.Other&&!a()(i.storageMap.Other)?{planSize:v()(i.storageMap.Other).format("0 ib").replace("i",""),startDate:new k.A(r.startDate).longDate}:null}get twoClickCancelLink(){var{cancelPlanUrl:e,shouldDisplayTwoClickCancelFeature:t}=this.props;return t?r.createElement(M.A,{cancelPlanUrl:e}):null}get oneClickCancelButton(){var{shouldDisplayOneClickCancelButton:e}=this.props;return e?r.createElement(I.A,null):null}render(){var e,t,n,{cancelPlanUrl:o,editPaymentMethodUrl:i,paymentHistoryUrl:a,plan:l={},planGroup:s,subscription:c,hasBillingProblem:u,hasPrime:d,isAwaitingPlanCancel:p,isWebView:m,device:v}=this.props;if(!c)return null;var{isAndroid:h,isMobile:g}=v||{},{autoRenewEnabled:f}=c,y=f?this.onDisableAutoRenew:this.onEnableAutoRenew,b=(null==l||null===(e=l.billingSchedule)||void 0===e||null===(t=e.billingPeriod)||void 0===t?void 0:t.timeInterval)||"",_=Boolean((null==s?void 0:s.month)&&(null==s?void 0:s.year));if(p||Object.keys(c).length<1)return null;var{formattedBillDate:w,formattedPrice:T,formattedSize:k,pendingStatePlan:j,onPlanClick:E,onChangePaymentClick:x,isBuyingPlansDisabled:M,twoClickCancelLink:I,oneClickCancelButton:z}=this,L=null==l||null===(n=l.vendorId)||void 0===n?void 0:n.toUpperCase(),N=L===D.el;return m&&(N||h)?r.createElement(O.A,{formattedSize:k,twoClickCancelLink:I}):L===D.aB?r.createElement(S.A,{formattedPrice:T,formattedSize:k,isMobile:g,subscriptionUrl:(0,P.x8)(),pendingStatePlan:j}):L===D.HN?r.createElement(C.A,{formattedPrice:T,formattedSize:k,productId:(null==l?void 0:l.vendorSku)||""}):r.createElement(A.A,{autoRenewEnabled:f,billingInterval:b.toLowerCase(),cancelPlanUrl:o,editPaymentMethodUrl:i,formattedBillDate:w,formattedPrice:T,formattedSize:k,hasBillingProblem:u,hasMonthlyAndYearlyPlans:_,hasPrime:d,isBuyingPlansDisabled:M,onChangeIntervalClick:E,onAutoRenewChange:y,onChangePaymentClick:x,paymentHistoryUrl:a,twoClickCancelLink:I,oneClickCancelButton:z})}}_defineProperty(CdsSubscriptionCardContainer,"propTypes",{cancelPlanUrl:p().string,editPaymentMethodUrl:p().string,paymentHistoryUrl:p().string,plan:w.EL,planGroup:p().shape({month:w.EL,year:w.EL,size:p().number}),subscription:w.mq,hasBillingProblem:p().bool,isAwaitingPlanCancel:p().bool,isGettingStorageData:p().bool,currentPlan:w.EL,hasPrime:p().bool,plans:p().shape({servicePlans:p().arrayOf(w.EL)}),shouldDisplayChangeApplePlanSection:p().bool,shouldDisplayTwoClickCancelFeature:p().bool,device:p().shape({isMobile:p().bool.isRequired,isTablet:p().bool.isRequired,isIOS:p().bool.isRequired}),isWebView:p().bool});const z=f.A.connect(CdsSubscriptionCardContainer,[{store:_.A,mapToProps:e=>{var{activePlan:t={},hasBillingProblem:n,isAwaitingPlanCancel:r,isGettingStorageData:o,currentPlan:i,hasPrime:a,plans:l,shouldDisplayChangeApplePlanSection:s,shouldDisplayTwoClickCancelFeature:c,shouldDisplayOneClickCancelButton:u}=e;return{cancelPlanUrl:null==t?void 0:t.cancelPlanUrl,editPaymentMethodUrl:null==t?void 0:t.editPaymentMethodUrl,paymentHistoryUrl:null==t?void 0:t.paymentHistoryUrl,plan:null==t?void 0:t.plan,planGroup:null==t?void 0:t.planGroup,subscription:null==t?void 0:t.subscription,hasBillingProblem:n,isAwaitingPlanCancel:r,isGettingStorageData:o,currentPlan:i,hasPrime:a,plans:l,shouldDisplayChangeApplePlanSection:s,shouldDisplayTwoClickCancelFeature:c,shouldDisplayOneClickCancelButton:u}}},{store:y.A,mapToProps:["device","isWebView"]}]);var L=n(37763),N=n(17667),R=n(73725),F=n(71560),B=n(14724),U=n(95871),G=n(58331),q=n(76202),V=n(81412),W=n(96166),calculatePlanSavings=e=>{var t,n;if(!e.month||!e.year)return 0;var r=12*(null===(t=e.month)||void 0===t?void 0:t.price),o=null===(n=e.year)||void 0===n?void 0:n.price,i=Math.floor(100*(1-o/r));return i<0?0:i};const pss_subscription_card_container=()=>{var e,t=(0,U.jL)(),n=(0,U.GV)(F.sB),o=(0,U.GV)(F.Df),i=(0,U.GV)(F.pn),a=(0,U.GV)(F.Mk),l=(0,U.GV)(F.iQ),s=(0,U.GV)(B.n9),c=(0,U.GV)(F.bk),u=N.A.isOn("mfa-block-plans"),d=y.A.getProperty("urls.cancelPlan"),p=y.A.getProperty("urls.billingHistory");if(!n)return null;var{isAutoRenewEnabled:m,activeContract:h,activePlan:_,nextBillDetails:O}=n;if(!_||!h)return null;var{storage:w,subscriptionPeriod:T}=_,{amount:k,currencyCode:j}=h;k&&j||R.A.error(V.Zf,"Missing required fields amount or currencyCode from PSS subscription"),c===q.Z.FAILED&&f.A.emit("showToast",{message:(0,x.A)("amazon-photos-generic-service-error"),className:"error"});var E=(0,b.A)(k,j),z=v()(w).format("0 ib").replace("i",""),K=O?g()(O.billDate).format("LL"):"",H=(0,G.dZ)(n),Q=Boolean((null==s?void 0:s.month)&&(null==s?void 0:s.year)),Y=null===(e=_.vendorId)||void 0===e?void 0:e.toUpperCase(),showMfaBlockPlansDialog=()=>{(0,L.A)((0,x.A)("amazon-photos-mfa-purchase-blocked"),{name:"mfa-purchase-block",heading:(0,x.A)("amazon-photos-error"),buttons:["ok"]})},Z=y.A.getProperty("device")||{},{isMobile:$}=Z;return Y===D.aB?r.createElement(S.A,{formattedPrice:E,formattedSize:z,isMobile:$,subscriptionUrl:(0,P.x8)()}):Y===D.HN?r.createElement(C.A,{formattedPrice:E,formattedSize:z,productId:_.vendorSku||""}):([D.HN,D.aB,D.el].includes(Y)||R.A.error(V.Zf,"Unknown vendor ID for current PSS subscription"),r.createElement(A.A,{autoRenewEnabled:m,billingInterval:T.toLowerCase(),cancelPlanUrl:d,editPaymentMethodUrl:H,formattedBillDate:K,formattedPrice:E,formattedSize:z,hasBillingProblem:o,hasMonthlyAndYearlyPlans:Q,hasPrime:i,isBuyingPlansDisabled:u,onChangeIntervalClick:()=>{s?f.A.emit("openDialog",r.createElement(W.A,{planGroup:s,currentPlanId:null==_?void 0:_.planId,planSavings:calculatePlanSavings(s),onPlanSkuSelect:(e,t)=>{u?showMfaBlockPlansDialog():window.location.href=(0,G.S8)(e,t)}})):R.A.error(V.Zf,"Missing Current Subscription Plan Offer Group when trying to change interval of PSS Subscription")},onAutoRenewChange:()=>{var e={id:"enable-auto-renew",component:r.createElement(enable_auto_renew_dialog,{formattedBillDate:K,formattedPrice:E,formattedSize:z,isMonthlyPlan:T===D.R0,onConfirmPress:()=>t((0,F.O2)(!0))})};m&&(e={id:"disable-auto-renew",component:r.createElement(disable_auto_renew_dialog,{formattedBillDate:K,formattedSize:z,onConfirmPress:()=>t((0,F.O2)(!1))})}),f.A.emit("openDialog",e)},onChangePaymentClick:()=>{u&&showMfaBlockPlansDialog()},paymentHistoryUrl:p,toggleRenewalPending:c===q.Z.PENDING,oneClickCancelButton:l?r.createElement(I.A,null):null,twoClickCancelLink:a?r.createElement(M.A,{cancelPlanUrl:d}):null}))};const subscription_card_container=()=>(0,o.D4)()?r.createElement(pss_subscription_card_container,null):r.createElement(z,null)},96166:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(96540),o=n(5556),i=n.n(o),a=n(35994),l=n(99775),s=n(92378);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ChoosePlanIterationDialogContainer extends r.PureComponent{constructor(e){var t,n,r;super(e),_defineProperty(this,"onCancelClick",(()=>{a.A.emit("closeDialog")})),_defineProperty(this,"onConfirmClick",(()=>{var{currentPlanId:e,onPlanSkuSelect:t,redirectOverride:n}=this.props,{selectedPlan:r}=this.state;a.A.emit("closeDialog"),t(r,Boolean(e),n)})),_defineProperty(this,"onPlanClick",(e=>{this.setState({selectedPlan:e})}));var{planGroup:o,currentPlanId:i}=e,l=i===((null===(t=o.month)||void 0===t||null===(n=t.plan)||void 0===n?void 0:n.planId)||(null===(r=o.month)||void 0===r?void 0:r.planId))?o.year:o.month;this.state={selectedPlan:l}}render(){var{currentPlanId:e,planGroup:t,planSavings:n}=this.props,{selectedPlan:o}=this.state;return r.createElement(s.A,{selectedPlan:o,currentPlanId:e,planGroup:t,planSavings:n,onCancelClick:this.onCancelClick,onConfirmClick:this.onConfirmClick,onPlanClick:this.onPlanClick})}}_defineProperty(ChoosePlanIterationDialogContainer,"propTypes",{planGroup:i().shape({size:i().number.isRequired,month:i().oneOfType([l.EL,l.$m]).isRequired,year:i().oneOfType([l.EL,l.$m]).isRequired}).isRequired,planSavings:i().number,currentPlanId:i().string,onPlanSkuSelect:i().func.isRequired,redirectOverride:i().string});const c=ChoosePlanIterationDialogContainer},86852:(e,t,n)=>{n.d(t,{Ie:()=>CurrentPlanBannerContainer});var r=n(96540),o=n(99227),i=n.n(o),a=n(63734),l=n(73256),s=n(21572),c=n(97042),u=n(52684),d=n(96721),p=n(71560),m=n(95871),v=n(54318),h=n(62193),g=n.n(h),f=n(17667),y=n(5556),b=n.n(y),P=n(73765),_=n(14724),A=n(58331),SwitchPlanLinkContainer=e=>{var t,n,o,i,{className:l}=e,{currentPlan:u,currentPlanGroup:h}=(0,a.N)(d.A,(e=>({currentPlan:e.currentPlan,currentPlanGroup:e.currentPlanGroup}))),y=(0,m.GV)(p.eF),b=(0,m.GV)(_.n9);if(!g()(u)&&null!=u&&u.isExternallyManaged)return null;var S=Boolean((null==b?void 0:b.month)&&(null==b?void 0:b.year))||Boolean((null==h?void 0:h.month)&&(null==h?void 0:h.year)),C=f.A.isOn(v.jy.MFABlockPlanSubs);if(g()(u)&&g()(y)||!S||C)return null;var O=(null==y?void 0:y.planId)||(null==u?void 0:u.planId);if(g()(b)&&g()(h))return null;var w,D=(null==y||null===(t=y.activePlan)||void 0===t?void 0:t.subscriptionPeriod)===c.R0||O===(null==h||null===(n=h.month)||void 0===n?void 0:n.planId),T=(null==y||null===(o=y.activePlan)||void 0===o?void 0:o.subscriptionPeriod)===c.e9||O===(null==h||null===(i=h.year)||void 0===i?void 0:i.planId);if(!D&&!T)return null;w=D?(0,v.D4)()?(0,A.S8)(null==b?void 0:b.year,!0):h.year.purchasePlanUrl:(0,v.D4)()?(0,A.S8)(null==b?void 0:b.month,!0):h.month.purchasePlanUrl;var k=D?"amazon-photos-storage-plan-card-switch-billing-annual-save":"amazon-photos-storage-plan-card-switch-billing-monthly",j=D?"annual":"monthly";return r.createElement(P.A,{className:l,eventTag:j,linkText:(0,s.A)(k),url:w})};SwitchPlanLinkContainer.propTypes={className:b().string};const S=SwitchPlanLinkContainer,C="current-plan-banner-container-module__currentPlanBannerContainer__a0Zob",O="current-plan-banner-container-module__currentPlanBanner__Ul7d0",w="current-plan-banner-container-module__planSize__err1E",D="current-plan-banner-container-module__planPrice__uEfFF",T="current-plan-banner-container-module__price__T60vo";var isEmptyPlan=e=>!e||0===Object.keys(e).length,getPlanPrice=(e,t)=>{var n,r,o,i,a,c,d;if((0,v.D4)()&&isEmptyPlan(t)||!(0,v.D4)()&&isEmptyPlan(e))return(0,s.A)("amazon-photos-storage-plan-price-complimentary");var p=(null==t||null===(n=t.activeContract)||void 0===n?void 0:n.amount)||(null==e||null===(r=e.billingSchedule)||void 0===r?void 0:r.price),m=(null==t||null===(o=t.activeContract)||void 0===o?void 0:o.currencyCode)||(null==e||null===(i=e.billingSchedule)||void 0===i?void 0:i.currencyCode),h=(null==t||null===(a=t.activePlan)||void 0===a?void 0:a.subscriptionPeriod)||(null==e||null===(c=e.billingSchedule)||void 0===c||null===(d=c.billingPeriod)||void 0===d?void 0:d.timeInterval);if(!p||!m||!h)return null;var g="string"==typeof p?parseFloat(p):p;if(Number.isNaN(g))return null;var f=(0,u.cQ)(h,!1);if(!f)return null;var y=(0,l.A)(g,m);return(0,s.A)(f,[y])},getPlanSize=(e,t)=>{var n,r=(null==t||null===(n=t.activePlan)||void 0===n?void 0:n.storage)||(null==e?void 0:e.size);return i()(r||c.T4).format("0 ib")},CurrentPlanBannerContainer=()=>{var e=(0,m.GV)(p.eF),{currentPlan:t,storageDataRetrievalTimestamp:n}=(0,a.N)(d.A,(e=>({currentPlan:e.currentPlan,storageDataRetrievalTimestamp:e.storageDataRetrievalTimestamp}))),{planSize:o,planPrice:i}=(0,r.useMemo)((()=>(0,v.D4)()||n?{planPrice:getPlanPrice(t,e),planSize:getPlanSize(t,e)}:{planSize:null,planPrice:null}),[t,e,n]);return r.createElement("div",{className:C},r.createElement("div",{className:O},r.createElement("div",{className:w},o),r.createElement("div",{className:D},r.createElement("div",null,(0,s.A)("amazon-photos-storage-plan-card-switch-current-plan")),r.createElement("div",{className:T},i)),r.createElement(S,{className:"desktop"})),r.createElement(S,{className:"mobile"}))}},95689:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(5556),o=n.n(r),i=n(96540),a=n(29745);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class IAPWaitBannerContainer extends i.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{hidden:!1}),_defineProperty(this,"onCloseClick",(()=>{this.setState({hidden:!0})}))}render(){var{purchaseType:e}=this.props,{hidden:t}=this.state;return i.createElement(a.A,{hidden:t,onCloseClick:this.onCloseClick,purchaseType:e})}}_defineProperty(IAPWaitBannerContainer,"propTypes",{purchaseType:o().string});const l=IAPWaitBannerContainer},46143:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(35994),o=n(18742),i=n(96331);const a=r.A.connect(i.A,[{store:o.A,mapToProps:e=>{var{urls:t={}}=e;return{termsOfUseUrl:t.termsOfUse}}}])},48726:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(96540),o=n(35994),i=n(71468),a=n(14724),l=n(8336),s=n(96721),c=n(49434),u=n(52684);const d=o.A.connect((e=>{var{allPaidPlanGroups:t,allPaidPlans:n,currentPlan:s,currentPlanGroup:d,hasPrime:p,isWebView:m,totalBillableBytes:v,quota:h}=e,g=(0,i.d4)(a.gV);return r.createElement(c.A,{allPaidPlanGroups:g.length?g:t,allPaidPlans:n,currentPlan:s,currentPlanGroup:d,hasPrime:p,isWebView:m,totalBillableBytes:v,quota:h,onLinkClick:()=>{o.A.emit("openDialog",{id:"plan",component:l.A})},onUnavailablePlanClick:u.Rb})}),[{store:s.A,setup:()=>o.A.emit("getStorage"),mapToProps:["allPaidPlans","allPaidPlanGroups","totalBillableBytes","currentPlan","currentPlanGroup","hasPrime","quota"]}])},8516:(e,t,n)=>{n.d(t,{F:()=>ManageStorageCancelPlanContainer});var r=n(96540),o=n(63734),i=n(35994),a=n(47389),l=n(18742),s=n(21572),c=n(96721),u=n(95871),d=n(71560),p=n(46581),m=n(54318),v=n(76202),ManageStorageCancelPlanContainer=e=>{var{backUrl:t}=e,n=(0,u.jL)(),h=(0,u.GV)(d.eF),g=(0,u.GV)(d.bk),f=(0,u.GV)(d.uL),{currentPlan:y,currentSubscription:b,shouldDisplayTwoClickCancelFeature:P}=(0,o.N)(c.A,(e=>({currentPlan:e.currentPlan,currentSubscription:e.currentSubscription,shouldDisplayTwoClickCancelFeature:e.shouldDisplayTwoClickCancelFeature}))),{urls:_,isWebView:A}=(0,o.N)(l.A,(e=>({urls:e.urls,isWebView:e.isWebView})));g!==v.Z.FAILED&&f!==v.Z.FAILED||i.A.emit("showToast",{message:(0,s.A)("amazon-photos-generic-service-error"),className:"error"});var backUrl=()=>t||_.storage,goBack=()=>{var e=backUrl();new a.A(e).go(!1,!0,null)};return r.createElement(p.A,{currentSubscription:b,pssSubscription:h,currentPlan:y,storagePlansUrl:_.storagePlans,backUrl:backUrl(),endCurrentPlanImmediately:()=>{(0,m.D4)()?n((0,d.IV)()):i.A.emit("cancelPlan"),goBack()},disableAutoRenew:()=>{(0,m.D4)()?n((0,d.O2)(!1)):i.A.emit("disableAutoRenew"),goBack()},shouldDisplayChangePlanOption:!A||!P})}},85537:(e,t,n)=>{n.d(t,{A:()=>q});var r=n(62193),o=n.n(r),i=n(2404),a=n.n(i),l=n(95093),s=n.n(l),c=n(5556),u=n.n(c),d=n(96540),p=n(56718),m=n(66569),v=n(35994),h=n(47389),g=n(94788),f=n(33218),y=n(21572),b=n(71086),P=n(1683),_=n(97463),A=n(61738),S=n(17667),C=n(18742),O=n(37763),w=n(71468),D=n(96721),T=n(24751),k=n(58331),j=n(19513),E=n(99775),x=n(97042),M=n(83502),I=n(71560),z=n(54318),L=n(76202),N=n(14724),R=n(221),F=["size","currentSubscription","pssSubscription"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=!1,U=!1;class BaseManageStorageOverviewContainer extends d.PureComponent{constructor(){super(...arguments),_defineProperty(this,"onChangePaymentClick",(()=>{if(this.didOpenMFAPlanBlockedDialog())return!1})),_defineProperty(this,"onIAPPlanChangeClick",(()=>{var{isWebView:e,IOSUpgradeInstructionsUrl:t,currentPlan:n,pssSubscription:r}=this.props,o=(null==r?void 0:r.activePlan)||n,i=(null==o?void 0:o.vendorId)||"",a=(i=i.toUpperCase())===x.aB;if(e&&a)(0,m.A)(t);else{var l=(0,y.A)("amazon-photos-storage-plans-change-info-heading"),s=a?"ios-plan-update-info":"google-plan-update-info";v.A.emit("openDialog",d.createElement(p.A,{name:s,heading:l},d.createElement(M.u,{openLinkInNewTab:!0,vendorId:i})))}}))}componentDidMount(){var{allPaidPlans:e,currentPlan:t,currentSubscription:n,pssSubscription:r,hasPrime:o,query:i={}}=this.props,{mfaFinished:a}=i;if("true"===i.processingError&&this.getProcessingErrorDialog(),"1"===a){new h.A(window.location.pathname,i).setParam("mfaFinished",void 0).go({replace:!0});var l=b.A.getPageContext(),c=s().now();P.A.log("MFAEndProcess",{startTime:c,endTime:c},l)}this.handleMFAAuthorization(e,t,n,r,o,i)}componentDidUpdate(e){var{allPaidPlans:t,allPlansOffers:n,cancelPlanStatus:r,currentPlan:i,currentSubscription:l,expiredSubscription:s,hasBillingProblem:c,hasCancelSucceeded:u,hasPrime:d,isAwaitingPlanCancel:p,isOverQuota:m,isNearQuota:v,pssSubscription:h,query:g}=this.props,f=b.A.getPageContext(),y=!a()(e.currentPlan,i),_=!a()(e.pssSubscription,h),A=!e.hasCancelSucceeded&&u,S=e.cancelPlanStatus!==L.Z.SUCCEEDED&&r===L.Z.SUCCEEDED,C=o()(n)?t:n;(y&&!A||_&&!S)&&this.handleMFAAuthorization(C,i,l,h,d,g),p||!A&&!S||this.getCancelDialog(),s&&!B&&(m?P.A.log("SeenOverQuotaRetentionBanner",null,f):v&&P.A.log("SeenNearQuotaRetentionBanner",null,f),B=!0),c&&!U&&(P.A.log("SeenBillingProblem",null,f),U=!0)}handleMFAAuthorization(e,t,n,r,o,i){var{hasShownSuccessDialog:a}=this.props,l=r||n,s=(null==r?void 0:r.activePlan)||t;(0,k.R1)(e,s,l,o,i,a)}get isBuyingPlansDisabled(){return S.A.isOn(z.jy.MFABlockPlanSubs)}getProcessingErrorDialog(){var e=d.createElement(p.A,{name:"ProcessingErrorDialog",className:"processing-error-dialog",heading:(0,y.A)("amazon-photos-error-fatal-header")},d.createElement(g.A,null,"amazon-photos-generic-service-error"));v.A.emit("openDialog",e)}getCancelDialog(){var e,{cancelledPlan:t,isWebView:n,language:r,expiredSubscription:o,expiredPlan:i}=this.props,a=(null==t?void 0:t.statusStartDate)||(null==o?void 0:o.statusStartDate),l=(null==t||null===(e=t.activePlan)||void 0===e?void 0:e.storage)||(null==i?void 0:i.size),c=(0,f.A)(l),u=s()(a).format("LL"),p=d.createElement(T.A,{isWebView:n,userLocale:r,planSize:c,planStart:u});v.A.emit("openDialog",p)}getNotifications(){var{allPaidPlans:e,allPlansOffers:t,currentPlan:n,currentSubscription:r,expiredPlan:o,expiredSubscription:i,hasBillingProblem:a,hasBillingProblemPSS:l,isNearContentDeletionDate:s,isNearQuota:c,isOverQuota:u,isIOS:d,isSimpleStorageRoute:p,isWebView:m,hasPrime:v,query:h,recommendedPlanGroup:g,isFamilySharingQuota:f,pssSubscription:y,validUpgradePlanOfferGroups:b,isTeen:P}=this.props,_={allPaidPlans:e,allPlansOffers:t,currentPlan:n,currentSubscription:r,expiredPlan:o,expiredSubscription:i,hasBillingProblem:a,hasBillingProblemPSS:l,isNearContentDeletionDate:s,isNearQuota:c,isOverQuota:u,isIOS:d,isSimpleStorageRoute:p,isWebView:m,hasPrime:v,query:h,recommendedPlanGroup:g,isFamilySharingQuota:f,pssSubscription:y,isBuyingPlansDisabled:this.isBuyingPlansDisabled,onChangePaymentClick:this.onChangePaymentClick,validUpgradePlanOfferGroups:b,isTeen:P},A=Boolean(y&&(null==y?void 0:y.isAutoRenewEnabled)),S=Boolean(r&&(null==r?void 0:r.autoRenewEnabled)),C=A||S,O=y||r,w=this.autoRenewEnabled;return this.autoRenewEnabled=O&&C,(0,R.e)(_,C,w)}didOpenMFAPlanBlockedDialog(){return!!this.isBuyingPlansDisabled&&((0,O.A)((0,y.A)("amazon-photos-mfa-purchase-blocked"),{name:"mfa-purchase-block",heading:(0,y.A)("amazon-photos-error"),buttons:["ok"]}),!0)}render(){var e=this.props,{size:t={},currentSubscription:n,pssSubscription:r}=e,o=_objectWithoutProperties(e,F),i=this.getNotifications(),a=(0,k.Js)(n),l=r||n;return d.createElement(j.A,_extends({},o,{currentSubscription:l,showMFABanner:a,notifications:i,isMobile:Boolean(t.mobile),onIAPPlanChangeClick:this.onIAPPlanChangeClick}))}}_defineProperty(BaseManageStorageOverviewContainer,"propTypes",{quota:E.ju,storageCards:u().any,language:u().string,hasCancelSucceeded:u().bool,isAwaitingPlanCancel:u().bool,hasBillingProblem:u().bool,hasBillingProblemPSS:u().bool,isNearContentDeletionDate:u().bool,isNearQuota:u().bool,isOverQuota:u().bool,hasPrime:u().bool,isIOS:u().bool,isSimpleStorageRoute:u().bool,isWebView:u().bool,query:u().shape({ref_:u().string,mfaFinished:u().string,cdwTransactionType:u().string,gracePeriod:u().string,processingError:u().string}),allPaidPlans:u().arrayOf(E.EL),upgradePlans:u().arrayOf(E.mq),expiredPlan:E.EL,currentPlan:E.EL,recommendedPlanGroup:u().shape({size:u().number,month:E.EL,year:E.EL}),expiredSubscription:E.mq,currentSubscription:E.mq,totalBillableBytes:u().number,isPrimeExperienceAvailable:u().bool,isTeen:u().bool,hideMFANotifications:u().bool,size:u().shape({mobile:u().bool})});var G=(0,w.Ng)((e=>({isFamilySharingQuota:(0,I.lc)(e),pssSubscription:(0,I.eF)(e),cancelPlanStatus:(0,I.uL)(e),cancelledPlan:(0,I.r_)(e),allPlansOffers:(0,N.A1)(e),hasBillingProblemPSS:(0,I.Df)(e),validUpgradePlanOfferGroups:(0,N.Wn)(e),hasShownSuccessDialog:(0,I.z2)(e)})))(BaseManageStorageOverviewContainer);const q=v.A.connect(G,[{store:D.A,setup:e=>v.A.emit("getStorage",e)},{store:A.A,mapToProps:["size"]},{store:_.A,mapToProps:["isPrimeExperienceAvailable","isTeen","language"]},{store:C.A,mapToProps:e=>{var{urls:t}=e;return{IOSUpgradeInstructionsUrl:t.IOSUpgradeInstructions}}}])},38777:(e,t,n)=>{n.d(t,{A:()=>P});var r=n(96540),o=n(71468),i=n(35994),a=n(17667),l=n(71086),s=n(1683),c=n(89433),u=n(96721),d=n(71560),p=n(14724),m=n(95871),v=n(76202),h=n(74169),g=n(97042),f=n(54318),{isIOS:y}=h.jO||{},b=.9*g.yp;const P=i.A.connect((e=>{var{allPaidPlans:t,currentSubscription:n,currentPlan:i,recommendedPlanGroup:u,hasPrime:h,isGettingStorageData:g,isNearQuota:P,isOverQuota:_,query:A,quota:S,totalBillableBytes:C,upgradePlanGroups:O}=e,w=(0,m.jL)(),D=(0,o.d4)(d.i3),T=(0,o.d4)(p.aR),k=(0,o.d4)(p.Wn),j=(0,o.d4)(p.A1),E=(0,o.d4)(d.sB);(0,r.useEffect)((()=>{(0,f.D4)()&&(w((0,d.uV)()),w((0,p.PM)()))}),[]);var x=(0,f.D4)()?D!==v.Z.SUCCEEDED||T!==v.Z.SUCCEEDED:g,M=(0,r.useRef)(x);(0,r.useEffect)((()=>{var e;!0===M.current&&!1===x&&(e=_?"OverQuota":P?"NearQuota":"FTUE",s.A.log("SeenSubscriptionOffers".concat(e),{},l.A.getPageContext())),M.current=g}),[x]);var I="C";y&&!g&&C<=b&&(I=a.A.getProperty(f.jy.InAppPurchaseUpsellTreatment));var z=t,L=O,N=n;return(0,f.D4)()&&(z=j,L=k,N=E),r.createElement(c.A,{allPaidPlans:z,currentSubscription:N,currentPlan:i,recommendedPlanGroup:u,hasPrime:h,isGettingStorageData:g,isNearQuota:P,isOverQuota:_,quota:S,totalBillableBytes:C,upgradePlanGroups:L,iosTreatment:I,query:A})}),{store:u.A,setup:()=>{i.A.emit("getStorage",{redirectOverride:"/photos/webview/upgrade"})},mapToProps:["allPaidPlans","currentSubscription","currentPlan","recommendedPlanGroup","hasPrime","isGettingStorageData","isNearQuota","isOverQuota","quota","totalBillableBytes","upgradePlanGroups"]})},57497:(e,t,n)=>{n.d(t,{Ay:()=>I,qy:()=>StoragePlanContainer});var r=n(58156),o=n.n(r),i=n(96540),a=n(5556),l=n.n(a),s=n(71468),c=n(13489),u=n(1683),d=n(35994),p=n(17667),m=n(37763),v=n(21572),h=n(73725),g=n(71086),f=n(96721),y=n(71560),b=n(58331),P=n(73767),_=n(80280),A=n(98310),S=n(14127),C=n(99775),O=n(97042),w=n(62189),D=n(52684),T=n(54318),k=n(96166),j=["isNearQuota","isOverQuota","planGroup","userHasPrime","children"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={allPlans:_.A,upsell:A.A,upsellCard:w.A,recommended:P.A},x="iOSIAPPurchaseFlowInitiated";function logIosIapPurchaseFailure(e){c.A.log({name:"iOSIAPPurchaseFlowFailed",segments:{Error:e}}),h.A.fatal("iOS IAP purchase flow failed. Failure reason: ".concat(e,"."))}class StoragePlanContainer extends i.PureComponent{constructor(){super(...arguments),_defineProperty(this,"openIOSPurchase",((e,t)=>{c.A.log({name:x});var n=o()(window,"webkit.messageHandlers.iOSApplePlanHandler");if(e)if(t)if(n)if(n.postMessage){var{isOverQuotaDowngradeApplePlan:r}=this,{allPaidPlanGroups:i,isAppleDevice:a}=this.props,l=(0,D.Uk)(t,i),s=(0,D._6)(this.currentPlanSize,l);c.A.log({name:"".concat(x,":PurchaseType:").concat(s)});var d=a&&p.A.isOn(T.jy.InAppPurchaseCombined)&&p.A.isOn(T.jy.InAppPurchaseManageStorageSection);n.postMessage(_objectSpread({vendorSKU:e,planId:t},d&&{purchaseType:s})),c.A.log({name:"iOSIAPPurchaseFlowCompleted",segments:{PurchaseType:s}}),function logIosIapBizMetrics(e,t,n){var r={[O.u8.initialPurchase]:"IosIAPPlan",[O.u8.upgrade]:"IosIAPUpgrade",[O.u8.downgrade]:"IosIAPDowngrade",[O.u8.unknown]:"IosIAPUnknown"},o=n?"IosIAPDowngradeOverquota":r[e],i=O.vs[t];o&&u.A.log(o,{eventTag:i},g.A.getPageContext())}(s,l,r)}else logIosIapPurchaseFailure("MissingPostMessage");else logIosIapPurchaseFailure("MissingiOSApplePlanHandler");else logIosIapPurchaseFailure("MissingPlanId");else logIosIapPurchaseFailure("MissingVendorSku")})),_defineProperty(this,"onPlanClick",(()=>{var{defaultStoragePlan:e,planSavings:t}=this,{planGroup:n,redirectOverride:r}=this.props;e.vendorId&&e.vendorId.toUpperCase()===O.aB?this.openIOSPurchase(e.vendorSku,e.planId):this.didOpenMFAPlanBlockedDialog()||(this.currentPlanId&&n.year&&n.month?d.A.emit("openDialog",i.createElement(k.A,{planGroup:n,currentPlanId:this.currentPlanId,planSavings:t,onPlanSkuSelect:this.onPlanSkuSelect,redirectOverride:r})):this.onPlanSkuSelect(e,Boolean(this.currentPlanId),r))})),_defineProperty(this,"onPlanSkuSelect",((e,t,n)=>{var r,o=(null==e||null===(r=e.plan)||void 0===r?void 0:r.vendorId)||(null==e?void 0:e.vendorId);if(o&&o.toUpperCase()===O.aB){var i,a,l=(null==e||null===(i=e.plan)||void 0===i?void 0:i.vendorSku)||(null==e?void 0:e.vendorSku),s=(null==e||null===(a=e.plan)||void 0===a?void 0:a.planId)||(null==e?void 0:e.planId);this.openIOSPurchase(l,s)}else if(!this.didOpenMFAPlanBlockedDialog()){var c,{purchasePlanUrl:u}=e;n&&(c={redirectOverride:n}),u||(u=(0,b.S8)(e,t,!1,c)),window.location.href=u}}))}get PlanDisplayComponent(){var{displayType:e}=this.props;return E[e]}get defaultStoragePlan(){var{planGroup:e={}}=this.props;return e.month||e.year}get planHasEnoughStorage(){var e,{defaultStoragePlan:t}=this,{totalBillableBytes:n=0,quota:r}=this.props;if(!t)return!1;var o=(null===(e=t.plan)||void 0===e?void 0:e.storage)||t.size;if(!r)return null!==o&&o>=n;var i=this.currentPlanSize||0,a=r.quota-i;return null!==o&&!(a+o<n)}get planSavings(){var e,t,n,r,o,i,{planGroup:a}=this.props;if(!a.month||!a.year)return 0;var l=(null===(e=a.month)||void 0===e?void 0:e.price)||(null===(t=a.month)||void 0===t||null===(n=t.billingSchedule)||void 0===n?void 0:n.price),s=(null===(r=a.year)||void 0===r?void 0:r.price)||(null===(o=a.year)||void 0===o||null===(i=o.billingSchedule)||void 0===i?void 0:i.price),c=12*parseFloat(l),u=parseFloat(s),d=Math.floor(100*(1-u/c));return d<0?0:d}get sizeToCounts(){var{planGroup:e}=this.props,{size:t}=e;return{photos:o()(O.$,"".concat(t,".photos"),0),videos:o()(O.$,"".concat(t,".videos"),0)}}get isBuyingPlansDisabled(){return p.A.isOn(T.jy.MFABlockPlanSubs)}get isOverQuotaDowngradeApplePlan(){var{planHasEnoughStorage:e}=this,{isCurrentApplePlanGroupUpgradableAndDowngradable:t}=this.props;return!e&&t}get currentPlanId(){var e,{currentPlan:t,currentSubscription:n}=this.props;return(null==n||null===(e=n.activePlan)||void 0===e?void 0:e.planId)||(null==t?void 0:t.planId)}get currentPlanSize(){var e,{currentPlan:t,currentSubscription:n}=this.props;return(null==n||null===(e=n.activePlan)||void 0===e?void 0:e.storage)||(null==t?void 0:t.size)}didOpenMFAPlanBlockedDialog(){return!!this.isBuyingPlansDisabled&&((0,m.A)((0,v.A)("amazon-photos-mfa-purchase-blocked"),{name:"mfa-purchase-block",heading:(0,v.A)("amazon-photos-error"),buttons:["ok"]}),!0)}render(){var{defaultStoragePlan:e,PlanDisplayComponent:t,planSavings:n,planHasEnoughStorage:r,onPlanClick:o,onPlanSkuSelect:a,sizeToCounts:l,isOverQuotaDowngradeApplePlan:s}=this,c=this.props,{isNearQuota:u,isOverQuota:d,planGroup:p,userHasPrime:m,children:v}=c,h=_objectSpread(_objectSpread({},_objectWithoutProperties(c,j)),{},{storagePlan:e,planGroup:p,onPlanClick:o,onPlanSkuSelect:a,onUnavailablePlanClick:D.Rb,planSavings:n,isPlanDisabled:!r,isNearQuota:u,isOverQuota:d,userHasPrime:m,sizeToCounts:l,isOverQuotaDowngradeApplePlan:s});return!t&&v?v(h):i.createElement(S.A,{attribution:"storage-plan-cards"},i.createElement(t,h))}}_defineProperty(StoragePlanContainer,"propTypes",{children:l().func,currentPlan:C.EL,currentSubscription:C.ZX,displayType:l().oneOf(Object.keys(E)),isNearQuota:l().bool,isOverQuota:l().bool,planGroup:l().shape({size:l().number.isRequired,year:l().oneOfType([C.EL,C.$m]),month:l().oneOfType([C.EL,C.$m])}).isRequired,totalBillableBytes:l().number,userHasPrime:l().bool});var M=(0,s.Ng)((e=>({currentSubscription:(0,y.sB)(e)})))(StoragePlanContainer);const I=d.A.connect(M,{store:f.A,mapToProps:e=>{var{allPaidPlanGroups:t,totalBillableBytes:n,currentPlan:r,isAppleDevice:o,isOverQuota:i,isNearQuota:a,hasPrime:l,isCurrentApplePlanGroupUpgradableAndDowngradable:s,quota:c}=e;return{allPaidPlanGroups:t,totalBillableBytes:n,currentPlan:r,isAppleDevice:o,isOverQuota:i,isNearQuota:a,userHasPrime:l,isCurrentApplePlanGroupUpgradableAndDowngradable:s,quota:c}}})},24406:(e,t,n)=>{n.d(t,{T9:()=>_});var r=n(96540),o=n(56347),i=n(87612),a=n.n(i),l=n(58156),s=n.n(l),c=n(35994),u=n(21572),d=n(18060),p=n(75499),m=n(62460),v=n(29611),h=n(4044),g=n(54318),f=n(95655),y=n(79900),b=n(95871),P=n(76202);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var _=c.A.connect((e=>{var{categories:t,models:n=[]}=e,i=a()(n,(e=>Boolean(e.isPrintablePhoto()))),l=(0,b.jL)(),c=(0,b.GV)(y.qV),d=(0,b.GV)(y.g3);(0,r.useEffect)((()=>{(0,g.L2)()&&d===P.Z.IDLE&&l((0,y.Mq)())}),[l,d]);return r.createElement(o.fS,null,r.createElement(o.dO,null,r.createElement(o.qh,{path:"/third-party-printing/:category",render:t=>{var{match:n}=t,o=s()(n,"params.category");return r.createElement(p.A,_extends({},e,{models:i}),r.createElement(h.A,{category:o,models:i}))}}),r.createElement(o.qh,{path:"/third-party-printing-:type/:vendorName",render:t=>{var{match:n}=t,o=s()(n,"params.vendorName"),a=s()(n,"params.type","external"),l=((e,t)=>t.find((t=>t.vendorName===e)))(o,c);if(!l)return null;var{actionButtonConfig:{siteUrl:d},vendorRedirectionImageUrl:m,displayName:v}=l,g=(0,u.A)("amazon-photos-3p-transition-vendor-message-title",(0,u.A)(v)),y="internal"===a,b=y?f.mm.shop:o.toLowerCase(),P=y?{}:{thirdPartyVendorURL:d};return r.createElement(p.A,_extends({},e,{models:i}),r.createElement(h.A,{category:b,models:i,redirectionImageUrl:m,title:g,urls:P}))}}),r.createElement(o.qh,null,r.createElement(p.A,_extends({},e,{headingText:(0,u.A)("amazon-photos-buy-prints"),models:i}),(0,g.kT)()||(0,g.Sp)()||(0,g.oI)()?(0,g.L2)()&&d===P.Z.PENDING?r.createElement("span",{className:"loading"}):r.createElement(v.A,{vendorList:c}):r.createElement(m.A,{categories:t})))))}),[{store:d.Ay,setup:()=>{c.A.emit("getThirdPartyPrintingProductTypes"),c.A.emit("enterFullScreen")},teardown:()=>{c.A.emit("exitFullScreen")},mapToProps:function mapToProps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{categories:s()(e,"categories",void 0)}}}])},30009:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(7350),o=n.n(r),i=n(96540),a=n(5556),l=n.n(a),s=n(42852),c=n(51158),u=n(61365),d=n(21572),p=n(93857);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ScrollScrubberContainer extends i.Component{constructor(){super(...arguments),_defineProperty(this,"_lastScrollPosition",0),_defineProperty(this,"state",{scrubberPosition:0,dragPosition:void 0,touchDragPosition:void 0,isMarkerVisible:!1,isLabelVisible:!1,isMouseDragging:!1}),_defineProperty(this,"onWindowScroll",o()((e=>{var{currentTarget:t}=e;if(t){var{dragPosition:n,isMarkerVisible:r}=this.state,{scrollY:o}=t,i=this._lastScrollPosition,a=Math.abs(o-i);this._lastScrollPosition=o,a>1e3&&void 0===n&&!r?(this.setState({isMarkerVisible:!0}),this.hideMarker()):r&&void 0===n&&this.hideMarker()}}),500)),_defineProperty(this,"onMouseEnter",(()=>{this.clearTimeouts(),this.setState({isMarkerVisible:!0,isLabelVisible:!0})})),_defineProperty(this,"onMouseLeave",(()=>{var{dragPosition:e}=this.state;void 0!==e&&this.setState({dragPosition:void 0}),this.hideMarker(),this.hideLabel()})),_defineProperty(this,"onMouseMove",(e=>{var t=this._el;if(t){var{clientY:n}=e,{offsetHeight:r,offsetTop:o}=t,i=(n-o)/r*100;i=Math.min(i,100),i=Math.max(i,0),this.setState({dragPosition:i})}})),_defineProperty(this,"onMouseDown",(()=>{var{scrubberPosition:e,dragPosition:t}=this.state;window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this.setState({dragPosition:t||e,isMouseDragging:!0})})),_defineProperty(this,"onMouseUp",(()=>{var{dragPosition:e,touchDragPosition:t}=this.state;this.setState({dragPosition:void 0,touchDragPosition:void 0,isMouseDragging:!1}),this.scrollToPercent(e),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t&&(this.hideLabel(),this.hideMarker())})),_defineProperty(this,"onTouchStart",(e=>{var{scrubberPosition:t,dragPosition:n}=this.state;this.clearTimeouts(),this.setState({dragPosition:n||t,touchDragPosition:e.touches[0].clientY,isLabelVisible:!0})})),_defineProperty(this,"onTouchMove",(e=>{var{touchDragPosition:t,dragPosition:n=0}=this.state,r=e.touches[0].clientY,o=(this._el||{}).clientHeight;if(o&&"number"==typeof t){var i=n+(r-t)/o*100;i=Math.min(i,100),i=Math.max(i,0),this.setState({dragPosition:i,touchDragPosition:r})}})),_defineProperty(this,"setPosition",((e,t)=>{var{scrubberPosition:n}=this.state,{collection:r}=this.props;if(r&&r.count){var o=e/(r.count-(t-e))*100;n!==o&&this.setState({scrubberPosition:o})}})),_defineProperty(this,"registerElement",(e=>{function cancelEvent(e){e.cancelable&&e.preventDefault()}e&&(this._el=e,this._el.addEventListener("contextmenu",(e=>(e.preventDefault(),e.stopPropagation(),!1))),this._el.addEventListener("touchmove",cancelEvent),this._el.addEventListener("touchend",cancelEvent),this._el.addEventListener("touchstart",cancelEvent))}));var{internalRef:e}=this.props;e&&e(this)}componentDidMount(){window.addEventListener("scroll",this.onWindowScroll)}componentWillUnmount(){this.clearTimeouts(),this.clearEventListeners()}getMarkerDates(){var e,t,n,{collection:r,selectedYear:o,selectedMonth:i}=this.props,{count:a,aggregations:l={}}=r,s=[],c=l.time,p=0,m="";if(o&&(m+="".concat(o,"-"),i&&(m+="".concat(i.padStart(2,"0"),"-"))),m&&c&&(c=c.filter((e=>0===e.match.indexOf(m)))),!a||!c||!c.length)return s;for(var v=0;v<c.length;v++){var{match:h,count:g}=c[v],[f,y,b]=h.split("-"),P=0===h.indexOf("1000-01"),_=!1,A=!1,S=void 0,C=void 0;o&&i?n!==b&&(_=!0):o?t!==y?_=!0:n!==b&&(A=!0):e!==f?_=!0:t!==y&&(A=!0),_&&(i?S=(0,u.zT)(h):o?S=(0,u.F4)(h):P||(S=f)),C=P?(0,d.A)("amazon-photos-no-date"):void 0!==b?(0,u.eK)(h):(0,u.Qh)(h);var O=100-p/a*100;p+=g,e=f,t=y,s.unshift({year:f,month:y,day:b,isPrimary:_,isSecondary:A,count:g,position:O,markerLabel:S,fullLabel:C})}return s}getMarkerFromPosition(e,t){for(var n=0;n<t.length;n++)if(t[n].position>=e)return t[n];return t[t.length-1]}getMarkersWithOverlap(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=0,o=0;o<e.length;o++){var i=e[o],a=n[r],{position:l,isPrimary:s}=i,c=!1;if(a)t*((l-a.position)/100)<=20?s&&!a.isPrimary?(a.overlap=!0,r=o):c=!0:r=o;n.push(_objectSpread(_objectSpread({},i),{},{overlap:c}))}return n}clearEventListeners(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}clearTimeouts(){clearTimeout(this.hideMarkerTimeout),clearTimeout(this.hideLabelTimeout)}scrollToPercent(e){var{collection:t,requestScrollToIndex:n}=this.props,{count:r}=t;n(Math.round(e/100*(r-1)))}hideMarker(){clearTimeout(this.hideMarkerTimeout),this.hideMarkerTimeout=setTimeout((()=>this.setState({isMarkerVisible:!1})),3e3)}hideLabel(){clearTimeout(this.hideLabelTimeout),this.hideLabelTimeout=setTimeout((()=>this.setState({isLabelVisible:!1})),3e3)}render(){var{scrubberPosition:e,dragPosition:t,isMarkerVisible:n,isLabelVisible:r,isMouseDragging:o}=this.state,a=this.getMarkerDates();return a.length?i.createElement(p.A,{dates:a,registerElement:this.registerElement,currentPosition:e,dragPosition:t,isMarkerVisible:n,isLabelVisible:r,getMarkerFromPosition:this.getMarkerFromPosition,getMarkersWithOverlap:this.getMarkersWithOverlap,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:o?null:this.onMouseMove,onMouseUp:o?null:this.onMouseUp,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onMouseUp}):null}}_defineProperty(ScrollScrubberContainer,"propTypes",{collection:l().instanceOf(c.A).isRequired,selectedYear:l().string,selectedMonth:l().string,internalRef:l().func,requestScrollToIndex:l().func.isRequired});const m=(0,s.A)(ScrollScrubberContainer)},70471:(e,t,n)=>{n.d(t,{A:()=>g,q:()=>h});var r=n(96540),o=n(5556),i=n.n(o),a=n(21572),l=n(35994),s=n(71468),c=n(16252),u=n(57427),d=n(53388),p=n(87909),m=["models"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v="DeleteNonGroupShareToast",h="deleteNonGroupShare",DeleteNonGroupShareAction=e=>{var{models:t}=e,n=_objectWithoutProperties(e,m),o=(0,s.wA)(),displayCompletionToastAndUpdateView=e=>{var{deletedNodes:t,toastOptions:n}=e;l.A.emit("closeToast",{id:v}),l.A.emit("showToast",n),o((0,p.Bt)(t)),l.A.emit("unselectItem",t)},onProgress=e=>{var{progress:n=0}=e;l.A.emit("showToast",{id:v,name:"ShareLinksDeleteProgressToast",message:(0,a.A)("amazon-photos-shares-list-deletion-initiation-toast",[t.length],t.length),icon:"spinner",progressPercent:n,stay:!0})},{permanentlyDeleteShareLinks:i}=(0,d.Ay)({nodes:t,onSuccess:e=>{var{deletedNodes:t=[]}=e,n={name:"ShareLinksDeleteCompletionToast",className:"success",message:(0,a.A)("amazon-photos-shares-list-deletion-completion-toast",[t.length],t.length),icon:"done-inline",stay:!1};displayCompletionToastAndUpdateView({deletedNodes:t,toastOptions:n})},onFailure:e=>{var{deletedNodes:n=[]}=e,r=1;n.length>1?r=Math.abs(t.length-n.length):t.length>1&&(r=t.length);var o={name:"ShareLinksDeletionFailureToast",className:"fail",message:(0,a.A)("amazon-photos-shares-list-deletion-failed-toast",[r],r),stay:!1};displayCompletionToastAndUpdateView({deletedNodes:n,toastOptions:o})},onProgress});return r.createElement(c.A,_extends({},n,{onClick:()=>{onProgress({progress:0}),i()},label:(0,a.A)("amazon-photos-delete-non-group-share"),name:"delete-links",icon:"delete"}))};DeleteNonGroupShareAction.propTypes={models:i().arrayOf(i().instanceOf(u.A)).isRequired};const g=DeleteNonGroupShareAction},15839:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(58156),o=n.n(r),i=n(7309),a=n.n(i),l=n(96540),s=n(5556),c=n.n(s),u=n(35994),d=n(21572),p=n(94171),m=n(16252),v=n(87937);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=["overlay","header"];class MergePeopleAction extends l.PureComponent{constructor(){super(...arguments),_defineProperty(this,"onClick",(()=>{var{models:e}=this.props,t=a()(e,(e=>e.searchData.clusterName)),n=o()(t,"searchData.clusterName"),r=e.map((e=>e.id));u.A.emit("openDialog",l.createElement(p.A,{clusterIds:r,newName:n}))}))}render(){var{models:e,displayType:t}=this.props,n=t===h[0];return l.createElement(m.A,_extends({},this.props,{displayType:n?t:"header-text",onClick:this.onClick,icon:n?"done":void 0,label:(0,d.A)("amazon-photos-combine"),disabled:1===e.length,name:"combine"}))}}_defineProperty(MergePeopleAction,"featureFlag","people"),_defineProperty(MergePeopleAction,"propTypes",{models:c().arrayOf(c().instanceOf(v.A)).isRequired,displayType:c().oneOf(h)});const g=MergePeopleAction},15761:(e,t,n)=>{n.d(t,{A:()=>Ne});var r=n(50014),o=n.n(r),i=n(58156),a=n.n(i),l=n(96540),s=n(71468),c=n(5556),u=n.n(c),d=n(35994),p=n(14324),m=n(61738),v=n(21327),h=n(32098),g=n(17667),f=n(21572),y=n(51158),b=n(1683),P=n(27236),_=n(13489),A=n(339),S=n(92351),C=n(89933),O=n(16252),w=n(78585),D=n(53980),T=n(57427),k=n(66941),j=n(51315),E=n(63059);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function asyncGeneratorStep(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AddToRecentsAction extends l.PureComponent{constructor(){super(...arguments),_defineProperty(this,"state",{activeAction:null,recentItems:null}),_defineProperty(this,"onItemClick",(e=>{var{models:t,parentModel:n}=this.props,r=n instanceof k.A;e instanceof T.A?new j.A({albumId:e.id,albumName:e.name,showToast:!0,items:t,eventTag:"AddToRecents",removeUnowned:r}).start():e instanceof k.A&&new E.A({items:t,groups:[e],eventTag:"AddToRecents"}).start()})),_defineProperty(this,"onMouseEnter",(e=>{var{onMouseOver:t}=this.props;this.setState({activeAction:e}),t(e)})),_defineProperty(this,"onMouseLeave",(e=>{var{onMouseOut:t}=this.props;this.setState({activeAction:null}),t(e)}))}componentDidMount(){var e=this;return function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var t=yield(0,D.Ay)();e._unMounted||e.setState({recentItems:t})}))()}componentWillUnmount(){this._unMounted=!0}render(){var{size:e={}}=this.props,{activeAction:t,recentItems:n}=this.state,r=e.mobile?6:4,o=n?n.slice(0,r):null;return l.createElement(w.A,_extends({},this.props,{activeAction:t,items:o,onItemClick:this.onItemClick,onMouseOut:this.onMouseLeave,onMouseOver:this.onMouseEnter}))}}_defineProperty(AddToRecentsAction,"propTypes",{onMouseOut:u().func.isRequired,onMouseOver:u().func.isRequired,parentModel:u().oneOfType([u().instanceOf(T.A),u().instanceOf(k.A)]),models:u().arrayOf(u().instanceOf(T.A)),size:u().shape({mobile:u().bool})});const x=d.A.connect(AddToRecentsAction,{store:m.A,mapToProps:["size"]});var M=n(60730),I=n(88339),z=n(54318);function share_action_extends(){return share_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},share_action_extends.apply(this,arguments)}function share_action_defineProperty(e,t,n){return(t=function share_action_toPropertyKey(e){var t=function share_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ShareAction extends l.PureComponent{constructor(){super(...arguments),share_action_defineProperty(this,"onClick",(()=>{var{models:e,parentModel:t,pageContext:n}=this.props,r="Albums"===n,o=new v.A(e);g.A.isOn(z.jy.GroupsEnabled)?d.A.emit("openDialog",l.createElement(M.A,{isAlbums:r,parentModel:t,selection:o})):d.A.emit("openDialog",l.createElement(I.A,{selection:o}))}))}render(){var{models:e,counts:t,parentModel:n}=this.props,r=e.length>1&&t.album>0,o=n instanceof k.A&&t.belongsToUser!==e.length,i=r||o;return l.createElement(O.A,share_action_extends({},this.props,{disabled:i,onClick:this.onClick,label:(0,f.A)("amazon-photos-share-link"),name:"share",icon:"share"}))}}share_action_defineProperty(ShareAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired,pageContext:u().string.isRequired,parentModel:u().oneOfType([u().instanceOf(k.A),u().instanceOf(T.A)])});const L=ShareAction;var N=n(42341);function download_action_extends(){return download_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},download_action_extends.apply(this,arguments)}function download_action_asyncGeneratorStep(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function download_action_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){download_action_asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){download_action_asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}function download_action_defineProperty(e,t,n){return(t=function download_action_toPropertyKey(e){var t=function download_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R="download-limit-exceeded";class DownloadAction extends l.PureComponent{constructor(){var e;super(...arguments),e=this,download_action_defineProperty(this,"onClick",download_action_asyncToGenerator((function*(){var{models:t,shareId:n,pageContext:r,downloadCountLimit:o}=e.props,i=new N._({models:t,shareId:n,pageContext:r,downloadCountLimit:o});d.A.emit("deselectAll");var a=yield i.start();null!=a&&a.downloadExceedsLimit&&(d.A.emit("closeToast",{id:R}),d.A.emit("showToast",{id:R,message:(0,f.A)("cloud-drive-files-download-limit-explanation"),className:"error",stay:!0}))}))),download_action_defineProperty(this,"isDownloadBlocked",(()=>{var{models:e=[],downloadCountLimit:t}=this.props;return 0===e.length||t&&e.length>t}))}render(){return l.createElement(O.A,download_action_extends({},this.props,{disabled:this.isDownloadBlocked(),onClick:this.onClick,label:(0,f.A)("amazon-photos-download"),name:"download",icon:"download"}))}}download_action_defineProperty(DownloadAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,pageContext:u().string.isRequired});const F=DownloadAction;var B=n(52105);function add_to_album_action_extends(){return add_to_album_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},add_to_album_action_extends.apply(this,arguments)}function add_to_album_action_defineProperty(e,t,n){return(t=function add_to_album_action_toPropertyKey(e){var t=function add_to_album_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AddToAlbumAction extends l.PureComponent{constructor(){super(...arguments),add_to_album_action_defineProperty(this,"onClick",(()=>{var{parentModel:e,models:t}=this.props,n=e instanceof k.A,r=new v.A(t);d.A.emit("openDialog",l.createElement(B.A,{selection:r,removeUnowned:n}))}))}render(){var{counts:e,parentModel:t}=this.props,{belongsToUser:n}=e,r=!n&&t instanceof k.A;return l.createElement(O.A,add_to_album_action_extends({},this.props,{disabled:r,onClick:this.onClick,label:(0,f.A)("amazon-photos-add-to-album"),name:"add-to-album",icon:"add-album"}))}}add_to_album_action_defineProperty(AddToAlbumAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,parentModel:u().oneOfType([u().instanceOf(k.A),u().instanceOf(T.A)])});const U=AddToAlbumAction;var G=n(24406);function buy_prints_action_extends(){return buy_prints_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},buy_prints_action_extends.apply(this,arguments)}function buy_prints_action_defineProperty(e,t,n){return(t=function buy_prints_action_toPropertyKey(e){var t=function buy_prints_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class BuyPrintsAction extends l.PureComponent{constructor(){super(...arguments),buy_prints_action_defineProperty(this,"onClick",(()=>{var{models:e,pageContext:t}=this.props;d.A.emit("openDialog",{id:"prints-sidebar",component:l.createElement(G.T9,{models:e})}),b.A.log("EnterProjectProductSelection",{eventTag:"AddToExistingProjectOrCreateNew"},t)}))}render(){var{counts:e={}}=this.props,t=!e.printable;return l.createElement(O.A,buy_prints_action_extends({},this.props,{disabled:t,onClick:this.onClick,label:(0,f.A)("amazon-photos-buy-prints"),name:"buy-prints",icon:"shopping-cart"}))}}buy_prints_action_defineProperty(BuyPrintsAction,"featureFlag",z.jy.PhotosPrinting),buy_prints_action_defineProperty(BuyPrintsAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,pageContext:u().string.isRequired});const q=BuyPrintsAction;var V=n(19625);function hide_action_extends(){return hide_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hide_action_extends.apply(this,arguments)}function hide_action_defineProperty(e,t,n){return(t=function hide_action_toPropertyKey(e){var t=function hide_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class HideAction extends l.PureComponent{constructor(){super(...arguments),hide_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;new V.A({items:e}).start()}))}render(){var{counts:e}=this.props,{hideable:t}=e;return l.createElement(O.A,hide_action_extends({},this.props,{disabled:!t,onClick:this.onClick,label:(0,f.A)("amazon-photos-hide-button"),name:"hide",icon:"hide"}))}}hide_action_defineProperty(HideAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired});const W=HideAction;var K=n(31682),H=n(32239),Q=n(95552),Y=n(57714);function trash_action_extends(){return trash_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},trash_action_extends.apply(this,arguments)}function trash_action_defineProperty(e,t,n){return(t=function trash_action_toPropertyKey(e){var t=function trash_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class TrashAction extends l.PureComponent{constructor(){super(...arguments),trash_action_defineProperty(this,"onClick",(()=>{var{models:e,counts:t={}}=this.props;t.album!==e.length?t.folder?d.A.emit("openDialog",l.createElement(Y.A,{onConfirmClick:()=>new K.A({items:e}).start()})):(0,H.A)(l.createElement(Q.A,null),{name:"TrashConfirm",heading:(0,f.A)("amazon-photos-trash-delete-confirm-button"),confirmText:(0,f.A)("amazon-photos-trash-delete-confirm-button"),onConfirmClick:()=>{new K.A({items:e}).start()}}):(0,H.A)((0,f.A)("amazon-photos-album-move-to-trash-confirm"),{name:"MoveAlbumToTrashDialog",heading:(0,f.A)("amazon-photos-album-move-to-trash-confirm-heading"),confirmText:(0,f.A)("amazon-photos-album-move-to-trash-confirm-button"),onConfirmClick:()=>{new K.A({items:e}).start()}})}))}render(){var{counts:e={}}=this.props,{deletable:t}=e,n=(0,f.A)("amazon-photos-trash");return l.createElement(O.A,trash_action_extends({},this.props,{disabled:!t,onClick:this.onClick,label:n,name:"trash",icon:"delete"}))}}trash_action_defineProperty(TrashAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired});const Z=TrashAction;var $=n(21040);function edit_date_time_action_extends(){return edit_date_time_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},edit_date_time_action_extends.apply(this,arguments)}function edit_date_time_action_defineProperty(e,t,n){return(t=function edit_date_time_action_toPropertyKey(e){var t=function edit_date_time_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class EditDateTimeAction extends l.PureComponent{constructor(){super(...arguments),edit_date_time_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;d.A.emit("openDialog",l.createElement($.A,{items:e}))}))}render(){var{counts:e}=this.props,{dateEditable:t}=e;return l.createElement(O.A,edit_date_time_action_extends({},this.props,{disabled:!t,onClick:this.onClick,label:(0,f.A)("amazon-photos-edit-date"),name:"edit-date-time",icon:"calendar"}))}}edit_date_time_action_defineProperty(EditDateTimeAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired});const X=EditDateTimeAction;var J=n(61081);function delete_group_share_action_extends(){return delete_group_share_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},delete_group_share_action_extends.apply(this,arguments)}function delete_group_share_action_defineProperty(e,t,n){return(t=function delete_group_share_action_toPropertyKey(e){var t=function delete_group_share_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class DeleteGroupShareAction extends l.PureComponent{constructor(){super(...arguments),delete_group_share_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;new J.A({items:e,eventTag:"list_groups"}).start()}))}render(){return l.createElement(O.A,delete_group_share_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-delete-group-share"),name:"delete-group",icon:"delete"}))}}delete_group_share_action_defineProperty(DeleteGroupShareAction,"featureFlag",z.jy.GroupsEnabled),delete_group_share_action_defineProperty(DeleteGroupShareAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired});const ee=DeleteGroupShareAction;var te=n(70471),ne=n(72231);function permanently_delete_action_extends(){return permanently_delete_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},permanently_delete_action_extends.apply(this,arguments)}function permanently_delete_action_defineProperty(e,t,n){return(t=function permanently_delete_action_toPropertyKey(e){var t=function permanently_delete_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class PermanentlyDeleteAction extends l.PureComponent{constructor(){super(...arguments),permanently_delete_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;(0,H.A)((0,f.A)("amazon-photos-trash-delete-confirm"),{name:"PurgeFileConfirmDialog",heading:(0,f.A)("amazon-photos-trash-delete-confirm-head"),confirmText:(0,f.A)("amazon-photos-trash-delete-confirm-button"),onConfirmClick:()=>{new ne.A({items:e}).start()}})}))}render(){return l.createElement(O.A,permanently_delete_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-delete-trash-selection"),name:"delete",icon:"delete"}))}}permanently_delete_action_defineProperty(PermanentlyDeleteAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,pageContext:u().string.isRequired});const re=PermanentlyDeleteAction;var oe=n(77157);function remove_from_album_action_extends(){return remove_from_album_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},remove_from_album_action_extends.apply(this,arguments)}function remove_from_album_action_defineProperty(e,t,n){return(t=function remove_from_album_action_toPropertyKey(e){var t=function remove_from_album_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RemoveFromAlbumAction extends l.PureComponent{constructor(){super(...arguments),remove_from_album_action_defineProperty(this,"onClick",(()=>{var{models:e,parentModel:t}=this.props;t&&new oe.A({items:e,albumId:t.id,albumName:t.name}).start()}))}render(){return l.createElement(O.A,remove_from_album_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-remove-from-album"),name:"remove-from-album",icon:"cancel"}))}}remove_from_album_action_defineProperty(RemoveFromAlbumAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,parentModel:u().oneOfType([u().instanceOf(k.A),u().instanceOf(T.A)])});const ie=RemoveFromAlbumAction;var ae=n(93031);function remove_from_family_action_extends(){return remove_from_family_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},remove_from_family_action_extends.apply(this,arguments)}function remove_from_family_action_defineProperty(e,t,n){return(t=function remove_from_family_action_toPropertyKey(e){var t=function remove_from_family_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RemoveFromFamilyAction extends l.PureComponent{constructor(){super(...arguments),remove_from_family_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;new ae.A({items:e,eventTag:e.length>1?"MultiSelect":"SingleItem"}).start()}))}render(){var{counts:e}=this.props,{removableFromFamilyArchive:t}=e;return l.createElement(O.A,remove_from_family_action_extends({},this.props,{disabled:!t,onClick:this.onClick,label:(0,f.A)("amazon-photos-remove-from-family-photos"),name:"remove-family-archive",icon:"contact"}))}}remove_from_family_action_defineProperty(RemoveFromFamilyAction,"featureFlag","family-vault"),remove_from_family_action_defineProperty(RemoveFromFamilyAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired});const le=RemoveFromFamilyAction;var se=n(17660);function remove_from_group_action_extends(){return remove_from_group_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},remove_from_group_action_extends.apply(this,arguments)}function remove_from_group_action_defineProperty(e,t,n){return(t=function remove_from_group_action_toPropertyKey(e){var t=function remove_from_group_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RemoveFromGroupAction extends l.PureComponent{constructor(){super(...arguments),remove_from_group_action_defineProperty(this,"onClick",(()=>{var{parentModel:e,models:t}=this.props;d.A.emit("openDialog",l.createElement(se.A,{items:t,group:e}))}))}render(){var{counts:e,parentModel:t}=this.props,{belongsToUser:n}=e,r=n||t.belongsToUser;return l.createElement(O.A,remove_from_group_action_extends({},this.props,{disabled:!r,onClick:this.onClick,label:(0,f.A)("amazon-photos-remove-from-sharing"),name:"remove-from-group",icon:"remove-inline"}))}}remove_from_group_action_defineProperty(RemoveFromGroupAction,"featureFlag",z.jy.GroupsEnabled),remove_from_group_action_defineProperty(RemoveFromGroupAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,parentModel:u().instanceOf(k.A).isRequired,counts:u().objectOf(u().number).isRequired});const ce=RemoveFromGroupAction;var ue=n(23551);function remove_from_group_share_action_extends(){return remove_from_group_share_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},remove_from_group_share_action_extends.apply(this,arguments)}function remove_from_group_share_action_defineProperty(e,t,n){return(t=function remove_from_group_share_action_toPropertyKey(e){var t=function remove_from_group_share_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RemoveFromGroupShareAction extends l.PureComponent{constructor(){super(...arguments),remove_from_group_share_action_defineProperty(this,"onClick",(()=>{var{parentModel:e,models:t}=this.props;new ue.A({items:t,group:e,eventTag:t.length>1?"MultiSelect":"SingleItem"}).start()}))}render(){return l.createElement(O.A,remove_from_group_share_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-remove-from-sharing"),name:"remove-from-group-share",icon:"remove-inline"}))}}remove_from_group_share_action_defineProperty(RemoveFromGroupShareAction,"featureFlag",z.jy.GroupsEnabled),remove_from_group_share_action_defineProperty(RemoveFromGroupShareAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,parentModel:u().instanceOf(k.A).isRequired});const de=RemoveFromGroupShareAction;function report_abuse_action_extends(){return report_abuse_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},report_abuse_action_extends.apply(this,arguments)}function report_abuse_action_defineProperty(e,t,n){return(t=function report_abuse_action_toPropertyKey(e){var t=function report_abuse_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ReportAbuseAction extends l.PureComponent{constructor(){super(...arguments),report_abuse_action_defineProperty(this,"onClick",(()=>{var{onReportAbuseClick:e}=this.props;return e()}))}render(){return l.createElement(O.A,report_abuse_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-report-abuse"),name:"report-abuse",icon:"flag"}))}}const pe=ReportAbuseAction;function set_album_cover_action_extends(){return set_album_cover_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},set_album_cover_action_extends.apply(this,arguments)}function set_album_cover_action_defineProperty(e,t,n){return(t=function set_album_cover_action_toPropertyKey(e){var t=function set_album_cover_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class SetAlbumCoverAction extends l.PureComponent{constructor(){super(...arguments),set_album_cover_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;d.A.emit("updateAlbumCover",{coverNodes:e})}))}render(){var{models:e}=this.props,t=1!==e.length;return l.createElement(O.A,set_album_cover_action_extends({},this.props,{disabled:t,onClick:this.onClick,label:(0,f.A)("amazon-photos-set-album-cover"),name:"set-album-cover",icon:"image-landscape"}))}}set_album_cover_action_defineProperty(SetAlbumCoverAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired});const me=SetAlbumCoverAction;var ve=n(96389);function toggle_family_action_extends(){return toggle_family_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},toggle_family_action_extends.apply(this,arguments)}function toggle_family_action_defineProperty(e,t,n){return(t=function toggle_family_action_toPropertyKey(e){var t=function toggle_family_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ToggleFamilyAction extends l.PureComponent{constructor(){super(...arguments),toggle_family_action_defineProperty(this,"onAddClick",(()=>{var{models:e}=this.props;new ve.A({items:e,eventTag:e.length>1?"MultiSelect":"SingleItem"}).start()})),toggle_family_action_defineProperty(this,"onRemoveClick",(()=>{var{models:e}=this.props;new ae.A({items:e,eventTag:e.length>1?"MultiSelect":"SingleItem"}).start()}))}render(){var e,t,n,r,o,{models:i,counts:a}=this.props;return a.removableFromFamilyArchive===i.length?(e=(0,f.A)("amazon-photos-remove-from-family-photos"),t="remove-family-archive",r=this.onRemoveClick,n="contact"):(e=(0,f.A)("amazon-photos-add-to-family-photos"),t="add-family-archive",r=this.onAddClick,n="contact-group",o=!a.addableToFamilyArchive),l.createElement(O.A,toggle_family_action_extends({},this.props,{disabled:o,onClick:r,label:e,name:t,icon:n}))}}toggle_family_action_defineProperty(ToggleFamilyAction,"featureFlag","family-vault"),toggle_family_action_defineProperty(ToggleFamilyAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired,counts:u().objectOf(u().number).isRequired});const he=ToggleFamilyAction;var ge=n(96056);function trash_restore_action_extends(){return trash_restore_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},trash_restore_action_extends.apply(this,arguments)}function trash_restore_action_defineProperty(e,t,n){return(t=function trash_restore_action_toPropertyKey(e){var t=function trash_restore_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class TrashRestoreAction extends l.PureComponent{constructor(){super(...arguments),trash_restore_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;new ge.A({items:e}).start()}))}render(){return l.createElement(O.A,trash_restore_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-restore-trash-selection"),name:"restore",icon:"jump-back"}))}}trash_restore_action_defineProperty(TrashRestoreAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired});const fe=TrashRestoreAction;var ye=n(7574);function unhide_item_action_extends(){return unhide_item_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},unhide_item_action_extends.apply(this,arguments)}function unhide_item_action_defineProperty(e,t,n){return(t=function unhide_item_action_toPropertyKey(e){var t=function unhide_item_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class UnhideAction extends l.PureComponent{constructor(){super(...arguments),unhide_item_action_defineProperty(this,"onClick",(()=>{var{models:e}=this.props;new ye.A({items:e}).start()}))}render(){return l.createElement(O.A,unhide_item_action_extends({},this.props,{onClick:this.onClick,label:(0,f.A)("amazon-photos-unhide-button"),name:"unhide",icon:"show"}))}}unhide_item_action_defineProperty(UnhideAction,"propTypes",{models:u().arrayOf(u().instanceOf(T.A)).isRequired});const be=UnhideAction;var Pe=["options","models"];function legacy_locked_action_extends(){return legacy_locked_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},legacy_locked_action_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}class LegacyLockedAction extends l.PureComponent{render(){var e=this.props,{options:t,models:n}=e,r=_objectWithoutProperties(e,Pe),{label:o,name:i,onClick:a,className:s,allowNoSelection:c}=t,u=n.length<1&&!c;return l.createElement(O.A,legacy_locked_action_extends({},r,{label:o,onClick:a,name:i,className:s,disabled:u,displayType:"header-text"}))}}!function legacy_locked_action_defineProperty(e,t,n){return(t=function legacy_locked_action_toPropertyKey(e){var t=function legacy_locked_action_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(LegacyLockedAction,"propTypes",{options:u().shape({label:u().string,name:u().string,onClick:u().func,className:u().string,allowNoSelection:u().bool})});const _e=LegacyLockedAction;var Ae=n(64974),RenameAction=e=>{var{onMouseOut:t,onMouseOver:n,isDragging:r,models:o,displayType:i}=e;return l.createElement(O.A,{onClick:()=>d.A.emit("openDialog",l.createElement(Ae.A,{model:o[0],currentName:o[0].name})),onMouseOut:t,onMouseOver:n,isDragging:r,displayType:i,disabled:1!==o.length,label:(0,f.A)("amazon-photos-rename"),name:"rename",icon:"edit"})};RenameAction.propTypes={onMouseOut:u().func,onMouseOver:u().func,isDragging:u().bool,models:u().arrayOf(u().instanceOf(T.A)).isRequired,displayType:u().string.isRequired};const Se=RenameAction;var Ce=n(67105),Oe=n(79419),we=["models","hydrateRootFolderId"];function move_nodes_action_extends(){return move_nodes_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},move_nodes_action_extends.apply(this,arguments)}function move_nodes_action_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function move_nodes_action_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var MoveNodesAction=e=>{var{models:t,hydrateRootFolderId:n}=e,r=move_nodes_action_objectWithoutProperties(e,we);return 0===t.length?null:l.createElement(O.A,move_nodes_action_extends({},r,{onClick:()=>{n(),d.A.emit("openDialog",l.createElement(Ce.A,{models:t}))},label:(0,f.A)("amazon-photos-folder-view-move-nodes-dialog-title"),name:"move-nodes",icon:"folder-move"}))};MoveNodesAction.propTypes={models:u().arrayOf(u().instanceOf(T.A))};const De=(0,s.Ng)(null,(e=>({hydrateRootFolderId:()=>e((0,Oe.Gp)())})))(MoveNodesAction);var Te=n(73725),ke=n(71086),je=n(95871),Ee=n(62076),xe=n(23152),Me=["models","customerId"];function save_to_amazon_photos_action_extends(){return save_to_amazon_photos_action_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},save_to_amazon_photos_action_extends.apply(this,arguments)}function save_to_amazon_photos_action_asyncGeneratorStep(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function save_to_amazon_photos_action_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function save_to_amazon_photos_action_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function selection_drag_container_extends(){return selection_drag_container_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},selection_drag_container_extends.apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){selection_drag_container_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function selection_drag_container_asyncGeneratorStep(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function selection_drag_container_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){selection_drag_container_asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){selection_drag_container_asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}function selection_drag_container_defineProperty(e,t,n){return(t=function selection_drag_container_toPropertyKey(e){var t=function selection_drag_container_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie={share:L,download:F,buyPrints:q,hide:W,trash:Z,trashAlbum:Z,editDateAndTime:X,addToAlbum:U,deleteGroupShare:ee,[te.q]:te.A,delete:re,removeFromAlbum:ie,removeFromArchive:le,removeFromGroup:ce,removeFromGroupShare:de,reportAbuse:pe,setAlbumCover:me,toggleFamily:he,restore:fe,unhide:be,recents:x,rename:Se,moveNodes:De,stapSave:e=>{var{models:t,customerId:n}=e,r=save_to_amazon_photos_action_objectWithoutProperties(e,Me),o=(0,je.jL)(),i=(0,je.GV)(Ee.Cc),a=function(){var e=function save_to_amazon_photos_action_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){save_to_amazon_photos_action_asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){save_to_amazon_photos_action_asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){if(b.A.log("ClickCloneButton",{eventTag:"MultiSelect"},ke.A.getPageContext()),i){var e=t.map((e=>({customerId:e.ownerId,nodeId:e.id})));try{yield o((0,xe.gj)(e))}catch(e){Te.A.fatal("Failed to save selection",e)}}else Te.A.fatal("Share type is not set when saving to Amazon Photos")}));return function onClick(){return e.apply(this,arguments)}}();return l.createElement(O.A,save_to_amazon_photos_action_extends({},r,{disabled:0===t.length,onClick:a,label:(0,f.A)("amazon-photos-stap-button-save"),name:"stap-save",icon:"cloud-upload"}))}};class SelectionDragContainer extends l.Component{constructor(e){var t;super(e),t=this,selection_drag_container_defineProperty(this,"state",{draggingSelection:null,draggingSelectionModels:null,draggingPreviewModel:null,overlayOpen:!1,overlayLocked:!1,activeAction:null,headerVisible:!1}),selection_drag_container_defineProperty(this,"onCancelClick",(()=>{var{selectionOptions:e={}}=this.props;e.onCancelClick?e.onCancelClick():e.locked?d.A.emit("unlockSelectMode"):d.A.emit("deselectAll")})),selection_drag_container_defineProperty(this,"onDeselectAllClick",(()=>{d.A.emit("deselectAll")})),selection_drag_container_defineProperty(this,"onSelectAllClick",selection_drag_container_asyncToGenerator((function*(){var{collection:e}=t.props,{pageContext:n}=t.context;if(e)try{var r=yield e.getByIndexRange(0,-1,{isSelectionAction:!0,selectOperationMetric:"selectAllRange"}),i=o()(r,"id"),a=r.length-i.length;a?(_.A.log({name:"SelectAllMismatchDroppedNodes",value:a}),b.A.log("SelectAllMismatchDroppedNodes",{eventCount:a},n),_.A.log({name:"SelectAllMismatchAttemptedNodes",value:r.length}),b.A.log("SelectAllMismatchAttemptedNodes",{eventCount:r.length},n)):(_.A.log({name:"SelectAllSuccess"}),b.A.log("SelectAllSuccess",null,n)),d.A.emit("selectItem",r)}catch(e){_.A.log({name:"SelectAllFailed"})}}))),selection_drag_container_defineProperty(this,"onSelectMaxClick",selection_drag_container_asyncToGenerator((function*(){var{collection:e}=t.props,n=t.getSelectionLimit();if(e)try{var r=yield e.getByIndexRange(0,n-1,{isSelectionAction:!0,selectOperationMetric:"selectMaxRange"});d.A.emit("selectItem",r)}catch(e){_.A.log({name:"SelectMaxFailed"})}}))),selection_drag_container_defineProperty(this,"onOverlayMount",(()=>{d.A.emit("enterFullScreen")})),selection_drag_container_defineProperty(this,"onOverlayUnmount",(()=>{d.A.emit("exitFullScreen")})),selection_drag_container_defineProperty(this,"onActionMouseOver",(e=>{this.setState({activeAction:e})})),selection_drag_container_defineProperty(this,"onActionMouseOut",(()=>{this.setState({activeAction:null})})),selection_drag_container_defineProperty(this,"onDragStart",(e=>{if(!P.A.isIOS()&&!P.A.isAndroid()){e.preventDefault();var{collection:t,options:n,selection:r,enableDrag:o,selectionOptions:i={}}=this.props,{pageContext:a}=this.context,l=e.target.dataset.id,s=r;if(!o||!t||!l||!n||!n.length||i.locked)return!1;var c=t.indexOf(l);if(-1===c)return!1;var u=t.atIndex(c);s.isSelected(l)||(s=new v.A([u]));var d=e.target.getBoundingClientRect(),p={width:e.target.clientWidth,height:e.target.clientHeight,offsetX:d.left,offsetY:d.top};this._dragLockTimeout=setTimeout((()=>this.setState({overlayLocked:!1})),500),this._dragOpenTimeout=setTimeout((()=>{var e=s.getSize()>1?"MultiSelect":"SingleItem";this.setState({overlayOpen:!0}),b.A.log("drag.start",{eventTag:e},a)}),100),this.setState({draggingSelection:s,draggingSelectionModels:s&&s.getNodes(),draggingPreviewModel:u,draggingPreviewDimensions:p,activeAction:null,overlayOpen:!1,overlayLocked:!0})}})),selection_drag_container_defineProperty(this,"onDragEnd",(()=>{var{overlayOpen:e,draggingSelection:t}=this.state,{pageContext:n}=this.context;if(this.lastMousePosition&&(this.lastMousePosition=null,clearTimeout(this._dragOpenTimeout),clearTimeout(this._dragLockTimeout),this.setState({draggingSelection:null,draggingSelectionModels:null,draggingPreviewDimensions:null,draggingPreviewModel:null,activeAction:null,overlayOpen:!1,overlayLocked:!1}),e)){var r=(t?t.getSize():0)>1?"MultiSelect":"SingleItem";b.A.log("drag.end",{eventTag:r},n)}})),selection_drag_container_defineProperty(this,"onMouseMove",(e=>{var{draggingPreviewModel:t,draggingPreviewDimensions:n}=this.state;if(!t||!n)return null;var{lastMousePosition:r}=this,{offsetX:o,offsetY:i}=n,{clientX:a,clientY:l}=e;r&&(o-=r.clientX-a,i-=r.clientY-l);this.lastMousePosition={clientX:a,clientY:l},this.setState({draggingPreviewDimensions:_objectSpread(_objectSpread({},n),{},{offsetX:o,offsetY:i})})})),selection_drag_container_defineProperty(this,"toggleOverlay",(()=>{var{overlayOpen:e}=this.state;this.setState({overlayOpen:!e})})),selection_drag_container_defineProperty(this,"closeOverlay",(()=>{var{overlayOpen:e}=this.state;e&&this.toggleOverlay()})),selection_drag_container_defineProperty(this,"onSideNavButtonClick",(()=>{var{toggleSideNav:e}=this.props;e()})),a()(e,"selectMode",!1)&&(this.state.headerVisible=!0)}componentDidUpdate(e){var{selectMode:t}=this.props,{selectMode:n}=e;!t&&n?(clearTimeout(this._headerVisibleTimeout),this._headerVisibleTimeout=setTimeout((()=>this.setState({headerVisible:!1})),200)):!n&&t&&(clearTimeout(this._headerVisibleTimeout),this._headerVisibleTimeout=setTimeout((()=>this.setState({headerVisible:!0})),0))}componentWillUnmount(){clearTimeout(this._headerVisibleTimeout),clearTimeout(this._dragOpenTimeout),clearTimeout(this._dragLockTimeout)}getSelectionLimit(){var{selectionOptions:e={},maxSelectAllCount:t}=this.props,{maxSelectAllCount:n}=e;return n||t}filterOptionsByFeature(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var r=e[n];if("string"==typeof r){var o=a()(Ie,"".concat(r,".featureFlag"));o&&!g.A.isOn(o)||t.push(r)}else t.push(r)}return t}isSelectAllEnabled(){var{collection:e,selectionOptions:t={},selection:n}=this.props,{singleSelect:r}=t,o=a()(e,"count",0),i=n?n.getSize():0,l=this.getSelectionLimit();return Boolean(l&&o)&&!r&&!(o>l)&&!(i>=o)}isSelectMaxEnabled(){var{collection:e,selection:t,selectionOptions:n={}}=this.props,{singleSelect:r}=n,o=a()(e,"count",0),i=t?t.getSize():0,l=this.getSelectionLimit();return Boolean(l&&o)&&i<l&&!(i>=o)&&!r}isDeselectAllEnabled(){var{selection:e,selectionOptions:t={}}=this.props,{singleSelect:n}=t;return(e?e.getSize():0)>0&&!n}renderActions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,{selection:n,parentModel:r,shareId:o,metricOverrides:i,downloadCountLimit:a,onReportAbuseClick:s}=this.props,{pageContext:c}=this.context,{activeAction:u,draggingSelection:d,draggingSelectionModels:p,draggingPreviewModel:m}=this.state,v=Boolean(m),h={downloadCountLimit:a,onReportAbuseClick:s,pageContext:c,parentModel:r,shareId:o,models:p||n.getNodes(),counts:(d||n).counts||{},displayType:t,isDragging:v,metricOverrides:i,onMouseOver:this.onActionMouseOver,onMouseOut:this.onActionMouseOut,closeOverlay:this.closeOverlay};return e.map(((e,t)=>{var n;switch(v&&(h.action=e,h.isActiveAction=e===u),typeof e){case"string":if(Ie[e]){var r=Ie[e];n=l.createElement(r,selection_drag_container_extends({},h,{key:e}))}else n=null;break;case"function":var o=e;n=l.createElement(o,selection_drag_container_extends({},h,{key:t}));break;case"object":n=e.constructor===Object?l.createElement(_e,selection_drag_container_extends({options:e},h,{key:t})):e;break;default:n=e}return n}))}render(){var{children:e,collection:t,selectMode:n,selection:r,options:o=[],size:i={},selectionOptions:a={},className:s,id:c,style:u}=this.props,{overlayOpen:d,draggingSelectionModels:p,draggingPreviewDimensions:m,draggingPreviewModel:v,activeAction:g,overlayLocked:y,headerVisible:b}=this.state,P=a.buttons||o,_=p||r&&r.getNodes()||[],A=this.filterOptionsByFeature(P),w=A.indexOf("recents"),D=-1!==w,T=this.isSelectAllEnabled(),k=this.isSelectMaxEnabled(),j=this.isDeselectAllEnabled(),{locked:E,forceMobileExpand:x}=a,M=!1,I=!1;i.mobile&&(M=!0,!x&&E&&(M=!1,I=!0));var z=this.getSelectionLimit();D&&A.splice(w,1);var L=A.slice(0,4),N=A.slice(4),R=i.mobile||!N.length&&!D?null:l.createElement(O.A,{icon:"overflow",label:(0,f.A)("amazon-photos-selection-overlay-more"),name:"overflow-menu",displayType:"header",useButton:!1});return l.createElement("div",{className:s,id:c,style:u,onDragStart:this.onDragStart,onMouseUp:this.onDragEnd,onMouseMove:this.onMouseMove},d&&A.length>0&&l.createElement(C.A,{collection:t,locked:y,models:_,onCancelClick:this.toggleOverlay,previewModel:v,previewDimensions:m,recentsAction:D?this.renderActions(["recents"],"overlay"):null,onMount:this.onOverlayMount,onUnmount:this.onOverlayUnmount,activeAction:g},this.renderActions(A,"overlay")),(n||b)&&!d&&A.length>0&&l.createElement(S.A,{visible:b&&n,collection:t,models:_,showMobileSideNavButton:I,onSideNavButtonClick:this.onSideNavButtonClick,onCancelClick:this.onCancelClick,onSelectAllClick:T?this.onSelectAllClick:null,onSelectMaxClick:k?this.onSelectMaxClick:null,onDeselectAllClick:j?this.onDeselectAllClick:null,maxSelectAllCount:z,title:a.title},!M&&this.renderActions(L,"header"),M&&l.createElement(O.A,{icon:"overflow",name:"all-actions",metricOverrides:{eventTag:"Mobile"},displayType:"header",onClick:this.toggleOverlay}),R&&l.createElement(h.A,{text:R,name:"more-expand"},this.renderActions(N,"list"),D&&l.createElement(O.A,{icon:"information",name:"all-actions",metricOverrides:{eventTag:"Desktop"},displayType:"list",onClick:this.toggleOverlay,label:(0,f.A)("amazon-photos-selection-overlay-expand")}))),e)}}selection_drag_container_defineProperty(SelectionDragContainer,"propTypes",{className:u().string,id:u().string,style:u().any,metricOverrides:u().any,enableDrag:u().bool,collection:u().instanceOf(y.A),options:u().arrayOf(u().oneOfType([u().node,u().string,u().func])),maxSelectAllCount:u().number,selection:u().instanceOf(v.A),parentModel:u().any,shareId:u().string,selectMode:u().bool,size:u().shape({mobile:u().bool}),selectionOptions:u().shape({maxSelectAllCount:u().number,locked:u().bool,buttons:u().array}),children:u().node}),selection_drag_container_defineProperty(SelectionDragContainer,"contextTypes",{pageContext:u().string.isRequired});var ze=d.A.connect(SelectionDragContainer,[{store:p.A,mapToProps:["selection","selectionOptions","selectMode","maxSelectAllCount"]},{store:m.A,mapToProps:["size"]}]),Le={toggleSideNav:A.x8};const Ne=(0,s.Ng)(null,Le)(ze)},92517:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(58156),o=n.n(r),i=n(96540),a=n(71468),l=n(35994),s=n(1683),c=n(26980),u=n(14127),d=n(71086),p=n(31035);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class SlideshowContainer extends i.PureComponent{constructor(){super(...arguments),_defineProperty(this,"onClose",(e=>{var{resetData:t,route:n,returnUrlModel:r}=this.props;if(t(),r&&e){var{id:i}=e,a=o()(n,"props.groupId"),l=o()(n,"props.collectionId");a&&l?r.addPath(i).go():r.addPath("/gallery/".concat(i)).go()}})),_defineProperty(this,"onImageSizeChange",(()=>{var{toggleImageFill:e}=this.props;e()})),_defineProperty(this,"onSpeedChange",(e=>{var{setSpeed:t}=this.props,n=o()(e,"target.value");t(n),s.A.log("SlideshowSpeedChange",{eventTag:n},d.A.getPageContext())})),_defineProperty(this,"onTransitionStyleChange",(e=>{var{setTransitionStyle:t}=this.props,n=o()(e,"target.value");t(n),s.A.log("SlideshowStyleChange",{eventTag:n},d.A.getPageContext())}))}render(){var{collection:e,shouldImageFill:t,speed:n,startNodeId:r,transitionStyle:o}=this.props;return e?i.createElement(u.A,{attribution:"slideshow"},i.createElement(c.A,{collection:e,onClose:this.onClose,onImageSizeChange:this.onImageSizeChange,onSpeedChange:this.onSpeedChange,onTransitionStyleChange:this.onTransitionStyleChange,shouldImageFill:t,speed:n,startNodeId:r,transitionStyle:o})):null}}var m=(0,a.Ng)((e=>{var{slideshow:t={}}=e,{collection:n,returnUrlModel:r,shouldImageFill:o,speed:i,startNodeId:a,transitionStyle:l}=t;return{collection:n,returnUrlModel:r,shouldImageFill:o,speed:i,startNodeId:a,transitionStyle:l}}),{resetData:p.kT,setSpeed:p.cm,setTransitionStyle:p.Fw,toggleImageFill:p.Jl})(SlideshowContainer);const v=l.A.connect(m,{store:d.A,mapToProps:["route"]})},23649:(e,t,n)=>{n.d(t,{A:()=>C});var r=n(55378),o=n.n(r),i=n(62193),a=n.n(i),l=n(47091),s=n.n(l),c=n(96540),u=n(5556),d=n.n(u),p=n(51158),m=n(35994),v=n(95093),h=n.n(v),g=n(18742),f=n(42852),y=n(61738),b=n(47389),P=n(1683),_=n(37333),A=n(83081),S=n(17234);function _defineProperty(e,t,n){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ThisDayWidgetContainer extends c.Component{constructor(){super(...arguments),_defineProperty(this,"state",{pendingModels:!1})}componentDidMount(){var e=h()().month()+1,t=h()().date(),{pageContext:n}=this.context;m.A.emit("listThisDayCollections",{date:{month:e,day:t},loadThisDayYear:!0}),P.A.log("ThisDayBannerDisplay",{eventCount:this.getThisDayArchivesSize()},n)}componentDidUpdate(){var{thisDayCollection:e}=this.props,{models:t,pendingModels:n}=this.state;1!==this.getThisDayArchivesSize()||t||!e||n||(this.setState({pendingModels:!0}),e.getByIndexRange(0,4).done((e=>{this._unMounted||this.setState({models:e,pendingModels:!1})})))}componentWillUnmount(){this._unMounted=!0}getThisDayArchivesSize(){var{thisDayArchives:e}=this.props;return s()(e)}hasThisDayContent(){var{thisDayArchives:e}=this.props;return!a()(e)&&Object.keys(e).some((e=>{var t=h().utc(e),n=h()();return n.month()===t.month()&&n.date()===t.date()}))}render(){var{thisDayUrl:e,allPhotosUrl:t,thisDayArchives:n,collection:r,loading:i}=this.props,a=new b.A(e,{backUrl:t});if(i)return null;if(!this.hasThisDayContent())return 0===r.count?null:c.createElement(_.A,{href:a.toString()});var l,s,{monthDay:{month:u,day:d},size:p={}}=this.props,{models:m}=this.state,v=(new Date).getFullYear(),g=h().utc([v,u-1,d]),f=Object.keys(n).sort().reverse(),y=f.length>1,P=[];return y?(P=o()(f,(e=>n[e].node)),l="".concat(h().utc(f[f.length-1]).year(),"  ").concat(h().utc(f[0]).year())):f.length>0&&(P=m||[],l=h().utc(f[f.length-1]).year().toString()),s=p.desktop?4:p.mobile?1:2,P=P.slice(0,s),c.createElement(A.A,{pageUrlModel:a,day:g.format("D"),month:u,monthName:g.format("MMM"),year:l,isMultiYear:y,modelsToDisplay:P})}}_defineProperty(ThisDayWidgetContainer,"propTypes",{thisDayUrl:d().string.isRequired,allPhotosUrl:d().string.isRequired,monthDay:d().shape({month:d().number,day:d().number}),thisDayArchives:d().object,collection:d().instanceOf(p.A).isRequired,thisDayCollection:d().instanceOf(p.A),loading:d().bool,size:d().object}),_defineProperty(ThisDayWidgetContainer,"contextTypes",{pageContext:d().string.isRequired});const C=m.A.connect((0,f.A)(ThisDayWidgetContainer),[{store:y.A,mapToProps:["size"]},{store:g.A,mapToProps:e=>{var{urls:t}=e;return{thisDayUrl:t.thisday,allPhotosUrl:t.all}}},{store:S.A,mapToProps:e=>{var{thisDayArchives:t,collection:n,monthDay:r,loading:o}=e;return{thisDayArchives:t,thisDayCollection:n,monthDay:r,loading:o}}}])},98742:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(96540),o=n(71468),i=n(35994),a=n(21572),l=n(51549),s=n(81942),c=n(80052);const u=(0,o.Ng)((e=>{var{uploader:t}=e,{contextAlbumId:n,contextFileDropOverride:o,contextFolderPath:l,contextGroupId:s}=t;return{contextAlbumId:n,contextFileDropOverride:o,contextFolderPath:l,contextGroupId:s,onEmptyFolderDropped:()=>{i.A.emit("showToast",{className:"error",message:(0,a.A)("amazon-photos-uploader-error-folder-empty"),name:"EmptyFolderDropped"})},onNoFolderSupport:()=>{i.A.emit("showToast",{className:"error",content:r.createElement(c.A,null),message:(0,a.A)("amazon-photos-uploader-aborted"),stay:!0,tall:!0})}}}),{populateQueue:l.aj,updateUploadEventOrigin:l.j3})(s.A)},24764:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(71468),o=n(84503),i=n(51549);const a=(0,r.Ng)(null,((e,t)=>({onClick:n=>{var{selectionType:r,useContext:o,onClick:a}=t;e((0,i.vY)({selectionType:r,useContext:o})),a&&a(n)}})))(o.A)},85680:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(35994),o=n(21572),i=n(71468),a=n(14176),l=n(51549);const s=(0,i.Ng)((e=>{var{uploader:t={}}=e,{contextAlbumId:n,contextFolderPath:i,contextGroupId:a,contextDisambiguator:l,selectionInputType:s,selectionIsAvatar:c,selectionUseContext:u}=t;return{contextAlbumId:n,contextFolderPath:i,contextGroupId:a,contextDisambiguator:l,onEmptyFolderSelected:()=>{r.A.emit("showToast",{className:"error",message:(0,o.A)("amazon-photos-uploader-error-folder-empty"),name:"EmptyFolderSelected"})},selectionInputType:s,selectionIsAvatar:c,selectionUseContext:u}}),{clearSelection:l.wr,populateQueue:l.aj})(a.A)}}]);
//# sourceMappingURL=containers-319b91e05075bfb4cc87.js.map