"use strict";(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[221],{17667:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(62216),n=r.n(o),a=r(56449),i=r.n(a),s=r(35994),l=r(73725),c=r(60453),u=r(84723),d=r(15103),p=r(54318),v=r(71086);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class FeaturesStore extends s.A.Store{constructor(){super(...arguments),_defineProperty(this,"_weblabFeatureTriggers",{}),_defineProperty(this,"bffFeatureMap",{}),_defineProperty(this,"overrides",{})}get events(){return{}}setInitialData(e){var{features:t,accountFeatures:r}=e,o=(0,c.A)(window.location.search);this.bffFeatureMap={},this.overrides={};var{ffOverrides:n}=o;if(n){i()(n)||(n=[n]);for(var a=0;a<n.length;a++){var[s,l]=n[a].split(":");this.overrides[s]=l}}(0,p._q)(t)&&(this.bffFeatureMap=(0,d.j8)(r)),this.setData(t)}getProperty(e){this._setFeatureSeen(e);var t=super.getProperty(e);return applyOverrides(this.overrides,e,t)}_setFeatureSeen(e){var{featureWeblabMap:t}=this.data;if(t&&!this._weblabFeatureTriggers[e]){var r=t[e];r&&(this._weblabFeatureTriggers[e]=!0,u.A.recordWeblabTrigger(r))}}_getFeatureValueV2(e){if((0,p._q)(this.data)){var t;if(void 0===(null===(t=this.bffFeatureMap)||void 0===t?void 0:t[e]))return null;var r=(0,d.G7)(this.bffFeatureMap,e);return applyOverrides(this.overrides,e,r)}return null}isOn(e){var t,r=null!==(t=this._getFeatureValueV2(e))&&void 0!==t?t:this.getProperty(e);if(n()(r)){if(v.A.getProperty("internalRequest"))throw new Error('Features::isOn.FAIL: "'.concat(e,'" has not been defined in the configuration.'));return l.A.fatal("Features::isOn.FAIL",'"'.concat(e,'" has not been defined in the configuration.'),this,"ERROR"),!1}return"C"!==r&&Boolean(r)}isOff(e){return!this.isOn(e)}getFeatureCriteria(e){return(0,p._q)(this.data)?(0,d.UI)(this.bffFeatureMap,e):[]}}function applyOverrides(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)){var o=function convertOverrideValue(e){switch(e){case"true":return!0;case"false":return!1;default:return e}}(e[t]);if(void 0===o){if("boolean"!=typeof r)throw new Error("Cannot flip a non boolean flag");return!r}return o}return r}const g=new FeaturesStore},18742:(e,t,r)=>{r.d(t,{A:()=>o});const o=r(35994).A.createStore({defaultData:{noDateDate:"1000-01-01",noDateMonth:"1000-01"}})},71086:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(35994);class Runtime extends o.A.Store{getPageContext(){return this.getProperty("route.metrics.pageContext")}}const n=new Runtime},14324:(e,t,r)=>{r.d(t,{A:()=>h});var o=r(56449),n=r.n(o),a=r(68090),i=r.n(a),s=r(66245),l=r.n(s),c=r(43346),u=r.n(c),d=r(21327),p=r(35994),v=r(1683),g=r(21572),f=r(71086),y=5e3;function _logEnterSelectMode(e){v.A.log("StartOrganize",{eventTag:e},f.A.getPageContext())}function _logLeaveSelectMode(e){v.A.log("EndOrganize",{eventTag:e},f.A.getPageContext())}function defaultSelectionOptions(){return{title:null,hideTitleAtMobile:!0,locked:!1,disabled:!1,singleSelect:!1,buttons:null,overflowButtons:null,navigationOptions:null,hiddenFacets:null,maxSelectAllCount:y,onCancelClick:null,forceMobileExpand:!1}}function buildSelection(e){var t=new d.A;return e&&(e.selectionOptions&&(t.singleSelect=e.selectionOptions.singleSelect),t.preSelect(e.preSelectedIds)),t}const h=p.A.createStore({events:{routeChanged:function onRouteChanged(){p.A.emit("deselectAll",{reason:"Navigate"})},listCollectionInitialized:function onListCollectionInitialized(e){this.setData({selectionCollection:e,lastSelectedId:null})},selectItem:function selectItem(e){var t,r,o,n=this.data.selection.getNodes(),a=this.data.maxSelectAllCount;t=(e=l()(e,n)).length,this.data.selection.getSize()+t>a&&(p.A.emit("showToast",{message:(0,g.A)("amazon-photos-select-range-limit-body",a),className:"error"}),t=a-this.data.selection.getSize(),e=e.slice(0,t)),this.data.selection.select(e),r=!this.data.selectionOptions.disabled,!1===this.data.selectMode&&!0===r&&_logEnterSelectMode("Click"),o={selection:this.data.selection,selectMode:r},i()(e)&&(o.lastSelectedId=i()(e).id),this.setData(o)},unselectItem:function unselectItem(e){var t,r;this.data.selection.deselect(e),t=this.data.selection.isEmpty(),this.data.selectionOptions.disabled?r=!1:!1===(r=!t||!!this.data.selectionOptions.locked)&&_logLeaveSelectMode("Click"),this.setData({selection:this.data.selection,selectMode:r})},deselectAll:function deselectAll(e){var t={selection:buildSelection(this.data),selectionSections:{},lastSelectedId:null};this.data.selectionOptions.locked||(t.selectMode=!1,!0===this.data.selectMode&&_logLeaveSelectMode(e.reason)),this.setData(t)},escape:function onEscape(){if(this.data.selectMode)if(this.data.selectionOptions.locked&&!this.data.selection.getSize()){if(this.data.selectionOptions.onCancelClick)return void this.data.selectionOptions.onCancelClick();p.A.emit("unlockSelectMode")}else p.A.emit("deselectAll",{reason:"ESC"})},selectSection:function selectSection(e){var t=u()({},this.data.selectionSections);n()(e)||(e=[e]),e.forEach((e=>t[e]=!0)),this.setData({selectionSections:t})},unselectSection:function unselectSection(e){var t=this.data.selectionSections;t[e]&&delete t[e],this.setData({selectionSections:t})},disableSelectMode:function onDisableSelectMode(){this.setData({selectMode:!1,selectionOptions:u()(defaultSelectionOptions(),{disabled:!0}),lastSelectedId:null})},enableSelectMode:function onEnableSelectMode(){this.data.selectionOptions.disabled&&(this.data.selectionOptions.disabled=!1,this.setData({selectionOptions:defaultSelectionOptions()}))},lockSelectMode:function onLockSelectMode(e){e.locked=!0,_logEnterSelectMode("SelectModeLocked");var t=u()({},this.data,{selectMode:!0,selectionOptions:u()(defaultSelectionOptions(),e)});t.selection=buildSelection(t),this.setData(t)},unlockSelectMode:function onUnlockSelectMode(){this.data.selectionOptions.locked&&this.setData({selectionOptions:defaultSelectionOptions(),lastSelectedId:null}),p.A.emit("deselectAll",{reason:"SelectModeUnlocked"})}},defaultData:{selection:buildSelection(),selectionSections:{},selectMode:!1,selectionOptions:defaultSelectionOptions(),maxSelectAllCount:y}})},44804:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(43346),n=r.n(o),a=r(95950),i=r.n(a),s=r(87612),l=r.n(s),c=r(73725),u=r(35994);const d=u.A.createStore({events:{toggleStringDebug:"onToggleStringDebug"},setInitialData:function setInitialData(e){var t=l()(i()(this.data),(t=>e[t]));t.length&&(c.A.warn("Overriding string IDs",t.join("\n")),n()(e,this.data)),this.setData(e)},onToggleStringDebug:function onToggleStringDebug(){this.setData({stringDebug:!this.data.stringDebug}),u.A.emit("update")},defaultData:{stringDebug:!1}})},97463:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(59786),n=r(35994),a=r(18742),i=r(71086);const s=n.A.createStore({_name:"UserStore",events:{userUnauthorized:"onUserUnauthorized"},shared:!0,defaultData:{customerName:""},onUserUnauthorized(){var e=i.A.getProperty("route.metrics.pageType");if(i.A.getProperty("route.props.query.hide_nav")||"WebView"===e){var t=new o.A(a.A.getProperty("urls.signout"),{returnUrl:window.location.href}).toString();window.location.href=t}else this.setData({unauthorized:!0})}})},79050:(e,t,r)=>{r.d(t,{Ay:()=>b,CE:()=>h,Sh:()=>y});var o=r(39729),n=r.n(o),a=r(74692),i=r.n(a),s=r(53110),l=r(35994),c=r(78439),u=r(1683),d=r(71086),p=r(42843),v=r(13489),g="PENDING",f="DONE",y={generic:"generic",throttle:"throttle"},h={inProgress:"inProgress",success:"success",error:"error"};const b={checkBulkAddJobStatusInterval:null,checkBulkRemoveJobStatusInterval:null,events:{autoAddToFamilyArchive:"setAutoAddToFamilyArchive",bulkAddToFamilyArchive:"bulkAddToFamilyArchive",bulkRemoveFromFamilyArchive:"bulkRemoveFromFamilyArchive",checkBulkAddJobStatus:"checkBulkAddJobStatus",checkBulkRemoveJobStatus:"checkBulkRemoveJobStatus",getAccountPreferences:"getAccountPreferences",settingsPageUnmount:"settingsPageUnmount",setRecognitionEnabledFamily:"setRecognitionEnabledFamily",setImageRecognition:"setImageRecognition"},defaultData:{autoAddContentToFamilyArchive:!1,avatarNodeId:void 0,bulkAddToFamilyArchiveStatus:void 0,bulkRemoveFromFamilyArchiveStatus:void 0,familyName:"",recognitionSettingChangeStatus:null,recognitionSettingChangeErrorType:null},settingsPageUnmount(){this._setChangeRecognitionStatus(null,null)},getAccountPreferences(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.A.getAccountPreferences(e).pipe((e=>{this.setData(e),this.setData({profileName:e.name})}))},setRecognitionEnabledFamily(e){function logCompletion(e){e?v.A.log({name:"SetFamilyPreferenceRecognitionSuccess"}):v.A.log({name:"SetFamilyPreferenceRecognitionFailure"})}this._setChangeRecognitionStatus(h.inProgress,null),c.A.setRecognitionEnabledFamily(e).fail((e=>{logCompletion(!1);var{status:t}=e;this._setChangeRecognitionStatus(h.error,t)})).done((()=>{logCompletion(!0),this._setChangeRecognitionStatus(h.success,null),l.A.emit("updateRecognitionEnabled",{isEnabled:e})})).always((()=>{l.A.emit("getAccountPreferences",{noCache:!0})}))},setImageRecognition(e,t){function logCompletion(e){e?v.A.log({name:"SaveImageRecognitionSuccess"}):v.A.log({name:"SaveImageRecognitionFailure"})}this._setChangeRecognitionStatus(h.inProgress,null),c.A.setImageRecognition(e,t).fail((e=>{logCompletion(!1);var{status:t}=e;this._setChangeRecognitionStatus(h.error,t)})).done((()=>{logCompletion(!0),this._setChangeRecognitionStatus(h.success,null),l.A.emit("updateImageRecognitionSettings",{isThingsRecognitionEnabled:e,isPeopleRecognitionEnabled:t})})).always((()=>{l.A.emit("getAccountPreferences",{noCache:!0})}))},setAutoAddToFamilyArchive(e){var t=this;c.A.setPersonalPreferenceAutoAdd(e).always((()=>{l.A.emit("uncache"),l.A.emit("getAccountPreferences"),t.setData({autoAddContentToFamilyArchive:e})}))},bulkAddToFamilyArchive(){var e=this;c.A.bulkAddToFamilyArchive().done((()=>{e.setData({bulkAddToFamilyArchiveStatus:g}),e.startBulkAddJobStatusInterval()})),u.A.log("BulkAddtoArchive",{},d.A.getPageContext())},bulkRemoveFromFamilyArchive(){var e=this;l.A.emit("autoAddToFamilyArchive",!1),c.A.bulkRemoveFromFamilyArchive().done((()=>{e.setData({bulkRemoveFromFamilyArchiveStatus:g}),e.startBulkRemoveJobStatusInterval()})),u.A.log("BulkRemovefromArchive",{},d.A.getPageContext())},checkBulkAddJobStatus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,{refreshCounts:r}=e;c.A.getJobStatus({jobKey:"".concat(this.data.customerId,":").concat("BULK_ADD")}).done((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.status!==g||t.checkBulkAddJobStatusInterval||t.startBulkAddJobStatusInterval(),e.status===f&&r?t._refreshMediaCounts(n()(t._setBulkAddToFamilyArchiveStatus,t,f)):t._setBulkAddToFamilyArchiveStatus(e.status),e.status!==g&&t.clearBulkAddJobStatusInterval()}))},checkBulkRemoveJobStatus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,{refreshCounts:r}=e;c.A.getJobStatus({jobKey:"".concat(this.data.customerId,":").concat("BULK_REMOVE")}).done((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.status!==g||t.checkBulkRemoveJobStatusInterval||t.startBulkRemoveJobStatusInterval(),e.status===f&&r?t._refreshMediaCounts(n()(t._setBulkRemoveFromFamilyArchiveStatus,t,f)):t._setBulkRemoveFromFamilyArchiveStatus(e.status),e.status!==g&&t.clearBulkRemoveJobStatusInterval()}))},startBulkAddJobStatusInterval(){if(!this.checkBulkAddJobStatusInterval){var e=this;this.checkBulkAddJobStatusInterval=window.setInterval((()=>{e.checkBulkAddJobStatus({refreshCounts:!0})}),15e3)}},clearBulkAddJobStatusInterval(){window.clearInterval(this.checkBulkAddJobStatusInterval),this.checkBulkAddJobStatusInterval=null},startBulkRemoveJobStatusInterval(){if(!this.checkBulkRemoveJobStatusInterval){var e=this;this.checkBulkRemoveJobStatusInterval=window.setInterval((()=>{e.checkBulkRemoveJobStatus({refreshCounts:!0})}),15e3)}},clearBulkRemoveJobStatusInterval(){window.clearInterval(this.checkBulkRemoveJobStatusInterval),this.checkBulkRemoveJobStatusInterval=null},_setChangeRecognitionStatus(e,t){switch(e){case h.inProgress:case h.success:default:this.setData({recognitionSettingChangeStatus:e,recognitionSettingChangeErrorType:null});break;case h.error:this.setData({recognitionSettingChangeStatus:e,recognitionSettingChangeErrorType:(r=t,r===s.kG.TooManyRequests?y.throttle:y.generic)})}var r},_setBulkAddToFamilyArchiveStatus(e){this.setData({bulkAddToFamilyArchiveStatus:e})},_setBulkRemoveFromFamilyArchiveStatus(e){this.setData({bulkRemoveFromFamilyArchiveStatus:e})},_refreshMediaCounts(e){window.setTimeout((()=>{l.A.emit("uncache"),i().when(this.checkAccountStatus(),this.checkFamilyMediaStatus()).then(e)}),p.A.LONG)}}},61738:(e,t,r)=>{r.d(t,{A:()=>P});var o=r(43346),n=r.n(o),a=r(39754),i=r.n(a),s=r(62193),l=r.n(s),c=r(38221),u=r.n(c),d=r(35994),p=r(74692),v=r.n(p),g=r(32485),f=r.n(g),y=r(59104),h=r.n(y);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={mobile:[0,700],tablet:[701,1024],desktop:[1025,null],large:[1400,null],xlarge:[1600,null]},m=v()(window),S=v()(document.body);class ViewportStore extends d.A.Store{constructor(){super(),_defineProperty(this,"shared",!0),_defineProperty(this,"scrollDirection","down"),_defineProperty(this,"lastScrollPosition",0),_defineProperty(this,"_debouncedSetScrollPosition",u()((()=>this.setScrollPosition()),75)),_defineProperty(this,"_debouncedSetViewportSize",u()((()=>this.setViewportSize()),150)),_defineProperty(this,"onScroll",(()=>{this._debouncedSetScrollPosition();var e=m.scrollTop(),t=e<=this.lastScrollPosition?"up":"down",r=e>=3*window.innerHeight,o={};this.lastScrollPosition=e,r!==this.data.isScrolled&&(o.isScrolled=r),t!==this.data.scrollDirection&&(o.scrollDirection=t),l()(o)||this.setData(o)})),this.setViewportSize()}get events(){return{setScroll:"scrollToPosition"}}get defaultData(){return{isScrolled:!1}}scrollToPosition(e){var t=v()("html, body");"object"!=typeof e&&(e={position:e}),"number"==typeof e.position&&(e.transition?t.animate({scrollTop:e.position},333,e.callback):(t.scrollTop(e.position),e.callback&&e.callback()))}getScrollPosition(){return{scrollPosition:m.scrollTop(),scrollUnits:Math.round(5*m.scrollTop()/window.innerHeight),scrollPage:Math.round(m.scrollTop()/window.innerHeight),element:window}}setScrollPosition(){this.setData(this.getScrollPosition())}getViewportSize(){var e={},t=window.innerWidth;return i()(b,(function(r,o){r[1]?h()(t,r[0],r[1]+1)&&(e[o]=!0):t>=r[0]&&(e[o]=!0)})),S.removeClass(f()(b)).addClass(f()(e)),{width:t,height:window.innerHeight,density:window.devicePixelRatio||1,size:e}}setViewportSize(){S.length||v()((()=>{S=v()(document.body),this.setData(this.getViewportSize())}));var e=this.getViewportSize(),t=this.getScrollPosition();this.setData(n()(e,t)),document.documentElement.style.setProperty("--vh","".concat(e.height,"px"))}startEventListeners(){m.on("scroll",this.onScroll).on("resize",this._debouncedSetViewportSize).on("visibilitychange",(()=>d.A.emit("visible"===document.visibilityState?"windowFocus":"windowBlur")))}}const P=new ViewportStore},80009:(e,t,r)=>{r.d(t,{A:()=>storesInit});var o=r(35994),n=r(32359),a=r(18742),i=r(25205),s=r(17667),l=r(18060),c=r(96721),u=r(61738),d=r(71086),p=r(43346),v=r.n(p),g=r(7309),f=r.n(g),y=r(61505),h=r.n(y),b=r(48081),m=r.n(b),S=r(97200),P=r.n(S);const _={events:{openDialog:"onOpenDialog",pushDialog:"onPushDialog",closeDialog:"onCloseDialog",showToast:"showToast",closeToast:"closeToast"},defaultData:{dialogs:[],toasts:[]},getDialog(e){if(e)return e.component||(e={component:e}),e.key=P()(),e},onOpenDialog(e){(e=this.getDialog(e))&&this.setData({dialogs:this.data.dialogs.concat(e)})},onPushDialog(e){(e=this.getDialog(e))&&this.setData({dialogs:[e].concat(this.data.dialogs)})},onCloseDialog(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.id?this.setData({dialogs:m()(this.data.dialogs,h()({id:e.id}))}):this.setData({dialogs:this.data.dialogs.splice(1)})},showToast(e){e=e||{};var t,r=this.data.toasts;e.name=e.name||"toast",e.id?t=f()(r,(t=>t.id===e.id)):e.id="toast-"+P()(),t?v()(t,e):(e.key=e.id,r.unshift(e)),this.setData({toasts:r})},closeToast(e){var t,r=this.data.toasts;if((e=e||{}).id){for(t=0;t<r.length;t++)if(r[t].id===e.id){r.splice(t,1);break}}else r.pop();this.setData({toasts:r})}},A={events:{editPhotoEngaged:"onEditPhotoEngaged",editPhotoDisengaged:"onEditPhotoDisengaged"},onEditPhotoEngaged(e){this.setData({editingPhoto:e})},onEditPhotoDisengaged(){this.setData({editingPhoto:null})}};var O=r(74692),w=r.n(O),C=r(27236),I="full-screen",j="fs-ios",D=0;const E={events:{enterFullScreen:"onEnterFullScreen",exitFullScreen:"onExitFullScreen"},onEnterFullScreen(){var{useFixedPosition:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D++,w()(document.body).addClass(I),(C.A.isIOS()||e)&&(this._currentScrollPosition=document.scrollingElement.scrollTop,w()(document.body).addClass(j)),this.setData({fullScreen:!0})},onExitFullScreen(){--D<1&&(D=0,this._currentScrollPosition&&this._currentScrollPosition!==document.scrollingElement.scrollTop&&(document.scrollingElement.scrollTop=this._currentScrollPosition,this._currentScrollPosition=void 0),w()(document.body).removeClass(I,j),this.setData({fullScreen:!1}))}};var T,F,R=r(91648),N=r.n(R),k=r(7350),x=r.n(k),G=r(73725),L={27:"escape",37:"prev",39:"next",73:"info",38:"up",40:"down",32:"space",46:"delete",8:"delete",9:"tab",67:"comment",70:"favorite"},M=[];w()((()=>{w()(window).on("keydown.globalKeyHandler",(e=>{var t=L[e.which];t&&(M.length&&(t="".concat(M[0],".").concat(t)),o.A.emit(t))})).on("mousemove.mouseJiggle",x()((e=>{Math.max(Math.abs(T-e.clientX),Math.abs(F-e.clientY))>=150&&o.A.emit("mouseJiggle"),F=e.clientY,T=e.clientX}),300)).on("popstate",(()=>o.A.emit("popState")))}));const U={events:{stopKeyEvents:"onStopKeyEvents",resumeKeyEvents:"onResumeKeyEvents"},onStopKeyEvents(e){e.reserveFor?M.indexOf(e.reserveFor)>-1?G.A.warn("stopKeyEvents already reserved for %s",e.reserveFor):M.unshift(e.reserveFor):G.A.warn("stopKeyEvents must pass reserveFor identifier")},onResumeKeyEvents(e){e.reserveFor?M=N()(M,e.reserveFor):G.A.warn("resumeKeyEvents must pass reserveFor identifier")}};var B=0;const q={events:{startLoading:"onStartLoading",endLoading:"onEndLoading"},onStartLoading(){B++,this.setData({loading:!0})},onEndLoading(){--B<1&&(B=0,this.setData({loading:!1}))}},Q={events:{startOperation:"onStartOperation",endOperation:"onEndOperation"},defaultData:{runningOperations:{}},onStartOperation(e){var{runningOperations:t}=this.data;t[e.id]=e,this.setData({runningOperations:t})},onEndOperation(e){var{runningOperations:t}=this.data;t.hasOwnProperty(e.id)&&delete t[e.id],this.setData({runningOperations:t})}};var K=["fragment","history","pathChanged"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const z={events:{routeChanged:"onRouteChanged"},defaultData:{fragment:null,lastFragment:null,route:{props:{query:{}},metrics:{pageType:"",pageContext:""}}},onRouteChanged(e){var{fragment:t,history:r,pathChanged:o}=e,n=_objectWithoutProperties(e,K);this.setData({history:r,route:n,fragment:t,lastFragment:!0===o?this.data.fragment:this.data.lastFragment})}},V={events:{pauseStory:"onPauseStory",playStory:"onPlayStory"},defaultData:{storyPlaying:!1,storyId:null},onPlayStory(e){var t={storyPlaying:!0};e&&(t.storyId=e),this.setData(t)},onPauseStory(){this.setData({storyPlaying:!1})}},J={events:{pauseVideo:"onPauseVideo",playVideo:"onPlayVideo",stopVideo:"onStopVideo",endVideo:"onEndVideo"},defaultData:{videoPlaying:!1,videoId:null,hasPlayedVideo:!1},onPlayVideo(e){var t={videoPlaying:!0,hasPlayedVideo:!0};e&&(t.videoId=e),this.setData(t)},onPauseVideo(){this.setData({videoPlaying:!1})},onEndVideo(){this.setData({videoPlaying:!1})},onStopVideo(){this.setData({videoId:null,videoPlaying:!1,hasPlayedVideo:!1})}};var H=r(44804);const Z={defaultData:{}};var W=r(97463),Y=r(15103);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X={events:{updateRecognitionEnabled:"updateRecognitionEnabled",updateImageRecognitionSettings:"updateImageRecognitionSettings"},updateRecognitionEnabled(e){var{isEnabled:t}=e;this.setData({recognitionEnabled:t})},updateImageRecognitionSettings(e){var{isThingsRecognitionEnabled:t,isPeopleRecognitionEnabled:r}=e;this.setData({isThingsRecognitionEnabled:t,isPeopleRecognitionEnabled:r})},setInitialData(e){var t;if(e){var{user:r,onboarding:o={},accountFeatures:n=[]}=e,{accountFeatures:{onboarded:a=!1}={},accountSettings:i={},screens:s=[]}=o,l=(0,Y.j8)(n),c=(0,Y.UI)(l,Y.SD.people).includes(Y.s7.LOCATION),u=(0,Y.UI)(l,Y.SD.things).includes(Y.s7.PREFERENCE),d=(0,Y.G7)(l,Y.SD.things),p=(0,Y.G7)(l,Y.SD.people),v=(0,Y.G7)(l,Y.SD.places),g=d||u,f=p||!c;this.setData(_objectSpread(_objectSpread(_objectSpread({},i),r),{},{onboarded:a||0===(null!==(t=s.length)&&void 0!==t?t:0),recognitionAvailable:g,recognitionEnabled:p,recognitionHidden:!f,isThingsRecognitionEnabled:d,isPeopleRecognitionEnabled:p,isPlacesRecognitionEnabled:v}))}}};var $=r(79050),ee=r(84723),te=r(21572);const re={events:{changeLanguagePreference:"onChangeLanguagePreference"},onChangeLanguagePreference:function onChangeLanguagePreference(e){var{language:t}=this.data;e&&e!==t&&(this.setData({language:e,languagePending:!0}),ee.A.changeLanguage(e).done((e=>{var{strings:t}=e;this.setData({languagePending:!1}),t?(o.A.emit("stringSync",t),o.A.emit("update")):window.location.reload()})).fail((()=>{this.setData({language:t,languagePending:!1}),o.A.emit("showToast",{className:"error",message:(0,te.A)("amazon-photos-generic-service-error")})})))}};var oe=r(78439),ne=r(53540),ae=r(20888);const ie={events:{fileComplete:"onFileComplete",updateAccountStatus:"checkAccountStatus",updateFamilyMediaStatus:"checkFamilyMediaStatus"},defaultData:{hasContent:!1,numMedia:0,numFamilyMedia:0},checkAccountStatus:function checkAccountStatus(){var e=this;return oe.A.search({filters:(0,ae.A)(),sort:(0,ne.Ay)({sortToken:"sortDateTaken",order:"desc"}),asset:"NONE",limit:1,searchContext:"customer"}).done((function(t){t=t||{},e.setData({hasContent:Boolean(t.count),numMedia:t.count})}))},checkFamilyMediaStatus:function checkFamilyMediaStatus(){var e=this;return oe.A.search({filters:(0,ae.A)({familyMembers:this.data.customerId}),sort:(0,ne.Ay)({sortToken:"sortDateTaken",order:"desc"}),asset:"NONE",limit:1,searchContext:"family"}).done((function(t){t=t||{},e.setData({numFamilyMedia:t.count})}))},onFileComplete:function onFileComplete(){this.setData({hasContent:!0})}};var se=r(58156),le=r.n(se),ce=r(79859),ue=r.n(ce),de=r(67172),pe=r(92854),ve=r(1683),ge=r(33295),fe=r(47178),ye=["unseenAggregations","capabilities","preferences"];function profile_mixin_objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function profile_mixin_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const he={events:{routeChanged:"onNavigate",checkGroupUnseenContent:"getGroupUnseenCounts",getStoriesUnseenCounts:"getStoriesUnseenCounts"},getGroupUnseenCounts(){de.A.getProfile().done((e=>{var{unseenAggregations:t={},capabilities:r,preferences:o}=e,n=profile_mixin_objectWithoutProperties(e,ye),a=t.groupCount||0;a>0&&ve.A.log("BadgeShown",{eventTag:"SharingNotification",eventCount:a},d.A.getPageContext());var i=!1,s=!1;this.data.unseenGroupCount&&a===this.data.unseenGroupCount||(ue()(r,"ALEXA_CONTACTS_ELIGIBLE")&&(i=!0,s="SYNC"===le()(o,"contacts.ALEXA")),this.setData({profile:n,unseenGroupCount:a,alexaCapability:i,isAlexaSyncOn:s}))}))},getStoriesUnseenCounts(){pe.A.listStories({limit:200}).done((e=>{var{stories:t}=e,r=t.length,o=t.filter((e=>e.seen)).length;if(0!==r&&0===o)ve.A.log("BadgeShown",{eventTag:"StoriesNew"},d.A.getPageContext()),this.setData({storiesFtue:!0});else{var n=r-o;0!==n&&ve.A.log("BadgeShown",{eventTag:"StoriesCount",eventCount:n},d.A.getPageContext()),this.setData({unseenStoriesCount:n})}}))},onNavigate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{component:t}=e;switch(t){case ge.A:this.setData({hasVisitedGroupsPage:!0});break;case fe.A:this.setData({hasVisitedStoriesPage:!0})}}};var be=r(32239);const me={events:{"service-failure":"onServiceFail"},onServiceFail(){o.A.emit("closeDialog"),(0,be.A)((0,te.A)("amazon-photos-error-fatal-body"),{heading:(0,te.A)("amazon-photos-error-fatal-header"),confirmText:(0,te.A)("amazon-photos-error-fatal-button"),name:"ServiceCallErrorDialog",onConfirmClick:()=>window.location.reload()})}};var Se=r(24903),Pe=r(77112),_e=r(32608);function stores_init_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function stores_init_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?stores_init_ownKeys(Object(r),!0).forEach((function(t){stores_init_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):stores_init_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function stores_init_defineProperty(e,t,r){return(t=function stores_init_toPropertyKey(e){var t=function stores_init_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function storesInit(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.A.addMixin(_).addMixin(A).addMixin(E).addMixin(U).addMixin(q).addMixin(Q).addMixin(z).addMixin(V).addMixin(J).setInitialData(e.Runtime),u.A.startEventListeners(),W.A.addMixin(X).addMixin($.Ay).addMixin(re).addMixin(ie).addMixin(he).addMixin(me).setInitialData({user:e.User,onboarding:e.Onboarding,features:e.Features,accountFeatures:e.AccountFeatureResponse}),H.A.addMixin(Z).setInitialData(e.Strings),s.A.setInitialData({features:e.Features,accountFeatures:e.AccountFeatureResponse}),i.A.setInitialData(stores_init_objectSpread(stores_init_objectSpread({},e.FamilyMembers),e.Invitations)),a.A.setInitialData(e.Config),l.Ay.setInitialData(e.Prints),c.A.setInitialData({user:e.User}),(0,Se.JD)((0,Pe.Qv)(e.AccountSettings)),(0,Se.JD)((0,_e.Qv)(e.Notifications))}o.A.listen("uncache",n.e3)},77112:(e,t,r)=>{r.d(t,{BB:()=>p,Ff:()=>c,JD:()=>d,Qv:()=>u,Vm:()=>v,r2:()=>selectOwnAvatarNodeId});var o=r(43816),n=r(84723),a=r(51186),i={gridViewPreferredDisplay:"",preferredEmailClient:"",ownAvatarNodeId:""},s=(0,o.Z0)({name:"accountSettings",initialState:i,reducers:{hydrate(e,t){var{payload:r}=t,{gridViewPreferredDisplay:o,preferredEmailClient:n,ownAvatarNodeId:a}=r||{};"string"==typeof o&&"0"!==o&&(e.gridViewPreferredDisplay=o),"string"==typeof n&&"0"!==n&&(e.preferredEmailClient=n),"string"==typeof a&&a.length>0&&(e.ownAvatarNodeId=a)},setGridViewPreferredDisplay(e,t){var{payload:r=i.gridViewPreferredDisplay}=t;e.gridViewPreferredDisplay=r},setPreferredEmailClient(e,t){var{payload:r=i.preferredEmailClient}=t;e.preferredEmailClient=r},setOwnAvatarNodeId(e,t){var{payload:r}=t;e.ownAvatarNodeId=r}}}),{actions:l}=s,selectOwnAvatarNodeId=e=>e.accountSettings.ownAvatarNodeId;(0,a.Zv)({actionCreator:l.setGridViewPreferredDisplay,effect:e=>{var{payload:t}=e;n.A.setPreferredDisplayType(t)}}),(0,a.Zv)({actionCreator:l.setPreferredEmailClient,effect:e=>{var{payload:t}=e;n.A.setPreferredEmailClient(t)}});var{reducer:c}=s,{hydrate:u,setGridViewPreferredDisplay:d,setPreferredEmailClient:p,setOwnAvatarNodeId:v}=l},66361:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(55378),n=r.n(o),a=r(85026),i=r(20888),s=r(53540),l=r(16695),c=r(59854),u=r(65536);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class SearchStore extends l.A{get events(){return _objectSpread(_objectSpread({},super.events),{},{search:this.onSearch,removedFacesFromPerson:this.onRemovedFacesFromPerson})}onSearch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sort:t,context:r="customer",order:o="desc",keyword:n,query:l={}}=e;if(n){var d,p=(0,c.A)(),v=(0,i.A)(p),g=[(0,i.A)(n.toQueryHash(),!1),v],f={operation:this.operation,parseResponse:this.parseResponse,sort:(0,s.Ay)({sortToken:null!=t?t:"sortDateTaken",order:o}),filters:g.join(" AND "),lastFilter:l.lcf,searchContext:r,useNextToken:!1,groupByForTime:p.timeMonth?"day":"month"};(0,u.u)()&&"all"===n.category&&(f.filters=v.toString(),f.searchText=n.name,d=!t||t===s._6.SortRelevance,f.sort=(0,s.Ay)({sortToken:null!=t?t:s._6.SortIntelligent}),f.histogramGroup=d?"contentDate":null);var{collection:y}=this.data;y?y.reset(f):y=new a.A(f),this.setData({keyword:n,sort:t,order:o,context:r,collection:y})}}onRemovedFacesFromPerson(){var{nodeFacePairs:e=[],personId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name:r}=this.getProperty("keyword",{}),o=this.getProperty("collection");o&&t&&r&&t===r&&o.deleteModels(n()(e,"node"))}}const d=new SearchStore},41031:(e,t,r)=>{r.d(t,{Nb:()=>_,B5:()=>S,bf:()=>y,Ay:()=>m,Sx:()=>V,BF:()=>D,sv:()=>B,ON:()=>q,xy:()=>U,CZ:()=>E,DB:()=>F,OQ:()=>T,w9:()=>N,J3:()=>R,IW:()=>K,Ms:()=>b,ss:()=>k,Ju:()=>Q,sc:()=>x,MG:()=>J,go:()=>H,R3:()=>z,yU:()=>I,Xj:()=>C,Wz:()=>v,TZ:()=>g,z9:()=>f});var o=r(43816),n=r(25508),a=r(33237),i=r(97463),s=r(92854),l=r(74169),c=r(76202),u=r(77760);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var d="askPhotos",p={qAndAState:{currentQuestion:null,previousQuestionId:null,currentQuestionContextRequestStatus:c.Z.IDLE,currentQuestionContext:null,currentResponseRequestStatus:c.Z.IDLE,currentResponseContext:null,answer:null,followUpQuestions:null,shoppingSuggestions:null,musicSuggestions:null,submitFeedbackStatus:c.Z.IDLE},curationState:{answer:null,question:null,curationRequestStatus:c.Z.IDLE,currentThreadId:null,currentQueryId:null,dynamicCategories:[],initialNodes:[],storybookDialogOpen:!1,activeStorybookChapterIndex:-1,storyGenerationStatus:c.Z.IDLE,categoryStories:{}}},getRegion=()=>{var e=i.A.getProperty("region");return"EU"===e?a.sb.EU:"FE"===e?a.sb.FE:a.sb.NA},getEnvironment=()=>l.Vb?a.OH.Development:a.OH.Prod,v=(0,o.zD)("".concat(d,"/submitFeedback"),function(){var e=_asyncToGenerator((function*(e,t){var{getState:r}=t,o=i.A.getProperty("customerId"),n=getRegion(),s=getEnvironment(),l=r().askPhotos.qAndAState.previousQuestionId,c=i.A.getProperty("sessionId");l&&(yield(0,a.Wz)(e,l,o,null,c,n,s))}));return function(t,r){return e.apply(this,arguments)}}()),g=(0,o.zD)("".concat(d,"/submitQuestion"),function(){var e=_asyncToGenerator((function*(e,t){var{dispatch:r}=t;r(h.actions.setCurrentQuestion(e)),r(h.actions.setCurrentQuestionContextRequestStatus(c.Z.PENDING));var o=i.A.getProperty("customerId"),n=getRegion(),s=getEnvironment(),l=i.A.getProperty("sessionId");try{var u=yield(0,a.TZ)(e,null,o,null,l,n,s);return r(h.actions.setCurrentQuestionContextRequestStatus(c.Z.SUCCEEDED)),r(h.actions.setCurrentQuestionContext(u.answerContext)),r(h.actions.setPreviousQuestionId(u.queryId)),(0,a.OK)(u.queryId,o,null,l,n,s)}catch(e){return r(h.actions.setCurrentQuestionContextRequestStatus(c.Z.FAILED)),Promise.reject()}}));return function(t,r){return e.apply(this,arguments)}}()),f=(0,o.zD)("".concat(d,"/updateDynamicCategories"),function(){var e=_asyncToGenerator((function*(e,t){var{getState:r,dispatch:o}=t;o(h.actions.setActiveStorybookChapterIndex(p.curationState.activeStorybookChapterIndex)),o(h.actions.setDynamicCategoryQuestion(e));var n=r(),s=i.A.getProperty("customerId"),l=i.A.getProperty("sessionId"),c=getEnvironment(),u=yield(0,a.Oc)(e,n.askPhotos.curationState.currentThreadId,s,null,l,a.sb.NA,c);return o(h.actions.setInitialCurationNodes(u.result.dynamicCategories)),yield(0,a.z9)(u.threadId,u.queryId,(e=>{o(h.actions.setInitialCurationNodes(e.result.dynamicCategories)),o(h.actions.setDynamicCategoryContents(e.result.dynamicCategories))}),s,null,l,a.sb.NA,c)}));return function(t,r){return e.apply(this,arguments)}}()),y=(0,o.zD)("".concat(d,"/createStoryForCategory"),function(){var e=_asyncToGenerator((function*(e,t){var{getState:r}=t,{category:o,storySubtitle:n}=e,{name:a,nodes:i}=o,l=i.map((e=>e.id)),c=yield Promise.resolve(s.A.createStory({id:"my_moments_album",name:a,subtitle:n,nodeIds:l,coverPhotoId:l[0]})),u=yield Promise.resolve(s.A.getStory({type:"my_moments_album",id:c.collectionId}));return{categoryIndex:r().askPhotos.curationState.dynamicCategories.indexOf(o),story:u.story}}));return function(t,r){return e.apply(this,arguments)}}()),h=(0,u.K)({name:d,initialState:p,reducers:{clearQAndASession(e){e.qAndAState=p.qAndAState},setCurrentQuestion(e,t){var{payload:r}=t;e.qAndAState.currentQuestion=r},setCurrentQuestionContext(e,t){var{payload:r}=t;e.qAndAState.currentQuestionContext=r},setCurrentQuestionContextRequestStatus(e,t){var{payload:r}=t;e.qAndAState.currentQuestionContextRequestStatus=r},setPreviousQuestionId(e,t){var{payload:r}=t;e.qAndAState.previousQuestionId=r},clearCurationSession(e){e.curationState=p.curationState},setDynamicCategoryQuestion(e,t){var{payload:r}=t;e.curationState.question=r},setDynamicCategorySessionMetadata(e,t){var{payload:r}=t;e.curationState.currentQueryId=r.currentQueryId,e.curationState.currentThreadId=r.currentThreadId},setDynamicCategoryContents(e,t){var{payload:r}=t;e.curationState=_objectSpread(_objectSpread({},e.curationState),{},{dynamicCategories:r})},setInitialCurationNodes(e,t){var{payload:r}=t;e.curationState.initialNodes.length<1&&r&&r.length>0&&r[0].nodes&&r[0].nodes.length>0&&(e.curationState.initialNodes=r[0].nodes)},setStorybookDialogOpen(e,t){var{payload:r}=t;e.curationState.storybookDialogOpen=r},setActiveStorybookChapterIndex(e,t){var{payload:r}=t;e.curationState.activeStorybookChapterIndex=r}},extraReducers:e=>{e.addCase(g.pending,(e=>_objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{currentResponseRequestStatus:c.Z.PENDING})}))).addCase(g.fulfilled,((e,t)=>{var r,o,n,a;return _objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{currentResponseRequestStatus:c.Z.SUCCEEDED,previousQuestionId:t.payload.queryId,answer:(null===(r=t.payload)||void 0===r?void 0:r.answer)||null,currentResponseContext:t.payload.answerContext,followUpQuestions:(null===(o=t.payload)||void 0===o?void 0:o.followUpQuestions)||[],shoppingSuggestions:(null===(n=t.payload)||void 0===n?void 0:n.shoppingSuggestions)||[],musicSuggestions:(null===(a=t.payload)||void 0===a?void 0:a.musicSuggestions)||[]})})})).addCase(g.rejected,(e=>_objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{currentResponseRequestStatus:c.Z.FAILED})}))).addCase(v.pending,(e=>_objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{submitFeedbackStatus:c.Z.PENDING})}))).addCase(v.fulfilled,(e=>_objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{submitFeedbackStatus:c.Z.SUCCEEDED})}))).addCase(v.rejected,(e=>_objectSpread(_objectSpread({},e),{},{qAndAState:_objectSpread(_objectSpread({},e.qAndAState),{},{submitFeedbackStatus:c.Z.FAILED})}))).addCase(f.pending,(e=>_objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{curationRequestStatus:c.Z.PENDING,storybookDialogOpen:!0})}))).addCase(f.fulfilled,((e,t)=>{var r;return _objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{answer:t.payload.result.answer?t.payload.result.answer:null,curationRequestStatus:c.Z.SUCCEEDED,dynamicCategories:t.payload.result.dynamicCategories,currentThreadId:t.payload.threadId,currentQueryId:t.payload.queryId,activeStorybookChapterIndex:0,storybookDialogOpen:!(null===(r=t.payload.result.dynamicCategories)||void 0===r||!r.length)})})})).addCase(f.rejected,(e=>_objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{curationRequestStatus:c.Z.FAILED,storybookDialogOpen:!1})}))).addCase(y.pending,(e=>_objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{storyGenerationStatus:c.Z.PENDING})}))).addCase(y.fulfilled,((e,t)=>_objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{storyGenerationStatus:c.Z.SUCCEEDED,categoryStories:_objectSpread(_objectSpread({},e.curationState.categoryStories),{},{[t.payload.categoryIndex]:t.payload.story})})}))).addCase(y.rejected,(e=>_objectSpread(_objectSpread({},e),{},{curationState:_objectSpread(_objectSpread({},e.curationState),{},{storyGenerationStatus:c.Z.FAILED})})))},selectors:{selectAnswer:e=>e.qAndAState.answer,selectCurrentQuestion:e=>e.qAndAState.currentQuestion,selectCurrentQuestionContextRequestStatus:e=>e.qAndAState.currentQuestionContextRequestStatus,selectCurrentQuestionContext:e=>e.qAndAState.currentQuestionContext,selectCurrentResponseStatus:e=>e.qAndAState.currentResponseRequestStatus,selectCurrentResponseContext:e=>e.qAndAState.currentResponseContext,selectFollowUpQuestionSuggestions:e=>e.qAndAState.followUpQuestions,selectShoppingSuggestions:e=>e.qAndAState.shoppingSuggestions,selectMusicSuggestions:e=>e.qAndAState.musicSuggestions,selectSubmitFeedbackStatus:e=>e.qAndAState.submitFeedbackStatus,selectCurationRequestStatus:e=>e.curationState.curationRequestStatus,selectCurationQuestion:e=>e.curationState.question,selectCurationAnswer:e=>e.curationState.answer,selectCurrentDynamicCategoriesThreadId:e=>e.curationState.currentThreadId,selectDynamicCategories:e=>e.curationState.dynamicCategories,selectInitialCurationNodes:e=>e.curationState.initialNodes,selectStorybookDialogOpen:e=>e.curationState.storybookDialogOpen,selectActiveStorybookChapterIndex:e=>e.curationState.activeStorybookChapterIndex,selectStoryForChapterIndex:e=>e.curationState.categoryStories[e.curationState.activeStorybookChapterIndex],selectStoryGenerationStatus:e=>e.curationState.storyGenerationStatus}}),b=(0,n.Mz)([h.selectors.selectDynamicCategories,h.selectors.selectActiveStorybookChapterIndex],((e,t)=>{if(!(t<0))return(e=>{if(e){var t=i.A.getProperty("customerId");return{id:"temp",name:e.name,collectionType:"my_moments_album",ownerId:t,coverPhoto:e.nodes[0].id,videoNarrative:{slideList:e.nodes.map((e=>({nodeId:e.id,ownerId:t}))),theme:"TETHER_SIMPLE",storyDuration:3e3*e.nodes.length,music:{},soundtrack:"UPLIFTING_VIBE",soundtrackInfo:{bpm:115,chunkSize:"8",chunks:["NewYearCelebration/1-8.mp3","NewYearCelebration/9-16.mp3","NewYearCelebration/17-24.mp3","NewYearCelebration/25-32.mp3","NewYearCelebration/33-40.mp3","NewYearCelebration/41-48.mp3","NewYearCelebration/49-56.mp3","NewYearCelebration/57-64.mp3","NewYearCelebration/65-72.mp3","NewYearCelebration/73-80.mp3","NewYearCelebration/81-88.mp3","NewYearCelebration/89-96.mp3","NewYearCelebration/97-104.mp3","NewYearCelebration/105-112.mp3","NewYearCelebration/113-120.mp3","NewYearCelebration/121-128.mp3","NewYearCelebration/129-136.mp3","NewYearCelebration/137-144.mp3","NewYearCelebration/145-152.mp3","NewYearCelebration/153-160.mp3","NewYearCelebration/161-168.mp3"],endpoint:"https://d2fx57almc8n7p.cloudfront.net/music/",name:"Uplifting Vibe",soundtrackId:"UPLIFTING_VIBE",src:"UpliftingVibe/fas-sounds-uplifting-vibe-looped.mp3"}}}}})(e[t])}));const m=h.reducer;var{clearQAndASession:S,setCurrentQuestion:P,clearCurationSession:_,setDynamicCategoryQuestion:A,setDynamicCategorySessionMetadata:O,setDynamicCategoryContents:w,setStorybookDialogOpen:C,setActiveStorybookChapterIndex:I,setInitialCurationNodes:j}=h.actions,{selectAnswer:D,selectCurrentQuestion:E,selectCurrentQuestionContextRequestStatus:T,selectCurrentQuestionContext:F,selectCurrentResponseStatus:R,selectCurrentResponseContext:N,selectFollowUpQuestionSuggestions:k,selectShoppingSuggestions:x,selectMusicSuggestions:G,selectSubmitFeedbackStatus:L,selectCurrentDynamicCategoriesThreadId:M,selectCurationRequestStatus:U,selectCurationAnswer:B,selectCurationQuestion:q,selectInitialCurationNodes:Q,selectDynamicCategories:K,selectStorybookDialogOpen:z,selectActiveStorybookChapterIndex:V,selectStoryForChapterIndex:J,selectStoryGenerationStatus:H}=h.selectors},86218:(e,t,r)=>{r.d(t,{Ay:()=>f,HM:()=>y,cI:()=>v,hQ:()=>h,je:()=>p,ks:()=>u});var o=r(43816),n=r(73725),a=r(41321),i=r(77760),s=r(76202),l=r(43293);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var c="banner",u={StandardPrints:{title:"amazon-photos-prints-awareness-banner-content-with-dollar-threshold-text",cta:"amazon-photos-prints-awareness-banner-cta-text"},ShutterflyPromotion:{title:"amazon-photos-prints-shutterfly-awareness-banner-content-text",cta:"amazon-photos-prints-shutterfly-awareness-banner-cta-text"}},d={banner:void 0,status:s.Z.IDLE,error:null},p=(0,o.zD)("".concat(c,"/InAppMessagingBanner"),_asyncToGenerator((function*(){try{var e=yield a.Ay.getInAppMessages(a.rM.BANNER);if(0===(null==e?void 0:e.length))throw new Error("No banner data found");var{campaignName:t,templateContent:r}=e[0],o=JSON.parse(r);return{title:o.title,cta:o.cta,siteUrl:o.siteUrl,campaignName:t}}catch(e){throw n.A.fatal(e),new Error("Error occurred when parsing IAM API")}}))),v=(0,o.zD)("".concat(c,"/recordCustomerAction"),function(){var e=_asyncToGenerator((function*(e,t){var{getState:r,dispatch:o}=t;try{var a,i=null===(a=r().banner.banner)||void 0===a?void 0:a.campaignName;if(!i)throw new Error("No campaign name found");o(g.actions.removeBanner());var s=yield l.A.recordCustomerAction({campaign:i,actionStatus:"DISMISSED"});if("Request processed successfully."!==s)throw new Error("Error occurred when calling the RecordCustomerAction API");return s}catch(e){throw n.A.fatal(e),new Error("Error occurred when calling the RecordCustomerAction API")}}));return function(t,r){return e.apply(this,arguments)}}()),g=(0,i.K)({name:c,initialState:d,reducers:{removeBanner:e=>{e.banner=void 0}},extraReducers:e=>{e.addCase(p.pending,(e=>_objectSpread(_objectSpread({},e),{},{status:s.Z.PENDING}))).addCase(p.fulfilled,((e,t)=>_objectSpread(_objectSpread({},e),{},{banner:t.payload,status:s.Z.SUCCEEDED}))).addCase(p.rejected,((e,t)=>_objectSpread(_objectSpread({},e),{},{status:s.Z.FAILED,error:t.error.message})))},selectors:{selectBanner:e=>e.banner,selectBannerStatus:e=>e.status}});const f=g.reducer;var{selectBanner:y,selectBannerStatus:h}=g.selectors,{removeBanner:b}=g.actions},45445:(e,t,r)=>{r.d(t,{T:()=>o});var o=200},20827:(e,t,r)=>{r.d(t,{$o:()=>fetchSelectedCollections,BF:()=>d,BM:()=>l,F2:()=>selectedCollectionsRemove,Gn:()=>getPreviewCollectionsForDeviceAccount,Ng:()=>v,QZ:()=>s,Rd:()=>recordCompositeResults,Ri:()=>i,SB:()=>n,So:()=>clearSelectedCollections,VO:()=>toggleDailyMemories,XQ:()=>recordCompositeError,_J:()=>o,aG:()=>selectedCollectionsUpdate,dN:()=>c,e1:()=>g,i$:()=>fetchCompositeData,iz:()=>p,kJ:()=>recordCollectionPreview,o7:()=>f,on:()=>recordSelectedCollectionsResults,qO:()=>recordSelectedCollectionsError,ul:()=>a,xP:()=>u});var o="DEVICE_PERSONALIZATION_COMPOSITE_DATA_FETCH",n="DEVICE_PERSONALIZATION_COMPOSITE_DATA_RECORD_ERROR",a="DEVICE_PERSONALIZATION_COMPOSITE_DATA_RECORD_RESULTS",i="DEVICE_PERSONALIZATION_DAILY_MEMORIES_TOGGLE",s="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_CLEAR",l="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_FETCH",c="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_RECORD_ERROR",u="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_RECORD_RESULTS",d="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_REMOVE",p="DEVICE_PERSONALIZATION_SELECTED_COLLECTIONS_UPDATES",v="DEVICE_PERSONALIZATION_COLLECTION_PREVIEW_FETCH",g="DEVICE_PERSONALIZATION_COLLECTION_PREVIEW_RECORD",f=[o,n,a,i,s,l,c,u,d,p,v,g];function getPreviewCollectionsForDeviceAccount(e){return{type:v,deviceAccount:e}}function clearSelectedCollections(){return{type:s}}function fetchCompositeData(){return{type:o}}function fetchSelectedCollections(e){return{type:l,deviceAccount:e}}function toggleDailyMemories(e){return{type:i,wasDailyMemoriesEnabled:e}}function recordCompositeError(){return{type:n}}function recordCompositeResults(){return{type:a,compositeResponse:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function recordSelectedCollectionsResults(e){return{type:u,deviceAccount:e,selectedCollectionsResponse:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}function recordSelectedCollectionsError(e){return{type:c,deviceAccount:e}}function selectedCollectionsRemove(){return{type:d,collectionIds:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function selectedCollectionsUpdate(){return{type:p,collectionIds:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],newCollectionData:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function recordCollectionPreview(e,t){return{type:g,collectionType:e,previewData:t}}},94356:(e,t,r)=>{r.d(t,{Ay:()=>y,D1:()=>selectSelectedCollections,IB:()=>selectCurrentDeviceData,Sb:()=>selectCollectionTypes,W3:()=>selectDeviceAccount,sI:()=>selectSelectedCollectionIds});var o=r(74692),n=r(60788),a=r(18742),i=r(84956),s=r(6468),l=r(60045),c=r(20827);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var{ALBUM:u,GROUP:d,PERSON:p,LOCATION:v}=i.A.COLLECTION_TYPES,{CALL_STATUSES:g}=i.A,f={collectionPreviews:{},collections:{},deviceAccount:null,devices:[],devicesCallStatus:g.PENDING,isDailyMemoriesEnabled:!1,selectedCollectionIds:[],selectedCollections:[],selectedCollectionsCallStatus:g.PENDING};const y=(0,s.v)(f,{[c.SB]:function compositeDataRecordError(e){return _objectSpread(_objectSpread({},e),{},{devicesCallStatus:g.ERROR})},[c.ul]:function compositeDataRecordResults(e,t){var{compositeResponse:r}=t,{devices:o}=r;return _objectSpread(_objectSpread({},e),{},{devices:[...o],devicesCallStatus:g.SUCCESS})},[c.Ri]:function dailyMemoriesToggle(e){return _objectSpread(_objectSpread({},e),{},{devicesCallStatus:g.STALE,isDailyMemoriesEnabled:!e.isDailyMemoriesEnabled})},[c.QZ]:function selectedCollectionsClear(e){return _objectSpread(_objectSpread({},e),{},{deviceAccount:f.deviceAccount,isDailyMemoriesEnabled:f.isDailyMemoriesEnabled,selectedCollectionIds:f.selectedCollectionIds,selectedCollections:f.selectedCollections,selectedCollectionsCallStatus:f.selectedCollectionsCallStatus})},[c.dN]:function selectedCollectionsRecordError(e,t){var{deviceAccount:r}=t;return _objectSpread(_objectSpread({},e),{},{deviceAccount:r,selectedCollectionsCallStatus:g.ERROR})},[c.xP]:function selectedCollectionsRecordResults(e,t){var{deviceAccount:r,selectedCollectionsResponse:o}=t,{collections:n=[]}=o,{DAILY_MEMORIES_COLLECTION_ID:a}=i.A,s=!1,l=n.map((e=>{var{collectionId:t,collectionName:r,collectionType:o,count:n,coverPhotoUrls:i=[]}=e;return t===a&&(s=!0),{collectionId:t,collectionName:r,collectionType:o,count:n,coverPhotoUrl:_getCoverPhotoUrlFromList(i)}})),c=l.map((e=>e.collectionId));return _objectSpread(_objectSpread({},e),{},{deviceAccount:r,isDailyMemoriesEnabled:s,selectedCollectionIds:c,selectedCollections:l,selectedCollectionsCallStatus:g.SUCCESS})},[c.BF]:function removeSelectedCollections(e,t){var{collectionIds:r}=t,{selectedCollections:o}=e,n=o.filter((e=>!r.includes(e.collectionId))),a=n.map((e=>e.collectionId));return _objectSpread(_objectSpread({},e),{},{devicesCallStatus:g.STALE,selectedCollections:n,selectedCollectionIds:a})},[c.iz]:function updateSelectedCollections(e,t){var{collectionIds:r=[],newCollectionData:o=[]}=t,{selectedCollections:n}=e,a=[...n,...o],i={};a.forEach((e=>{i[e.collectionId]=e}));var s=[...r],l=s.map((e=>i[e])).filter((e=>Boolean(e)));return _objectSpread(_objectSpread({},e),{},{devicesCallStatus:g.STALE,selectedCollections:l,selectedCollectionIds:s})},[c.Ng]:function getDeviceCollectionPreviews(e,t){for(var{deviceAccount:r}=t,o={operation:_makeApiRequest,parseResponse:_parseApiResponse,deviceAccount:r,limit:50},a=[u,d,p,v],i={},s=0;s<a.length;s++){var l=a[s],c=new n.A(_objectSpread(_objectSpread({},o),{},{collectionType:l}));i[a[s]]=c}return _objectSpread(_objectSpread({},e),{},{collections:i,collectionPreviews:{},deviceAccount:r})},[c.e1]:function recordCollectionPreviewData(e,t){var{collectionType:r,previewData:o}=t,{collectionPreviews:n}=e;return _objectSpread(_objectSpread({},e),{},{collectionPreviews:_objectSpread(_objectSpread({},n),{},{[r]:o})})}});function _getCoverPhotoUrlFromList(e){try{var t=new URL(e[0]),r=new URL(a.A.getProperty("urls.thumbnailServiceEndpoint")),{protocol:o,pathname:n,search:i,hash:s}=t,{hostname:l}=r;return"".concat(o,"//").concat(l).concat(n).concat(i).concat(s)}catch(e){}}function _parseApiResponse(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{collections:t=[]}=e;return e.data=t.map((e=>{var{coverPhotoUrls:t=[]}=e;return _objectSpread(_objectSpread({},e),{},{coverPhotoUrl:_getCoverPhotoUrlFromList(t)})})),e}function _makeApiRequest(e){var{nextToken:t,limit:r,deviceAccount:n,collectionType:a}=e,i=(0,o.Deferred)();return l.A.getCollections({nextToken:t,limit:r,deviceAccount:n,collectionType:a}).then(i.resolve).catch(i.reject),i.promise()}var selectDeviceAccount=e=>e.devicePersonalization.deviceAccount,selectCurrentDeviceData=e=>{var{deviceAccount:t,devices:r}=e.devicePersonalization;return r.find((e=>e.deviceAccount===t))||{}},selectSelectedCollections=e=>{var{selectedCollections:t}=e.devicePersonalization;return[...t]},selectSelectedCollectionIds=e=>[...e.devicePersonalization.selectedCollectionIds],selectCollectionTypes=e=>{var{collections:t={}}=e.devicePersonalization;return _objectSpread({},t)}},41374:(e,t,r)=>{r.d(t,{y:()=>a});var o=r(25508),n=r(84956),a=(0,o.Mz)([e=>e.devicePersonalization.selectedCollections],(e=>e.filter((e=>e.collectionType===n.A.COLLECTION_TYPES.GROUP))))},29297:(e,t,r)=>{r.d(t,{A:()=>k});var o=r(91648),n=r.n(o),a=r(34921),i=r.n(a),s=r(3739),l=r.n(s),c=r(47091),u=r.n(c),d=r(80299),p=r.n(d),v=r(62193),g=r.n(v),f=r(95950),y=r.n(f),h=r(39754),b=r.n(h),m=r(60895),S=r.n(m),P=r(43346),_=r.n(P),A=r(38221),O=r.n(A),w=r(1683),C=r(13489),I=r(73725),j=r(71086),D=r(78439),E=r(37023),T=r(21572),F=r(35994),R=r(90566);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=O()((()=>F.A.emit("service-failure")),5e3,{leading:!0});class FaceClustersStore extends F.A.Store{constructor(){super(...arguments),_defineProperty(this,"idsInProgress",new Set),_defineProperty(this,"idsToRequest",[]),_defineProperty(this,"bulkGetFaceClustersDebounced",O()((function bulkGetFaceClusters(e){var t=e;if(u()(e)>100){var r=l()(e,100);t=i()(e,100),bulkGetFaceClusters.call(this,r)}this.idsToRequest=n()(this.idsToRequest,...t);try{D.A.bulkGetFaceClusters({clusterIdList:t}).done((e=>{this.setFaceClusters(e.facePairs,e.errorMap)})).always((()=>{this.removeIdsInProgress(t)}))}catch(e){if(this.removeIdsInProgress(t),I.A.fatal("face-clusters.js store: ".concat(e)),"bulkGetFaceClusters does not accept null or undefined IDs"===e){var o="FaceClusterRetrievalError";w.A.log(o,{eventTag:"NullOrUndefinedClusterID"},j.A.getPageContext()),C.A.log({name:o,value:1,type:"COUNTER"}),N()}}}),50))}get events(){return{setFaceClusters:this.setFaceClusters,getFaceClusters:this.getFaceClusters,changeClusterAvatar:this.changeClusterAvatar,uncache:this.clearFaceClusters}}changeClusterAvatarToast(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};F.A.emit("showToast",_()({id:"changing-avatar",icon:"faces"},e))}showBlockingProgress(e){var{dfd:t,heading:r,name:o}=e;F.A.emit("openDialog",{component:E.A,props:{dfd:t,heading:r,name:o}})}changeClusterAvatar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodeId:t,clusterId:r}=e,o=D.A.setFaceClusterNode({id:r,nodeId:t});this.showBlockingProgress({dfd:o,heading:(0,T.A)("amazon-photos-people-change-photo-saved-pending"),name:"change-cluster-avatar-progress"}),o.done((e=>{S()((()=>{F.A.emit("closeDialog"),this.changeClusterAvatarToast({message:(0,T.A)("amazon-photos-people-change-photo-saved")}),e.clusterInfo?F.A.emit("setFaceClusters",[e.clusterInfo]):F.A.emit("getFaceClusters",[r]),F.A.emit("unlockSelectMode")}),1e3)})).fail((()=>{this.changeClusterAvatarToast({message:(0,T.A)("amazon-photos-people-change-photo-saved-error"),className:"error"})}))}removeIdsInProgress(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>this.idsInProgress.delete(e)))}setFaceClusters(e,t){var r={};b()(e,(e=>{r[e.cdsClusterId]=new R.Ay(e)})),b()(y()(t),(e=>{r[e]=!1})),this.setData(_()(this.data,r))}getFaceClusters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=("string"==typeof e?[e]:e).filter((e=>{var t=Boolean(this.data[e]),r=this.idsInProgress.has(e);return!t&&!r}));g()(t)||(t.forEach((e=>this.idsInProgress.add(e))),this.idsToRequest=p()(this.idsToRequest,t),this.bulkGetFaceClustersDebounced(this.idsToRequest))}uncache(){this.resetData()}}const k=new FaceClustersStore},25205:(e,t,r)=>{r.d(t,{A:()=>P});var o=r(33031),n=r.n(o),a=r(7309),i=r.n(a),s=r(87612),l=r.n(s),c=r(96540),u=r(35994),d=r(21572),p=r(73725),v=r(78439),g=r(97463),f=r(1683),y=r(71086),h=r(58992),b=r(34332),m=r(1809);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var S={ADMIN:1,SELF:2,MEMBER:3,OTHER:4};class FamilyVaultStore extends u.A.Store{get defaultData(){return{adminId:void 0,familyId:void 0,members:[],canInvite:!1}}get events(){return{getFamilyVaultInvitations:this.getInvitations,sendFamilyVaultInvitation:this.onSendInvitation,respondFamilyVaultInvitation:this.onRespondInvitation,deleteFamilyVaultInvitation:this.onDeleteInvitation,checkCanInvite:this.checkCanInvite,getFamilyMembers:this.getFamilyMembers,removeMember:this.removeMember,purgeRemoveFamilyMember:this.purgeRemoveFamilyMember,transferAdmin:this.transferAdmin,setFamilyName:this.setFamilyName}}setInitialData(e){var{adminId:t,familyName:r,familyId:o,members:n,invitations:a=[]}=e;this._setFamilyData({members:n}),this.setData({adminId:t,familyName:r,familyId:o,invitations:a})}getInvitations(){var e=this;return _asyncToGenerator((function*(){try{var t=yield b.A.listPendingInvitations();e.setData({invitations:t})}catch(e){}}))()}onSendInvitation(e){var t=this;return _asyncToGenerator((function*(){var{address:r,inviteId:o}=e,n="mixed",a=!1;t.setData({isInviteResponsePending:!0}),r?(0,h.x)(r)?n="email":(0,h.O)(r)&&(a=!0,n="phone"):n="resend";try{yield b.A.sendFamilyVaultInvitation(r,o,a),f.A.log("FamilyInvite",{eventTag:n},y.A.getPageContext()),u.A.emit("closeDialog"),t.getInvitations()}catch(e){u.A.emit("showToast",{name:"FamilyInvitationError",message:(0,d.A)("amazon-photos-generic-service-error"),className:"error"}),p.A.fatal("Failure sending invitation ".concat(o,". ").concat(JSON.stringify(e)))}t.setData({isInviteResponsePending:!1})}))()}onRespondInvitation(e){var t=this;return _asyncToGenerator((function*(){var r,{isAccepted:o,inviteId:n}=e,a=!1;t.setData({isInviteResponsePending:!0});try{o?(yield b.A.acceptFamilyVaultInvitation(n),u.A.emit("showToast",{className:"success",message:(0,d.A)("amazon-photos-join-family-success")})):yield b.A.declineFamilyVaultInvitation(n),a=!0}catch(e){o?e&&e.responseJSON&&e.responseJSON.message&&(r=e.responseJSON.message):u.A.emit("closeDialog")}t.setData({isInviteResponsePending:!1,invitationSucceeded:a,invitationError:r})}))()}onDeleteInvitation(e){var t=this;return _asyncToGenerator((function*(){var{inviteId:r}=e,{invitations:o}=t.data;t.setData({invitations:l()(o,(e=>e.inviteId!==r))});try{yield b.A.deleteFamilyVaultInvitation(r)}catch(e){p.A.fatal("Failure deleting inviteId ".concat(r,". ").concat(JSON.stringify(e)))}}))()}checkCanInvite(){var e=this;return _asyncToGenerator((function*(){var t=!1;try{t=yield b.A.getCanSendInvitations()}catch(e){p.A.fatal("Failed to get account state".concat(e&&e.message)),t=!1}e.setData({canInvite:t})}))()}getFamilyMembers(){var e=this;return _asyncToGenerator((function*(){var{hasNoFamily:t}=e.data;if(!e._getFamilyMembersPending&&!0!==t){e._getFamilyMembersPending=!0;try{var r=yield v.A.getFamily({noCache:!0});e._setFamilyData(r)}catch(t){e.setData({hasNoFamily:!0})}e._getFamilyMembersPending=!1}}))()}transferAdmin(e){var t=this;return _asyncToGenerator((function*(){var{targetCustomerId:r}=e;if(!r)throw new Error("transferAdmin missing targetCustomerId");try{yield v.A.transferFamilyAdmin({targetCustomerId:r}),t.getFamilyMembers()}catch(e){throw new Error("Cannot transfer admin to ".concat(r))}}))()}removeMember(e){var t=this;return _asyncToGenerator((function*(){var{targetCustomerId:r,data:o}=e;if(!r)throw new Error("removeMember missing targetCustomerId");try{if(yield v.A.removeFamilyMember({targetCustomerId:r,data:o}),r===g.A.getProperty("customerId"))return window.location.reload();u.A.emit("uncache"),t.getFamilyMembers()}catch(e){throw new Error("Unable to remove member")}}))()}setFamilyName(e){var t=this;return _asyncToGenerator((function*(){var{name:r}=e;try{t.setData({familyName:r}),yield v.A.setFamilyName(r)}catch(e){throw new Error("Unable to update family name")}}))()}purgeRemoveFamilyMember(e){return _asyncToGenerator((function*(){var{targetCustomerId:t}=e;if(!t)throw new Error("Purge remove action needs targetCustomer");try{var r=yield v.A.getFamily(),{adminId:o,callerId:n,members:a}=r;if(o!==n||o===t)return;var s=i()(a,(e=>e.customerId===t));if(!s)return;var{name:l,customerId:d}=s;u.A.emit("openDialog",c.createElement(m.A,{name:l,customerId:d}))}catch(e){p.A.fatal("Getting family details failed ".concat(e&&e.message))}}))()}_setFamilyData(e){var{members:t=[]}=e,r={},o=g.A.getProperty("customerId"),a=n()(t,(e=>e.customerId===o?S.SELF:S[e.role]||S.OTHER)).map((e=>{var t=_objectSpread(_objectSpread({},e),{},{firstName:e.customerId===o?(0,d.A)("amazon-photos-you"):e.name.split(" ")[0]});return r[e.customerId]=t,t}));this.setData({memberIdToMember:r,members:a})}}const P=new FamilyVaultStore},79419:(e,t,r)=>{r.d(t,{FO:()=>v,Gp:()=>initializeRootFolderId,QK:()=>l,TC:()=>setFolderPickerCurrentFolderId,av:()=>p,e4:()=>g,ep:()=>fetchCurrentFolderContents,fA:()=>setCloseFolderPicker,gH:()=>d,l0:()=>u,pe:()=>c,yb:()=>f});var o=r(78439),n=r(53540),a=r(6468),i=r(45445),s=r(57427);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var l="SET_FOLDER_PICKER_CURRENT_FOLDER_ID",setFolderPickerCurrentFolderId=e=>({type:l,currentFolderPickerFolderId:e}),c="SET_FOLDER_PICKER_CURRENT_FOLDER_CONTENTS",u="APPEND_FOLDER_PICKER_CURRENT_FOLDER_NEXT_PAGE_CONTENTS",d="SET_FOLDER_PICKER_LOADING",setFolderPickerLoading=e=>({type:d,folderPickerLoading:e}),p="SET_FOLDER_PICKER_LOADING_NEXT_PAGE",setFolderPickerLoadingNextPage=e=>({type:p,folderPickerLoadingNextPage:e}),v="SET_FOLDER_PICKER_PARENT_TREE",g="SET_CLOSE_FOLDER_PICKER",setCloseFolderPicker=()=>({type:g}),initializeRootFolderId=()=>function(){var e=_asyncToGenerator((function*(e){return o.A.getRootNodeId().then((t=>{e(setFolderPickerCurrentFolderId(t))}))}));return function(t){return e.apply(this,arguments)}}(),fetchCurrentFolderContents=e=>function(){var t=_asyncToGenerator((function*(t,r){t(setFolderPickerLoading(!0));var i,l,{folders:{rootFolderId:u,sortOrder:d,sortToken:p}}=r(),g=(0,n.Ay)({sortToken:p,order:d}),f=s.y.FOLDER,[y,h]=yield Promise.all([o.A.getFolderContents({parentFolderId:e,sort:g,kind:f}),(0,a.h)(o.A.getParentTree,e,u)]);t((i=y.data,l=y.count,{type:c,nodes:i,totalCount:l})),t({type:v,folderPickerParentTree:h}),t(setFolderPickerLoading(!1))}));return function(e,r){return t.apply(this,arguments)}}(),f=function fetchCurrentFolderNextPage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.T;return function(){var r=_asyncToGenerator((function*(r,a){var{folders:{sortToken:i,sortOrder:l},folderPicker:{currentFolderPickerContents:c,currentFolderPickerFolderCount:d,folderPickerLoadingNextPage:p}}=a();if(!(p||c.length>=d)){var v=(0,n.Ay)({sortToken:i,order:l});r(setFolderPickerLoadingNextPage(!0));var g,f=s.y.FOLDER,y=yield o.A.getFolderContents({parentFolderId:e,sort:v,kind:f,offset:c.length,limit:t});r((g=y.data,{type:u,nodes:g})),r(setFolderPickerLoadingNextPage(!1))}}));return function(e,t){return r.apply(this,arguments)}}()}},23934:(e,t,r)=>{r.d(t,{$L:()=>i,Nz:()=>selectLoading,dB:()=>selectCurrentFolderId,jE:()=>s,qO:()=>selectCurrentFolderContents,rn:()=>selectParentTree,vp:()=>selectLoadingNextPage,z6:()=>l});var o=r(25508),n=r(49479),a=r(45445),selectCurrentFolderId=e=>e.folderPicker.currentFolderPickerFolderId,selectCurrentFolderContents=e=>e.folderPicker.currentFolderPickerContents,selectCurrentFolderCount=e=>e.folderPicker.currentFolderPickerFolderCount,selectLoading=e=>e.folderPicker.folderPickerLoading,selectLoadingNextPage=e=>e.folderPicker.folderPickerLoadingNextPage,selectParentTree=e=>e.folderPicker.folderPickerParentTree,i=(0,o.Mz)([selectCurrentFolderContents],(e=>e.map((e=>new n.A(e))))),s=(0,o.Mz)([selectLoading,selectCurrentFolderCount],((e,t)=>!!e||0===t)),l=(0,o.Mz)([selectCurrentFolderContents,selectCurrentFolderCount,selectLoadingNextPage],((e,t,r)=>{var o=e.length;return o>=t||t-o<a.T?t:r?o+a.T:o+1}))},26939:(e,t,r)=>{r.d(t,{Es:()=>v,Gp:()=>initializeRootFolderId,Ig:()=>y,KN:()=>fetchCurrentFolderPagesForSelectAll,PR:()=>d,VC:()=>u,Wd:()=>b,Y7:()=>updateNodeInFolderContent,ZH:()=>P,Zb:()=>setSortParameters,bd:()=>f,ep:()=>m,ff:()=>g,hk:()=>h,oB:()=>p,yb:()=>S});var o=r(78439),n=r(53540),a=r(13489),i=r(17667),s=r(54318),l=r(6468),c=r(45445);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var u="APPEND_CURRENT_FOLDER_NEXT_PAGE_CONTENTS",d="SET_CURRENT_FOLDER_CONTENTS",setCurrentFolderContents=(e,t)=>({type:d,nodes:e,totalCount:t}),p="SET_LOADING",setLoading=e=>({type:p,loading:e}),v="SET_LOADING_NEXT_PAGE",setLoadingNextPage=e=>({type:v,loadingNextPage:e}),g="SET_PARENT_TREE",f="SET_ROOT_FOLDER",y="SET_START_TOKEN",setStartToken=e=>({type:y,startToken:e}),h="SET_SORT_PARAMETERS",setSortParameters=(e,t)=>({type:h,sortToken:e,sortOrder:t}),b="UPDATE_NODE_IN_FOLDER",updateNodeInFolderContent=(e,t)=>({type:b,nodeId:e,updatedProps:t}),initializeRootFolderId=()=>function(){var e=_asyncToGenerator((function*(e){return o.A.getRootNodeId().then((t=>{e({type:f,rootFolderId:t})}))}));return function(t){return e.apply(this,arguments)}}(),m=function fetchCurrentFolderContents(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var r=_asyncToGenerator((function*(r,a){r(setStartToken("")),t&&r(setLoading(!0));var{folders:{rootFolderId:c,sortOrder:u,sortToken:d}}=a(),p=(0,n.Ay)({sortToken:d,order:u}),v={parentFolderId:e,sort:p};i.A.isOn(s.jy.StartTokenListChildren)&&(v.startToken="");var[f,y]=yield Promise.all([o.A.getFolderContents(v),(0,l.h)(o.A.getParentTree,e,c)]);r(setCurrentFolderContents(f.data,f.count)),r((e=>({type:g,parentTree:e}))(y)),f.nextToken&&r(setStartToken(f.nextToken)),t&&r(setLoading(!1))}));return function(e,t){return r.apply(this,arguments)}}()},S=function fetchCurrentFolderNextPage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.T;return function(){var r=_asyncToGenerator((function*(r,l){var{folders:{currentFolderContents:c,currentFolderTotalCount:d,loadingNextPage:p,sortToken:v,sortOrder:g,startToken:f}}=l();if(!(p||c.length>=d)){a.A.log({name:"FolderViewMoreNodesRequested"});var y=(0,n.Ay)({sortToken:v,order:g});r(setLoadingNextPage(!0));var h={parentFolderId:e,sort:y,limit:t};i.A.isOn(s.jy.StartTokenListChildren)?h.startToken=f:h.offset=c.length;var b,m=yield o.A.getFolderContents(h);r((b=m.data,{type:u,nodes:b})),m.nextToken&&r(setStartToken(m.nextToken)),r(setLoadingNextPage(!1))}}));return function(e,t){return r.apply(this,arguments)}}()},fetchCurrentFolderPagesForSelectAll=(e,t)=>function(){var r=_asyncToGenerator((function*(r,o){var n=function(){var a=_asyncToGenerator((function*(){var{folders:{currentFolderContents:a,currentFolderTotalCount:i}}=o();if(a.length>=i||a.length>=t)return a;var s=c.T;return a.length+s>t&&(s=t-a.length),yield r(S(e,s)),n()}));return function recursivelyFetchPages(){return a.apply(this,arguments)}}();return n()}));return function(e,t){return r.apply(this,arguments)}}(),P=function removeDeletedFolderContent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(t,r)=>{var{folders:{currentFolderContents:o,currentFolderTotalCount:n}}=r();if(0!==e.length){var a=e.map((e=>e.id)),i=o.filter((e=>!a.includes(e.id))),s=Math.max(0,n-e.length);t(setCurrentFolderContents(i,s))}}}},61950:(e,t,r)=>{r.d(t,{$L:()=>l,CH:()=>i,Ec:()=>selectSortToken,LI:()=>selectSortOrder,ND:()=>selectIsFolderLoading,b7:()=>c,by:()=>selectCurrentFolderTotalCount,eI:()=>selectRootFolderId,jE:()=>s,qO:()=>selectCurrentFolderContents,vp:()=>selectLoadingNextPage,z6:()=>u});var o=r(25508),n=r(49479),a=r(45445),selectCurrentFolderContents=e=>e.folders.currentFolderContents,selectCurrentFolderTotalCount=e=>e.folders.currentFolderTotalCount,selectLoadingNextPage=e=>e.folders.loadingNextPage,selectRootFolderId=e=>e.folders.rootFolderId,selectIsFolderLoading=e=>e.folders.loading,selectSortToken=e=>e.folders.sortToken,selectSortOrder=e=>e.folders.sortOrder,i=(0,o.Mz)([e=>e.folders.parentTree],(e=>(null==e?void 0:e.length)>0?"".concat(e.map((e=>e.name)).join("/"),"/"):"")),s=(0,o.Mz)([selectIsFolderLoading,selectCurrentFolderTotalCount],((e,t)=>!!e||0===t)),l=(0,o.Mz)([selectCurrentFolderContents],(e=>e.map((e=>new n.A(e))))),c=(0,o.Mz)([l],(e=>e.filter((e=>e.isMedia)))),u=(0,o.Mz)([selectCurrentFolderContents,selectCurrentFolderTotalCount,selectLoadingNextPage],((e,t,r)=>{var o=e.length;return o>=t||t-o<a.T?t:r?o+a.T:o+1}))},25979:(e,t,r)=>{r.d(t,{A:()=>P});var o=r(42426),n=r.n(o),a=r(60895),i=r.n(a),s=r(7309),l=r.n(s),c=r(74692),u=r.n(c),d=r(42843),p=r(35994),v=r(1683),g=r(21572),f=r(67172),y=r(71086),h=r(32239),b=r(97463),m=r(94368);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={GLOBAL_NOTIFICATIONS_MUTED:"mute",MOBILE_CONTENT_ADDED:"mobile_new_content",MOBILE_MEMBER_JOINED:"mobile_new_members",MOBILE_COMMENT_ADDED:"mobile_new_comment",MOBILE_READ_RECEIPTS:"mobile_read_receipts",EMAIL_MEMBER_JOINED:"email_new_members",EMAIL_CONTENT_ADDED:"email_new_content"};class GroupSettingsStore extends p.A.Store{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];super(t),this.suspend()}get events(){return{getGroupSettings:this.onGetGroupSettings,updateGroupInviteLink:this.onUpdateInviteLink,removeModels:this.onRemoveModels,groupUpdated:this.onGroupUpdated,updateGroupNotificationSetting:this.onNotificationSettingsUpdated,updateGroupPrivacySetting:this.onGroupPrivacySettingsUpdated}}updatePreferenceSets(e){var{preferenceSets:t,setId:r,id:o,value:n,operation:a}=e,i=l()(t,{id:r})||{},s=l()(i.preferences,{id:o}),c=n;return s?("PRIVACY_LEVEL"===o&&(c=n?"PUBLIC":"PRIVATE"),s.value=c.toString(),a(t).fail((()=>{p.A.emit("showToast",{message:(0,g.A)("amazon-photos-generic-service-error"),className:"error"})}))):u().Deferred().reject().promise()}onGroupPrivacySettingsUpdated(e){var{privacySettings:t}=this.data,{groupId:r,eventTag:o,value:n,setId:a}=e,i=l()(t,{id:a})||{},s=l()(i.preferences,"GROUP_PRIVACY_PRESET");this.updatePreferenceSets(_objectSpread(_objectSpread({},e),{},{preferenceSets:t,operation:e=>f.A.patchPrivacyPreferences({groupId:r,preferenceSets:e})})).done((()=>this.onGroupUpdated({groupId:r}))).fail((()=>this.getPrivacyPreferences({groupId:r}))),this.setData({privacySettings:t}),s?v.A.log("SetGroupPrivacy".concat(s.value),{eventTag:o},y.A.getPageContext()):v.A.log("PrivacySetting".concat(n?"ON":"OFF"),{eventTag:o},y.A.getPageContext())}onNotificationSettingsUpdated(e){var{notifications:t}=this.data,{groupId:r}=e,o=b.A.getProperty("customerId");this.updatePreferenceSets(_objectSpread(_objectSpread({},e),{},{preferenceSets:t,operation:e=>f.A.patchMemberNotificationPreferences({groupId:r,memberId:o,preferenceSets:e})})).done((()=>this.logNotificationChangeMetric(e))).fail((()=>this.getMemberNotificationPreferences({groupId:r}))),this.setData({notifications:t})}logNotificationChangeMetric(e){var{id:t,value:r}=e,o=S[t]||t,n=r?"on":"off";v.A.log("ChangeNotificationPreferences",{eventTag:o,eventState:n},y.A.getPageContext())}onUpdateInviteLink(e){var{groupId:t}=e;(0,h.A)((0,g.A)("amazon-photos-group-invitation-link-change-confirm"),{name:"change-invite-link-confirm",heading:(0,g.A)("amazon-photos-group-invitation-link-change-heading"),confirmText:(0,g.A)("amazon-photos-ok"),onConfirmClick:()=>this.onUpdateInviteLinkConfirmed({groupId:t}),showCancel:!0,stackDialog:!0})}onUpdateInviteLinkConfirmed(e){var{groupId:t}=e;f.A.refreshGroupShare({groupId:t}).done((e=>{i()((()=>this.setData({shareUrl:e.shareUrl})),d.A.SHORT),p.A.emit("showToast",{icon:"groups",message:(0,g.A)("amazon-photos-group-invitation-link-change-success")}),v.A.log("ChangeGroupInviteLink",void 0,y.A.getPageContext())}))}onGetGroupSettings(){var{group:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){var{groupId:t}=e;this.setData({group:e}),this.getMembers({groupId:t}),this.getMemberNotificationPreferences({groupId:t}),e.isAlexaGroup||(this.getGroupShare({groupId:t}),this.getPrivacyPreferences({groupId:t}))}}getMembers(e){var{groupId:t}=e;f.A.listMembers({groupId:t,sort:"LASTVIEWEDDATE",direction:"DESC"}).done((e=>{for(var t=0;t<e.members.length;t++){var r=e.members[t];r.avatar=new m.A(r)}this.setData({members:e.members,membersCount:e.count})}))}getGroupShare(e){var{groupId:t}=e;f.A.getGroupShare({groupId:t}).done((e=>this.setData({shareUrl:e.shareUrl})))}getMemberNotificationPreferences(e){var{groupId:t}=e,r=b.A.getProperty("customerId");f.A.getMemberNotificationPreferences({groupId:t,memberId:r}).done((e=>{var{preferenceSets:t}=e;return this.setData({notifications:t})}))}getPrivacyPreferences(e){var{groupId:t}=e;f.A.getPrivacyPreferences({groupId:t,preferenceLevel:"EXPLICIT"}).done((e=>{var{preferenceSets:t}=e;return this.setData({privacySettings:t})}))}onGroupUpdated(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.data.group&&e===this.data.group.groupId&&(this.getMembers({groupId:e}),this.getGroupShare({groupId:e}),this.getPrivacyPreferences({groupId:e}))}onRemoveModels(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.data.group&&n()(e,(e=>e.id===this.data.group.groupId))&&p.A.emit("closeDialog")}}const P=new GroupSettingsStore},51189:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(55378),n=r.n(o),a=r(90801),i=r(67172),s=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class InviteGroupStore extends s.A{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{term:t,kindFilter:r,groupFilter:o,memberFilter:n,inviteFilter:a,nextToken:s,limit:l}=e;return i.A.searchContacts({term:t,kindFilter:r,groupFilter:o,memberFilter:n,inviteFilter:a,nextToken:s,limit:l})})),_defineProperty(this,"parseResponse",(e=>(e.data=e.contacts,e)))}get events(){return{getContacts:this.onGetContentRequest}}getCollectionRequest(e){return _objectSpread(_objectSpread({operation:this.operation,parseResponse:this.parseResponse},e),{},{useNextToken:!0,limit:10})}getCollection(e){return new a.A(e)}onGetContentRequest(e){var{groupId:t}=e,{membersInGroup:r,groupId:o}=this.data;return r&&t===o||(this.setData({groupId:t}),i.A.listMembers({groupId:t}).done((e=>{var{members:t=[]}=e;r=n()(t,(e=>e.customerId)),this.setData({membersInGroup:r})})).fail((()=>this.setData({membersInGroup:[]})))),super.onGetContentRequest(e)}}const l=new InviteGroupStore},77459:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(39754),n=r.n(o),a=r(35994),i=r(12017),s=r(21572);class NodeFacesStore extends a.A.Store{get events(){return{getFacesForNode:this.onGetFacesForNode,removedFacesFromPerson:this.onRemovedFacesFromPerson}}get defaultData(){return{nodeToFacesMap:{}}}onGetFacesForNode(e){this.data[e]||i.A.getFacesForNode({nodeId:e}).done((t=>{this.data.nodeToFacesMap[e]=t.faceList,this.emitChange({nodeToFacesMap:this.data.nodeToFacesMap})})).fail((()=>{a.A.emit("showToast",{id:"loadFacesFail",className:"error",message:(0,s.A)("amazon-photos-load-faces-fail")})}))}onRemovedFacesFromPerson(){var{nodeFacePairs:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodeToFacesMap:t={}}=this.data;n()(e,(e=>{var{node:{id:r}}=e;delete t[r]})),this.emitChange({nodeToFacesMap:t})}}const l=new NodeFacesStore},32608:(e,t,r)=>{r.d(t,{Ff:()=>c,Qv:()=>u,he:()=>p,n8:()=>d});var o=r(43816),n=r(84723),a=r(51186),i=(0,o.Z0)({name:"notifications",initialState:{hasSeenFolderView:!0},reducers:{hydrate(e,t){var{payload:r}=t,{hasSeenFolderView:o}=r||{};"boolean"==typeof o&&(e.hasSeenFolderView=o)},setHasSeenFolderView(e){e.hasSeenFolderView=!0}},selectors:{selectHasSeenFolderView:e=>e.hasSeenFolderView}}),{actions:s,selectors:l}=i;(0,a.Zv)({actionCreator:s.setHasSeenFolderView,effect:()=>{n.A.setCDPref("hasSeenFolderView")}});var{reducer:c}=i,{hydrate:u,setHasSeenFolderView:d}=s,{selectHasSeenFolderView:p}=l},39459:(e,t,r)=>{r.d(t,{Bo:()=>checkHasSignedIntoMobileAppAndAdvance,QA:()=>c,QO:()=>u,UZ:()=>checkHasUploadedAndAdvance,WS:()=>d,qV:()=>moveToPage});var o=r(95093),n=r.n(o),a=r(5732),i=r(78439),s=r(47389),l=r(60776),c={QR_START:"QR_START",UPLOAD_WAITING_MOBILE:"UPLOAD_WAITING_MOBILE",UPLOAD_WAITING_WEB:"UPLOAD_WAITING_WEB",DEVICE_FINISH:"DEVICE_FINISH",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_PENDING:"UPLOAD_PENDING"},u="MOVE_TO_PAGE",d="TOGGLE_SERVICE_ERROR",moveToPage=e=>({type:u,pageName:e}),toggleServiceError=e=>({type:d,serviceErrorMetric:e}),checkHasSignedIntoMobileAppAndAdvance=e=>{var t={noCache:!0,doNotAlertOnFatal:!0};return(r,o)=>{var a=o(),{onboarding:{serviceError:u}={}}=a;u&&r(toggleServiceError(null)),i.A.listSources(t).then((t=>{var{sources:o}=t;o.find((e=>"MOBILE"===e.device.deviceClass&&e.lastSeenTime>n()().subtract(l.mu,"days").toISOString()))&&((e,t)=>{new s.A(window.location.pathname,e).setParam("begin",!0).go(),t(moveToPage(c.UPLOAD_WAITING_MOBILE))})(e,r)})).fail((()=>r(toggleServiceError("CheckHasSignedInPollingError"))))}},checkHasUploadedAndAdvance=e=>{var t={filters:(0,a.A)({type:"file"}),noCache:!0,limit:1,doNotAlertOnFatal:!0};return(r,o)=>{var n=o(),{onboarding:{serviceError:a}={}}=n;a&&r(toggleServiceError(null)),i.A.listNodes(t).then((t=>{var{count:o}=t;o>e&&r(moveToPage(c.DEVICE_FINISH))})).fail((()=>r(toggleServiceError("CheckHasUploadedPollingError"))))}}},41543:(e,t,r)=>{r.d(t,{ep:()=>setLoggedShownMetric,iY:()=>fetchRemoteOutageConfig,nU:()=>s,uW:()=>i,y5:()=>l});var o=r(97463),n=r(13489),a=r(80298);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}var i="UPDATE_GENERIC_OUTAGE",s="SET_FETCH_STATUS",l="SET_HAS_LOGGED_SHOWN_METRIC",fetchRemoteOutageConfig=()=>function(){var e=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(e){var t;try{t=yield(0,a.A)(),n.A.log({name:"FetchOutageInfoSuccess"})}catch(e){return void n.A.log({name:window.navigator.onLine?"FetchOutageInfoFailure":"FetchOutageInfoNoNetwork"})}var{outages:r}=t.data,l=o.A.getProperty("region");if(["NA","EU","FE"].includes(l)){var{generic:c}=r[l];e({type:i,isActiveGenericOutage:c}),e({type:s,hasFetchedOutageStatus:!0})}}));return function(t){return e.apply(this,arguments)}}(),setLoggedShownMetric=()=>e=>{e({type:l,hasLoggedShownMetric:!0})}},16695:(e,t,r)=>{r.d(t,{A:()=>AbstractPageStore});var o=r(32629),n=r.n(o),a=r(55378),i=r.n(a),s=r(95093),l=r.n(s),c=r(35994),u=r(85026),d=r(20888),p=r(53540),v=r(78439),g=r(18742),f=(r(51158),r(90801),r(49479));function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class AbstractPageStore extends c.A.Store{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortDateTaken"),_defineProperty(this,"defaultSortOrder","desc"),_defineProperty(this,"operation",(e=>e.id?v.A.getNode(e):v.A.search(e))),_defineProperty(this,"parseResponse",(e=>(e.id?e=new f.A(e):e.data=i()(e.data,(e=>new f.A(e))),e))),this.suspend()}get events(){return{selectAll:this.onSelectAll,deselectAll:this.onDeselectAll,removeModels:this.onRemoveModels,addModels:this.onAddModels}}get defaultData(){return{}}onAddModels(){var{collection:e}=this.data;e&&e.refresh()}onRemoveModels(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{collection:t}=this.data;t&&e.length&&t.deleteModels(e,!0)}onSelectAll(){this.selectAll()}selectAll(){var{collection:e}=this.data;if(e){var t=e.getByIndexRange(0,-1,{showToast:!0});return this._selectAllOperation=t,t.done((e=>c.A.emit("selectItem",e))).always((()=>{delete this._selectAllOperation})),t}}selectAllSections(){var{collection:e}=this.data;if(e){var t=e.histogramGroup;this.selectAll().done((e=>{for(var r={},o=0;o<e.length;o++){var n=e[o],a="contentDate"===t,i=a?n.contentDate():n.getCreatedDate(),s=i?a?l().utc(i):l()(i):null;r[s?s.format("YYYY-MM-DD"):g.A.getProperty("noDateDate")]=!0}c.A.emit("selectSection",Object.keys(r))}))}}onDeselectAll(){this._selectAllOperation&&(this._selectAllOperation.reject(),delete this._selectAllOperation)}getCollectionRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e;return{operation:this.operation,sort:this.getCollectionSort(e),filters:this.getCollectionFilters(e),lastFilter:t.lcf,parseResponse:this.parseResponse,useNextToken:!1,lowResThumbnail:!0}}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e,{sort:r=this.defaultSortToken,sortOrder:o=this.defaultSortOrder}=t;return(0,p.Ay)({sortToken:r,order:o})}getCollectionFilters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e;return(0,d.A)(n()(t))}getCollection(e){return new u.A(e)}onGetContentRequest(){var e=this.getCollectionRequest(...arguments),{collection:t}=this.data;t?t.reset(e):t=this.getCollection(e),this.setData({collection:t})}}},10038:(e,t,r)=>{r.d(t,{A:()=>_});var o=r(62193),n=r.n(o),a=r(87612),i=r.n(a),s=r(21764),l=r(35994),c=r(78439),u=r(21572),d=r(18742),p=r(66569),v=r(67172),g=r(90801),f=r(5732),y=r(17667),h=r(54318),b=r(49479),m=r(66941),S=r(94368),P=r(16695);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class AlbumStore extends P.A{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortDateTaken"),_defineProperty(this,"defaultSortOrder","desc"),_defineProperty(this,"operation",(e=>e.id?c.A.getNode(e):c.A.listChildren(_objectSpread(_objectSpread({},e),{},{id:e.albumId}))))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getAlbum:this.onGetContentRequest,removeFromAlbum:this.onRemovedFromAlbum,updateAlbumCover:this.onUpdateAlbumCover})}getCollection(e){return new g.A(e)}getCollectionRequest(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return _objectSpread(_objectSpread({},super.getCollectionRequest(e,...r)),{},{albumId:e.albumId,searchOnFamily:!e.groupId,useNextToken:y.A.isOn(h.jy.StartTokenListChildren),requiresStartToken:!0})}getCollectionFilters(){return(0,f.A)({hidden:!1,type:"file"})}getGroup(e){var{groupId:t}=e;this.groupId=t,v.A.getGroup({groupId:t}).done((e=>{this.setData({group:new m.A(e)})})).fail((()=>{this.groupId=null}))}getGroupMembers(e){var{groupId:t}=e;v.A.listMembers({groupId:t}).done((e=>{for(var{members:t=[]}=e,r={},o=0;o<t.length;o++)t[o].avatar=new S.A(t[o]),r[t[o].customerId]=t[o].profile;this.setData({memberIdToMember:r,members:t})}))}getAlbum(e,t){var{album:r}=this.data,o=(0,s.A)(e).nodeId;this._getAlbumPending||!t&&r&&r.id===o||(this._getAlbumPending=!0,c.A.getNode({id:e}).always((()=>{this._getAlbumPending=!1})).done((e=>{this.setData({album:new b.A(e)})})).fail((()=>{(0,p.A)(d.A.getProperty("urls.albums",{replace:!0}))})))}onGetContentRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{createMode:t,groupId:r,albumId:o}=e;if(!r||this.groupId===r&&this.data.group||(this.getGroup({groupId:r}),this.getGroupMembers({groupId:r})),!t)return this.getAlbum(o),super.onGetContentRequest(e)}onRemovedFromAlbum(e){var{albumId:t,models:r}=e,{album:o,collection:n}=this.data;o&&n&&t===o.id&&super.onRemoveModels(r)}onRemoveModels(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==e.length)if(this.data.album&&i()(e,(e=>e.id===this.data.album.id)).length)if(this.groupId){var t=d.A.getProperty("urls.groups");(0,p.A)("".concat(t,"/").concat(this.groupId,"?contentType=albums"))}else(0,p.A)(d.A.getProperty("urls.albums"));else super.onRemoveModels(e)}onUpdateAlbumCover(e){var t=this;return function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var{album:r}=t.data;if(r&&!t._getAlbumPending){var o=r.getAlbumCovers().map((e=>({id:e.id,ownerId:e.ownerId}))),a=e.coverNodes.map((e=>({id:e.id,ownerId:e.ownerId})));try{n()(o)||(yield c.A.updateCollectionProperties({id:r.id,data:{operations:[{op:"remove",path:"/covers",collectionProperties:{covers:o}}]}})),yield c.A.updateCollectionProperties({id:r.id,data:{operations:[{op:"add",path:"/covers",collectionProperties:{covers:a}}]}}),l.A.emit("uncache"),l.A.emit("deselectAll"),l.A.emit("showToast",{message:(0,u.A)("amazon-photos-update-album-cover-success",null,a.length)}),t.getAlbum(r.id,!0)}catch(e){l.A.emit("showToast",{message:(0,u.A)("amazon-photos-update-album-cover-failure",null,a.length),className:"fail"})}}}))()}}const _=new AlbumStore},54493:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(78439),n=r(20888),a=r(5732),i=r(53540),s=r(90801),l=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c="sortDateCreated",u="sortDateModified";class AlbumsStore extends l.A{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{useListNodes:t}=e;return t?o.A.listNodes(e):o.A.search(e)}))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getAlbums:this.onGetContentRequest})}getCollection(e){return new s.A(e)}getCollectionRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e,{sort:r}=t,o=!1;return r===u&&(o=!0),_objectSpread(_objectSpread({},super.getCollectionRequest(e)),{},{useListNodes:o})}getCollectionFilters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e,{sort:r}=t;return r===u?(0,a.A)(_objectSpread({type:"album"},e)):(0,n.A)(_objectSpread({type:["ALBUMS"]},e),!1)}onGetContentRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={},name:r}=e,{sort:o}=t;return o===u&&r&&(o=c),super.onGetContentRequest(_objectSpread(_objectSpread({},e),{},{query:_objectSpread(_objectSpread({},t),{},{sort:o})}))}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e,{sort:r=c}=t,o="sortAlphaName"===r?"asc":"desc";return(0,i.Ay)({sortToken:r,order:o})}}const d=new AlbumsStore},6527:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(55378),n=r.n(o),a=r(67172),i=r(97463),s=r(60788),l=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class BlockedStore extends l.A{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{nextToken:t,limit:r}=e,o=i.A.getProperty("customerId");return a.A.listContactBlocks({customerId:o,nextToken:t,limit:r})})),_defineProperty(this,"parseResponse",(e=>(e.data=n()(e.blocks,(e=>_objectSpread(_objectSpread({},e),{},{id:e.customerId}))),e)))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getBlockedContacts:this.onGetContentRequest})}getCollection(e){return new s.A(e)}getCollectionRequest(){return{operation:this.operation,parseResponse:this.parseResponse,useNextToken:!0,limit:50}}}const c=new BlockedStore},38893:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(90179),n=r.n(o),a=r(57468);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class FamilyStore extends a.j{get events(){return _objectSpread(_objectSpread({},n()(super.events,"getPhotos")),{},{getFamilyNodes:this.onGetContentRequest,removeModelsFromFamilyArchive:this.onRemoveModels})}}const i=new FamilyStore},50108:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(35994),n=r(90801),a=r(53540),i=r(5732),s=r(78439),l=r(21327),c=r(66569),u=r(18742),d=r(11505);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class FolderStore extends o.A.Store{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{offset:t,limit:r,filters:o,sort:n,parentId:a,keywords:i}=e;return i?s.A.listNodes({offset:t,limit:r,filters:o,sort:n}):s.A.listChildren({id:a,offset:t,limit:r,filters:o,sort:n})})),this.suspend()}get events(){return{getFolders:this.onGetFolders,createDriveFolderAlbum:this.onCreateDriveAlbum}}get defaultData(){return{rootNodeId:null,selection:new l.A}}getCollectionOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{parentId:t,keywords:r}=e,{rootNodeId:o}=this.data;return{parentId:t||o,filters:(0,i.A)({type:"folder",contentType:"files",keywords:r}),sort:(0,a.Ay)({sortToken:"sortAlphaName",order:"asc"}),keywords:r,useNextToken:!1,operation:this.operation}}setParent(){var e=arguments,t=this;return _asyncToGenerator((function*(){var{parentId:r}=e.length>0&&void 0!==e[0]?e[0]:{};if(r&&r!==t.data.parentId)if(r!==t.data.rootNodeId){t.setData({parentId:r,searchTerm:null});var o=yield s.A.getNode({id:r});t.data.parentId===r&&t.setData({parentModel:o})}else t.setData({parentId:null,parentModel:null})}))()}setSearchTerm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("keywords"in e){var{keywords:t}=e;this.setData({searchTerm:t,parentId:null,parentModel:null})}}onCreateDriveAlbum(){var e=arguments;return _asyncToGenerator((function*(){var{nodes:t}=e.length>0&&void 0!==e[0]?e[0]:{};if(t&&t.length){var r=new d.A({showToast:!0,items:t}).start();try{yield r.getPromise(),(0,c.A)(u.A.getProperty("urls.albums"))}catch(e){}o.A.emit("closeDialog")}}))()}onGetFolders(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};if(!t.data.rootNodeId)try{var o=yield s.A.getRootNodeId();t.setData({rootNodeId:o})}catch(e){t.setData({error:!0})}var{collection:a}=t.data,i=t.getCollectionOptions(r),c=new l.A;t.setParent(r),t.setSearchTerm(r),a?a.reset(i):a=new n.A(i),t.setData({collection:a,selection:c})}))()}}const p=new FolderStore},98217:(e,t,r)=>{r.d(t,{A:()=>v});var o=r(55378),n=r.n(o),a=r(74692),i=r.n(a),s=r(67172),l=r(90801),c=r(49479),u=r(66941),d=r(46962),p=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GroupCollectionDetailStore extends p.A{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{id:t,nextToken:r,limit:o,groupId:n,collectionId:a}=e;return t?i().Deferred().reject().promise():s.A.listCollectionNodes({nextToken:r,limit:o,groupId:n,collectionId:a})})),_defineProperty(this,"parseResponse",(e=>(e.data=n()(e.groupNodes,(e=>new c.A(e.node))),e)))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getGroupCollection:this.onGetGroupCollection})}onGetGroupCollection(e){var t,r,{groupId:o,collectionId:n}=e;this.data.groupCollection&&this.data.groupCollection.collectionId===n?this.data.show404||super.onGetContentRequest({groupId:o,collectionId:n}):(this.data.show404&&this.setData({show404:!1}),s.A.getGroup({groupId:o}).then((e=>(t=e,s.A.getGroupCollection({collectionId:n,groupId:o})))).then((e=>(r=e,s.A.listMembers({groupId:o})))).done((e=>{for(var a=new d.A(r),i=new u.A(t),{members:s=[]}=e,l={},c=0;c<s.length;c++)l[s[c].customerId]=s[c].profile;this.setData({groupCollection:a,memberIdToMember:l,group:i}),super.onGetContentRequest({groupId:o,collectionId:n})})).fail((()=>this.setData({show404:!0}))))}getCollectionRequest(e){var{groupId:t,collectionId:r}=e,{operation:o,parseResponse:n}=this;return{groupId:t,collectionId:r,operation:o,parseResponse:n,limit:100}}getCollection(e){return new l.A(e)}}const v=new GroupCollectionDetailStore},77390:(e,t,r)=>{r.d(t,{A:()=>F,e:()=>GroupDetailStore});var o=r(42426),n=r.n(o),a=r(90179),i=r.n(a),s=r(56170),l=r.n(s),c=r(55378),u=r.n(c),d=r(96540),p=r(35994),v=r(20888),g=r(78439),f=r(18742),y=r(66569),h=r(67172),b=r(49479),m=r(24903),S=r(51549),P=r(31864),_=r(66941),A=r(95977),O=r(91155),w=r(13319),C=r(94368),I=r(57468);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j="sortDateTaken",D="sortAddedToGroup",E="photos",T="albums";class GroupDetailStore extends I.j{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken",j),_defineProperty(this,"onUploadClick",(()=>{(0,m.JD)((0,S.vY)({useContext:!0}))})),_defineProperty(this,"onAddFromAccountClick",(e=>{var{group:t}=e;return(0,w.Ay)({group:t,type:E,eventTag:"join_and_add"})})),_defineProperty(this,"operation",(e=>e.id?g.A.getNode(e):g.A.searchGroupNodes(_objectSpread(_objectSpread({},e),{},{groupId:this.data.groupId})))),_defineProperty(this,"parseResponse",(e=>(e.id?e=new b.A(this.updatedNode(e)):e.data=u()(e.data,(e=>new b.A(this.updatedNode(e)))),e)))}updatedNode(e){var{groupId:t}=this.data,r=e.groupPermissions.find((e=>e.groupId===t));return r?(e.ownerId=l()(r.sharedByIds),e):e}get events(){return _objectSpread(_objectSpread({},i()(super.events,"getPhotos")),{},{getGroupContent:this.onGetGroupContent,groupUpdated:this.onGroupUpdated,newGroupContent:this.onNewGroupContent})}get defaultData(){return{defaultSort:this.defaultSortToken}}onNewGroupContent(e){var{group:t}=e,{collection:r,groupId:o,group:n}=this.data;if(o&&t.groupId===o)return r&&r.refresh(),n&&n.updateCounts(!0),!1}onGroupUpdated(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&this.data.groupId===e&&this.getGroupDetails({groupId:e,force:!0,isUpdate:!0})}onGetGroupContent(e){var{groupId:t,getShareUrl:r}=e;this.data.groupId&&this.data.groupId!==t&&this.resetData(),this.getGroupDetails({groupId:t}),!r||this.data.shareUrl||this.data.shareUrlPending||this.getGroupShareUrl({groupId:t}),this.onGetContentRequest(...arguments)}getGroupShareUrl(e){var{groupId:t}=e;this.setData({shareUrlPending:!0}),h.A.getGroupShare({groupId:t}).done((e=>{this.setData({shareUrl:e.shareUrl,shareUrlPending:!1})}))}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e;return"sortAlphaName"===t.sort?super.getCollectionSort(_objectSpread(_objectSpread({},e),{},{query:_objectSpread(_objectSpread({},t),{},{sortOrder:"asc"})})):super.getCollectionSort(...arguments)}getCollectionRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e,r=super.getCollectionRequest(...arguments),{sort:o,contentType:n}=t;if(!o){switch(n){case T:o=D;break;case E:o=j;break;default:o=this.defaultSortToken}o!==this.data.defaultSort&&this.setData({defaultSort:o})}return o!==D?r:_objectSpread(_objectSpread({},r),{},{histogramGroup:"dateAddedToGroup",groupId:e.groupId})}getCollectionFilters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e;return(0,v.A)(_objectSpread(_objectSpread({},t),{},{type:t.contentType===T?["ALBUMS"]:t.type}))}exitGroup(){(0,y.A)(f.A.getProperty("urls.groups"))}getGroupDetails(e){var{groupId:t,force:r,isUpdate:o}=e;(this.data.groupId!==t||r)&&(this.setData({groupId:t}),h.A.listMembers({groupId:t}).done((e=>{for(var{members:t=[]}=e,r={},o=0;o<t.length;o++)t[o].avatar=new C.A(t[o]),r[t[o].customerId]=t[o].profile;this.setData({memberIdToMember:r,members:t})})),h.A.getGroup({groupId:t}).done((e=>{if(e)if(o){var{group:r}=this.data;r&&r.updateCounts(!0)}else{var n=new _.A(e);switch(n.updateCounts(),this.setData({group:n}),h.A.viewGroup({groupId:t}).done((()=>{n.unreadCount&&p.A.emit("uncache")})),window.location.hash){case"#info":p.A.emit("openDialog",{id:"group-settings",component:d.createElement(P.A,{group:n})}),window.location.hash="";break;case"#add":p.A.emit("openDialog",d.createElement(A.A,{group:n,onUploadClick:this.onUploadClick,onAddFromAccountClick:this.onAddFromAccountClick})),window.location.hash="";break;case"#comment":p.A.emit("openDialog",d.createElement(O.A,{groupId:t,topic:n.reactionTopic,includeCoverPhotos:!0}))}}else this.exitGroup()})).fail(this.exitGroup))}onRemoveModels(e){var{groupId:t}=this.data;if(t&&n()(e,(e=>e.id===t)))(0,y.A)(f.A.getProperty("urls.groups"));else{var{group:r}=this.data;r&&r.updateCounts(!0),super.onRemoveModels(...arguments)}}}const F=new GroupDetailStore},28249:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(59041);class GroupShareDialogStore extends o.A.constructor{get events(){return{getShareDialogGroups:this.onGetContentRequest}}}const n=new GroupShareDialogStore},32250:(e,t,r)=>{r.d(t,{A:()=>u});var o=r(55378),n=r.n(o),a=r(67172),i=r(11276),s=r(20844),l=r(61949),c=r(5697);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GroupSharePosts extends c.W{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{groupId:t,limit:r,nextToken:o,previousToken:n,shareToken:i}=e;return this.setData({shareToken:i}),a.A.publicListGroupEvents({shareToken:i,groupId:t,limit:r,kindSet:"MESSAGING",nextToken:o,previousToken:n,includeCounts:!1})})),_defineProperty(this,"parseResponse",(e=>{var{shareToken:t}=this.data;return e.data=n()(e.events,(e=>{var r=new i.A(_objectSpread(_objectSpread({},e),{},{shareToken:t}));return r.parentCollection&&(r.parentCollection.coverNodes=n()(r.parentCollection.coverNodesSource,(e=>new s.A(_objectSpread(_objectSpread({},e),{},{shareToken:t}))))),r.parentReaction&&(r.parentReaction.coverPhotos=n()(r.parentReaction.coverPhotos,(e=>new l.A({id:e.id,ownerId:e.ownerId,shareToken:t})))),r})),e}))}get events(){return{getPosts:this.onGetReactions,addPost:this.onAddReaction,windowBlur:this.onWindowBlur,windowFocus:this.onWindowFocus,groupUpdated:this.onReactionsUpdate}}}const u=new GroupSharePosts},54260:(e,t,r)=>{r.d(t,{A:()=>E});var o=r(60895),n=r.n(o),a=r(55378),i=r.n(a),s=r(62193),l=r.n(s),c=r(96540),u=r(74692),d=r(42843),p=r(35994),v=r(47389),g=r(90801),f=r(1683),y=r(78439),h=r(18742),b=r(21572),m=r(66569),S=r(67172),P=r(71086),_=r(97463),A=r(57584),O=r(23345),w=r(66941),C=r(8776),I=r(85307),j=r(20844),D=r(77390);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GroupShareStore extends D.e{constructor(){var e;super(...arguments),e=this,_defineProperty(this,"defaultSortToken","sortNewestToOldest"),_defineProperty(this,"state",{emailCheck:!0,isLoading:!1}),_defineProperty(this,"operation",(e=>{if(e.id)return(0,u.Deferred)().reject();var{shareToken:t,group:r={},memberIdToMember:o={}}=this.data,{featuredMembers:n=[]}=r;if(l()(o))for(var a=0;a<n.length;a++)o[n[a].customerId]=n[a].profile;return this.setData({memberIdToMember:o}),y.A.searchGroupNodes(_objectSpread(_objectSpread({},e),{},{groupId:r.groupId,shareToken:t,startToken:e.nextToken}))})),_defineProperty(this,"parseResponse",(e=>{var{shareToken:t,memberIdToMember:r}=this.data,o=[];return e.data=i()(e.data,(e=>(void 0!==r[e.ownerId]||o.includes(e.ownerId)||o.push(e.ownerId),new j.A(_objectSpread(_objectSpread({},e),{},{shareToken:t}))))),S.A.publicBulkGetMembers({shareToken:t,members:o}).done((e=>{for(var{members:t}=e,o=0;o<t.length;o++)r[t[o].customerId]=t[o].profile;this.setData({memberIdToMember:r})})),e})),_defineProperty(this,"onGroupJoinClose",(()=>{this.didAcceptGroup||f.A.log("CancelJoinGroup",null,P.A.getPageContext()),this.didAcceptGroup=!1})),_defineProperty(this,"onEmailCheckClick",(()=>{this.setState((e=>({emailCheck:!e.emailCheck})))})),_defineProperty(this,"onGroupJoinRequest",function(){var t=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(t){var{group:r,shareToken:o,groupId:a,emailChecked:i,joinAndAdd:s,inviteTag:l,commentText:c,showToast:u,isImplicit:g,isPrepopulated:y,isSaveAccess:m,topic:A,joinAndReact:O,redirect:w=!0}=t,C=new v.A(h.A.getProperty("urls.groups"));C.addPath(a);var{isMember:I}=e.data;if(e.didAcceptGroup=!0,I){var{reactionTopic:j,groupId:D}=r||e.data.group;S.A.addReaction({groupId:D,topic:j,body:c,kind:"COMMENT"}),C.go()}else{var E=_.A.getProperty("customerId");e.setData({joinInProgress:!0});try{if(yield S.A.createMember({shareToken:o,groupId:a,customerId:E,inviteTag:l}),e.setData({isMember:!0}),r&&r.reactionTopic&&c&&!A)try{yield S.A.addReaction({groupId:a,topic:r.reactionTopic||A,body:c,kind:"COMMENT"}),n()((()=>p.A.emit("groupUpdated",{groupId:a},d.A.MID))),void 0!==y&&f.A.log("AddReaction",{eventTag:"pre_pop"},P.A.getPageContext())}catch(e){}else if(r&&A&&c)try{yield S.A.addReaction({groupId:a,topic:A,body:c,kind:"COMMENT"}),n()((()=>p.A.emit("groupUpdated",{groupId:a},d.A.MID)))}catch(e){}if(O&&A&&r)try{yield S.A.addReaction({groupId:a,topic:A,kind:"LIKE"})}catch(e){}n()((()=>{p.A.emit("uncache"),p.A.emit("closeDialog",{id:"join-dialog"}),i&&!u&&e.setEmailPreference({groupId:a,customerId:E}),s&&C.addPath("#add"),(g||m)&&C.setParam("sharedLanding",!0),g||C.setParam("webToAppHandoff",!0),w&&C.go()}),d.A.SHORT)}catch(t){var T="amazon-photos-generic-service-error";403===t.status&&(T="amazon-photos-groups-join-forbidden-error"),p.A.emit("showToast",{message:(0,b.A)(T),className:"error"}),e.setData({joinInProgress:!1}),p.A.emit("closeDialog",{id:"join-dialog"})}}}));return function(e){return t.apply(this,arguments)}}())}get events(){return _objectSpread(_objectSpread({},super.events),{},{getGroupShare:this.onGetGroupShare,joinGroup:this.onJoinGroup})}onJoinGroup(e){var{group:t,shareToken:r,joinAndAdd:o,inviteTag:n,commentText:a,isImplicit:i,isSaveAccess:s,topic:l,joinAndReact:c,redirect:u=!0}=e;return this.onGroupJoinRequest({groupId:t.id,shareToken:r,joinAndAdd:o,inviteTag:n,commentText:a,showToast:!0,isImplicit:i,isSaveAccess:s,topic:l,group:t,joinAndReact:c,redirect:u})}getCollection(e){return new g.A(e)}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e;return super.getCollectionSort(_objectSpread(_objectSpread({},e),{},{query:{sort:"sortDateTaken",sortOrder:"sortOldestToNewest"===t.sort?"asc":"desc"}}))}onGetGroupShare(e){var{shareToken:t,redirectMembers:r,query:o={}}=e,n=o.i,a=!!o.comment,i=!!o.react,s="true"===o.isImplicit,l=window.location.pathname.split("/").pop(),c="add"===l,u="join"===l||c,d="true"===o.isSaveAccess,{group:p,sort:v,fetchingInvitation:g}=this.data,{sort:f}=o;this.hasInvitation||g?f&&v!==f&&(this.setData({sort:f}),this.onGetContentRequest({groupId:p.groupId,query:o})):(this.setData({sort:f,fetchingInvitation:!0}),this.getInvitation({shareToken:t,requestJoin:u,joinAndAdd:c,joinAndReact:i,inviteTag:n,redirectMembers:r,joinAndComment:a,isImplicit:s,isSaveAccess:d,query:o}))}setEmailPreference(e){var{groupId:t,customerId:r}=e;S.A.patchMemberNotificationPreferences({memberId:r,groupId:t,preferenceSets:(0,C.z)("EMAIL","EMAIL_CONTENT_ADDED","true")})}_showGroupPreview(e){var{customerId:t,customerIsValidMarketplace:r,group:o,shareToken:n,joinUrl:a,addUrl:i}=e,s=t&&!r,{sort:l}=this.data;this.setData({group:o,shareToken:n,joinUrl:a,restrictJoin:s,addUrl:i}),this.onGetContentRequest({groupId:o.groupId,query:{sort:l}}),this.data.collection.getPage(0).fail((()=>this._setWindowLocation(a)))}_setWindowLocation(e){window.location.href=e}_showJoinGroup(e){var{group:t,shareToken:r,leaveSharePage:o,joinAndAdd:n,inviteTag:a,joinAndComment:i,isImplicit:s,isSaveAccess:l,joinAndReact:u,id:d,ownerId:v,topic:g}=e,{groups:f}=h.A.getProperty("urls",{}),y=!1,b=!i&&!u;if(o&&(0,m.A)(f,{replace:!0}),!s){var S=c.createElement(I.A,{group:t,shareToken:r,onJoinRequest:e=>this.onGroupJoinRequest(_objectSpread(_objectSpread({},e),{},{joinAndAdd:n,inviteTag:a,joinAndComment:i,showToast:y,joinAndReact:u})),onClose:this.onGroupJoinConfirmClose,joinAndComment:i,joinAndReact:u,join:b,id:d,ownerId:v,topic:g});return p.A.emit("openDialog",{id:"join-dialog",component:S})}var P=c.createElement(O.A,{group:t,shareToken:r,joinAndComment:i,onJoinRequest:e=>this.onGroupJoinRequest(_objectSpread(_objectSpread({},e),{},{joinAndAdd:n,inviteTag:a,joinAndComment:i,showToast:y,isImplicit:s,isSaveAccess:l})),joinAndAdd:n,onClose:this.onGroupJoinClose,isImplicit:s,isSaveAccess:l,topic:g});p.A.emit("openDialog",{id:"join-dialog",component:P})}_forceLoginAndJoin(e){var{joinUrl:t}=e;window.location.href=t}_goToGroup(e){var{group:t,groupsUrl:r}=e;(0,m.A)("".concat(r,"/").concat(t.groupId),{replace:!0})}_showUnableToJoin(e){p.A.emit("openDialog",c.createElement(A.A,{noClose:e}))}getInvitation(e){var{shareToken:t,requestJoin:r,joinAndAdd:o,inviteTag:n,joinAndReact:a,redirectMembers:i,joinAndComment:s,isImplicit:l,isSaveAccess:c,query:u}=e,{baseAppUrl:d,groupShare:g,groups:f}=h.A.getProperty("urls",{}),y=_.A.getProperty("authenticated"),P=_.A.getProperty("isValidMarketplace"),A=_.A.getProperty("customerId"),O=r;S.A.getGroupShareInfo({shareToken:t}).done((e=>{this.setData({fetchingInvitation:!1});var r=new w.A(e,t);r.updateCounts(),this.hasInvitation=!0,y||(O=!1);var handleGroupShare=()=>{var e=r.privacyPreferences||{},i="PUBLIC"===(0,C.m)(e.preferenceSets,"GLOBAL","PRIVACY_LEVEL"),p="".concat(d).concat(g,"/").concat(t),f=new v.A(p,{i:n}).addPath("join").toString(),h=new v.A(p,{i:n}).addPath("add").toString(),{id:b,ownerId:m,topic:S}=u;return O?P?this._showJoinGroup({group:r,shareToken:t,leaveSharePage:!0,joinAndAdd:o,joinAndReact:a,inviteTag:n,joinAndComment:s,isImplicit:l,isSaveAccess:c,id:b,ownerId:m,topic:S}):i?(this._showGroupPreview({customerId:A,customerIsValidMarketplace:P,group:r,shareToken:t,joinUrl:f,addUrl:h}),this._showUnableToJoin()):this._showUnableToJoin(!0):y&&P?i?this._showGroupPreview({customerId:A,customerIsValidMarketplace:P,group:r,shareToken:t,joinUrl:f,addUrl:h}):this._showJoinGroup({group:r,shareToken:t,leaveSharePage:!0,joinAndAdd:o,inviteTag:n,joinAndReact:a,joinAndComment:s,isImplicit:l,isSaveAccess:c,id:b,ownerId:m,topic:S}):i?this._showGroupPreview({customerId:A,customerIsValidMarketplace:P,group:r,shareToken:t,joinUrl:f,addUrl:h}):this._forceLoginAndJoin({joinUrl:f})};if(y&&i)S.A.getGroup(r).done((()=>this._goToGroup({group:r,groupsUrl:f}))).fail(handleGroupShare);else if(!y||!l&&i)handleGroupShare();else{var p=[404];S.A.getGroup(_objectSpread(_objectSpread({},r),{},{acceptableErrorCodes:p})).done((()=>{this.setData({isMember:!0}),handleGroupShare()})).fail(handleGroupShare())}})).fail((e=>{if(y||404===e.status)return p.A.emit("showToast",{message:(0,b.A)("amazon-photos-groups-join-error"),className:"error"}),this.hasInvitation=!0,y&&P?401!==e.status&&(0,m.A)(f):this.setData({show404:!0}),void this.setData({fetchingInvitation:!1});window.location.href=d+f}))}}const E=new GroupShareStore},13883:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(67172),n=r(59041);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GroupSharesStore extends n.A.constructor{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortDateCreated"),_defineProperty(this,"operation",(e=>{var{sort:t,limit:r,nextToken:n}=e,a="NAME"===t?"ASC":"DESC",i=r;return o.A.listShareLinks({sort:t,direction:a,maxResults:i,nextToken:n})}))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getGroupShares:this.onGetContentRequest})}}const a=new GroupSharesStore},59041:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(55378),n=r.n(o),a=r(71086),i=r(1683),s=r(90801),l=r(67172),c=r(49709),u=r(66941),d=r(16695);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class GroupsStore extends d.A{constructor(e){super(e),_defineProperty(this,"defaultSortToken","sortRecentActivity"),_defineProperty(this,"isQuickList",!1),_defineProperty(this,"operation",(e=>{var t,{sort:r,limit:o,nextToken:n}=e,a="NAME"===r?"ASC":"DESC",i=o;return this.isQuickList&&(t=this.isAlbums?c._v.ALBUM_ADDABLE:c._v.CONTENT_ADDABLE),l.A.listGroups({sort:r,direction:a,maxResults:i,nextToken:n,privacyLevelSet:c._v.PRIVACY_LEVEL,kindSet:t})})),_defineProperty(this,"parseResponse",(e=>(e.data=n()(e.groups,(e=>new u.A(e))),e))),_defineProperty(this,"getAlexaGroups",((e,t,r)=>{var o="NAME"===e?"ASC":"DESC",n=t;return l.A.listGroups({sort:e,direction:o,maxResults:n,nextToken:r,kindFilter:c._v.KIND_FILTER})})),this.suspend()}get defaultData(){return{defaultSort:this.defaultSortToken}}get events(){return{removeModels:this.onRemoveModels,addModels:this.onAddModels,getGroups:this.onGetContentRequest}}getCollectionRequest(e){return{operation:this.operation,limit:100,parseResponse:this.parseResponse,sort:this.getCollectionSort(e),getFirstPageOnInit:!1}}getCollectionSort(e){var{query:t={}}=e,{sort:r=this.defaultSortToken}=t;switch(r){case"sortDateCreated":return"CREATEDDATE";case"sortAlphaName":return"NAME";default:return"MODIFIEDDATE"}}getCollection(e){return new s.A(e)}onSelectAll(e){this.isQuickList||super.onSelectAll(e)}onGetContentRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{quickList:t,isAlbums:r}=e;this.isQuickList=Boolean(t),this.isAlbums=Boolean(r);var o=[];return this.isQuickList||this.getAlexaGroups().done((e=>{(o=n()(e.groups,(e=>new u.A(e)))).length&&i.A.log("ListGroups",{eventTag:"alexa_group"},a.A.getPageContext()),this.setData({alexaGroups:o})})),super.onGetContentRequest(e)}}const p=new GroupsStore},27193:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(74692),n=r.n(o),a=r(78439),i=r(5732),s=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class HiddenStore extends s.A{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>e.id?n().Deferred().reject().promise():a.A.listNodes(e)))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getHiddenItems:this.onGetContentRequest})}getCollectionFilters(){return(0,i.A)({hidden:!0})}}const l=new HiddenStore},69958:(e,t,r)=>{r.d(t,{A:()=>S});var o=r(38970),n=r.n(o),a=r(62216),i=r.n(a),s=r(24713),l=r.n(s),c=r(32629),u=r.n(c),d=r(55378),p=r.n(d),v=r(43346),g=r.n(v),f=r(35994),y=r(78439),h=r(39138),b=r(17667),m=r(87937);class PeopleStore extends f.A.Store{constructor(){super(...arguments),this.suspend()}get events(){return{getPeople:this.getPeople,renameClusterOperationSuccess:this.updateAfterRenameCluster,removedFacesFromPerson:this.getPeople}}getPeople(e){return y.A.getAggregations(g()(e,{category:"allPeople",aggregationContext:"customer",limit:b.A.isOn("no-people-limit")?1e4:void 0})).done((e=>{var t=p()(e.aggregations,(e=>new m.A({id:e.value,count:e.count,name:e.value,category:"people",searchData:e.searchData})));this._updateStore(t)}))}updateAfterRenameCluster(e,t){if(this.data.collection){var r=u()(this.data.collection.dataCache),o=l()(r,(t=>t.name===e)),n=r[o],a=new m.A({id:n.id,count:n.count,name:n.name,category:n.category,searchData:g()({},n.searchData,{clusterName:t})});r[o]=a,this._updateStore(r)}}_updateStore(e){var{collection:t}=this.data;t?t.reset(e):t=new h.A(e),this.setData({namedPeople:e.filter((e=>!i()(e.searchData.clusterName))),people:n()(e,"name"),collection:t})}}const S=new PeopleStore},57468:(e,t,r)=>{r.d(t,{A:()=>s,j:()=>PhotosStore});var o=r(53540),n=r(20888),a=r(71086),i=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class PhotosStore extends i.A{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortDateTaken")}get events(){return _objectSpread(_objectSpread({},super.events),{},{getPhotos:this.onGetContentRequest})}onSelectAll(){this.selectAllSections()}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e,{sort:r=this.defaultSortToken,sortOrder:n=this.defaultSortOrder}=t;return(0,o.Ay)({sortToken:r,order:n})}getCollectionFilters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e,r=_objectSpread({},t);return a.A.getProperty("printingMode")&&(r.type="PHOTOS"),(0,n.A)(r)}getCollectionRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{searchContext:t="customer",query:r={}}=e,{timeMonth:o}=r;return _objectSpread(_objectSpread({},super.getCollectionRequest(...arguments)),{},{searchContext:t,groupByForTime:o?"day":"month",loadSkHistogram:!0})}}const s=new PhotosStore},82569:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(35994),n=r(78439),a=r(39138),i=r(55123);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}class PlacesStore extends o.A.Store{get events(){return{getPlaces:this.onGetPlaces,getLocationAggregation:this.onGetLocationAggregation,removeModels:this.flagCacheReset,addModels:this.flagCacheReset}}flagCacheReset(){this._needsNewData=!0}fetchLocations(){return _asyncToGenerator((function*(){try{return(yield n.A.getAggregations({category:"location",aggregationContext:"all"})).aggregations.map((e=>new i.A(e)))}catch(e){return[]}}))()}getCollection(){var e=this;return _asyncToGenerator((function*(){var{collection:t}=e.data;if(t){if(e._needsNewData){var r=yield e.fetchLocations();e._needsNewData=!1,t.reset(r)}}else{var o=yield e.fetchLocations();t=new a.A(o),e.setData({collection:t})}return t}))()}onGetPlaces(){this.getCollection()}onGetLocationAggregation(e){var t=this;return _asyncToGenerator((function*(){var r=yield t.getCollection(),o=yield r.getById(e);t.setData({location:o})}))()}}const s=new PlacesStore},35042:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(55378),n=r.n(o),a=r(67172),i=r(11276),s=r(5697);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class PostsStore extends s.W{constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{groupId:t,limit:r,nextToken:o,previousToken:n}=e;return a.A.listGroupEvents({groupId:t,nextToken:o,limit:r,kindSet:"MESSAGING",previousToken:n,includeCounts:!1})})),_defineProperty(this,"parseResponse",(e=>(e.data=n()(e.events,(e=>new i.A(e))),e)))}get events(){return{getPosts:this.onGetReactions,addPost:this.onAddReaction,deletePost:this.onDeleteReaction,startPollingPosts:this.onStartPollingReactions,stopPollingPosts:this.onStopPollingReactions,windowBlur:this.onWindowBlur,windowFocus:this.onWindowFocus,groupUpdated:this.onReactionsUpdate}}}const l=new PostsStore},5697:(e,t,r)=>{r.d(t,{A:()=>g,W:()=>ReactionsStore});var o=r(55378),n=r.n(o),a=r(35994),i=r(60788),s=r(21572),l=r(67172),c=r(74671),u=r(49709),d=r(16695),p=["groupId","shareToken"],v=["kind","model"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ReactionsStore extends d.A{constructor(){super(...arguments),_defineProperty(this,"_pollingInterval",void 0),_defineProperty(this,"_reactionCount",void 0),_defineProperty(this,"operation",(e=>{var{groupId:t,topic:r,limit:o,includeCoverPhotos:n,nextToken:a,previousToken:i,shareToken:s}=e,c="CREATEDDATE",u="DESC";return s?(this.setData({shareToken:s}),l.A.publicListReactions({shareToken:s,topic:r,limit:o,includeCoverPhotos:n,nextToken:a,sort:c,direction:u,previousToken:i})):l.A.listReactions({groupId:t,topic:r,limit:o,includeCoverPhotos:n,nextToken:a,sort:c,direction:u,previousToken:i})})),_defineProperty(this,"parseResponse",(e=>{var t={},{shareToken:r}=this.data;return e.data=n()(e.reactions,(e=>(!t[e.author]&&r&&(t[e.author]=e.authorProfile,this.setData({memberIdToMember:t})),new c.A(e)))),e}))}get defaultData(){return _objectSpread(_objectSpread({},super.defaultData),{},{newCommentPending:!1,newCommentFailed:!1,loadingTopic:void 0,loadedTopic:void 0})}get events(){return{getReactions:this.onGetReactions,addReaction:this.onAddReaction,deleteReaction:this.onDeleteReaction,startPollingReactions:this.onStartPollingReactions,stopPollingReactions:this.onStopPollingReactions,windowBlur:this.onWindowBlur,windowFocus:this.onWindowFocus,groupUpdated:this.onReactionsUpdate}}onStartPollingReactions(e){var{groupId:t}=e,{shareToken:r}=this.data;r||(clearInterval(this._pollingInterval),delete this._pollingInterval,t&&(l.A.getGroupCacheInfo({groupId:t}).done((e=>{var{contentVersion:t}=e;this._contentVersion=t})),this._pollingInterval=setInterval((()=>{this._windowBlurred||l.A.getGroupCacheInfo({groupId:t}).done((e=>{var{contentVersion:r}=e,{collection:o}=this.data,{_contentVersion:n}=this;n!==r&&(this._contentVersion=r,l.A.viewGroup({groupId:t}),o.refresh())}))}),3e3)))}onWindowBlur(){this._windowBlurred=!0}onWindowFocus(){this._windowBlurred=!1}suspend(){super.suspend(...arguments),this._windowBlurred=!1,this.onStopPollingReactions()}onStopPollingReactions(){clearInterval(this._pollingInterval),delete this._pollingInterval}getMembers(e){var{groupId:t,shareToken:r}=e;if(!r)return l.A.listMembers({groupId:t}).done((e=>{for(var{members:t=[]}=e,r={},o=0;o<t.length;o++)r[t[o].customerId]=t[o].profile;this.setData({memberIdToMember:r})}))}onGetReactions(e){var{groupId:t,shareToken:r}=e,o=_objectWithoutProperties(e,p);t!==this.data.groupId&&this.getMembers({groupId:t,shareToken:r}),this.onGetContentRequest(_objectSpread({groupId:t,shareToken:r},o))}onAddReaction(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{kind:t,model:r}=e,o=_objectWithoutProperties(e,v);if(t||(t=u.ab.COMMENT),t===u.ab.HEART&&r){var{reactionSummary:n}=r;if(n){if(n.isLikedByCaller)return n.likeCount-=1,n.isLikedByCaller=!1,void l.A.deleteBinaryReaction(_objectSpread(_objectSpread({},o),{},{kind:t}));n.likeCount?n.likeCount+=1:n.likeCount=1,n.isLikedByCaller=!0}else r.reactionSummary={likeCount:1,isLikedByCaller:!0}}this.addReaction(_objectSpread(_objectSpread({},o),{},{kind:t}))}addReaction(e){var{groupId:t,topic:r,body:o,kind:n}=e;return n===u.ab.COMMENT&&this.setData({newCommentPending:!0,newCommentFailed:!1}),l.A.addReaction({groupId:t,topic:r,body:o,kind:n}).done((()=>{n===u.ab.COMMENT&&(this.setData({newCommentPending:!1}),this.onAddModels(),a.A.emit("reactionsChanged"))})).fail((()=>{n===u.ab.COMMENT&&(a.A.emit("showToast",{message:(0,s.A)("amazon-photos-generic-service-error"),className:"error"}),this.setData({newCommentPending:!1,newCommentFailed:!0}))}))}onDeleteReaction(e){var{model:t,event:r}=e,{groupId:o,reactionId:n}=t;return l.A.deleteReaction({groupId:o,reactionId:n}).done((()=>{a.A.emit("showToast",{message:(0,s.A)("amazon-photos-reactions-delete-success"),icon:"comments"}),r?this.onRemoveModels([r]):this.onRemoveModels([t]),a.A.emit("reactionsChanged")})).fail((()=>{a.A.emit("showToast",{message:(0,s.A)("amazon-photos-generic-service-error"),className:"error"})}))}getCollection(e){return new i.A(e)}getCollectionRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setData({loadingTopic:e.topic,groupId:e.groupId}),_objectSpread({operation:this.operation,parseResponse:this.parseResponse,limit:50},e)}onReactionsUpdate(){var{collection:e}=this.data;e.refresh()}}const g=new ReactionsStore},95248:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(35994),n=r(78439),a=r(67172),i=r(24903),s=r(77112);class SettingsStore extends o.A.Store{get events(){return{avatarUploadComplete:this.uploaderFileComplete,updatePersonalProfileName:this.updatePersonalProfileName,getPersonalProfile:this.getPersonalProfile,updateProfile:this.updateProfile}}get defaultData(){return{profileName:void 0,newProfileName:void 0}}getPersonalProfile(){n.A.getAccountPreferences().then((e=>{e&&e.name&&this.setData({profileName:e.name})}))}uploaderFileComplete(e){n.A.getNode({id:e}).then((e=>{if(e&&e.id)return n.A.setPersonalPreferenceAvatar(e.id)})).done((()=>{(0,i.JD)((0,s.Vm)(e)),o.A.emit("uncache"),o.A.emit("getFamilyMembers")}))}updatePersonalProfileName(e){e.profileName&&n.A.setPersonalPreferenceName(e.profileName).done((()=>{this.setData({profileName:e.profileName}),o.A.emit("uncache"),e.hasFamily?o.A.emit("getFamilyMembers"):o.A.emit("getPersonalProfile"),o.A.emit("getAccountPreferences")})).fail((()=>{throw"Cannot handle - setPersonalPreferenceName failed"}))}updateProfile(e){a.A.updateProfile(e)}}const l=new SettingsStore},67316:(e,t,r)=>{r.d(t,{X:()=>s});var o=r(53540),n=r(78439),a=r(90801),i=r(16695);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class SharedAlbumLandingPageStore extends i.A{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken",o._6.SortDateModified),_defineProperty(this,"operation",(e=>n.A.searchCollectionNodes({limit:e.limit,startToken:e.startToken,shareToken:this.data.token,nodeId:this.data.nodeId})))}getCollection(e){return new a.A(e)}loadSharedAlbum(e){var{token:t,nodeId:r}=e;this.setData({token:t,nodeId:r}),this.onGetContentRequest()}}var s=new SharedAlbumLandingPageStore},1040:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(78439),n=r(5732),a=r(90801),i=r(39138),s=r(49479),l=r(16695);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class SharedLandingStore extends l.A{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortNewestToOldest"),_defineProperty(this,"operation",(e=>e.id?o.A.getNode({tempLink:!0,id:e.id,shareId:e.shareId}):o.A.listChildren(_objectSpread({id:e.sharedNodeId},e)))),_defineProperty(this,"onShareFail",(()=>this.setData({collection:new i.A([]),error:!0}))),this.suspend()}get defaultData(){return{defaultSort:this.defaultSortToken}}get events(){return{getShared:this.getShare}}getCollection(e){return new a.A(e)}getCollectionSort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t}=e;return super.getCollectionSort(_objectSpread(_objectSpread({},e),{},{query:{sort:"sortDateTaken",sortOrder:"sortOldestToNewest"===t.sort?"asc":"desc"}}))}getCollectionRequest(e){var{shareId:t,sharedNodeId:r}=e;return _objectSpread(_objectSpread({},super.getCollectionRequest(e)),{},{searchOnFamily:!0,sharedNodeId:r,shareId:t})}getCollectionFilters(e){return(0,n.A)(e)}getShare(){var e=arguments,t=this;return function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){var r,n=e.length>0&&void 0!==e[0]?e[0]:{},{shareId:a}=n;if(t.data.shareId===a)return t.data.sharedNodeId?t.onGetContentRequest(_objectSpread(_objectSpread({},n),{},{sharedNodeId:t.data.sharedNodeId})):void 0;t.setData({shareId:a});var i=null;try{var l=yield o.A.getShareInfo({id:n.shareId}),{nodeInfo:c}=l;r=c.id,t.setData({shareData:l});var u=yield o.A.listChildren({id:r,shareId:a,searchOnFamily:!0,limit:1});if(!u||!u.data||!u.data[0])throw new Error("invalid share data");"VISUAL_COLLECTION"===u.data[0].kind&&(r=u.data[0].id,i=new s.A(u.data[0]))}catch(e){t.onShareFail()}t.setData({albumModel:i,sharedNodeId:r}),t.onGetContentRequest(_objectSpread(_objectSpread({},n),{},{sharedNodeId:r}))}))()}onGetContentRequest(){super.onGetContentRequest(...arguments);var{collection:e}=this.data;e.getByIndexRange(0,1).done((e=>{e.length||this.onShareFail()}))}}const c=new SharedLandingStore},96721:(e,t,r)=>{r.d(t,{A:()=>w});var o=r(58156),n=r.n(o),a=r(94394),i=r.n(a),s=r(62193),l=r.n(s),c=r(95093),u=r.n(c),d=r(99227),p=r.n(d),v=r(78439),g=r(13489),f=r(84723),y=r(17667),h=r(21572),b=r(18742),m=r(35994),S=r(73725),P=r(54318),_=r(58331),A=r(97042);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}if(p().formats.bytes){var O=p().formats.bytes.format;p().register("format","custombytes",_objectSpread(_objectSpread({},p().formats.bytes),{},{format:(e,t,r)=>O(e,t,r).replace("i","")})),delete p().formats.bytes}class StorageStore extends m.A.Store{get defaultData(){return{activePlan:null,allPaidPlans:[],currentPlan:{},currentSubscription:{},hasCancelSucceeded:!1,hasPrime:!1,isAwaitingPlanCancel:!1,isGettingStorageData:!1,recommendedPlan:{},storageCards:[],storageDataRetrievalTimestamp:null,totalBillableBytes:0,upgradePlans:[]}}get events(){return{getStorage:this.onGetStorage,disableAutoRenew:()=>this.onToggleAutoRenew(!1),enableAutoRenew:()=>this.onToggleAutoRenew(!0),cancelPlan:"onCancelPlan",refreshQuota:this.refreshQuota}}setInitialData(e){var{user:t}=e;this.setData({initialHasPrime:t.hasPrimeBenefit,initialIsOverQuota:t.accountOverQuota})}get currentPlan(){var{quota:e}=this,t=e.plans[0]||null;return this.getPlanById(t)}get currentSubscription(){var{currentPlan:e,subscriptions:t}=this;return e?null==t?void 0:t.subscriptionsList.filter((e=>"Cancelled"!==e.subscriptionStatus)).find((t=>t.planId===e.planId)):null}get hasPrime(){var{quota:e}=this;return void 0===e?this.data.initialHasPrime:Boolean(e.benefits.find((e=>e.benefit===A.e)))}get isAppleDevice(){var e=b.A.getProperty("device.isIOS"),t=b.A.getProperty("isWebView");return Boolean(e&&t)}get isNearQuota(){var{quota:e}=this;return e.available<.1*e.quota}get isOverQuota(){var{quota:e}=this;return void 0===e?this.data.initialIsOverQuota:e.available<=0}get expiredSubscription(){var{currentSubscription:e,subscriptions:t}=this;return e?null:null==t?void 0:t.subscriptionsList[0]}get hasBillingProblem(){var{currentSubscription:e}=this;return!!e&&(!(0,_.RG)(e)&&e.hasOpenProblems)}get isNearContentDeletionDate(){var{expiredSubscription:e}=this;return e&&u()(e.endDate,u().ISO_8601)<u()().subtract(150,"d")}get isCurrentApplePlanGroupUpgradableAndDowngradable(){return this.isAppleDevice&&y.A.isOn(P.jy.InAppPurchaseManageStorageSection)&&y.A.isOn(P.jy.InAppPurchaseCombined)}get shouldDisplayChangeApplePlanSection(){var{currentPlan:e={},isCurrentApplePlanGroupUpgradableAndDowngradable:t}=this;return!(l()(e)||A.aB.toLowerCase()!==e.vendorId.toLowerCase()||!this.isNewApplePlan(e))&&t}get shouldDisplayAllAvailableApplePlans(){var{currentPlan:e={},isCurrentApplePlanGroupUpgradableAndDowngradable:t}=this;return!!l()(e)&&t}get shouldDisplayTwoClickCancelFeature(){return!l()(this.currentPlan)&&(y.A.isOn(P.jy.TwoClickCancellation)&&A.el===this.currentPlan.vendorId.toUpperCase())}get shouldDisplayOneClickCancelButton(){return!l()(this.currentPlan)&&(y.A.isOn(P.jy.OneClickCancelButton)&&A.el===this.currentPlan.vendorId.toUpperCase())}get cancelWebViewBackUrl(){var e=b.A.getProperty("device.isIOS"),t=b.A.getProperty("device.isAndroid"),r=b.A.getProperty("urls.storage",""),o=b.A.getProperty("urls.iosStorage",""),n=b.A.getProperty("urls.androidSimpleStorage",""),a=b.A.getProperty("isWebView");return y.A.isOff(P.jy.TwoClickCancellation)||!a?r:t?n:e?o:r}isNewApplePlan(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.vendorSku&&e.vendorSku.endsWith("unified")}getPlanById(e){var{plans:t}=this,r=null==t?void 0:t.servicePlans.find((t=>t.planId===e));return r&&(r.size=r.storageMap.Other),r}getUpgradePlans(){var{currentPlan:e}=this,t=e?e.storageMap.Other:0,r=this.getTotalBillableBytes(),o=this.getAllPaidPlans().filter((e=>e.storageMap.Other>t&&e.storageMap.Other>r));return o.sort(((e,t)=>e.size-t.size)),o}getTotalBillableBytes(){return Object.values(this.usage).filter((e=>e.billable)).reduce(((e,t)=>e+t.billable.bytes),0)}getRecommendedPlan(){var e=this.getUpgradePlans(),{totalBillableBytes:t}=this.data;return e.find((e=>e.size>t))}filterByVendor(e){var{currentPlan:t,isAppleDevice:r,shouldDisplayChangeApplePlanSection:o}=this,n=r?A.aB:A.el;if(!y.A.isOn(P.jy.InAppPurchaseCombined))return!0;var a=t&&t.vendorId&&t.vendorId.toUpperCase(),i=e.vendorId&&e.vendorId.toUpperCase();return!(a===A.aB&&!r)&&(!(r&&!l()(t)&&!o)&&i===n)}getAllPaidPlans(){var e,{plans:t,currentPlan:r,query:o={},isAppleDevice:n}=this,{redirectOverride:a}=o,i=(null!==(e=null==t?void 0:t.servicePlans)&&void 0!==e?e:[]).filter((e=>"Paid"===e.planType&&e.available&&e.storageMap&&e.storageMap.Other&&5368709120!==e.storageMap.Other&&this.filterByVendor(e))).map((e=>_objectSpread(_objectSpread({},e),{},{purchasePlanUrl:(0,_.S8)(e,r&&Object.keys(r).length>0,!1,{redirectOverride:a}),size:e.storageMap.Other})));return y.A.isOn(P.jy.InAppPurchaseCombined)&&n?this.getUpdatedApplePlans(i):i}getUpdatedApplePlans(e){if(l()(e))return[];var t=i()(e,(e=>this.isNewApplePlan(e)))[y.A.isOn(P.jy.InAppPurchaseManageStorageSection)];return l()(t)?[]:t.sort(((e,t)=>e.size-t.size))}getPlanGroups(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{var{size:r,vendorId:o}=t,a=n()(t,"billingSchedule.billingPeriod.timeInterval","").toLowerCase(),i=e[r];t.available&&!t.isPromotion&&(y.A.isOn(P.jy.InAppPurchaseDailyPlans)&&"day"===a&&"APPLE"===o.toUpperCase()&&(a="month"),i||(i={size:r}),"month"!==a||i.month?"year"!==a||i.year||(i.year=t):i.month=t,(i.year||i.month)&&(e[r]=i))})),Object.values(e)}showGenericErrorToast(){m.A.emit("showToast",{message:(0,h.A)("amazon-photos-generic-service-error"),className:"error"})}updateFromServices(){var e=this;return _asyncToGenerator((function*(){var t=yield Promise.all([v.A.getUsage(),v.A.getQuota(),...(0,P.D4)()?[]:[v.A.getSubscriptions({includeCancelled:!0,includePending:!0,includeProblems:!0}),v.A.getPlans()]]),[r,o,n,a]=t;e.usage=r,e.quota=o,e.subscriptions=n,e.plans=a}))()}updateDataWithServiceResponses(){var{plans:e,quota:t,subscriptions:r,usage:o}=this,n=this.expiredSubscription?this.getPlanById(this.expiredSubscription.planId):null,a=this.getAllPaidPlans(),i=this.getPlanGroups(a),s=function getActivePlan(e){var t,r,{planGroups:o=[],plans:n,quota:a,subscriptions:i}=e,s=null==a||null===(t=a.plans)||void 0===t?void 0:t[0];if(!s)return null;var l=null==i?void 0:i.subscriptionsList.find((e=>e.planId===s)),c=null==n||null===(r=n.servicePlans)||void 0===r?void 0:r.find((e=>e.planId===s)),u=c?o.find((e=>{var t;return e.size===(null==c||null===(t=c.storageMap)||void 0===t?void 0:t.Other)})):void 0;return{cancelPlanUrl:b.A.getProperty("urls.cancelPlan"),editPaymentMethodUrl:(0,_.dZ)(l),paymentHistoryUrl:b.A.getProperty("urls.billingHistory"),plan:c,planGroup:u,subscription:l}}({planGroups:i,plans:e,quota:t,subscriptions:r}),l=this.getUpgradePlans(),c=this.getTotalBillableBytes(),u=this.getPlanGroups(l),d=this.getRecommendedPlan(),p=Date.now(),v=this.getRecommendedPlanGroup(d,u),{currentPlan:g}=this,f=this.getCurrentPlanGroup(i,g);this.setData({isGettingStorageData:!1,activePlan:s,allPaidPlans:a,allPaidPlanGroups:i,currentPlan:g,currentPlanGroup:f,expiredPlan:n,recommendedPlan:d,recommendedPlanGroup:v,storageDataRetrievalTimestamp:p,totalBillableBytes:c,upgradePlans:l,upgradePlanGroups:u,currentSubscription:this.currentSubscription,expiredSubscription:this.expiredSubscription,hasBillingProblem:this.hasBillingProblem,hasPrime:this.hasPrime,isAppleDevice:this.isAppleDevice,isNearContentDeletionDate:this.isNearContentDeletionDate,isNearQuota:this.isNearQuota,isOverQuota:this.isOverQuota,shouldDisplayChangeApplePlanSection:this.shouldDisplayChangeApplePlanSection,shouldDisplayTwoClickCancelFeature:this.shouldDisplayTwoClickCancelFeature,shouldDisplayOneClickCancelButton:this.shouldDisplayOneClickCancelButton,shouldDisplayAllAvailableApplePlans:this.shouldDisplayAllAvailableApplePlans,isCurrentApplePlanGroupUpgradableAndDowngradable:this.isCurrentApplePlanGroupUpgradableAndDowngradable,cancelWebViewBackUrl:this.cancelWebViewBackUrl,quota:t,plans:e,usage:o})}getRecommendedPlanGroup(e,t){if(e&&t)return t.find((t=>t.size===e.size))}getCurrentPlanGroup(e,t){if(e&&t)return e.find((e=>e.size===t.size))}onGetStorage(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.setData({isGettingStorageData:!0}),t.query=r;try{yield t.updateFromServices()}catch(e){return g.A.log({name:"StoragePageLoadFail"}),t.showGenericErrorToast(),void t.setData({isGettingStorageData:!1})}try{var o,n,a,i=null===(o=t.quota)||void 0===o||null===(n=o.plans)||void 0===n?void 0:n[0],s=null===(a=t.subscriptions)||void 0===a?void 0:a.subscriptionsList;i&&s&&0===s.length&&S.A.fatal("Flux Storage:  Mismatched data detected between CDS.getQuota and CDS.getSubscriptions")}catch(e){}t.updateDataWithServiceResponses()}))()}refreshQuota(){var e=arguments,t=this;return _asyncToGenerator((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};try{t.quota=yield v.A.getQuota(r),t.updateDataWithServiceResponses()}catch(e){}}))()}onToggleAutoRenew(e){var t=this;return _asyncToGenerator((function*(){t.setData({toggleRenewalPending:!0});try{yield f.A.setAutoRenewPreference(t.currentSubscription.subscriptionId,e),yield t.onGetStorage()}catch(e){t.showGenericErrorToast()}t.setData({toggleRenewalPending:!1})}))()}onCancelPlan(){var e=this;return _asyncToGenerator((function*(){e.setData({isAwaitingPlanCancel:!0});try{yield f.A.cancelPlan(e.currentSubscription.subscriptionId),yield e.onGetStorage(),e.setData({hasCancelSucceeded:!0,isAwaitingPlanCancel:!1})}catch(t){e.showGenericErrorToast(),e.setData({isAwaitingPlanCancel:!1})}}))()}}const w=new StorageStore},84632:(e,t,r)=>{r.d(t,{A:()=>p,g:()=>d});var o=r(55378),n=r.n(o),a=r(90801),i=r(92854),s=r(1683),l=r(71086),c=r(61510),u=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={play:"PLAY",playComplete:"PLAY_COMPLETE",seen:"SEEN"};class StoriesStore extends u.A{logBizMetric(){var{collection:e}=this.data,{data:t}=l.A;t&&t.fragment&&e.getPage(0).done((e=>{var{fragment:r}=t;"stories"===r&&s.A.log("ListStories",{eventCount:e.length},l.A.getPageContext())}))}constructor(){super(...arguments),_defineProperty(this,"operation",(e=>{var{id:t,limit:r,nextToken:o}=e;if(t){return i.A.getStory({id:t,type:"trip_album"})}var n=o;return i.A.listStories({limit:r,token:n})})),_defineProperty(this,"parseResponse",(e=>{var t;return e.story?(t=new c.A(e.story)).detailDataLoaded=!0:((t=e).data=n()(e.stories,(e=>new c.A(e))),t.count=e.data.length),t})),this.suspend()}get defaultData(){return{}}get events(){return _objectSpread(_objectSpread({},super.events),{},{listStories:this.onGetContentRequest,registerStoryEvent:this.registerStoryEvent})}onGetContentRequest(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];super.onGetContentRequest(t),this.logBizMetric()}getCollectionRequest(){return{operation:this.operation,parseResponse:this.parseResponse}}getCollection(e){return new a.A(e)}registerStoryEvent(e){var{storyId:t,eventType:r,startTime:o,endTime:n}=e,a={id:t,eventType:r,startTime:o.toISOString()};n&&(a.endTime=n.toISOString()),i.A.registerStoryEvent(a)}}const p=new StoriesStore},17234:(e,t,r)=>{r.d(t,{A:()=>b});var o=r(55378),n=r.n(o),a=r(7309),i=r.n(a),s=r(39754),l=r.n(s),c=r(95093),u=r.n(c),d=r(90801),p=r(92854),v=r(20888),g=r(53540),f=r(78439),y=r(49479),h=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function createNodeWithoutTemplink(e){return new y.A(_objectSpread(_objectSpread({},e),{},{tempLink:null}))}class ThisDayStore extends h.A{constructor(){super(...arguments),_defineProperty(this,"findCollectionIdFromThisDayCollections",((e,t)=>{var r;if(t){var o=t.toString();[r]=Object.keys(e).filter((e=>e.substring(0,o.length)===o))}t&&void 0!==r||([r]=Object.keys(e).sort().reverse());var n=e[r],{collectionId:a}=n;return{collectionId:a,year:u().utc(r).year()}})),_defineProperty(this,"operation",(e=>e.id?f.A.getNode({id:e.id}):p.A.getCollectionContents(e)))}get events(){return _objectSpread(_objectSpread({},super.events),{},{selectAllThisDay:this.selectAll,listThisDayCollections:this.listThisDayCollections,getThisDayCollection:this.getThisDayCollection,removeModelsFromFamilyArchive:this.onRemoveModelsFromFamilyArchiveRequest})}listThisDayCollections(e){var{date:{month:t,day:r,year:o}}=e;t=parseInt(t,10),r=parseInt(r,10),o=parseInt(o,10),this.setData({loading:!0,isEmpty:!1,invalidDate:!1,monthDay:{month:t,day:r}}),p.A.listCollections({day:r,month:t,contentsSize:1,includeContents:!0}).then((e=>this.parseThisDayResponseAsNodes(e))).done((n=>{var a=0===Object.keys(n).length,i={loading:!1,isEmpty:a,thisDayArchives:n};if(this.setData(i),e.loadThisDayYear&&!a){var s={year:o,month:t,day:r},{collectionId:l,year:c}=this.findCollectionIdFromThisDayCollections(this.data.thisDayArchives,o);s.collectionId=l,s.year=c,this.getThisDayCollection(s)}})).fail((()=>{this.setData({isError:!0})}))}getThisDayCollection(e){var t,{collectionId:r,day:o,month:n,year:a}=e,i={precacheKey:"thisDayContent"};if(u().utc([a,n-1,o]).isValid()){i.collectionId=r,i.date={day:o,month:n,year:a},i.year=a;var s=this.getYearCollectionRequest(i.year,i);this.data.collection?(t=this.data.collection).reset(s):t=new d.A(s),this.setData({invalidDate:!1,collection:t,year:a})}else this.setData({invalidDate:!0})}parseThisDayResponseAsNodes(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return l()(t.collections,(t=>{var o;t.coverPhoto&&(o=i()(t.nodes,(e=>e.id===t.coverPhoto))),!o&&t.nodes.length&&([o]=t.nodes),o&&(e=u().utc(t.startDate).toISOString(),r[e]={count:t.totalCount,nodeId:t.nodes[0].id,node:createNodeWithoutTemplink(o),collectionId:t.id})})),r}parseResponse(e){var t=e;return e.id?t=createNodeWithoutTemplink(e):t.data=n()(e.data,(e=>createNodeWithoutTemplink(e))),t}getYearCollectionRequest(e,t){var r={day:t.date.day,month:t.date.month,year:e,sort:(0,g.Ay)({sortToken:"sortDateTaken",order:"asc"}),limit:60,operation:this.operation,parseResponse:this.parseResponse,collectionType:"this_day_filtered",collectionId:t.collectionId,searchContext:"customer",useNextToken:!1,precacheKey:t.precacheKey};return r.filters=(0,v.A)(r),r}startDate(e){var t=u().utc([e.date.year,e.date.month,e.date.day]);return!!t.isValid()&&t.toISOString()}endDate(e){var t=u().utc([e.date.year,e.date.month,e.date.day]).add(1,"day").subtract(1,"millisecond");return!!t.isValid()&&t.toISOString()}onRemoveModelsFromFamilyArchiveRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.data.collection&&"family"===this.data.collection.searchContext&&this.data.collection.deleteModels(e)}}const b=new ThisDayStore},57891:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(5732),n=r(78439),a=r(16695);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class TrashStore extends a.A{constructor(){super(...arguments),_defineProperty(this,"defaultSortToken","sortDateModified"),_defineProperty(this,"operation",(e=>n.A.listTrash(e)))}get events(){return _objectSpread(_objectSpread({},super.events),{},{getTrash:"onGetTrash"})}getCollectionFilters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.A)(_objectSpread(_objectSpread({},e),{},{contentType:this.contentType,isTrash:!0,type:this.type}))}onGetTrash(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:t={}}=e;"albums"===t.view?this.type="albumAndFolder":"other"===t.view?(this.type="nonMedia",this.contentType="files"):(delete this.type,delete this.contentType),this.onGetContentRequest(e)}}const i=new TrashStore},79900:(e,t,r)=>{r.d(t,{Ay:()=>v,Mq:()=>d,g3:()=>f,qV:()=>g,tz:()=>l});var o=r(43816),n=r(73725),a=r(41321),i=r(77760),s=r(76202);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var l="https://shutterfly.com/amazon",c="prints",u={vendorCards:[{vendorName:"Shutterfly",isStatic:!0,displayName:"amazonprints-3p-transition-vendor-shutterfly",vendorImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/images/printing/third-party/shutterfly/shutterfly-card.png",vendorRedirectionImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/images/printing/third-party/shutterfly/redirect-2x.png",description:{title:"amazonprints-3p-vendor-card-shutterfly-title",text:["amazonprints-3p-vendor-card-shutterfly-line-item-1","amazonprints-3p-vendor-card-shutterfly-line-item-2"]},actionButtonConfig:{buttonText:"amazonprints-3p-vendor-card-continue-to-vendor-button-text",isPrimary:!0,siteUrl:"".concat(l,"?cid=PA_AMAZONPHOTO_WEBH")},ribbonMarkConfig:{visible:!0,text:"amazonprints-3p-vendor-card-most-savings-ribbon-mark-text"}},{vendorName:"Snapfish",isStatic:!0,displayName:"amazonprints-3p-transition-vendor-amazon-printing",vendorImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/images/printing/third-party/snapfish/snapfish-card.png",vendorRedirectionImageUrl:"https://dcupkcmoyuvm5.cloudfront.net/prints-sidebar-redirect-loader.png",description:{title:"amazonprints-3p-vendor-card-amazonprinting-title",text:["amazonprints-3p-vendor-card-amazonprinting-line-item-1"]},actionButtonConfig:{buttonText:"amazonprints-3p-vendor-card-continue-to-vendor-button-text",isPrimary:!1,siteUrl:""},ribbonMarkConfig:{visible:!1,text:""}}],status:s.Z.IDLE,error:null},d=(0,o.zD)("".concat(c,"/InAppMessagingPrintsVendorCards"),_asyncToGenerator((function*(){try{var e=yield a.Ay.getInAppMessages(a.rM.PRINTS),t=[];if(e.forEach((e=>{var r=JSON.parse(e.templateContent);t.push({vendorName:r.vendorName,isStatic:!1,displayName:r.displayName,vendorImageUrl:r.vendorImageUrl,vendorRedirectionImageUrl:r.vendorRedirectionImageUrl,description:{title:r.description.title,text:r.description.text},actionButtonConfig:{buttonText:r.actionButtonConfig.buttonText,isPrimary:r.actionButtonConfig.isPrimary,siteUrl:r.actionButtonConfig.siteUrl},ribbonMarkConfig:{visible:r.ribbonMarkConfig.visible,text:r.ribbonMarkConfig.text}})})),0===(null==t?void 0:t.length))throw new Error("No vendor cards found");return t}catch(e){throw n.A.fatal(e),new Error("Error occurred in IAM async thunk: ".concat(e))}}))),p=(0,i.K)({name:c,initialState:u,reducers:{},extraReducers:e=>{e.addCase(d.pending,(e=>_objectSpread(_objectSpread({},e),{},{status:s.Z.PENDING}))).addCase(d.fulfilled,((e,t)=>_objectSpread(_objectSpread({},e),{},{vendorCards:[...t.payload],status:s.Z.SUCCEEDED}))).addCase(d.rejected,((e,t)=>_objectSpread(_objectSpread({},e),{},{status:s.Z.FAILED,error:t.error.message})))},selectors:{selectPrintsVendorCards:e=>e.vendorCards,selectPrintsVendorCardsStatus:e=>e.status}});const v=p.reducer;var{selectPrintsVendorCards:g,selectPrintsVendorCardsStatus:f}=p.selectors},18060:(e,t,r)=>{r.d(t,{Ay:()=>y});var o=r(58156),n=r.n(o),a=r(56170),i=r.n(a),s=r(33031),l=r.n(s),c=r(87612),u=r.n(c),d=r(35994),p=r(13489),v=r(74692),g=r(21572),f=r(95655);class PrintsStore extends d.A.Store{getStaticProductCategories(){var e=[{builderTypes:["print","poster"],description:(0,g.A)("amazonprints-category-description-print"),previewImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/Prints/ASINs/Prints/PRINTS_STATIC_029764_R0_HERO.jpeg",sort:1,title:(0,g.A)("amazonprints-category-title-print"),viewAllText:(0,g.A)("amazonprints-category-viewAllText-print")},{builderTypes:["book"],description:(0,g.A)("amazonprints-category-description-book"),previewImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/Prints/ASINs/Prints/PHOTO_BOOK_STATIC_029516_R0_HERO.jpeg",sort:2,title:(0,g.A)("amazonprints-category-title-book"),viewAllText:(0,g.A)("amazonprints-category-viewAllText-book")},{builderTypes:["table_top"],description:(0,g.A)("amazonprints-category-description-table-top"),previewImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/Prints/ASINs/Prints/2021/Evergreen-InAppUpdates_TableTopDecor.jpg",sort:3,title:(0,g.A)("amazonprints-category-title-table-top"),viewAllText:(0,g.A)("amazonprints-category-viewAllText-table-top")},{builderTypes:["wall_art"],description:(0,g.A)("amazonprints-category-description-wall-art"),previewImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/Prints/ASINs/Prints/WALL_DECOR_STATIC_028152_R1_HERO.jpeg",sort:4,title:(0,g.A)("amazonprints-category-title-wall-art"),viewAllText:(0,g.A)("amazonprints-category-viewAllText-wall-art")},{builderTypes:["card"],description:(0,g.A)("amazonprints-category-description-card"),previewImageUrl:"https://m.media-amazon.com/images/G/01/digital/adrive/Prints/ASINs/Prints/GIFTS_STATIC_029915_R0_HERO.jpeg",sort:5,title:(0,g.A)("amazonprints-category-title-card"),viewAllText:(0,g.A)("amazonprints-category-viewAllText-card")}],t=(0,v.Deferred)();return t.resolve({value:e}),t.promise()}get events(){return{getThirdPartyPrintingProductTypes:this.onGetThirdPartyPrintingProductTypes,resetModalDialog:this.resetModalDialogState}}get defaultData(){return{productDataLoaded:!1,productDetails:{}}}setInitialData(e){this.setData(e)}resetModalDialogState(){this.setData({progressDfd:null}),d.A.emit("closeDialog")}onGetThirdPartyPrintingProductTypes(){this.getStaticProductCategories().done((e=>{var t=u()(l()(e.value,["sort"]),(e=>i()(n()(e,"builderTypes"))!==f.C3.TableTop));p.A.log({name:"ThirdPartyPrintingHomeScreenDataLoaded"}),this.setData({categories:t})})).fail((()=>{p.A.log({name:"ThirdPartyPrintingHomeScreenDataLoadingError"}),this.setData({categories:void 0})}))}}const y=new PrintsStore},77760:(e,t,r)=>{r.d(t,{K:()=>n});var o=r(43816),n=(0,o.Xq)({creators:{asyncThunk:o.Vj}})},95871:(e,t,r)=>{r.d(t,{GV:()=>a,jL:()=>n});var o=r(71468),n=o.wA.withTypes(),a=o.d4.withTypes();o.Pj.withTypes()},51186:(e,t,r)=>{r.d(t,{LP:()=>n,Zv:()=>a});var o=r(43816),n=(0,o.Nc)(),a=(o.ch.withTypes(),n.startListening.withTypes())},16073:(e,t,r)=>{r.d(t,{A:()=>sagas});var o=r(43786),n=r(73725),a=r(35994),i=r(1683),s=r(13489),l=r(21572),c=r(71086),u=r(60045),d=r(84956),p=r(20827),v=r(94356);function*retrieveCollectionPreviews(){for(var e=yield(0,o.Lt)(v.Sb),t=Object.keys(e),{PREVIEW_ITEMS_MAX:r}=d.A,n=0,a=0;a<t.length;a++){var s=t[a];try{var l=e[s],u=yield(0,o.T1)({context:l,fn:l.getByIndexRange},0,r-1);u&&(n+=u.length),yield(0,o.yJ)((0,p.kJ)(s,u))}catch(e){yield(0,o.yJ)((0,p.kJ)(s,[]))}}var g=n?"DeviceCollectionsNonEmpty":"DeviceCollectionsEmpty";i.A.log(g,void 0,c.A.getPageContext())}function*retrieveCompositeDevices(){try{var e=yield(0,o.T1)({context:u.A,fn:u.A.getCompositeDeviceSettings},{noCache:!0});yield(0,o.yJ)((0,p.Rd)(e))}catch(e){yield(0,o.yJ)((0,p.XQ)())}}function retrieveSelectedCollections(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){var{deviceAccount:t}=e,{DEVICE_SETTINGS_MAXIMUM:r,SELECTED_ONLY:n}=d.A;try{var a=yield(0,o.T1)({context:u.A,fn:u.A.getCollections},{deviceAccount:t,collectionSelectedFilter:n,limit:r,noCache:!0});yield(0,o.yJ)((0,p.on)(t,a))}catch(e){yield(0,o.yJ)((0,p.qO)(t))}}()}function updateDailyMemories(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){var{wasDailyMemoriesEnabled:t}=e,r=yield(0,o.Lt)(v.IB),n=yield(0,o.Lt)(v.W3),i=(yield(0,o.Lt)(v.D1)).map((e=>e.collectionId)),s="DailyMemories";try{var{type:c}=r;yield(0,o.T1)({context:u.A,fn:u.A.toggleDailyMemoriesCollectionId},{deviceAccount:n,deviceType:c,existingCollectionIds:i,isEnabled:t,noCache:!0}),logUpdateSuccess(s)}catch(e){a.A.emit("showToast",{message:(0,l.A)("amazon-photos-generic-service-error"),className:"fail"}),logUpdateFailure(s)}n&&(yield(0,o.yJ)((0,p.$o)(n)))}()}function updateSelectedCollections(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){var t=yield(0,o.Lt)(v.IB),r=yield(0,o.Lt)(v.W3),n=yield(0,o.Lt)(v.sI),{type:s}=t,{EVENT_TAGS:g,DEVICE_TYPES:f}=d.A,y=e.type===p.BF?"RemoveCollectionsUpdate":"DeviceCollectionsUpdate",h=s===f.FIRE_TV?g.FIRE_TV:g.MULTIMODAL,b="SelectedCollections";i.A.log(y,{eventCount:n.length,eventTag:h},c.A.getPageContext());try{yield(0,o.T1)({context:u.A,fn:u.A.updateSettings},{deviceAccount:r,deviceType:s,collectionIds:n}),a.A.emit("showToast",{message:(0,l.A)("amazon-photos-device-personalization-update-success-message")}),logUpdateSuccess(b)}catch(e){a.A.emit("showToast",{message:(0,l.A)("amazon-photos-generic-service-error"),className:"fail"}),logUpdateFailure(b)}}()}function logUpdateSuccess(e){s.A.log({name:"DevicePersonalizationUpdateSuccess",segments:{Type:e}})}function logUpdateFailure(e){s.A.log({name:"DevicePersonalizationUpdateFailure",segments:{Type:e}})}var g=r(62193),f=r.n(g),y=r(96540),h=r(46266),b=r(17667),m=r(78439),S=r(42843),P=r(67172),_=r(97463),A=r(49479),O=r(77506),w=r(6468),C=r(24903),I=r(43669),j=r(51315),D=r(63059),E=r(90811),T=r(35777),F=r(99566),R=r(78333),N=r(96721),k=r(21476),x=r(26939),G=r(54318),L=r(51549),M=r(49551),U=r(94141),B=["hash"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var q,Q=(0,R.A)((()=>r.e(826).then(r.bind(r,28666)))),{CancelToken:K}=h.A;function*startUploader(){var e=yield(0,o.Lt)(U.uR);e!==M.cQ.ACTIVE&&e!==M.cQ.PAUSED&&(yield(0,o.T1)(window.addEventListener,"beforeunload",onBeforeUnload),yield(0,o.T1)(refreshQuota),yield(0,o.yJ)((0,L.UM)())),e===M.cQ.IDLE&&(yield a.A.emit("showToast",{className:"uploader-status-toast",closeable:!0,fullReplace:y.createElement(Q,null),id:M.Wu,name:"uploader-status",stay:!0,tall:!0}))}function*queueNextFile(){var e=yield(0,o.Lt)(U.m1),t=yield(0,o.Lt)(U.st);if(e&&t){var r=2**Math.min(e-1,M.y4);yield(0,o.cb)(Math.random()*r*M.If)}var n=yield(0,o.Lt)(U.U1);(yield(0,o.Lt)(U.uR))!==M.cQ.ACTIVE||n||((yield(0,o.Lt)(U.st))?yield(0,o.yJ)((0,L.Yn)()):yield(0,o.yJ)((0,L.RE)()))}function*getFolderIds(){var e=yield(0,o.Lt)(U.jB),t=yield(0,o.Lt)(U.U1),{fileRelativePath:r}=t||{};try{var n=yield(0,o.T1)(T.A,{cachedFolderIds:e,relativePath:r,disableRetryHandling:!0});yield(0,o.yJ)((0,L.VE)(n))}catch(e){yield(0,o.yJ)((0,L.ag)(e))}}function*uploadCurrentFile(){var e=yield(0,o.Lt)(U.U1);if(e){var{dateOverride:t,fileCategory:r,fileId:n,fileOriginal:a,fileRelativePath:i,parentId:s}=e,l=yield(0,o.Lt)(U.nG),c=yield(0,o.Lt)(U.jB),u=yield(0,o.Lt)(U.gr),d=yield(0,o.Lt)(U.ow),p=yield(0,o.Lt)(U.xt),v=yield(0,o.Lt)(U.vl),g=p[n];if(!g&&u){yield(0,o.s)([M.Vi,M._u,M.se,M.CT]);var f=yield(0,o.Lt)(U.U1),y=yield(0,o.Lt)(U.vl),h=yield(0,o.Lt)(U.xt);if(!f||v!==y)return;g=h[n]}var m=g||{},{hash:S}=m,P=_objectWithoutProperties(m,B);try{q=K.source();var w=yield(0,o.T1)(k.A,{acceptableFileCategories:[I.DG.PHOTO,I.DG.VIDEO],bytesAvailable:l,cancelToken:q.token,contentDate:t,disableRetryHandling:!0,file:a,fileCategory:r,hasPrime:d,md5Hash:S,md5Error:P,parentNodeId:s||c[i],progressHandler:onUploadProgress}),C=yield(0,o.Lt)(U.vl);if((yield(0,o.Lt)(U.uR))===M.cQ.ABORTED||v!==C)return;var j=new A.A(w.data);if(t&&b.A.isOff(G.jy.CloudDriveUploadService)){var D={contentProperties:{contentDate:t}};j.update(D)}yield(0,o.yJ)((0,L.pK)(j))}catch(e){var{errorCode:E,errorSource:T}=e,R=yield(0,o.Lt)(U.vl),N=yield(0,o.Lt)(U.uR);if(E===I.Iw.AXIOS_CANCELLATION||N===M.cQ.ABORTED||v!==R)return;var{conflictNodeId:x}=e;if(x&&(T===I.Bc.CALL_UPLOAD_SERVICE||T===I.Bc.CALL_UPLOAD_SERVICE_LEGACY)){var Q=_.A.getProperty("customerId"),z=new O.A({id:x,ownerId:Q});return void(yield(0,o.yJ)((0,L.pK)(z,!0)))}if(e instanceof Error){var V=(0,F.Ay)(e,I.Bc.UPLOADER_SAGAS);return void(yield(0,o.yJ)((0,L.ag)(V)))}yield(0,o.yJ)((0,L.ag)(e))}}}function*handleQueueComplete(){if((yield(0,o.Lt)(U.m3))||(yield(0,o.T1)(logQueueMetrics),yield(0,o.T1)(logUploaderEventMetric)),yield(0,o.Lt)(U.uQ)){var e=yield(0,o.Zy)(performAddOperations,{isAlbums:!0}),t=yield(0,o.Zy)(performAddOperations,{isGroups:!0});yield(0,o.fj)([e,t]),yield(0,o.cb)(S.A.MID),yield a.A.emit("addModels");var r=yield(0,o.Lt)(U.to);r&&(yield a.A.emit("uncache"),yield(0,o.yJ)((0,x.ep)(r,!1)))}yield(0,o.T1)(removeBeforeUnloadListener)}function*queueNextMd5(){var e=yield(0,o.Lt)(U.sJ);(yield(0,o.Lt)(U.uR))!==M.cQ.ACTIVE||e||(yield(0,o.yJ)((0,L.Ag)()))}function*calculateMd5(){var e=yield(0,o.Lt)(U.sJ);if(e){var t=yield(0,o.Lt)(U.vl),{fileId:r,fileOriginal:n}=e;try{var a=yield(0,o.T1)(E.A,n),i=yield(0,o.Lt)(U.vl);(yield(0,o.Lt)(U.uR))!==M.cQ.ABORTED&&t===i&&(yield(0,o.yJ)((0,L.p3)(r,a)))}catch(e){var s=yield(0,o.Lt)(U.vl);if((yield(0,o.Lt)(U.uR))===M.cQ.ABORTED||t!==s)return;yield(0,o.yJ)((0,L.Ew)(r,e))}}}function*abortCurrentFile(){try{yield(0,o.T1)(q.cancel)}catch(e){}}function*buildAlbumOperation(e,t){var r=yield(0,o.T1)({context:m.A,fn:w.h},m.A.getNode,{id:e});return new j.A({albumId:e,albumName:r&&r.name,isUpload:!0,items:t.map((e=>({id:e})))})}function*buildGroupOperation(e,t,r){var n=yield(0,o.T1)({context:P.A,fn:w.h},P.A.getGroup,{groupId:e});return new D.A({eventKey:r[e],items:t.map((e=>({id:e}))),groups:[n]})}function*fetchNode(e){var t=yield(0,o.Lt)(U.vl);try{var r=yield(0,o.T1)({context:m.A,fn:w.h},m.A.getNode,{doNotAlertOnFatal:!0,id:e}),n=new A.A(r);t===(yield(0,o.Lt)(U.vl))&&(yield(0,o.yJ)((0,L.rH)(n)))}catch(e){}}function*handleFileSuccess(){var e=yield(0,o.Lt)(U.uQ)||{},{hasThumbnail:t,isAvatar:r,nodeId:n}=e;r&&(yield a.A.emit("avatarUploadComplete",n)),n&&!t&&(b.A.isOn(G.jy.CloudDriveUploadService)&&(yield(0,o.cb)(S.A.MID)),yield(0,o.T1)(fetchNode,n))}function*logBatchMetrics(e){var{albumId:t,groupId:r,files:n=[],useContext:a}=e,s=yield(0,o.Lt)(U.Yu),l=yield(0,o.Lt)(U.gK),u=t||a&&s,d=r||a&&l,p="FileCount";u&&d?p="MultipleContextFileCount":u?p="AlbumFileCount":d&&(p="GroupFileCount"),yield(0,o.T1)({context:i.A,fn:i.A.log},"UploaderBatchAdded",{eventTag:p,eventCount:n.length},c.A.getPageContext())}function*logFileMetrics(){var e=yield(0,o.Lt)(U._w),t=yield(0,o.Lt)(U.Y6);if(t&&t!==M._n.REQUEUED){var r,{albumId:n,errorCode:a,errorSource:l,groupId:u,totalRetryCount:d}=e,p=(n&&u?"Multiple":n&&"Album")||u&&"Group",v={},g=t===M._n.SUCCEEDED;if(p&&(v.Context=p),g?r="UploadFileSuccess":(r=I.Wi.includes(a)?"UploadFileReliabilityFailure":"UploadFileFailure",v.ErrorCode=a,v.ErrorSource=l),yield(0,o.T1)({context:s.A,fn:s.A.log},{name:r,segments:v}),d&&(yield(0,o.T1)({context:s.A,fn:s.A.log},{name:"".concat(r,"RetryCount"),value:d})),!g){var f="".concat(l,":").concat(a);i.A.log("UploadFileError",{eventTag:f},c.A.getPageContext())}}}function*logUploaderEventMetric(){var e=(yield(0,o.Lt)(U.lD))?"FinishUploadFromDrag":"FinishUploadFromBrowse",t=c.A.getPageContext();yield(0,o.cH)({context:i.A,fn:i.A.log},e,{eventTag:"Upload"},t)}function*logQueueMetrics(){var e=yield(0,o.Lt)(U.Gr),t=yield(0,o.Lt)(U.ZZ),r=yield(0,o.Lt)(U.wg),n=yield(0,o.Lt)(U.yL),a="UploaderQueueComplete",s=c.A.getPageContext();e&&(yield(0,o.cH)({context:i.A,fn:i.A.log},a,{eventTag:"BatchCount",eventCount:e},s)),t&&(yield(0,o.cH)({context:i.A,fn:i.A.log},a,{eventTag:"DuplicateFileCount",eventCount:t},s)),r&&(yield(0,o.cH)({context:i.A,fn:i.A.log},a,{eventTag:"FailedFileCount",eventCount:r},s)),n&&(yield(0,o.cH)({context:i.A,fn:i.A.log},a,{eventTag:"FileCount",eventCount:n},s))}function performAddOperations(){var{isAlbums:e,isGroups:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){var r,a,i,l=[];if(e){var c=yield(0,o.Lt)(U.ty);r=buildAlbumOperation,a=Object.entries(c),i="UploadToAlbum"}if(t){var u=yield(0,o.Lt)(U.pg);r=buildGroupOperation,l=[yield(0,o.Lt)(U.ve)],a=Object.entries(u),i="UploadToGroup"}if(!f()(a)){var d=[],p=yield(0,o.Lt)(U.vl);yield(0,o.yJ)((0,L.xn)({albums:e,groups:t}));for(var v=0;v<a.length;v++){var[g,y]=a[v],h=e&&g,b=t&&g;try{var m=yield(0,o.T1)(r,g,y,...l);yield(0,o.T1)({context:m,fn:m.start}),d.push({albumId:h,groupId:b,nodeIds:y,operation:m})}catch(r){r instanceof Error&&n.A.error("Uploader runtime error: ","performAddOperations()",r),(yield(0,o.Lt)(U.vl))===p&&(yield(0,o.yJ)((0,L.T$)({albumId:e&&g,groupId:t&&g,nodeIds:y})))}}for(var S=0;S<d.length;S++){var{albumId:P,groupId:_,nodeIds:A,operation:O}=d[S];try{yield(0,o.T1)({context:O,fn:w.h},O.getPromise),yield(0,o.T1)({context:s.A,fn:s.A.log},{name:"".concat(i,"Success")})}catch(e){e instanceof Error&&n.A.error("Uploader runtime error: ","performAddOperations()",e),(yield(0,o.Lt)(U.vl))===p&&(yield(0,o.yJ)((0,L.T$)({albumId:P,groupId:_,nodeIds:A}))),yield(0,o.T1)({context:s.A,fn:s.A.log},{name:"".concat(i,"Failure")})}}}}()}function*refreshQuota(){try{yield(0,o.T1)({context:N.A,fn:N.A.refreshQuota},{doNotAlertOnFatal:!0})}catch(e){}var e=N.A.getProperty("quota");e?yield(0,o.yJ)((0,L.TU)(e.available,N.A.getProperty("hasPrime"))):yield(0,o.yJ)((0,L.TU)(void 0,void 0))}function*removeBeforeUnloadListener(){yield(0,o.T1)(window.removeEventListener,"beforeunload",onBeforeUnload)}function onBeforeUnload(e){e.preventDefault(),e.returnValue=""}function onUploadProgress(e){e.lengthComputable&&(0,C.JD)((0,L.NC)(e.loaded))}var z=[function*onFetchCompositeDevices(){yield(0,o.p8)(p._J,retrieveCompositeDevices)},function*onFetchSelectedCollections(){yield(0,o.p8)(p.BM,retrieveSelectedCollections)},function*onToggleDailyMemories(){yield(0,o.p8)(p.Ri,updateDailyMemories)},function*onSelectedCollectionUpdateSubmit(){yield(0,o.p8)([p.iz,p.BF],updateSelectedCollections)},function*onCollectionsCreated(){yield(0,o.p8)(p.Ng,retrieveCollectionPreviews)},function*onQueuePopulateOrRetryAll(){yield(0,o.p8)([M.wY,M.Q4],startUploader)},function*onQueueStartOrFileComplete(){yield(0,o.p8)([M.Qn,M.l9,M.eT],queueNextFile)},function*onQueueAdvance(){yield(0,o.jP)(M.Im,getFolderIds)},function*onFoldersCache(){yield(0,o.jP)(M.ms,uploadCurrentFile)},function*onAbortOrPause(){yield(0,o.p8)([M.se,M.CT],abortCurrentFile)},function*onQueueComplete(){yield(0,o.p8)([M.se,M.nY],handleQueueComplete)},function*onQueueStartOrMd5Complete(){yield(0,o.p8)([M.wY,M.Qn,M.Vi,M._u],queueNextMd5)},function*onMd5QueueAdvance(){yield(0,o.jP)(M.bL,calculateMd5)},function*onBatchAdded(){yield(0,o.jP)(M.wY,logBatchMetrics)},function*onClose(){yield(0,o.p8)(M.q,removeBeforeUnloadListener)},function*onFileComplete(){yield(0,o.jP)([M.l9,M.eT],logFileMetrics)},function*onFileSuccess(){yield(0,o.jP)(M.eT,handleFileSuccess)}],V=500;function*sagas(){yield(0,o.Q7)(z.map((e=>(0,o.cH)((function*resurrectableSaga(){for(;;)try{yield(0,o.T1)(e);break}catch(t){yield(0,o.T1)(n.A.fatal,"Saga ".concat(e.name," terminated: ").concat(t," "),"redux-sagas.js",t),yield(0,o.cb)(V)}})))))}},24903:(e,t,r)=>{r.d(t,{JD:()=>Y,Sp:()=>W,de:()=>Z});var o=r(43816),n=r(27701),a=r(60453),i=r(51186),s=r(77112),l=r(41031),c=r(94356),u=r(6468),d=r(79419);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=(0,u.v)({currentFolderPickerFolderId:null,currentFolderPickerContents:[],currentFolderPickerFolderCount:0,folderPickerLoading:!0,folderPickerLoadingNextPage:!1,folderPickerParentTree:[]},{[d.e4]:e=>_objectSpread(_objectSpread({},e),{},{currentFolderPickerFolderId:null,currentFolderPickerContents:[],currentFolderPickerFolderCount:0,folderPickerLoading:!0,folderPickerLoadingNextPage:!1,folderPickerParentTree:[]}),[d.QK]:(e,t)=>{var{currentFolderPickerFolderId:r}=t;return _objectSpread(_objectSpread({},e),{},{currentFolderPickerFolderId:r})},[d.gH]:(e,t)=>{var{folderPickerLoading:r=!1}=t;return _objectSpread(_objectSpread({},e),{},{folderPickerLoading:r})},[d.l0]:(e,t)=>{var{nodes:r}=t;return _objectSpread(_objectSpread({},e),{},{currentFolderPickerContents:[...e.currentFolderPickerContents,...r]})},[d.pe]:(e,t)=>{var{nodes:r=[],totalCount:o=0}=t;return _objectSpread(_objectSpread({},e),{},{currentFolderPickerContents:r,currentFolderPickerFolderCount:o})},[d.av]:(e,t)=>{var{folderPickerLoadingNextPage:r=!1}=t;return _objectSpread(_objectSpread({},e),{},{folderPickerLoadingNextPage:r})},[d.FO]:(e,t)=>{var{folderPickerParentTree:r}=t;return _objectSpread(_objectSpread({},e),{},{folderPickerParentTree:r})}});var v=r(53540),g=r(26939);function folders_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function folders_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?folders_reducer_ownKeys(Object(r),!0).forEach((function(t){folders_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):folders_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function folders_reducer_defineProperty(e,t,r){return(t=function folders_reducer_toPropertyKey(e){var t=function folders_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={currentFolderContents:[],currentFolderTotalCount:0,loading:!0,loadingNextPage:!1,parentTree:[],rootFolderId:"",sortToken:v._6.SortKind,sortOrder:v.xB.Descending,startToken:""};const y=(0,u.v)(f,{[g.VC]:(e,t)=>{var{nodes:r}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{currentFolderContents:[...e.currentFolderContents,...r]})},[g.PR]:(e,t)=>{var{nodes:r=[],totalCount:o=0}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{currentFolderContents:r,currentFolderTotalCount:o})},[g.oB]:(e,t)=>{var{loading:r=!1}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{loading:r})},[g.Es]:(e,t)=>{var{loadingNextPage:r=!1}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{loadingNextPage:r})},[g.ff]:(e,t)=>{var{parentTree:r}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{parentTree:r})},[g.bd]:(e,t)=>{var{rootFolderId:r}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{rootFolderId:r})},[g.Wd]:(e,t)=>{var{nodeId:r,updatedProps:o}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{currentFolderContents:e.currentFolderContents.map((e=>e.id===r?folders_reducer_objectSpread(folders_reducer_objectSpread({},e),o):e))})},[g.Ig]:(e,t)=>{var{startToken:r}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{startToken:r})},[g.hk]:(e,t)=>{var{sortToken:r,sortOrder:o}=t;return folders_reducer_objectSpread(folders_reducer_objectSpread({},e),{},{sortToken:r,sortOrder:o})}});var h=r(32608),b=r(39459);function onboarding_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function onboarding_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?onboarding_reducer_ownKeys(Object(r),!0).forEach((function(t){onboarding_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):onboarding_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function onboarding_reducer_defineProperty(e,t,r){return(t=function onboarding_reducer_toPropertyKey(e){var t=function onboarding_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={currentPage:b.QA.QR_START,serviceError:null};const S=(0,u.v)(m,{[b.QO]:(e,t)=>{var{pageName:r}=t;return onboarding_reducer_objectSpread(onboarding_reducer_objectSpread({},e),{},{currentPage:r})},[b.WS]:(e,t)=>{var{serviceErrorMetric:r}=t;return onboarding_reducer_objectSpread(onboarding_reducer_objectSpread({},e),{},{serviceError:r})}});var P=r(41543);function outage_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function outage_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?outage_reducer_ownKeys(Object(r),!0).forEach((function(t){outage_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):outage_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function outage_reducer_defineProperty(e,t,r){return(t=function outage_reducer_toPropertyKey(e){var t=function outage_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _=(0,u.v)({hasFetchedOutageStatus:!1,hasLoggedShownMetric:!1,isActiveGenericOutage:!1},{[P.uW]:(e,t)=>{var{isActiveGenericOutage:r}=t;return outage_reducer_objectSpread(outage_reducer_objectSpread({},e),{},{isActiveGenericOutage:r})},[P.nU]:(e,t)=>{var{hasFetchedOutageStatus:r}=t;return outage_reducer_objectSpread(outage_reducer_objectSpread({},e),{},{hasFetchedOutageStatus:r})},[P.y5]:(e,t)=>{var{hasLoggedShownMetric:r}=t;return outage_reducer_objectSpread(outage_reducer_objectSpread({},e),{},{hasLoggedShownMetric:r})}});var A=r(23152),O=r(94621),w=r(87909);function shares_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function shares_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?shares_reducer_ownKeys(Object(r),!0).forEach((function(t){shares_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):shares_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function shares_reducer_defineProperty(e,t,r){return(t=function shares_reducer_toPropertyKey(e){var t=function shares_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={contents:[],totalCount:0,loading:!0,loadingNextPage:!1,sortToken:v._6.SortDateCreated,sortOrder:v.xB.Descending};const I=(0,u.v)(C,{[w.fM]:(e,t)=>{var{nodes:r}=t;return shares_reducer_objectSpread(shares_reducer_objectSpread({},e),{},{contents:[...e.contents,...r]})},[w.jY]:(e,t)=>{var{nodes:r=[],totalCount:o=0}=t;return shares_reducer_objectSpread(shares_reducer_objectSpread({},e),{},{contents:r,totalCount:o})},[w.Z0]:(e,t)=>{var{loading:r=!1}=t;return shares_reducer_objectSpread(shares_reducer_objectSpread({},e),{},{loading:r})},[w.l5]:(e,t)=>{var{loadingNextPage:r=!1}=t;return shares_reducer_objectSpread(shares_reducer_objectSpread({},e),{},{loadingNextPage:r})}});var j=r(62076),D=r(339),E=r(83325),T=r(31035);function slideshow_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function slideshow_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?slideshow_reducer_ownKeys(Object(r),!0).forEach((function(t){slideshow_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):slideshow_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function slideshow_reducer_defineProperty(e,t,r){return(t=function slideshow_reducer_toPropertyKey(e){var t=function slideshow_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={collection:null,returnUrlModel:null,shouldImageFill:!1,speed:E.B.MEDIUM,startNodeId:null,transitionStyle:E.x.NONE};const R=(0,u.v)(F,{[T.X2]:function initializeData(e,t){var{collection:r,returnUrlModel:o,startNodeId:n}=t;return slideshow_reducer_objectSpread(slideshow_reducer_objectSpread({},e),{},{collection:r,returnUrlModel:o,startNodeId:n||e.startNodeId})},[T.st]:function resetData(e){var{collection:t,returnUrlModel:r,startNodeId:o}=F;return slideshow_reducer_objectSpread(slideshow_reducer_objectSpread({},e),{},{collection:t,returnUrlModel:r,startNodeId:o})},[T.EH]:function setSpeed(e,t){var{speed:r}=t;return slideshow_reducer_objectSpread(slideshow_reducer_objectSpread({},e),{},{speed:r})},[T.Kq]:function setTransitionStyle(e,t){var{transitionStyle:r}=t;return slideshow_reducer_objectSpread(slideshow_reducer_objectSpread({},e),{},{transitionStyle:r})},[T._9]:function toggleImageFill(e){var{shouldImageFill:t}=e;return slideshow_reducer_objectSpread(slideshow_reducer_objectSpread({},e),{},{shouldImageFill:!t})}});var N=r(14724),k=r(71560),x=r(94141),G=r(79900),L=r(86218);const M={accountSettings:s.Ff,askPhotos:l.Ay,banner:L.Ay,devicePersonalization:c.Ay,folderPicker:p,folders:y,notifications:h.Ff,onboarding:S,outage:_,prints:G.Ay,saveToAmazonPhotos:A.Ff,shares:I,sharingDisplay:j.Ff,sideNav:D.Ay,slideshow:R,[O.Me.reducerPath]:O.Me.reducer,storage:k.Ay,storagePlanOffers:N.Ay,uploader:x.Ay};var U=r(20827),B=r(49551),q=(0,a.A)(window.location.search)||{},{reduxDevTools:Q="false",reduxDevToolsLatency:K="0",reduxDevToolsTrace:z="false"}=q,V="true"===z||"1"===z,J=!!("true"===Q||"1"===Q)&&{latency:parseInt(K,10)||0,trace:V},H={immutableCheck:!1,serializableCheck:{ignoredActions:[...U.o7,T.X2,...B.E_],ignoredPaths:[/^devicePersonalization/,/^slideshow/,/^uploader/]}},Z=(0,n.Ay)(),W=(0,o.U1)({devTools:J,middleware:e=>e(H).prepend(i.LP.middleware).concat(Z),reducer:M}),Y=function dispatch(){return W.dispatch(...arguments)}},6468:(e,t,r)=>{function createReducer(e,t){return function reducer(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(t,o.type)?t[o.type](r,o):r}}function convertPromise(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new Promise(((t,o)=>{e.call(this,...r).done((function(){t(...arguments)})).fail((e=>{o(e)}))}))}r.d(t,{h:()=>convertPromise,v:()=>createReducer})},23152:(e,t,r)=>{r.d(t,{zI:()=>C,Ff:()=>O,gj:()=>I,sC:()=>A,rT:()=>E});var o=r(66569),n=r(18742),a=r(97463),i=r(73725),s=r(53540),l=r(71086),c=r(1683),u=r(35994),d=r(42843),p=r(74169),v=r(4995),g=r(21203),f=r(77760),y=r(62076),h=r(71017),b="cloneIntent";function getCurrentIntent(){return window.sessionStorage.getItem(b)}function getCloneParamsIdentifier(e){var{sourceType:t}=e;switch(t){case g.jk.CDS_SHARED_COLLECTION:return"cds:".concat(e.cdsShareId);case g.jk.CDGS_GROUP:return"group:".concat(e.cdgsGroupId);default:throw new Error("Unknown share type for clone parameters: ".concat(t))}}function saveCloneIntent(e){!function saveIntent(e){window.sessionStorage.setItem(b,e)}(getCloneParamsIdentifier(e))}function clearCloneIntents(){window.sessionStorage.removeItem(b)}var m="stap-nodes:";function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var S="cloneParams",P=function(e){return e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}({}),_={pollingStatus:P.NotStarted},selectCloneParameters=(e,t)=>{var r=(0,y.Cc)(t);switch(r){case y.I9.cds:return((e,t)=>({sourceType:g.jk.CDS_SHARED_COLLECTION,cdsSharedCollectionNodeId:(0,y.RS)(t),cdsShareId:(0,y.j1)(t),cloneAllNodesInCollection:0===e.length,selectedNodes:e}))(e,t);case y.I9.group:return((e,t)=>({sourceType:g.jk.CDGS_GROUP,cdgsGroupId:(0,y.N2)(t),cdgsShareToken:(0,y.dA)(t),cloneAllNodesInCollection:0===e.length,selectedNodes:e}))(e,t);default:throw new Error("Unknown share type for clone parameters: ".concat(r))}},A=(0,f.K)({name:"saveToAmazonPhotos",initialState:_,selectors:{selectJobDetail:e=>e.jobDetail},reducers:e=>({saveToAmazonPhotos:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var{getState:r}=t,{protocol:o,host:i}=window.location,l=selectCloneParameters(e,r()),c=a.A.getProperty("authenticated"),u=n.A.getProperty("urls.baseAppUrl"),d=new URL(u,"".concat(o,"//").concat(i)),p=new URL(n.A.getProperty("urls.authPortal"));saveCloneIntent(l),l.cloneAllNodesInCollection||function saveCloneNodes(e){if(void 0===e.selectedNodes||0===e.selectedNodes.length)throw new Error("No nodes specified in clone request");window.sessionStorage.setItem(m+getCloneParamsIdentifier(e),JSON.stringify(e.selectedNodes))}(l),l.selectedNodes=void 0,d.searchParams.set(S,JSON.stringify(l)),d.searchParams.set("sort",s._6.SortDateUploaded),d.searchParams.append("sf","1"),d.searchParams.append(h.R,"1"),d.searchParams.append("ref_","AP_S_G_SL_CTA_sharing"),p.searchParams.set("openid.return_to",d.toString()),c?window.location.assign(d.toString()):window.location.assign(p.toString())}));return function(t,r){return e.apply(this,arguments)}}()),processCloneParameters:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var{dispatch:r}=t,n=l.A.getProperty("route.props.query.".concat(S));if(n){var a=JSON.parse(n),s=function hasIntentForClone(e){var t=getCloneParamsIdentifier(e);return getCurrentIntent()===t}(a);if(!s){i.A.error("Attempted to start clone operation without existing saved intent.");var c=new URL(window.location.href);return c.searchParams.delete(S),void(0,o.A)(c.toString(),{replace:!0})}if(!1===a.cloneAllNodesInCollection){var u=function getCloneNodes(e){var t=window.sessionStorage.getItem(m+getCloneParamsIdentifier(e));return!!t&&JSON.parse(t)}(a);if(!1===u){i.A.error("Attempted to start selective clone operation without existing saved nodes.");var d=new URL(window.location.href);return d.searchParams.delete(S),void(0,o.A)(d.toString(),{replace:!0})}a.selectedNodes=u,function removeCloneNodes(e){window.sessionStorage.removeItem(m+getCloneParamsIdentifier(e))}(a)}if(!(0,g.Zn)(a))throw new Error("Invalid clone parameters. [".concat(JSON.stringify(a),"]"));yield r(A.actions.startCloneJob(a))}}));return function(t,r){return e.apply(this,arguments)}}(),{rejected:(e,t)=>{i.A.fatal("Failed to start clone job ".concat(t.error.message))},settled:()=>{clearCloneIntents()}}),startCloneJob:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var{dispatch:r}=t,n=new URL(window.location.href);n.pathname=p.DS.baseAppUrl+p.DS.all,n.searchParams.delete(S),(0,o.A)(n.toString(),{replace:!0});var a=function(){var t=_asyncToGenerator((function*(){var t=yield v.A.initiateCloneCollectionJob(e);r(A.actions.setJobDetail(t)),r(A.actions.pollJobStatus())}));return function startClone(){return t.apply(this,arguments)}}();switch(e.sourceType){case g.jk.CDS_SHARED_COLLECTION:case g.jk.CDGS_GROUP:return a();default:throw new Error("Unknown share type for clone parameters: ".concat(e.sourceType))}}));return function(t,r){return e.apply(this,arguments)}}(),{fulfilled:()=>{c.A.log("CloneStarted",{},l.A.getPageContext())},rejected:(e,t)=>{i.A.fatal("Failed to start clone job ".concat(t.error))}}),pollJobStatus:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var r,{getState:o,dispatch:n}=t,a=null===(r=o().saveToAmazonPhotos.jobDetail)||void 0===r?void 0:r.jobId;if(a){var i=yield v.A.getCloneCollectionJob(a);switch(n(A.actions.setJobDetail(i)),i.statusCode){case g.nO.PENDING:case g.nO.IN_PROGRESS:setTimeout((()=>{n(A.actions.pollJobStatus())}),15e3);break;case g.nO.COMPLETED:setTimeout((()=>{u.A.emit("addModels")}),d.A.MID)}}}));return function(t,r){return e.apply(this,arguments)}}(),{fulfilled:(e,t)=>{var r;switch(null===(r=e.jobDetail)||void 0===r?void 0:r.statusCode){case g.nO.CANCELLED:case g.nO.COMPLETED:e.pollingStatus=P.Complete;break;case g.nO.IN_PROGRESS:case g.nO.PENDING:e.pollingStatus=P.InProgress;break;default:e.pollingStatus=P.Error}},rejected:e=>{e.pollingStatus=P.Error}}),setJobDetail:e.reducer(((e,t)=>{var{payload:r}=t;e.jobDetail=r}))})}),{reducer:O}=A,{pollJobStatus:w,processCloneParameters:C,saveToAmazonPhotos:I,setJobDetail:j,startCloneJob:D}=A.actions,{selectJobDetail:E}=A.selectors},94621:(e,t,r)=>{r.d(t,{Ck:()=>c,Me:()=>u,VO:()=>getQueueItemToastId});var o=r(35994),n=r(21203),a=r(77760),i=r(51186),s=r(23152);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}var l="stap-toast",c=function(e){return e.InProgress="in-progress",e.Saved="saved",e.Duplicates="duplicates",e.Overquota="overquota",e.Cancelled="cancelled",e.Unshared="unshared",e.Error="error",e}({}),u=(0,a.K)({name:"stapStatusToast",initialState:{queue:[]},selectors:{selectToastQueue:e=>e.queue},reducers:e=>({updateToasts:e.asyncThunk(function(){var e=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(e,t){var{dispatch:r}=t,{openToast:o,closeAllToasts:a}=u.actions,i=e.jobId;switch(r(a()),e.statusCode){case n.nO.PENDING:case n.nO.IN_PROGRESS:r(o({job:i,toast:c.InProgress}));break;case n.nO.COMPLETED:var s,l,d,p,v=[];e.successfulNodes&&v.push({job:i,toast:c.Saved}),null!==(s=e.failedNodes)&&void 0!==s&&s[n.Jk.DUPLICATE]&&v.push({job:i,toast:c.Duplicates}),null!==(l=e.failedNodes)&&void 0!==l&&l[n.Jk.OVERQUOTA]?v.push({job:i,toast:c.Overquota}):null!==(d=e.failedNodes)&&void 0!==d&&d[n.Jk.UNSHARED]?v.push({job:i,toast:c.Unshared}):null!==(p=e.failedNodes)&&void 0!==p&&p[n.Jk.UNKNOWN]&&v.push({job:i,toast:c.Error}),v.forEach((e=>r(u.actions.openToast(e))));break;case n.nO.CANCELLED:r(o({job:i,toast:c.Cancelled}));break;case n.nO.FAILED:default:r(o({job:i,toast:c.Error}))}}));return function(t,r){return e.apply(this,arguments)}}()),closeAllToasts:e.reducer((e=>{e.queue=[]})),openToast:e.reducer(((e,t)=>{e.queue.push(t.payload)})),closeToast:e.reducer(((e,t)=>{e.queue=e.queue.filter((e=>getQueueItemToastId(e)!==getQueueItemToastId(t.payload)))}))})});function getQueueItemToastId(e){return function getToastId(e,t){return"".concat(l,"-").concat(e,"-").concat(t)}(e.job,e.toast)}(0,i.Zv)({actionCreator:s.sC.actions.setJobDetail,effect:(e,t)=>{var{dispatch:r}=t;r(u.actions.updateToasts(e.payload))}}),(0,i.Zv)({actionCreator:s.sC.actions.pollJobStatus.rejected,effect:(e,t)=>{var{dispatch:r}=t;r(u.actions.closeAllToasts())}}),(0,i.Zv)({actionCreator:u.actions.closeToast,effect:e=>{o.A.emit("showToast",{id:getQueueItemToastId(e.payload),close:!0})}})},9029:(e,t,r)=>{r.d(t,{h:()=>y});var o=r(62216),n=r.n(o),a=r(38221),i=r.n(a),s=r(39754),l=r.n(s),c=r(35994),u=r(78439),d=r(13489),p=r(98436),v=r(77914),g=r(65536);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={};function filterData(e,t){return e.filter((e=>new RegExp("^".concat((0,v.A)(t)),"gi").test(e.term)))}class SearchAutoCompleteStore extends c.A.Store{constructor(){var e;super(...arguments),e=this,_defineProperty(this,"shared",!0),_defineProperty(this,"_callCdsSuggestion",i()(function(){var t=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(t){var r=t&&(0,p.A)(t,0);try{var{suggestions:o}=yield u.A.suggestion({query:r});f[r]={expires:Date.now()+6e5,data:(0,g.u)()?o.filter((e=>"things"!==e.category)):o},e.setData({result:filterData(f[r].data,e.data.value),queryPending:!1}),d.A.log({name:"SearchSuggestionSuccess"})}catch(t){d.A.log({name:"SearchSuggestionFailure"}),e.setData({queryPending:!1})}}));return function(e){return t.apply(this,arguments)}}(),200))}get events(){return{searchAutoComplete:this.autoComplete,searchEngage:this.onSearchEngage,searchDisengage:this.onSearchDisengage,toggleMobileSearch:this.onToggleMobileSearch,search:this.onSearch,uncache:this.uncache,addModels:this.uncache,removeModels:this.uncache,renameClusterSuccess:this.uncache,createClusterSuccess:this.uncache}}get defaultData(){return{result:[],value:void 0,searchEngaged:!1,isMobileSearchVisible:!1,queryPending:!1}}autoComplete(e){var t,{query:r="",keyword:o}=e,a=o?o.name:r,i=a&&(0,p.A)(a,0);if(this.setData({queryPending:!0,value:a,keyword:o}),function gc(){if(Math.random()<.1){var e=Date.now();l()(f,((t,r)=>{e>t.expires&&delete f[r]}))}}(),a.length>=1){if(i){var s=f[i];s&&Date.now()<s.expires&&(t=filterData(s.data,a))}n()(t)?this._callCdsSuggestion(i):this.setData({result:t,queryPending:!1})}else this.setData({result:[],queryPending:!1})}onSearch(e){var{keyword:t}=e;if(this.data.searchEngaged&&t&&"people"!==t.category&&"location"!==t.category){var r=t.name?t.name.replace(/_/g," "):"";this.autoComplete({query:r})}}onSearchEngage(){this.setData({searchEngaged:!0})}onSearchDisengage(){this.resetData()}onToggleMobileSearch(){this.data.isMobileSearchVisible?this.resetData():this.setData({isMobileSearchVisible:!0})}uncache(){f={},this.resetData()}}const y=new SearchAutoCompleteStore},87909:(e,t,r)=>{r.d(t,{Bp:()=>fetchPagesForSelectAll,Bt:()=>removeContentFromView,Dg:()=>attemptToFetchNextPage,Z0:()=>l,fM:()=>i,jY:()=>s,l5:()=>c,wK:()=>fetchPageContents});var o=r(78439),n=r(53540),a=r(6468);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var i="APPEND_NEXT_PAGE_CONTENTS_SHARES",s="SET_PAGE_CONTENTS_SHARES",setPageContents=(e,t)=>({type:s,nodes:e,totalCount:t}),l="SET_LOADING_SHARES",setLoading=e=>({type:l,loading:e}),c="SET_LOADING_NEXT_PAGE_SHARES",setLoadingNextPage=e=>({type:c,loadingNextPage:e}),fetchPageContents=()=>function(){var e=_asyncToGenerator((function*(e,t){e(setLoading(!0));var{shares:{sortOrder:r,sortToken:i}}=t(),s=(0,n.Ay)({sortToken:i,order:r}),l=yield(0,a.h)((()=>o.A.listShares({sort:s})));e(setPageContents(l.data,l.count)),e(setLoading(!1))}));return function(t,r){return e.apply(this,arguments)}}(),attemptToFetchNextPage=()=>function(){var e=_asyncToGenerator((function*(e,t){var{shares:{contents:r,totalCount:s,loadingNextPage:l,sortOrder:c,sortToken:u}}=t();if(!(l||r.length>=s)){e(setLoadingNextPage(!0));var d,p=(0,n.Ay)({sortToken:u,order:c}),v=yield(0,a.h)((()=>o.A.listShares({offset:r.length,sort:p})));e((d=v.data,{type:i,nodes:d})),e(setLoadingNextPage(!1))}}));return function(t,r){return e.apply(this,arguments)}}(),fetchPagesForSelectAll=e=>function(){var t=_asyncToGenerator((function*(t,r){var o=function(){var n=_asyncToGenerator((function*(){var{shares:{contents:n,totalCount:a}}=r();if(n.length>=a||n.length>=e)return n;var i=200;return n.length+i>e&&(i=e-n.length),yield t(attemptToFetchNextPage()),o()}));return function recursivelyFetchPages(){return n.apply(this,arguments)}}();return o()}));return function(e,r){return t.apply(this,arguments)}}(),removeContentFromView=e=>function(){var t=_asyncToGenerator((function*(t,r){var{shares:{contents:o,totalCount:n}}=r(),a=e.map((e=>e.id)),i=o.filter((e=>!a.includes(e.id))),s=Math.max(0,n-e.length);t(setPageContents(i,s))}));return function(e,r){return t.apply(this,arguments)}}()},6796:(e,t,r)=>{r.d(t,{GG:()=>selectSharesTotalCount,bV:()=>selectIsSharesLoadingNextPage,pN:()=>l,t5:()=>i,uJ:()=>s,xh:()=>selectIsSharesLoading});var o=r(25508),n=r(49479),a=r(45445),selectSharesContents=e=>e.shares.contents,selectSharesTotalCount=e=>e.shares.totalCount,selectIsSharesLoading=e=>e.shares.loading,selectIsSharesLoadingNextPage=e=>e.shares.loadingNextPage,i=(0,o.Mz)([selectIsSharesLoading,selectSharesTotalCount],((e,t)=>!!e||0===t)),s=(0,o.Mz)([selectSharesContents],(e=>e.map((e=>new n.A(e))))),l=(0,o.Mz)([selectSharesContents,selectSharesTotalCount,selectIsSharesLoadingNextPage],((e,t,r)=>{var o=e.length;return o>=t||t-o<a.T?t:r?o+a.T:o+1}))},62076:(e,t,r)=>{r.d(t,{$0:()=>f,CR:()=>_,Cc:()=>w,D0:()=>m,Ff:()=>u,HM:()=>findParticipantByID,I9:()=>s,MT:()=>v,N2:()=>b,RS:()=>P,dA:()=>O,hH:()=>h,j1:()=>A,qL:()=>y,xL:()=>g,z2:()=>S,ze:()=>p,zs:()=>d});var o=r(43816),n=r(25508),a=r(14681),i=r(36898),s=function(e){return e.groupInvite="groupInvite",e.group="group",e.cds="cds",e.sharedAlbum="sharedAlbum",e}({}),l={groupId:void 0,sharedCollectionNodeId:void 0,shareId:void 0,shareToken:void 0,shareType:void 0,shareDescription:void 0};function findParticipantByID(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((t=>i.CT.parseArn(t.participantId).accountId()===e))}var c=(0,o.Z0)({name:"sharingDisplay",initialState:l,reducers:{setGroupId:(e,t)=>{var{payload:r}=t;e.groupId=r},setSharedCollectionNodeId:(e,t)=>{var{payload:r}=t;e.sharedCollectionNodeId=r},setShareId:(e,t)=>{var{payload:r}=t;e.shareId=r},setShareToken:(e,t)=>{var{payload:r}=t;e.shareToken=r},setShareType:(e,t)=>{var{payload:r}=t;e.shareType=r},setShareDescription:(e,t)=>{var{payload:r}=t;e.shareDescription=r}},selectors:{selectGroupId:e=>e.groupId,selectSharedCollectionNodeId:e=>e.sharedCollectionNodeId,selectShareId:e=>e.shareId,selectShareToken:e=>e.shareToken,selectShareType:e=>e.shareType,selectShareDescription:e=>e.shareDescription,selectParticipants:e=>{var t;return null===(t=e.shareDescription)||void 0===t?void 0:t.participants},selectOwnerName:(0,n.Mz)((e=>{var t;return null===(t=e.shareDescription)||void 0===t?void 0:t.participants}),(e=>{var t;return null===(t=function findParticipantByRole(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((t=>t.permissionRole===e))}(e,a.EK.owner))||void 0===t?void 0:t.profile.name})),selectAlbumName:e=>{var t;return null===(t=e.shareDescription)||void 0===t?void 0:t.resourceMetadata.name}}}),{reducer:u}=c,{setGroupId:d,setSharedCollectionNodeId:p,setShareDescription:v,setShareId:g,setShareToken:f,setShareType:y}=c.actions,{selectAlbumName:h,selectGroupId:b,selectOwnerName:m,selectParticipants:S,selectSharedCollectionNodeId:P,selectShareDescription:_,selectShareId:A,selectShareToken:O,selectShareType:w}=c.selectors},339:(e,t,r)=>{r.d(t,{Ay:()=>i,NL:()=>closeSideNavAction,x8:()=>toggleSideNavAction});var o=r(6468);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n="SIDE_NAV_CLOSE",a="SIDE_NAV_TOGGLE";const i=(0,o.v)({isOpen:!1},{[n]:function closeSideNavHandler(e){return _objectSpread(_objectSpread({},e),{},{isOpen:!1})},[a]:function toggleSideNavHandler(e){var{isOpen:t}=e;return _objectSpread(_objectSpread({},e),{},{isOpen:!t})}});function closeSideNavAction(){return{type:n}}function toggleSideNavAction(){return{type:a}}},31035:(e,t,r)=>{r.d(t,{EH:()=>a,Fw:()=>setTransitionStyle,Jl:()=>toggleImageFill,Kq:()=>i,P4:()=>initializeData,X2:()=>o,_9:()=>s,cm:()=>setSpeed,kT:()=>resetData,st:()=>n});var o="SLIDESHOW_DATA_INITIALIZE",n="SLIDESHOW_DATA_RESET",a="SLIDESHOW_SET_SPEED",i="SLIDESHOW_SET_TRANSITION_STYLE",s="SLIDESHOW_TOGGLE_IMAGE_FILL";function initializeData(e){var{collection:t,returnUrlModel:r,startNodeId:n}=e;return{type:o,collection:t,startNodeId:n,returnUrlModel:r}}function resetData(){return{type:n}}function setSpeed(e){return{type:a,speed:Number(e)}}function setTransitionStyle(e){return{type:i,transitionStyle:e}}function toggleImageFill(){return{type:s}}},14724:(e,t,r)=>{r.d(t,{A1:()=>v,Ay:()=>d,PM:()=>p,Wn:()=>selectValidUpgradePlanOfferGroups,aR:()=>g,gV:()=>selectValidPlanOfferGroups,n9:()=>selectCurrentSubscriptionPlanOfferGroup});var o=r(73725),n=r(71560),a=r(76202),i=r(97042),s=r(81412),l=r(77760);function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var c={planOffers:{status:a.Z.IDLE,offers:[]}},u=(0,l.K)({name:"storagePlanOffers",initialState:c,reducers:e=>({getPlanOffers:e.asyncThunk(_asyncToGenerator((function*(){try{return yield s.Ay.fetchOffers()}catch(e){return o.A.fatal(s.Zf,"Failed to fetch storage plan offers",e),Promise.reject(e)}})),{pending(e){e.planOffers.status=a.Z.PENDING},fulfilled(e,t){e.planOffers.status=a.Z.SUCCEEDED,e.planOffers.offers=t.payload.offers},rejected(e){e.planOffers.offers=[],e.planOffers.status=a.Z.FAILED}})}),selectors:{selectPlanOfferStatus:e=>e.planOffers.status,selectAllPlanOffers:e=>e.planOffers.offers,selectPlanOfferGroups(e){var t={};return e.planOffers.offers.forEach((e=>{var r=e.plan.storage,o=e.plan.subscriptionPeriod.toLowerCase();if(!(!r||r<=0||e.price<=0)){var n=t[r];n||(n={size:r}),o!==i.R0.toLowerCase()||n.month?o!==i.e9.toLowerCase()||n.year||(n.year=e):n.month=e,(n.year||n.month)&&(t[r]=n)}})),Object.values(t).sort(((e,t)=>e.size-t.size))}}}),selectValidPlanOfferGroups=e=>{var t,r,o=u.getSelectors().selectPlanOfferGroups(e.storagePlanOffers),i=(0,n.sB)(e),s=null===(t=e.storage)||void 0===t||null===(r=t.subscription)||void 0===r?void 0:r.status;return s===a.Z.PENDING||s===a.Z.IDLE?[]:o.filter((e=>{var t;return e.size!==(null==i||null===(t=i.activePlan)||void 0===t?void 0:t.storage)}))},selectValidUpgradePlanOfferGroups=e=>{var t,r,o,i=selectValidPlanOfferGroups(e),s=(0,n.sB)(e),l=null===(t=e.storage)||void 0===t||null===(r=t.subscription)||void 0===r?void 0:r.status;if(l===a.Z.PENDING||l===a.Z.IDLE)return[];if(!s||null==s||!s.activePlan)return i;var c=(null==s||null===(o=s.activePlan)||void 0===o?void 0:o.storage)||0;return i.filter((e=>e.size>c))},selectCurrentSubscriptionPlanOfferGroup=e=>{var t=u.getSelectors().selectPlanOfferGroups(e.storagePlanOffers),r=(0,n.sB)(e);if(r&&null!=r&&r.activePlan&&null!=r&&r.activeContract){var{activePlan:o}=r,a=t.filter((e=>e.size===o.storage))[0];if(a)return a.year&&o.subscriptionPeriod.toLowerCase()===i.R0.toLowerCase()?{size:o.storage,year:a.year,month:{plan:o,price:null==r?void 0:r.activeContract.amount,currencyCode:r.activeContract.currencyCode}}:a.month&&o.subscriptionPeriod.toLowerCase()===i.e9.toLowerCase()?{size:o.storage,month:a.month,year:{plan:o,price:r.activeContract.amount,currencyCode:r.activeContract.currencyCode}}:void 0}};const d=u.reducer;var{getPlanOffers:p}=u.actions,{selectAllPlanOffers:v,selectPlanOfferStatus:g,selectPlanOfferGroups:f}=u.selectors},71560:(e,t,r)=>{r.d(t,{IV:()=>j,Ay:()=>P,fJ:()=>O,db:()=>w,TN:()=>_,uV:()=>C,yh:()=>A,eF:()=>Z,RP:()=>E,KM:()=>J,iO:()=>L,A9:()=>M,Xi:()=>U,jw:()=>B,g4:()=>q,uz:()=>Q,uL:()=>te,r_:()=>re,Pr:()=>ae,rw:()=>ie,WS:()=>se,Yz:()=>le,Wd:()=>ge,IS:()=>fe,x7:()=>ye,Df:()=>Y,z2:()=>_e,pn:()=>G,oS:()=>ce,C2:()=>ue,p7:()=>de,BB:()=>pe,lc:()=>he,EN:()=>Se,so:()=>Pe,Rs:()=>x,iQ:()=>$,Hb:()=>k,Mk:()=>X,Nw:()=>be,hm:()=>T,bk:()=>ee,sh:()=>ve,sB:()=>W,i3:()=>H,cg:()=>me,ql:()=>K,Wb:()=>z,fc:()=>V,Wj:()=>R,O2:()=>I,P3:()=>D});var o=r(25508),n=r(78439),a=r(17667),i=r(84723),s=r(73725),l=r(76202),c=r(97042),u=r(34332),d=r(81412),p=r(83981),v=r(5887),g=r(77760),f=r(54318),y=r(14724),h=r(60731);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,o,n,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,n,_next,_throw,"throw",e)}_next(void 0)}))}}var b=function(e){return e.bytes="bytes",e.count="count",e}(b||{}),m={family:{status:l.Z.IDLE},quota:{status:l.Z.IDLE},usage:{status:l.Z.IDLE},householdUsage:{status:l.Z.IDLE},subscription:{status:l.Z.IDLE,setAutoRenewStatus:l.Z.IDLE,cancelPlanStatus:l.Z.IDLE,hasShownSuccessDialog:!1}},S=(0,g.K)({name:"storage",initialState:m,reducers:e=>({getFamilyMemberData:e.asyncThunk(_asyncToGenerator((function*(){return u.A.getFamilyMemberData()})),{pending(e){e.family.status=l.Z.PENDING},fulfilled(e,t){e.family.status=l.Z.SUCCEEDED,e.family.members=t.payload.members},rejected(e){e.family.members=[],e.family.status=l.Z.FAILED}}),getHouseholdUsage:e.asyncThunk(_asyncToGenerator((function*(){return n.A.getHouseholdUsage()})),{fulfilled:(e,t)=>{e.householdUsage.data=t.payload,e.householdUsage.status=l.Z.SUCCEEDED}}),getQuota:e.asyncThunk(_asyncToGenerator((function*(){return v.g.getQuota()})),{pending:e=>{e.quota.status=l.Z.PENDING},fulfilled:(e,t)=>{e.quota.data=t.payload,e.quota.status=l.Z.SUCCEEDED}}),getUsage:e.asyncThunk(_asyncToGenerator((function*(){return n.A.getUsage()})),{fulfilled:(e,t)=>{e.usage.data=t.payload,e.usage.status=l.Z.SUCCEEDED}}),getSubscription:e.asyncThunk(_asyncToGenerator((function*(){try{return yield d.Ay.getSubscription()}catch(e){return s.A.fatal(d.Zf,"Error fetching PSS subscription",e),Promise.reject(e)}})),{pending:e=>{e.subscription.status=l.Z.PENDING},fulfilled:(e,t)=>{e.subscription.data=t.payload.subscription,e.subscription.status=l.Z.SUCCEEDED},rejected:e=>{e.subscription.status=l.Z.FAILED}}),setAutoRenewPreference:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var{dispatch:r,getState:o}=t,n=o(),{storage:a}=n,{subscription:{data:s}}=a;if(s&&s.activePlan)try{var l=yield i.A.setAutoRenewPreference(s.subscriptionId,e);return r(S.actions.getSubscription()),l}catch(e){return Promise.reject(e)}}));return function(t,r){return e.apply(this,arguments)}}(),{pending:e=>{e.subscription.setAutoRenewStatus=l.Z.PENDING},fulfilled:e=>{e.subscription.setAutoRenewStatus=l.Z.IDLE},rejected:e=>{e.subscription.setAutoRenewStatus=l.Z.FAILED}}),setHasShownSuccessDialog:e.reducer(((e,t)=>{e.subscription.hasShownSuccessDialog=t.payload})),cancelPlan:e.asyncThunk(function(){var e=_asyncToGenerator((function*(e,t){var{dispatch:r,getState:o}=t,n=o(),{storage:a}=n,{subscription:{data:i}}=a;if(!i||!i.activePlan)return null;try{return yield d.Ay.cancel(),r(S.actions.getSubscription()),r(S.actions.getQuota()),r((0,y.PM)()),{deletedSubscription:i}}catch(e){return s.A.fatal(d.Zf,"Error cancelling PSS plan",e),Promise.reject(e)}}));return function(t,r){return e.apply(this,arguments)}}(),{pending:e=>{e.subscription.cancelPlanStatus=l.Z.PENDING},fulfilled:(e,t)=>{e.subscription.cancelPlanStatus=l.Z.SUCCEEDED,t.payload&&(e.subscription.cancelledPlan=t.payload.deletedSubscription)},rejected:e=>{e.subscription.cancelPlanStatus=l.Z.FAILED}})}),selectors:{selectActiveUniqueGrants:(0,o.Mz)((e=>e),(e=>{var t;return function getActiveUniqueGrants(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return[];var t=e.filter((e=>Date.now()<(0,h.Mc)(e))),r=[];return t.forEach((e=>{var t=r.findIndex((t=>t.id===e.id));if(-1!==t){var o=_objectSpread({},r[t]);o.storageBytes+=e.storageBytes,r[t]=o}else r.push(_objectSpread({},e))})),r}(null===(t=e.quota.data)||void 0===t?void 0:t.grants)})),selectQuotaStatus:e=>e.quota.status,selectQuotaData:e=>e.quota.data,selectUsageStatus:e=>e.usage.status,selectUsageData:e=>e.usage.data,selectIsOverQuota(e){var t,r,o;return!!(null!==(t=e.quota.data)&&void 0!==t&&t.available||0===(null===(r=e.quota.data)||void 0===r?void 0:r.available))&&(null===(o=e.quota.data)||void 0===o?void 0:o.available)<=0},selectIsNearQuota(e){var t,r,o,n;return(null!==(t=null===(r=e.quota.data)||void 0===r?void 0:r.available)&&void 0!==t?t:0)<.1*(null!==(o=null===(n=e.quota.data)||void 0===n?void 0:n.quota)&&void 0!==o?o:0)},selectHasUnlimitedPhotos(e){var t,r;return Boolean(null===(t=e.quota.data)||void 0===t||null===(r=t.unlimitedPhotosFeature)||void 0===r?void 0:r.enabled)},selectBillablePhotoCount(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.count)&&void 0!==t?t:0},selectBillablePhotoBytes(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.bytes)&&void 0!==t?t:0},selectBillableVideoCount(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.video)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.count)&&void 0!==t?t:0},selectBillableVideoBytes(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.video)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.bytes)&&void 0!==t?t:0},selectBillableNonMediaBytes(e){var t,r,o,n,a,i,s,l,c,u;return(null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.doc)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.bytes)&&void 0!==t?t:0)+(null!==(i=null===(s=e.usage)||void 0===s||null===(l=s.data)||void 0===l||null===(c=l.other)||void 0===c||null===(u=c.billable)||void 0===u?void 0:u.bytes)&&void 0!==i?i:0)},selectBillableNonMediaCount(e){var t,r,o,n,a,i,s,l,c,u;return(null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.doc)||void 0===n||null===(a=n.billable)||void 0===a?void 0:a.count)&&void 0!==t?t:0)+(null!==(i=null===(s=e.usage)||void 0===s||null===(l=s.data)||void 0===l||null===(c=l.other)||void 0===c||null===(u=c.billable)||void 0===u?void 0:u.count)&&void 0!==i?i:0)},selectTotalPhotoCount(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.total)||void 0===a?void 0:a.count)&&void 0!==t?t:0},selectTotalPhotoBytes(e){var t,r,o,n,a;return null!==(t=null===(r=e.usage)||void 0===r||null===(o=r.data)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.total)||void 0===a?void 0:a.bytes)&&void 0!==t?t:0},selectTotalQuota(e){var t,r,o;return null!==(t=null===(r=e.quota)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.quota)&&void 0!==t?t:0},selectAvailableQuota(e){var t,r,o;return null!==(t=null===(r=e.quota)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.available)&&void 0!==t?t:0},selectSubscriptionStatus:e=>e.subscription.status,selectActiveSubscription(e){var t,r=null===(t=e.subscription)||void 0===t?void 0:t.data;return(null==r?void 0:r.status)===d.it.Active?r:void 0},selectSubscription:e=>e.subscription.data,selectHasBillingProblem(e){var t,r=null===(t=e.subscription.data)||void 0===t?void 0:t.openProblems;return!!r&&r.length>0},selectIsTwoClickCancelEnabled(e){var t,r=null===(t=e.subscription.data)||void 0===t?void 0:t.activePlan;return!!r&&(a.A.isOn("two-click-cancellation")&&r.vendorId.toUpperCase()===c.el)},selectIsOneClickCancelEnabled(e){var t,r=null===(t=e.subscription.data)||void 0===t?void 0:t.activePlan;return!!r&&(a.A.isOn(f.jy.OneClickCancelButton)&&r.vendorId.toUpperCase()===c.el)},selectSetAutoRenewStatus:e=>e.subscription.setAutoRenewStatus,selectCancelPlanStatus:e=>e.subscription.cancelPlanStatus,selectCancelledPlan:e=>e.subscription.cancelledPlan,selectFamilyStatus:e=>e.family.status,selectFamilyMembers:e=>e.family.members,selectFamilyMemberBillableBytes(e,t){var r,o;return sumUsageBillableBytes(null===(r=e.householdUsage.data)||void 0===r||null===(o=r.memberUsage)||void 0===o?void 0:o[t])},selectFamilyMemberBillableFileCount(e,t){var r,o;return sumUsageBillableFileCount(null===(r=e.householdUsage.data)||void 0===r||null===(o=r.memberUsage)||void 0===o?void 0:o[t])},selectFamilyMemberTotalPhotoBytes(e,t){var r,o,n,a,i,s;return null!==(r=null===(o=e.householdUsage.data)||void 0===o||null===(n=o.memberUsage)||void 0===n||null===(a=n[t])||void 0===a||null===(i=a.photo)||void 0===i||null===(s=i.total)||void 0===s?void 0:s.bytes)&&void 0!==r?r:0},selectFamilyMemberTotalPhotoCount(e,t){var r,o,n,a,i,s;return null!==(r=null===(o=e.householdUsage.data)||void 0===o||null===(n=o.memberUsage)||void 0===n||null===(a=n[t])||void 0===a||null===(i=a.photo)||void 0===i||null===(s=i.total)||void 0===s?void 0:s.count)&&void 0!==r?r:0},selectHouseholdBillableBytes(e){var t;return sumUsageBillableBytes(null===(t=e.householdUsage.data)||void 0===t?void 0:t.totalUsage)},selectHouseholdBillableFileCount(e){var t;return sumUsageBillableFileCount(null===(t=e.householdUsage.data)||void 0===t?void 0:t.totalUsage)},selectHouseholdTotalPhotoBytes(e){var t,r,o,n,a;return null!==(t=null===(r=e.householdUsage.data)||void 0===r||null===(o=r.totalUsage)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.total)||void 0===a?void 0:a.bytes)&&void 0!==t?t:0},selectHouseholdTotalPhotoCount(e){var t,r,o,n,a;return null!==(t=null===(r=e.householdUsage.data)||void 0===r||null===(o=r.totalUsage)||void 0===o||null===(n=o.photo)||void 0===n||null===(a=n.total)||void 0===a?void 0:a.count)&&void 0!==t?t:0},selectSortedFamilyMemberIds:(0,o.Mz)((e=>e),(e=>{var t,r,o=null!==(t=null===(r=e.family)||void 0===r?void 0:r.members)&&void 0!==t?t:[];if(!o)return[];var n={[p.b.FAMILY_MEMBER]:0,[p.b.ADULT]:0,[p.b.TEEN]:1,[p.b.CHILD]:2,[p.b.UNKNOWN]:3},a=o.concat().sort(((e,t)=>e.customerId.localeCompare(t.customerId))).sort(((e,t)=>n[e.role]-n[t.role])).sort(((e,t)=>Number(t.hasPhotosAccount)-Number(e.hasPhotosAccount))),i=a.filter((e=>e.isRequester)),s=a.filter((e=>!e.isRequester));return i.concat(s).map((e=>e.customerId))})),selectFamilyMembersHasPhotosAccountMap:(0,o.Mz)((e=>e),(e=>{var t,r,o=null!==(t=null===(r=e.family)||void 0===r?void 0:r.members)&&void 0!==t?t:[],n={};return o.forEach((e=>{n[e.customerId]=e.hasPhotosAccount})),n})),selectFamilyMembersInfoMap:(0,o.Mz)((e=>e),(e=>{var t,r,o=null!==(t=null===(r=e.family)||void 0===r?void 0:r.members)&&void 0!==t?t:[],n={};return o.forEach((e=>{n[e.customerId]=e.memberInfo})),n})),selectFamilyMembersQuotaConsumptionMap:(0,o.Mz)((e=>e),(e=>{var t,r,{quota:{data:o}}=e,n={};return o&&"householdStorageDetails"in o?((null!==(t=null===(r=o.householdStorageDetails)||void 0===r?void 0:r.memberUsage)&&void 0!==t?t:[]).forEach((e=>{var{customerId:t,householdUsageBytes:r}=e;n[t]=r})),n):n})),selectIsHouseholdOverQuota(e){var{quota:{data:t}}=e;if(!t||!("householdStorageDetails"in t)||!t.householdStorageDetails)return!1;var{householdStorageDetails:{householdAvailable:r=1/0}}=t;return r<=0},selectIsFamilySharingQuota(e){var t;return Boolean(null===(t=e.quota.data)||void 0===t?void 0:t.householdStorageDetails)},selectPersonalQuotaContribution(e){var t,r,o;return null!==(t=null===(r=e.quota.data)||void 0===r||null===(o=r.householdStorageDetails)||void 0===o?void 0:o.personalQuotaContribution)&&void 0!==t?t:0},selectTotalHouseholdQuota(e){var t,r,o;return null!==(t=null===(r=e.quota.data)||void 0===r||null===(o=r.householdStorageDetails)||void 0===o?void 0:o.totalHouseholdQuota)&&void 0!==t?t:0},selectIsInFamily(e){var t,r,o;return(null!==(t=null===(r=e.family)||void 0===r||null===(o=r.members)||void 0===o?void 0:o.length)&&void 0!==t?t:0)>1},selectHasShownSuccessDialog:e=>e.subscription.hasShownSuccessDialog}});function sumUsageBillableBytes(e){return sumUsageBillableData(e,b.bytes)}function sumUsageBillableFileCount(e){return sumUsageBillableData(e,b.count)}function sumUsageBillableData(e,t){var r,o,n,a,i,s,l,c,{doc:u,other:d,photo:p,video:v}=e||{};return(null!==(r=null==u||null===(o=u.billable)||void 0===o?void 0:o[t])&&void 0!==r?r:0)+(null!==(n=null==d||null===(a=d.billable)||void 0===a?void 0:a[t])&&void 0!==n?n:0)+(null!==(i=null==p||null===(s=p.billable)||void 0===s?void 0:s[t])&&void 0!==i?i:0)+(null!==(l=null==v||null===(c=v.billable)||void 0===c?void 0:c[t])&&void 0!==l?l:0)}const P=S.reducer;var{getQuota:_,getUsage:A,getFamilyMemberData:O,getHouseholdUsage:w,getSubscription:C,setAutoRenewPreference:I,cancelPlan:j,setHasShownSuccessDialog:D}=S.actions,{selectActiveUniqueGrants:E,selectQuotaStatus:T,selectQuotaData:F,selectUsageStatus:R,selectUsageData:N,selectIsOverQuota:k,selectIsNearQuota:x,selectHasUnlimitedPhotos:G,selectBillableNonMediaBytes:L,selectBillableNonMediaCount:M,selectBillablePhotoBytes:U,selectBillablePhotoCount:B,selectBillableVideoBytes:q,selectBillableVideoCount:Q,selectTotalPhotoBytes:K,selectTotalPhotoCount:z,selectTotalQuota:V,selectAvailableQuota:J,selectSubscriptionStatus:H,selectActiveSubscription:Z,selectSubscription:W,selectHasBillingProblem:Y,selectIsTwoClickCancelEnabled:X,selectIsOneClickCancelEnabled:$,selectSetAutoRenewStatus:ee,selectCancelPlanStatus:te,selectCancelledPlan:re,selectFamilyStatus:oe,selectFamilyMembers:ne,selectFamilyMemberBillableBytes:ae,selectFamilyMemberBillableFileCount:ie,selectFamilyMemberTotalPhotoBytes:se,selectFamilyMemberTotalPhotoCount:le,selectHouseholdBillableBytes:ce,selectHouseholdBillableFileCount:ue,selectHouseholdTotalPhotoBytes:de,selectHouseholdTotalPhotoCount:pe,selectSortedFamilyMemberIds:ve,selectFamilyMembersHasPhotosAccountMap:ge,selectFamilyMembersInfoMap:fe,selectFamilyMembersQuotaConsumptionMap:ye,selectIsFamilySharingQuota:he,selectPersonalQuotaContribution:be,selectTotalHouseholdQuota:me,selectIsHouseholdOverQuota:Se,selectIsInFamily:Pe,selectHasShownSuccessDialog:_e}=S.selectors},51549:(e,t,r)=>{r.d(t,{Ag:()=>advanceMd5Queue,Ew:()=>recordMd5Error,Gq:()=>pauseQueue,HP:()=>clearContext,NC:()=>recordFileProgress,RE:()=>finishQueue,T$:()=>restoreOperationContext,TU:()=>cacheQuota,UM:()=>startQueue,VE:()=>cacheFolderIds,Yn:()=>advanceQueue,ag:()=>recordFileError,aj:()=>populateQueue,fn:()=>closeUploader,i:()=>minimizeToast,j3:()=>updateUploadEventOrigin,kZ:()=>abortQueue,o:()=>setContext,p3:()=>recordMd5Success,pK:()=>recordFileSuccess,rH:()=>cacheNode,vY:()=>startSelection,wr:()=>clearSelection,xn:()=>clearOperationContexts,ye:()=>retryAll});var o=r(49551);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cacheQuota(e,t){return{type:o.t,bytesAvailable:e,hasPrime:t}}function clearContext(){return{type:o.PP}}function clearSelection(){return{type:o.qE}}function minimizeToast(){return{type:o.Vr,toastCommand:o.Ye.MINIMIZE}}function setContext(){var{albumId:e,contextDisambiguator:t,fileDropOverride:r,folderId:n,folderPath:a,groupId:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.__,albumId:e,contextDisambiguator:t,fileDropOverride:r,folderId:n,folderPath:a,groupId:i}}function startSelection(){var{isAvatar:e,selectionType:t="file",useContext:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.J8,isAvatar:e,selectionType:t,useContext:r}}function abortQueue(){return{type:o.se}}function closeUploader(){return{type:o.q}}function finishQueue(){return{type:o.nY}}function pauseQueue(){return{type:o.CT}}function populateQueue(){var{albumId:e,dateOverride:t,files:r,folderPath:n,groupId:a,isAvatar:i,isPhotoEdit:s,parentId:l,useContext:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.wY,albumId:e,dateOverride:t,files:r,folderPath:n,groupId:a,isAvatar:i,isPhotoEdit:s,parentId:l,timestamp:Date.now(),useContext:c}}function updateUploadEventOrigin(e){return{type:o.m8,isLastBatchFromDragEvent:e}}function retryAll(){return{type:o.Q4}}function startQueue(){return{type:o.Qn}}function advanceQueue(){return{type:o.Im}}function advanceMd5Queue(){return{type:o.bL}}function cacheFolderIds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.ms,folderIds:e}}function cacheNode(e){return{type:o.XT,node:e}}function clearOperationContexts(){var{albums:e,groups:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.g$,albums:e,groups:t}}function recordFileError(e){return _objectSpread({type:o.l9},e)}function recordFileProgress(e){return{type:o.yw,bytes:e}}function recordFileSuccess(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:o.eT,isDuplicate:t,node:e}}function recordMd5Success(e,t){return{type:o._u,fileId:e,hash:t}}function recordMd5Error(e,t){return _objectSpread({type:o.Vi,fileId:e},t)}function restoreOperationContext(){var{albumId:e,groupId:t,nodeIds:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o.Ar,albumId:e,groupId:t,nodeIds:r}}},49551:(e,t,r)=>{r.d(t,{Ar:()=>b,CJ:()=>E,CT:()=>_,E_:()=>D,If:()=>k,Im:()=>S,J8:()=>p,PP:()=>l,Q4:()=>O,Qn:()=>w,Uq:()=>I,Vi:()=>g,Vr:()=>j,Wu:()=>L,XT:()=>y,Xv:()=>F,Ye:()=>G,__:()=>u,_n:()=>T,_u:()=>f,bL:()=>v,cQ:()=>x,eT:()=>i,g$:()=>h,kv:()=>R,l9:()=>n,m8:()=>d,ms:()=>s,nY:()=>P,q:()=>o,qE:()=>c,se:()=>m,t:()=>C,wY:()=>A,y4:()=>N,yw:()=>a});var o="UPLOADER_CLOSE",n="UPLOADER_FILE_RECORD_ERROR",a="UPLOADER_FILE_RECORD_PROGRESS",i="UPLOADER_FILE_RECORD_SUCCESS",s="UPLOADER_FOLDERS_CACHE",l="UPLOADER_INGRESS_CLEAR_CONTEXT",c="UPLOADER_INGRESS_CLEAR_SELECTION",u="UPLOADER_INGRESS_SET_CONTEXT",d="UPLOADER_INGRESS_SET_ORIGIN_TYPE",p="UPLOADER_INGRESS_SET_SELECTION",v="UPLOADER_MD5_QUEUE_ADVANCE",g="UPLOADER_MD5_RECORD_ERROR",f="UPLOADER_MD5_RECORD_SUCCESS",y="UPLOADER_NODE_CACHE",h="UPLOADER_OPERATION_CLEAR_CONTEXTS",b="UPLOADER_OPERATION_RESTORE_CONTEXT",m="UPLOADER_QUEUE_ABORT",S="UPLOADER_QUEUE_ADVANCE",P="UPLOADER_QUEUE_FINISH",_="UPLOADER_QUEUE_PAUSE",A="UPLOADER_QUEUE_POPULATE",O="UPLOADER_QUEUE_RETRY",w="UPLOADER_QUEUE_START",C="UPLOADER_QUOTA_CACHE",I="UPLOADER_TOAST_CLEAR_MINIMIZED",j="UPLOADER_TOAST_SET_MINIMIZED",D=[o,n,a,i,s,l,c,u,d,p,v,g,f,y,h,b,m,S,P,_,A,O,w,C,I,j],E="uploader-abort-dialog",T={FAILED:"FAILED",REQUEUED:"REQUEUED",RETRYABLE:"RETRYABLE",SUCCEEDED:"SUCCEEDED"},F=6,R=3,N=6,k=1e3,x={ABORTED:"ABORTED",ACTIVE:"ACTIVE",IDLE:"IDLE",PAUSED:"PAUSED",COMPLETE:"COMPLETE"},G={EXPAND:"EXPAND",MINIMIZE:"MINIMIZE"},L="uploader-status-toast"},94141:(e,t,r)=>{r.d(t,{Ay:()=>P,ty:()=>selectAlbumsNodeIds,m1:()=>selectBackoffCount,Gr:()=>selectBatchCount,nG:()=>selectBytesAvailable,Yu:()=>selectContextAlbumId,to:()=>selectContextFolderId,gK:()=>selectContextGroupId,U1:()=>selectCurrentFile,sJ:()=>selectCurrentMd5File,ZZ:()=>selectDuplicateFileCount,wg:()=>selectFailedAndRetryableFileCount,jB:()=>selectFolderIds,ve:()=>selectGroupsEventKeys,pg:()=>selectGroupsNodeIds,gr:()=>selectHasPendingMd5Calculations,ow:()=>selectHasPrime,lD:()=>selectIsLastBatchFromDragEvent,m3:()=>selectIsQueueRetry,_w:()=>selectLastCompletedFile,Y6:()=>selectLastCompletedFileResolution,uQ:()=>selectLastSucceededFile,xt:()=>selectMd5Results,vl:()=>selectQueueId,st:()=>selectQueueLength,uR:()=>selectQueueStatus,j0:()=>selectSelectionInputType,EH:()=>selectSucceededFilesCount,yL:()=>selectTotalFileCount});var o=r(68090),n=r.n(o),a=r(6468),i=r(49551);const s={albumsNodeIds:{},backoffCount:0,batchCount:0,bytesAvailable:0,bytesCompleted:0,bytesInQueue:0,contextAlbumId:null,contextDisambiguator:null,contextFileDropOverride:null,contextFolderId:null,contextFolderPath:null,contextGroupId:null,currentFile:null,currentFileBytesCompleted:0,duplicateFileCount:0,duplicateFiles:[],failedFiles:[],folderIds:{},groupsEventKeys:{},groupsNodeIds:{},hasPrime:null,isLastBatchFromDragEvent:!1,isQueueRetry:!1,lastCompletedFile:[],lastCompletedFileResolution:null,lastFileId:0,lastPreviewableNode:[],md5CurrentFile:null,md5Queue:[],md5Results:{},previewableNodes:[],queue:[],queueId:null,queueProgress:0,queueStatus:i.cQ.IDLE,retryableFiles:[],selectionInputType:null,selectionIsAvatar:!1,selectionUseContext:null,skippedFiles:[],succeededFiles:[],toastCommand:null,totalFileCount:0};var l=r(18742),c=r(7145);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={[i.se]:function uploaderQueueAbort(e){return _objectSpread(_objectSpread({},e),{},{bytesCompleted:s.bytesCompleted,bytesInQueue:s.bytesInQueue,currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,md5CurrentFile:s.md5CurrentFile,md5Queue:[...s.md5Queue],queue:[...s.queue],queueProgress:s.queueProgress,queueStatus:i.cQ.ABORTED,skippedFiles:[...e.skippedFiles,e.currentFile,...e.queue]})},[i.Im]:function uploaderQueueAdvance(e){if(e.currentFile||!e.queue.length||e.queueStatus===i.cQ.ABORTED)return e;return _objectSpread(_objectSpread({},e),{},{currentFile:_objectSpread({},e.queue[0]),queue:e.queue.slice(1)})},[i.nY]:function uploaderQueueFinish(e){return _objectSpread(_objectSpread({},e),{},{backoffCount:s.backoffCount,bytesCompleted:s.bytesCompleted,bytesInQueue:s.bytesInQueue,queueProgress:s.queueProgress,queueStatus:i.cQ.COMPLETE})},[i.CT]:function uploaderQueuePause(e){return _objectSpread(_objectSpread({},e),{},{currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,queue:e.currentFile?[e.currentFile,...e.queue]:e.queue,queueProgress:Math.round(e.bytesCompleted/e.bytesInQueue*100),queueStatus:i.cQ.PAUSED})},[i.wY]:function uploaderQueuePopulate(e,t){var r=e.queueStatus===i.cQ.ABORTED||e.queueStatus===i.cQ.COMPLETE||e.queueStatus===i.cQ.IDLE,o=r?s:e,n=t.useContext?e.contextAlbumId:t.albumId,a=t.useContext?e.contextGroupId:t.groupId,u=t.files||[],{lastFileId:d}=o,p=u.reduce(((e,r)=>{var{name:o,size:i,type:s,fullPath:u,webkitRelativePath:p}=r,v=u||p||"";if(".DS_Store"===o||"thumbs.db"===o)return e;var g=t.folderPath||l.A.getProperty("uploaderBaseFolder")||"/",f=v.slice(0,v.lastIndexOf("/")+1);return e.bytesInQueue+=i||0,d+=1,e.newQueueFiles.push({albumId:n,dateOverride:t.dateOverride,fileCategory:(0,c.A)(o,s),fileId:d,fileName:o,fileOriginal:r,fileRelativePath:"".concat(g).concat(f),fileSize:i,fileType:s,errorCode:null,errorSource:null,groupId:a,hasThumbnail:!1,isAvatar:t.isAvatar,isDuplicate:!1,nodeId:null,parentId:t.parentId,retryable:null,retryableWithBackoff:!1,retryCount:0,totalRetryCount:0}),e.newMd5Files.push({fileOriginal:r,fileId:d}),e}),{newMd5Files:[],newQueueFiles:[],bytesInQueue:o.bytesInQueue}),v=a&&!o.groupsEventKeys.groupId?_objectSpread(_objectSpread({},o.groupsEventKeys),{},{[a]:Date.now().toString()}):o.groupsEventKeys,g=t.isAvatar||t.isPhotoEdit,f=g?[...p.newMd5Files,...o.md5Queue]:[...o.md5Queue,...p.newMd5Files],y=g?[...p.newQueueFiles,...o.queue]:[...o.queue,...p.newQueueFiles];return _objectSpread(_objectSpread({},o),{},{batchCount:o.batchCount+1,bytesInQueue:p.bytesInQueue,contextAlbumId:e.contextAlbumId,contextDisambiguator:e.contextDisambiguator,contextFolderId:e.contextFolderId,contextFolderPath:e.contextFolderPath,contextFileDropOverride:e.contextFileDropOverride,contextGroupId:e.contextGroupId,groupsEventKeys:v,lastFileId:d,md5Queue:f,queue:y,queueId:r?t.timestamp:e.queueId,totalFileCount:o.totalFileCount+p.newQueueFiles.length})},[i.Q4]:function uploaderQueueRetry(e){var t=[...e.queue,...e.retryableFiles],r=t.reduce(((e,t)=>e+t.fileSize),s.bytesInQueue);return _objectSpread(_objectSpread({},e),{},{backoffCount:s.backoffCount,bytesInQueue:r,isQueueRetry:!0,lastPreviewableNode:[...s.lastPreviewableNode],queue:t,retryableFiles:[...s.retryableFiles]})},[i.Qn]:function uploaderQueueStart(e){return _objectSpread(_objectSpread({},e),{},{queueStatus:i.cQ.ACTIVE})}};var d=r(43669);function uploader_file_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_file_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_file_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_file_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_file_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_file_reducer_defineProperty(e,t,r){return(t=function uploader_file_reducer_toPropertyKey(e){var t=function uploader_file_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={[i.l9]:function uploaderFileRecordError(e,t){var r=uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e.currentFile),{},{errorCode:t.errorCode,errorSource:t.errorSource,retryable:t.retryable,retryableWithBackoff:t.retryableWithBackoff}),o=e.bytesCompleted+r.fileSize;if(!t.retryable)return uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e),{},{backoffCount:r.errorSource!==d.Bc.CLIENT_VALIDATION?s.backoffCount:e.backoffCount,bytesCompleted:o,currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,failedFiles:[...e.failedFiles,r],lastCompletedFile:[uploader_file_reducer_objectSpread({},r)],lastCompletedFileResolution:i._n.FAILED,queueProgress:Math.round(o/e.bytesInQueue*100)});var n=r.retryableWithBackoff?e.backoffCount+1:s.backoffCount;if(r.retryCount<i.kv)return r.retryCount+=1,r.totalRetryCount+=1,uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e),{},{backoffCount:n,currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,lastCompletedFile:[uploader_file_reducer_objectSpread({},r)],lastCompletedFileResolution:i._n.REQUEUED,queue:[...e.queue,r],queueProgress:Math.round(e.bytesCompleted/e.bytesInQueue*100)});return r.retryCount=0,uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e),{},{backoffCount:n,bytesCompleted:o,currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,lastCompletedFile:[uploader_file_reducer_objectSpread({},r)],lastCompletedFileResolution:i._n.RETRYABLE,retryableFiles:[...e.retryableFiles,r],queueProgress:Math.round(o/e.bytesInQueue*100)})},[i.yw]:function uploaderFileRecordProgress(e,t){return uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e),{},{currentFileBytesCompleted:t.bytes,queueProgress:Math.round((e.bytesCompleted+t.bytes)/e.bytesInQueue*100)})},[i.eT]:function uploaderFileRecordSuccess(e,t){var r,o,n=t.node.hasThumbnail&&t.node.hasThumbnail(),a=uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e.currentFile),{},{hasThumbnail:n,isDuplicate:t.isDuplicate,nodeId:t.node&&t.node.id}),l=e.bytesCompleted+a.fileSize,c=!a.isDuplicate&&(a.fileCategory!==d.DG.PHOTO||!1===e.hasPrime),u=e.previewableNodes.length<i.Xv;if(a.albumId){var{albumId:p,nodeId:v}=a,g=e.albumsNodeIds[p]||[];r=uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e.albumsNodeIds),{},{[p]:[...g,v]})}if(a.groupId){var{groupId:f,nodeId:y}=a,h=e.groupsNodeIds[a.groupId]||[];o=uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e.groupsNodeIds),{},{[f]:[...h,y]})}return uploader_file_reducer_objectSpread(uploader_file_reducer_objectSpread({},e),{},{albumsNodeIds:r||e.albumsNodeIds,backoffCount:s.backoffCount,bytesAvailable:c?e.bytesAvailable-a.fileSize:e.bytesAvailable,bytesCompleted:l,currentFile:s.currentFile,currentFileBytesCompleted:s.currentFileBytesCompleted,duplicateFileCount:a.isDuplicate?e.duplicateFileCount+1:e.duplicateFileCount,duplicateFiles:a.isDuplicate?[...e.duplicateFiles,a]:e.duplicateFiles,groupsNodeIds:o||e.groupsNodeIds,lastCompletedFile:[uploader_file_reducer_objectSpread({},a)],lastCompletedFileResolution:i._n.SUCCEEDED,lastPreviewableNode:!a.isDuplicate&&n?[t.node]:e.lastPreviewableNode,previewableNodes:!a.isDuplicate&&n&&u?[...e.previewableNodes,t.node]:e.previewableNodes,queueProgress:Math.round(l/e.bytesInQueue*100),succeededFiles:[...e.succeededFiles,a]})}};function uploader_md5_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_md5_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_md5_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_md5_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_md5_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_md5_reducer_defineProperty(e,t,r){return(t=function uploader_md5_reducer_toPropertyKey(e){var t=function uploader_md5_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const v={[i.bL]:function uploaderMd5QueueAdvance(e){if(e.md5CurrentFile||!e.md5Queue.length||e.queueStatus===i.cQ.ABORTED)return e;return uploader_md5_reducer_objectSpread(uploader_md5_reducer_objectSpread({},e),{},{md5CurrentFile:uploader_md5_reducer_objectSpread({},e.md5Queue[0]),md5Queue:e.md5Queue.slice(1)})},[i.Vi]:function uploaderMd5RecordError(e,t){return uploader_md5_reducer_objectSpread(uploader_md5_reducer_objectSpread({},e),{},{md5Results:uploader_md5_reducer_objectSpread(uploader_md5_reducer_objectSpread({},e.md5Results),{},{[t.fileId]:{hash:null,errorCode:t.errorCode,errorSource:t.errorSource}}),md5CurrentFile:s.md5CurrentFile})},[i._u]:function uploaderMd5RecordSuccess(e,t){return uploader_md5_reducer_objectSpread(uploader_md5_reducer_objectSpread({},e),{},{md5Results:uploader_md5_reducer_objectSpread(uploader_md5_reducer_objectSpread({},e.md5Results),{},{[t.fileId]:{hash:t.hash}}),md5CurrentFile:s.md5CurrentFile})}};var g=r(53812),f=r.n(g);function uploader_ingress_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_ingress_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_ingress_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_ingress_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_ingress_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_ingress_reducer_defineProperty(e,t,r){return(t=function uploader_ingress_reducer_toPropertyKey(e){var t=function uploader_ingress_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y={[i.PP]:function uploaderIngressClearContext(e){return uploader_ingress_reducer_objectSpread(uploader_ingress_reducer_objectSpread({},e),{},{contextAlbumId:s.contextAlbumId,contextDisambiguator:s.contextDisambiguator,contextFileDropOverride:s.contextFileDropOverride,contextFolderId:s.contextFolderId,contextFolderPath:s.contextFolderPath,contextGroupId:s.contextGroupId,selectionInputType:s.selectionInputType,selectionIsAvatar:s.selectionIsAvatar,selectionUseContext:s.selectionUseContext})},[i.qE]:function uploaderIngressClearSelection(e){return uploader_ingress_reducer_objectSpread(uploader_ingress_reducer_objectSpread({},e),{},{selectionInputType:s.selectionInputType,selectionIsAvatar:s.selectionIsAvatar,selectionUseContext:s.selectionUseContext})},[i.__]:function uploaderIngressSetContext(e,t){return uploader_ingress_reducer_objectSpread(uploader_ingress_reducer_objectSpread({},e),{},{contextAlbumId:t.albumId||s.contextAlbumId,contextDisambiguator:t.contextDisambiguator||s.contextDisambiguator,contextFileDropOverride:t.fileDropOverride||s.contextFileDropOverride,contextFolderId:t.folderId||s.contextFolderId,contextFolderPath:t.folderPath||s.contextFolderPath,contextGroupId:t.groupId||s.contextGroupId})},[i.m8]:function uploaderIngressSetEventOrigin(e,t){return uploader_ingress_reducer_objectSpread(uploader_ingress_reducer_objectSpread({},e),{},{isLastBatchFromDragEvent:f()(t.isLastBatchFromDragEvent)?Boolean(t.isLastBatchFromDragEvent):s.isLastBatchFromDragEvent})},[i.J8]:function uploaderIngressSetSelection(e,t){return uploader_ingress_reducer_objectSpread(uploader_ingress_reducer_objectSpread({},e),{},{selectionInputType:t.selectionType,selectionIsAvatar:Boolean(t.isAvatar),selectionUseContext:f()(t.useContext)?t.useContext:s.selectionUseContext})}};function uploader_operation_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_operation_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_operation_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_operation_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_operation_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_operation_reducer_defineProperty(e,t,r){return(t=function uploader_operation_reducer_toPropertyKey(e){var t=function uploader_operation_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={[i.g$]:function uploaderOperationClearContexts(e,t){return uploader_operation_reducer_objectSpread(uploader_operation_reducer_objectSpread({},e),{},{albumsNodeIds:t.albums?s.albumsNodeIds:e.albumsNodeIds,groupsNodeIds:t.groups?s.groupsNodeIds:e.groupsNodeIds})},[i.Ar]:function uploaderOperationRestoreContext(e,t){var r,o;if(t.albumId){var n=e.albumsNodeIds[t.albumId]||[];r=uploader_operation_reducer_objectSpread(uploader_operation_reducer_objectSpread({},e.albumsNodeIds),{},{[t.albumId]:[...n,...t.nodeIds]})}if(t.groupId){var a=e.groupsNodeIds[t.albumId]||[];o=uploader_operation_reducer_objectSpread(uploader_operation_reducer_objectSpread({},e.groupsNodeIds),{},{[t.groupId]:[...a,...t.nodeIds]})}return uploader_operation_reducer_objectSpread(uploader_operation_reducer_objectSpread({},e),{},{albumsNodeIds:r||e.albumsNodeIds,groupsNodeIds:o||e.groupsNodeIds})}};function uploader_cache_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_cache_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_cache_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_cache_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_cache_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_cache_reducer_defineProperty(e,t,r){return(t=function uploader_cache_reducer_toPropertyKey(e){var t=function uploader_cache_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const b={[i.ms]:function uploaderFoldersCache(e,t){return uploader_cache_reducer_objectSpread(uploader_cache_reducer_objectSpread({},e),{},{folderIds:uploader_cache_reducer_objectSpread(uploader_cache_reducer_objectSpread({},e.folderIds),t.folderIds)})},[i.XT]:function uploaderNodeCache(e,t){if(!t.node||!t.node.hasThumbnail())return e;return uploader_cache_reducer_objectSpread(uploader_cache_reducer_objectSpread({},e),{},{lastPreviewableNode:[t.node],previewableNodes:e.previewableNodes.length<i.Xv?[...e.previewableNodes,t.node]:e.previewableNodes})},[i.t]:function uploaderQuotaCache(e,t){var r=Number.isFinite(t.bytesAvailable)&&"boolean"==typeof t.hasPrime;return uploader_cache_reducer_objectSpread(uploader_cache_reducer_objectSpread({},e),{},{bytesAvailable:r?t.bytesAvailable:s.bytesAvailable,hasPrime:r?t.hasPrime:s.hasPrime})}};function uploader_toast_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_toast_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_toast_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_toast_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_toast_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_toast_reducer_defineProperty(e,t,r){return(t=function uploader_toast_reducer_toPropertyKey(e){var t=function uploader_toast_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m={[i.Uq]:function uploaderToastClearMinimized(e){return uploader_toast_reducer_objectSpread(uploader_toast_reducer_objectSpread({},e),{},{toastCommand:s.toastCommand})},[i.Vr]:function uploaderToastSetMinimized(e,t){return uploader_toast_reducer_objectSpread(uploader_toast_reducer_objectSpread({},e),{},{toastCommand:t.toastCommand})}};function uploader_reducer_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uploader_reducer_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uploader_reducer_ownKeys(Object(r),!0).forEach((function(t){uploader_reducer_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uploader_reducer_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uploader_reducer_defineProperty(e,t,r){return(t=function uploader_reducer_toPropertyKey(e){var t=function uploader_reducer_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=s;const P=(0,a.v)(S,uploader_reducer_objectSpread(uploader_reducer_objectSpread(uploader_reducer_objectSpread(uploader_reducer_objectSpread(uploader_reducer_objectSpread(uploader_reducer_objectSpread(uploader_reducer_objectSpread({[i.q]:function uploaderClose(e){return uploader_reducer_objectSpread(uploader_reducer_objectSpread({},S),{},{contextAlbumId:e.contextAlbumId,contextDisambiguator:e.contextDisambiguator,contextFileDropOverride:e.contextFileDropOverride,contextFolderId:e.contextFolderId,contextFolderPath:e.contextFolderPath,contextGroupId:e.contextGroupId})}},b),p),y),v),h),u),m));var selectAlbumsNodeIds=e=>uploader_reducer_objectSpread({},e.uploader.albumsNodeIds),selectBytesAvailable=e=>e.uploader.bytesAvailable,selectBackoffCount=e=>e.uploader.backoffCount,selectBatchCount=e=>e.uploader.batchCount,selectContextAlbumId=e=>e.uploader.contextAlbumId,selectContextFolderId=e=>e.uploader.contextFolderId,selectContextGroupId=e=>e.uploader.contextGroupId,selectCurrentFile=e=>e.uploader.currentFile,selectCurrentMd5File=e=>e.uploader.md5CurrentFile,selectDuplicateFileCount=e=>e.uploader.duplicateFileCount,selectFailedAndRetryableFileCount=e=>e.uploader.failedFiles.length+e.uploader.retryableFiles.length,selectFolderIds=e=>uploader_reducer_objectSpread({},e.uploader.folderIds),selectGroupsEventKeys=e=>uploader_reducer_objectSpread({},e.uploader.groupsEventKeys),selectGroupsNodeIds=e=>uploader_reducer_objectSpread({},e.uploader.groupsNodeIds),selectHasPendingMd5Calculations=e=>Boolean(e.uploader.md5CurrentFile||e.uploader.md5Queue.length),selectHasPrime=e=>e.uploader.hasPrime,selectIsLastBatchFromDragEvent=e=>e.uploader.isLastBatchFromDragEvent,selectIsQueueRetry=e=>e.uploader.isQueueRetry,selectLastCompletedFile=e=>e.uploader.lastCompletedFile[0],selectLastCompletedFileResolution=e=>e.uploader.lastCompletedFileResolution,selectLastSucceededFile=e=>n()(e.uploader.succeededFiles),selectMd5Results=e=>uploader_reducer_objectSpread({},e.uploader.md5Results),selectSelectionInputType=e=>e.uploader.selectionInputType,selectSucceededFilesCount=e=>e.uploader.succeededFiles.length,selectQueueId=e=>e.uploader.queueId,selectQueueLength=e=>e.uploader.queue.length,selectQueueStatus=e=>e.uploader.queueStatus,selectTotalFileCount=e=>e.uploader.totalFileCount}}]);
//# sourceMappingURL=stores-69602b8c9f6ac32b1563.js.map