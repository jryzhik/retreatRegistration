"use strict";(globalThis.webpackChunk_amzn_amazon_photos_react=globalThis.webpackChunk_amzn_amazon_photos_react||[]).push([[630],{42843:(e,t,r)=>{r.d(t,{A:()=>o});const o={SHORT:1e3,MID:3e3,LONG:1e4}},58049:(e,t,r)=>{r.d(t,{E:()=>o});var o="GroupShareSheet"},60776:(e,t,r)=>{r.d(t,{Ws:()=>n,mu:()=>a,sD:()=>o,xl:()=>i});var o=3e5,n=5e3,i=2e4,a=180},84645:(e,t,r)=>{r.d(t,{A:()=>h});var o=r(43346),n=r.n(o),i=r(39754),a=r.n(i),s=r(95093),c=r.n(s),l=r(34128),u={session:"CUSTOMER_ID,SESSION_ID,START_DATETIME_UTC,END_DATETIME_UTC,CLIENT_ID,CLIENT_TAG,DEVICE_PLATFORM,DEVICE_VERSION,DEVICE_MODEL,DEVICE_SERIAL_NUMBER,EVENT_TAG,EVENT_NAME,PAGE_NAME,STATUS,EVENT_COUNT,PROJECT_ID,NODE_ID,PROJECT_TYPE".split(","),file:"FILE_EXTENSION,FILE_SIZE_BYTES,FILE_DURATION".split(",")};function getMetricDate(e){return c()(e||new Date).utc().format("YYYY-MM-DD.HH:mm:ss")}var d={START_DATETIME_UTC:function START_DATETIME_UTC(){return getMetricDate(new Date(this.startTime))},END_DATETIME_UTC:function END_DATETIME_UTC(){return getMetricDate(new Date(this.endTime))},EVENT_NAME:function EVENT_NAME(){return this.endpointType===l.n9?"".concat(this.metricName,"_sushi"):this.metricName},STATUS:function STATUS(){return this.eventState||this.status||""},PAGE_NAME:function PAGE_NAME(){return this.context},PROJECT_ID:function PROJECT_ID(){return this.data.projectId},NODE_ID:function NODE_ID(){return this.data.nodeId},PROJECT_TYPE:function PROJECT_TYPE(){return this.data.projectType},EVENT_TAG:function EVENT_TAG(){return this.data.eventTag||this.data.id||this.data.assetId||""},FILE_EXTENSION:function FILE_EXTENSION(){return this.data.mediaType||""},FILE_SIZE_BYTES:function FILE_SIZE_BYTES(){return this.data.sizeInBytes||0},EVENT_COUNT:function EVENT_COUNT(){return Number.isFinite(this.data.eventCount)?this.data.eventCount:1},FILE_DURATION:function FILE_DURATION(){return this.data.fileDuration||this.totalTime||0}};const h=class BizMetric{constructor(e,t,r){this.metricName=e||"",this.data=t||{},this.context=r||"",this.startTime=t.startTime||Date.now(),this.endTime=t.endTime}get config(){return{propertyGetters:d}}stop(e){return this.endTime=this.endTime||Date.now(),this.totalTime=this.endTime-this.startTime,this.eventState=e||"",this}complete(){return this.stop("complete")}format(e){var t={};return a()(e,(e=>{var r=this.config.propertyGetters[e].call(this);null!=r&&""!==r&&(t[e]=r)})),t}toJSON(){var e={};return n()(e,this.format(u.session),this.format(u.file)),e}}},34128:(e,t,r)=>{r.d(t,{Ay:()=>y,n9:()=>b});var o,n,i,a,s=r(95093),c=r.n(s),l=r(74692),u=r.n(l),d=r(97463),h=r(73725),p=r(54318),v=r(13489),g=h.A.createLogger("BizMetrics","info"),m=[],f="forester",b="sushi",S=!1;const y=class AbstractBizMetrics{get config(){throw new Error("Unimplemented - children must define a getter that returns {BizMetric, foresterConfig}")}init(){this.startLogging(6e4),window.addEventListener("beforeunload",this.stopLogging.bind(this)),window.addEventListener("unload",this.stopLogging.bind(this))}createForesterPayload(e){var t=e.map((e=>JSON.stringify(e)));return"".concat(t.join("\n"),"\n")}createSushiPayload(e){var t={events:e.map((e=>((0,p.q7)()&&(e.endpointType=b),{data:e.toJSON()})))};return JSON.stringify(t)}sendDataAsAjax(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(m.length>0){this.currentBatchCount=m.length;var r=m;if(m=[],(0,p.q7)()){var o=this.createForesterPayload(r),n=this.createSushiPayload(r);this.sendToEndpoint(this.getForesterUrl(),o,e,t,f),this.sendToEndpoint(this.config.sushiConfig.endpoint,n,e,t,b)}else if((0,p.HQ)()){var i=this.createSushiPayload(r);this.sendToEndpoint(this.config.sushiConfig.endpoint,i,e,t,b)}else{var a=this.createForesterPayload(r);this.sendToEndpoint(this.getForesterUrl(),a,e,t,f)}}}sendToEndpoint(e,t,r,o,n){var{navigator:i}=window;if(i.sendBeacon){var a=i.sendBeacon(e,t);this.postMetricProcessing({success:a,count:this.currentBatchCount,responseCallback:o,endpoint:n})}else u().ajax({type:"POST",url:e,data:t,contentType:"text/plain",async:r,success:()=>{this.postMetricProcessing({success:!0,count:this.currentBatchCount,responseCallback:o,endpoint:n})},error:e=>{this.postMetricProcessing({success:!1,count:this.currentBatchCount,error:{status:e.status,errorMessage:e.responseText},endpoint:n})}})}onInactivityTimeout(){this.logSessionExpired("Inactivity"),n=void 0}onMaxSessionTimeout(){this.logSessionExpired("MaxSessionTime"),n=void 0}log(e,t,r){if(!e)throw"Metric name is required.";g("log metric: %s, page: %s",e,r,t=t||{}),t.sessionId=this.getCurrentSessionId(),t.startTime=t.startTime||Date.now(),t.endTime=t.endTime||t.startTime;var o=new this.config.BizMetric(e,t,r);o.stop(t.eventState),m.push(o)}start(e,t,r){if(!e)throw"Metric name is required.";return(t=t||{}).sessionId=this.getCurrentSessionId(),new this.config.BizMetric(e,t,r)}end(e){e.complete(),m.push(e)}getCurrentSessionId(){return window.clearTimeout(i),i=window.setTimeout(this.onInactivityTimeout.bind(this),54e5),n||(n=Date.now(),window.clearTimeout(a),a=window.setTimeout(this.onMaxSessionTimeout.bind(this),864e5)),d.A.getProperty("requestId")+n}logSessionExpired(e){this.log("SessionCompleted",{eventTag:e}),window.clearTimeout(i),window.clearTimeout(a)}getForesterLogDate(e){return c()(e||new Date).utc().format("YYYY-MM-DD[T]HH:mm[Z]")}startLogging(e){window.clearTimeout(o),o=window.setTimeout((()=>{this.sendDataAsAjax(),this.startLogging(e)}),e)}stopLogging(){S||(window.clearTimeout(o),this.sendDataAsAjax(!1,(()=>{S=!0})))}getForesterUrl(){var{API_VERSION:e,CHANNEL_ID:t,CHANNEL_VERSION:r,EMPTY_ACTION:o,DOMAIN:n}=this.config.foresterConfig;return"https://".concat(n,"/").concat(e,"/").concat(t,"/").concat(r,"/").concat(o)}postMetricProcessing(e){var{success:t,count:r,responseCallback:o,endpoint:n,error:i}=e,a={name:t?"BusinessMetricUploadSuccess":"BusinessMetricUploadFailed",value:r};n&&(a.endpoint=n),i&&(i.status&&(a.errorStatus=i.status),i.errorMessage&&(a.errorMessage=i.errorMessage)),v.A.log(a),o&&o()}}},13489:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(73725),n=r(50248);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=new class HealthMetricsLogger{constructor(){_defineProperty(this,"logger",void 0),this.logger=o.A.createLogger("HealthMetrics","info")}startTimer(e){return Date.now()}stopTimerAndLog(e){}log(e){this.logger("log metric:",e),(0,n.Yy)(e)}}},23897:(e,t,r)=>{r.d(t,{h:()=>o});var o=function(e){return e.PEOPLE="people",e.THINGS="things",e.LOCATION="location",e.NAME="name",e.TIME="time",e.TYPE="type",e.ALL="all",e.FAMILY_MEMBERS="familyMembers",e.GROUP_MEMBERS="groupMembers",e.FAVORITE="favorite",e.CREATED_TIME="createdTime",e.CLUSTER_ID="clusterId",e.ALL_PEOPLE="allPeople",e}({})},2832:(e,t,r)=>{r.d(t,{A:()=>fe});var o=r(84684),n=r.n(o),i=r(62193),a=r.n(i),s=r(87612),c=r.n(s),l=r(47091),u=r.n(l),d=r(56449),h=r.n(d),p=r(62216),v=r.n(p),g=r(74692),m=r.n(g),f=r(17667),b=r(97463),S=r(13489),y=r(73725),T=r(5732),_=r(21764),C=r(41847),E=r(54318),P=(r(23897),["bucket","filters","groupBy"]),I=["context"],w=["aggregationContext","category","familyMembers","groupBy","limit","noCache"],j=["id","nodeId"],A=["id","nodeId"],D=["clusterIdList"],O=["clusterIds","newName","context"],k=["sourceCluster","newName","context"],L=["asset","dedupeContext","filters","groupByForTime","limit","lowResThumbnail","offset","searchContext","searchText","sort","startToken","tempLink"],M=["collectionProperties","name"],N=["eventType","sourceId"],F=["kind","name","parents"],R=["queryString","query","limit","sort","filters"],x=["albumId","asset","tempLink","limit","sort","filters","startToken","offset","lowResThumbnail","noCache"],G=["limit","sort","offset","filters"],U=["id","shareId","tempLink","lowResThumbnail"],B=["nodeIds","asset","tempLink"],Y=["id"],W=["nodes","recurse"],q=["nodes"],H=["id","shareId"],K=["name"],z=["childId","toParent","fromParent"],V=["parentId","ids"],Q=["noCache"],J=["data","targetCustomerId"],$=["targetCustomerId"],Z=["ids","familyId","operation"],X=["id","data"],ee=["id","location"],te=["id","data"],re=["includeCancelled","includePending","includeProblems"],oe=["noCache"],ne=["jobKey"],ie=["asset","id","filters","limit","lowResThumbnail","offset","sort","searchOnFamily","shareId","startToken","tempLink"],ae=["ids","shareId","groupShareToken"],se=["url"],ce=["batchLink"],le=["nodes","recurse"],ue=["noCache"],de=["sourceId","locale"],he=["notificationTopicId","sourceId"],pe=["notificationTopicId","sourceId"],ve=["shareId"],ge=["campaignId","deviceClass"],me=["limit","startToken"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function error(e){return m().Deferred().reject(new Error(e)).promise()}const fe=class CloudDriveServiceClientInterface{constructor(){_defineProperty(this,"getParentTree",((e,t)=>{var r=m().Deferred(),o=[],getParentTreeIterator=e=>{this.getNode({id:e}).done((e=>{var n=e.isRoot||e.id===t;if(o.unshift(e),r.notify(o),!n&&e.parents&&e.parents.length){var{FOLDER:i}=e.parentMap,a=i&&i[0];a?getParentTreeIterator(a):r.resolve(o)}else r.resolve(o)}))};return getParentTreeIterator(e),r.promise()}))}get config(){return{limit:0,shareId:""}}callService(){throw"callService not implemented"}getHistogram(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{bucket:t,filters:r,groupBy:o}=e,n=_objectWithoutProperties(e,P);if(!o||!t)throw"getHistogram requires groupBy and bucket";return this.callService(_objectSpread(_objectSpread({},n),{},{type:"GET",url:"histogram",data:{bucket:t,filters:r,groupBy:o}}))}getConflictMetadata(e){return this.callService({type:"GET",url:"nodes/".concat(e)})}getTaggingStatus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{context:t}=e,r=_objectWithoutProperties(e,I),o={};return t&&(o.context=t),this.callService(_objectSpread(_objectSpread({},r),{},{type:"GET",url:"account/taggingStatus",data:o}))}getAggregations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{aggregationContext:t,category:r,familyMembers:o,groupBy:n,limit:i,noCache:a=!1}=e,s=_objectWithoutProperties(e,w);if(!r)throw"getAggregations requires a category";return this.callService(_objectSpread(_objectSpread({},s),{},{type:"GET",url:"search/aggregation",data:{aggregationContext:t,category:r,familyMembers:o,groupBy:n,limit:i},noCache:a}))}setFaceClusterNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,nodeId:r}=e,o=_objectWithoutProperties(e,j);if(!t||!r)throw"setFaceClusterNode requires a cluster ID and a node ID";return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PUT",url:"cluster/hero/".concat(t),data:{clusterId:t,nodeId:r}}))}getFaceClusterWithNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,nodeId:r}=e,o=_objectWithoutProperties(e,A);if(!t||!r)throw"getFaceClusterWithNode requires a cluster ID and a node ID";var n=m().Deferred();return this.bulkGetFaceClusters(_objectSpread({clusterIdList:[t]},o)).done((e=>n.resolve(e.facePairs[0]))).fail((e=>n.reject(e))),n.promise()}bulkGetFaceClusters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{clusterIdList:t}=e,r=_objectWithoutProperties(e,D);if(!t)throw"bulkGetFaceClusters requires a clusterIdList";if(t.length>100)throw"bulkGetFaceClusters can only accept a maximum of 100 clusterIdList at a time";if(t.includes(null)||t.includes(void 0))throw"bulkGetFaceClusters does not accept null or undefined IDs";var o=_objectSpread(_objectSpread({},r),{},{type:"POST",url:"cluster/faces",data:{clusterIdList:t}});return this.callService(o)}createCluster(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{clusterIds:t,newName:r,context:o}=e,n=_objectWithoutProperties(e,O);if(v()(t)||!h()(t)||u()(t)<2)throw"createCluster requires clusterIds to be an array of size greater than 2";var i=_objectSpread(_objectSpread({},n),{},{type:"POST",url:"cluster",data:{clusterIds:t,newName:r,context:o}});return this.callService(i)}renameCluster(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceCluster:t,newName:r,context:o}=e,n=_objectWithoutProperties(e,k);if(!t)throw"renameCluster requires a sourceCluster";if(!r)throw"renameCluster requires a newName";var i=_objectSpread(_objectSpread({},n),{},{type:"PUT",url:"cluster/name",data:{sourceCluster:t,newName:r,context:o}});return this.callService(i)}getUsage(){var e=_objectSpread(_objectSpread({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{type:"GET",url:"account/usage"});return this.callService(e)}getQuota(){var e=_objectSpread(_objectSpread({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{type:"GET",url:"account/quota",noCache:!0,data:{includeFamilyBenefit:!0}});return this.callService(e)}getHouseholdUsage(){return this.callService({type:"GET",url:"account/usage/household"})}_searchKeyParams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{asset:t="ALL",dedupeContext:r,filters:o,groupByForTime:n,limit:i=this.config.limit,lowResThumbnail:a,offset:s,searchContext:c="customer",searchText:l,sort:u,startToken:d,tempLink:p="false"}=e,v=_objectSpread(_objectSpread({},_objectWithoutProperties(e,L)),{},{type:"GET",url:"search",data:{asset:t,filters:o,limit:i,lowResThumbnail:a,searchContext:c,sort:u,tempLink:p,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}});return h()(c)&&(v.data.searchContext="all"),d?v.data.startToken=d:s&&0!==s?v.data.offset=s:n&&(v.data.groupByForTime=n),r&&(v.data.dedupeContext=r),l&&(v.data.searchText=l),v}_performSearchKeyRequest(e){var t,r=void 0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.searchText);return this.callService(e).then((e=>(e.aggregations&&e.aggregations.allPeople&&(e.aggregations.people=e.aggregations.allPeople),r&&S.A.log({name:"SemanticSearchSuccess"}),e))).fail((e=>{r&&(S.A.log({name:"SemanticSearchFailure"}),y.A.error("Semantic search failed",e))}))}search(){return this._performSearchKeyRequest(this._searchKeyParams(...arguments))}searchGroupNodes(){var{groupId:e,shareToken:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this._searchKeyParams(...arguments),o=_objectSpread(_objectSpread({},r),{},{url:"search/groups/".concat(e),data:_objectSpread(_objectSpread({},r.data),{},{searchContext:"groups",groupShareToken:t})});return this._performSearchKeyRequest(o)}createAlbum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{collectionProperties:t,name:r}=e,o=_objectSpread(_objectSpread({},_objectWithoutProperties(e,M)),{},{url:"nodes",type:"POST",data:{collectionProperties:t,kind:"VISUAL_COLLECTION",name:r}});return this.callService(o)}createEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{eventType:t,sourceId:r}=e,o=_objectWithoutProperties(e,N);if(!["PHOTOS_FAMILY_ARCHIVE_ADDED_ITEMS","PHOTOS_BATCH_UPLOAD_SUCCESS","PHOTOS_BATCH_UPLOAD_PARTIAL_SUCCESS","PHOTOS_BATCH_UPLOAD_FAILURE","PHOTOS_FAMILY_ARCHIVE_MEMBER_ADDED","PHOTOS_FAMILY_ARCHIVE_ADDED_ITEMS_MANUAL"].includes(t))throw"".concat(t," is not a supported event type for createEvent");return this.callService(_objectSpread(_objectSpread({},o),{},{url:"event",type:"POST",data:{eventType:t,sourceId:r}}))}createFolder(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{kind:t="FOLDER",name:r,parents:o}=e,n=_objectSpread(_objectSpread({},_objectWithoutProperties(e,F)),{},{type:"POST",url:"nodes",data:{kind:t,name:r,parents:h()(o)?o:[o]}});return this.callService(n)}suggestion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{queryString:t,query:r,limit:o=this.config.limit,sort:n,filters:i}=e,a=_objectSpread(_objectSpread({},_objectWithoutProperties(e,R)),{},{type:"GET",url:"search/suggestion",cache:!1,noCache:!0,data:{queryString:t||r||"",limit:o,sort:n,filters:i}});return this.callService(a).then((e=>(e.suggestions.forEach((e=>{"allPeople"===e.category&&(e.category="people")})),e)))}listNodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{albumId:t,asset:r="ALL",tempLink:o="false",limit:n=this.config.limit,sort:i,filters:a,startToken:s,offset:c="0",lowResThumbnail:l,noCache:u}=e,d=_objectWithoutProperties(e,x);if(t)return this.listChildren(_objectSpread(_objectSpread({},e),{},{id:t}));var h=_objectSpread(_objectSpread({},d),{},{type:"GET",url:"nodes",noCache:u,data:{asset:r,tempLink:o,limit:n,sort:i,filters:a,lowResThumbnail:l}});return s?h.data.startToken=s:h.data.offset=c,this.callService(h)}listTrash(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{limit:t,sort:r,offset:o=0,filters:n}=e,i=_objectSpread(_objectSpread({},_objectWithoutProperties(e,G)),{},{type:"GET",url:"trash",data:{sort:r,limit:t,offset:o,filters:n}});return this.callService(i)}getFolderContents(e){var{parentFolderId:t,sort:r,kind:o,offset:n,startToken:i,limit:a=200}=e,s={id:t,sort:r,offset:n,startToken:i,limit:a};return o&&(s.filters="kind:".concat(o)),this.listChildren(s).then((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0,data:[]}}))}getProtectedFolders(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._protectedFolders?m().Deferred().resolve(this._protectedFolders):this.getRootNodeId(t).then((e=>this.listChildren(_objectSpread(_objectSpread({},t),{},{id:e,filters:(0,T.A)({type:"folder",contentType:"files"}),offset:0,limit:200})))).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.data=c()(t.data,{protectedFolder:!0}),t.count=t.data.length,e._protectedFolders=t,t}))}getRootNodeId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m().Deferred();return this._rootNodeId?t.resolve(this._rootNodeId):(this.callService(_objectSpread(_objectSpread({},e),{},{url:"nodes/?filters=isRoot:true",type:"GET"})).done((e=>{this._rootNodeId=e.data[0].id,t.resolve(this._rootNodeId)})).fail((e=>{y.A.fatal("Could not get root node id: ".concat(JSON.stringify(e))),t.reject(e)})),t)}getNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,shareId:r=this.config.shareId,tempLink:o="false",lowResThumbnail:n}=e,i=_objectWithoutProperties(e,U),{nodeId:a,ownerId:s}=(0,_.A)(t);if(!1===(0,C.O)(a))return error("invalid node ID ".concat(a));var c=_objectSpread(_objectSpread({},i),{},{type:"GET",url:"nodes/".concat(a,"?asset=ALL"),data:_objectSpread({tempLink:o,lowResThumbnail:n},s&&{ownerId:s})});return r&&(c.data.shareId=r,c.requireAuthCookie=!1),this.callService(c)}bulkGetNodes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodeIds:t=[],asset:r="ALL",tempLink:o="false"}=e,n=_objectWithoutProperties(e,B);return this.callService(_objectSpread(_objectSpread({},n),{},{type:"POST",url:"bulk/nodes/fetch",data:{nodeIds:t,asset:r,tempLink:o}}))}getExtendedMetadataForNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t}=e,r=_objectWithoutProperties(e,Y);return this.callService(_objectSpread(_objectSpread({},r),{},{type:"GET",url:"nodes/".concat(t,"/types/locations"),shouldReturnNativePromise:!0}))}trash(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodes:t,recurse:r=!0}=e,o=_objectWithoutProperties(e,W);if(!t||0===t.length)throw"trash called with invalid options";var n={recurse:String(r),op:"add",conflictResolution:"RENAME",value:t.map((e=>e.id))};return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PATCH",url:"trash",data:n}))}restore(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodes:t}=e,r=_objectWithoutProperties(e,q);if(!t||0===t.length)throw"restore called with invalid options";var o={op:"remove",conflictResolution:"RENAME",value:t.map((e=>e.id))};return this.callService(_objectSpread(_objectSpread({},r),{},{type:"PATCH",url:"trash",data:o}))}listShares(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{limit:t=200,offset:r=0,sort:o}=e;return this.listNodes({filters:(0,T.A)({contentType:"files",type:"shares"}),limit:t,noCache:!0,offset:r,sort:o})}getShareInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,shareId:r=this.config.shareId}=e,o=_objectWithoutProperties(e,H);return!1===(0,C.l)(t)?error("invalid share ID ".concat(t)):this.callService({type:"GET",url:"shares/".concat(t),data:_objectSpread({shareId:r},o),requireAuthCookie:!1})}createShareContainer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name:t="--"}=e,r=_objectWithoutProperties(e,K);return this.callService(_objectSpread(_objectSpread({},r),{},{type:"POST",url:"nodes/",data:{name:t,kind:"SHARED_COLLECTION"}}))}bulkAddChildren(e){return this._bulkEditChildren(e,"add")}bulkRemoveChildren(e){return this._bulkEditChildren(e,"remove")}moveChild(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{childId:t,toParent:r,fromParent:o}=e,n=_objectWithoutProperties(e,z);if(!t||!r||!o)throw"moveChild requires childId, toParent, fromParent";return this.callService(_objectSpread(_objectSpread({},n),{},{type:"POST",url:"nodes/".concat(r,"/children"),data:{childId:t,toParent:r,fromParent:o}}))}_bulkEditChildren(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{parentId:t,ids:r}=e,o=_objectWithoutProperties(e,V),n=arguments.length>1?arguments[1]:void 0;if(!t||a()(r))throw"parentId and node ids are required";if(!n)throw"no operation was passed";return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PATCH",url:"nodes/".concat(t,"/children"),data:{op:n,value:r}}))}getFamily(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{noCache:t}=e,r=_objectWithoutProperties(e,Q),{acceptableErrorCodes:o=[]}=r;return this.callService(_objectSpread(_objectSpread({},r),{},{type:"GET",url:"family",noCache:t,acceptableErrorCodes:[...o,404]}))}removeFamilyMember(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t={},targetCustomerId:r}=e,o=_objectWithoutProperties(e,J);if(!r)throw"removeFamilyMember requires targetCustomerId";var n=_objectSpread(_objectSpread({},o),{},{type:"DELETE",url:"family/members/".concat(r),data:t});return this.callService(n)}transferFamilyAdmin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{targetCustomerId:t}=e,r=_objectWithoutProperties(e,$);if(!t)throw"removeFamilyMember requires targetCustomerId";var o=_objectSpread(_objectSpread({},r),{},{type:"PUT",url:"family/admin",data:{targetCustomerId:t}});return this.callService(o)}updateFamilyArchive(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ids:t,familyId:r,operation:o}=e,n=_objectWithoutProperties(e,Z);if(a()(t))throw"node ids are required";var i=_objectSpread(_objectSpread({},n),{},{type:"POST",url:"familyArchive/",data:{nodesToAdd:[],nodesToRemove:[]}});if(r&&(i.data.familyId=r),"add"===o)i.data.nodesToAdd=t;else{if("remove"!==o)throw"Not valid operation:".concat(o," for addToFamilyArchive");i.data.nodesToRemove=t}return this.callService(i)}updateNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,data:r}=e,o=_objectWithoutProperties(e,X);return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PATCH",url:"nodes/".concat(t),data:r}))}updateNodeLocation(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,location:r}=e,o=_objectWithoutProperties(e,ee);return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PATCH",url:"nodes/".concat(t,"/location"),data:r}))}updateCollectionProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:t,data:r}=e,o=_objectWithoutProperties(e,te);return this.callService(_objectSpread(_objectSpread({},o),{},{type:"PATCH",url:"nodes/".concat(t,"/collectionProperties"),data:r}))}listInvitations(){throw"Not implemented"}getSubscriptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{includeCancelled:t=!0,includePending:r=!1,includeProblems:o=!1}=e,n=_objectWithoutProperties(e,re),i=[],a="";return t&&i.push("CANCELLED_SUBSCRIPTIONS"),r&&i.push("PENDING_PLAN"),o&&i.push("SUBSCRIPTION_PROBLEMS"),i.length&&(a=i.map((e=>"include=".concat(e))).join("&")),this.callService(_objectSpread(_objectSpread({},n),{},{type:"GET",noCache:!0,url:"account/subscriptions?".concat(a)}))}getPlans(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return f.A.isOn(E.jy.InAppPurchaseCombined)&&(t={includeExternallyVendedPlans:!0}),this.callService(_objectSpread(_objectSpread({},e),{},{type:"GET",noCache:!0,url:"account/plans",data:t}))}getAccountPreferences(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{noCache:t}=e,r=_objectWithoutProperties(e,oe);return this.callService(_objectSpread(_objectSpread({},r),{},{type:"GET",url:"account/preferences",noCache:t}))}setFamilyName(e){return this.callService({type:"PUT",url:"family/preferences/FAMILY_NAME",data:{preferenceValue:e}})}setPersonalPreferenceName(e){return this.callService({type:"PUT",url:"account/preferences/NAME",data:{preferenceValue:e}})}setPersonalPreferenceAvatar(e){return this.callService({type:"PUT",url:"account/preferences/AVATAR_NODE",data:{preferenceValue:e}})}setPersonalPreferenceAutoAdd(e){return this.callService({type:"PUT",url:"account/preferences/AUTO_ADD_CONTENT_TO_FAMILY_ARCHIVE",data:{preferenceValue:e?"true":"false"}})}setRecognitionEnabledFamily(e){return this.callService({type:"PUT",url:"family/preferences/RECOGNITION",data:{preferenceValue:e?"true":"false"},acceptableErrorCodes:[409,429]})}setImageRecognition(e,t){return this.callService({type:"PUT",url:"account/bulk/preferences",data:{preferenceList:[{preferenceKey:"BASIC_IMAGE_RECOGNITION",preferenceValue:e?"true":"false"},{preferenceKey:"PEOPLE_IMAGE_RECOGNITION",preferenceValue:t?"true":"false"}]},acceptableErrorCodes:[409,429]})}bulkAddToFamilyArchive(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService(_objectSpread(_objectSpread({},e),{},{type:"POST",url:"bulk/nodes/familyArchive"}))}bulkRemoveFromFamilyArchive(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService(_objectSpread(_objectSpread({},e),{},{type:"DELETE",url:"bulk/nodes/familyArchive"}))}getJobStatus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{jobKey:t}=e,r=_objectWithoutProperties(e,ne);return this.callService(_objectSpread(_objectSpread({},r),{},{type:"GET",url:"jobStatus/".concat(t),noCache:!0}))}listChildren(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{asset:t="ALL",id:r,filters:o,limit:n=this.config.limit,lowResThumbnail:i,offset:a="0",sort:s,searchOnFamily:c=!1,shareId:l=this.config.shareId,startToken:u,tempLink:d="false"}=e,h=_objectWithoutProperties(e,ie),{ownerId:p,nodeId:v}=(0,_.A)(r),g=_objectSpread(_objectSpread({},h),{},{type:"GET",url:"nodes/".concat(v,"/children"),data:{asset:t,filters:o,limit:n,lowResThumbnail:i,ownerId:p,searchOnFamily:c,sort:s,tempLink:d}});return l&&(g.data.shareId=l,g.data.tempLink="true",g.requireAuthCookie=!1),void 0!==u?(g.data.startToken=u,delete g.data.offset):g.data.offset=a,this.callService(g)}requestBatchLink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ids:t=[],shareId:r=this.config.shareId,groupShareToken:o=this.config.groupShareToken}=e,n=_objectSpread(_objectSpread({},_objectWithoutProperties(e,ae)),{},{url:"batchLink",type:"POST",data:{nodeIds:t}});return r&&(n.url+="?shareId=".concat(r),n.requireAuthCookie=!1),o&&(n.url+="?groupShareToken=".concat(o),n.requireAuthCookie=!1),this.callService(n)}testBatchLink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{url:t}=e,r=_objectWithoutProperties(e,se);return this.callService(_objectSpread(_objectSpread({},r),{},{type:"HEAD",url:t,requireAuthCookie:!1}))}retrieveBatchLink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{batchLink:t}=e,r=_objectWithoutProperties(e,ce);return this.callService(_objectSpread(_objectSpread({},r),{},{url:t,type:"GET",noCache:!0}))}permanentlyDelete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nodes:t,recurse:r=!1}=e,o=_objectWithoutProperties(e,le);if(!t)return m().Deferred().reject();var n=t.map((e=>e.id)),i={recurse:String(r),nodeIds:n};return this.callService(_objectSpread(_objectSpread({},o),{},{url:"bulk/nodes/purge",type:"POST",data:i}))}setupSource(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),r=b.A.getProperty("customerId");return n()(e,{deviceClass:"VIRTUAL",devicePlatform:"WEB",sourceApplicationName:"AmazonPhotosWeb",sourceVersion:"1.0",deviceLanguage:this.config.language,deviceId:"".concat(r,":WEB-PHOTOS")}),this.callService(_objectSpread(_objectSpread({},t),{},{url:"account/source",type:"POST",data:e}))}listSources(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{noCache:t}=e,r=_objectWithoutProperties(e,ue);return this.callService(_objectSpread(_objectSpread({},r),{},{url:"account/source",type:"GET",noCache:t,data:{includeDevice:!0}}))}listNotificationTopicSubscriptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sourceId:t,locale:r=this.config.language}=e,o=_objectWithoutProperties(e,de);if(!t)throw"Not a valid sourceId for listNotificationTopicSubscriptions";return this.callService(_objectSpread(_objectSpread({},o),{},{url:"notificationTopics/subscriptions",type:"GET",data:{sourceId:t,locale:r}}))}unsubscribeNotificationTopic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{notificationTopicId:t,sourceId:r}=e,o=_objectWithoutProperties(e,he);if(!t||!r)throw"Not a valid notification topic or no source id for unsubscribeNotificationTopic";return this.callService(_objectSpread(_objectSpread({},o),{},{url:"notificationTopics/subscriptions/".concat(r,"/").concat(t),type:"DELETE",data:{notificationTopicId:t,sourceId:r}}))}subscribeNotificationTopic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{notificationTopicId:t,sourceId:r}=e,o=_objectWithoutProperties(e,pe);if(!t||!r)throw"Not a valid notification topic or no source id for subscribeNotificationTopic";return this.callService(_objectSpread(_objectSpread({},o),{},{url:"notificationTopics/subscriptions/".concat(r,"/").concat(t),type:"PUT",data:{notificationTopicId:t,sourceId:r}}))}getApplicationAccessRules(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shareId:r=this.config.shareId}=t,o=_objectWithoutProperties(t,ve);return r&&(e={shareId:r}),this.callService(_objectSpread(_objectSpread({},o),{},{url:"application/accessRules",type:"GET",data:e}))}acknowledgeCampaign(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{campaignId:t,deviceClass:r}=e,o=_objectWithoutProperties(e,ge);return this.callService(_objectSpread(_objectSpread({},o),{},{type:"POST",url:"/drive/v1/account/campaign/".concat(t),data:{campaignId:t,deviceClass:r}}))}getNodesToUpload(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{limit:t,startToken:r}=e,o=_objectWithoutProperties(e,me);return this.callService(_objectSpread(_objectSpread({},o),{},{type:"GET",url:"/drive/v1/upload/node",data:{limit:t,startToken:r}}))}searchCollectionNodes(e){var{limit:t,startToken:r,nodeId:o,shareToken:n}=e;return this.callService({type:"GET",url:"/drive/v1/searchCollectionNodes",data:{limit:t,startToken:r,nodeId:o,shareToken:n}})}}},56286:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(87612),n=r.n(o),i=function validateNodeFacePairData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n()(e,(e=>e.nodeId&&e.faceId))};const a=class FaceManagementServiceInterface{get config(){return{}}callService(){throw"callService not implemented"}getFacesForNode(){var{nodeId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw"getFacesForNode missing nodeId";return this.callService({url:"node/".concat(e,"/faces")})}bulkGetFaceDataForNodes(){var{nodeIds:e,personId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!e.length||!t)throw"bulkGetFaceForNode requires a list of nodeIds and a personId";return this.callService({url:"people/".concat(t,"/faces"),type:"POST",data:{nodeIds:e}})}removeFacesFromPerson(){var{sourcePersonId:e,nodeFacePairs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t=i(t),!e||!t.length)throw"removeFacesFromPerson requires a sourcePersonId, and a list of nodeId/faceId pairs";return this.callService({url:"people/".concat(e,"/faces/remove"),type:"POST",data:{faceList:t}})}createPersonWithFaces(){var{nodeFacePairs:e,sourcePersonId:t="",targetPersonName:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=i(e),r=r.trim(),!e.length||!r)throw"createPerson requires a list of nodeId/faceId pairs, and targetPersonName";return this.callService({url:"people/faces",type:"PUT",data:{faceList:e,sourcePersonId:t,newPersonName:r}})}moveFacesToPerson(){var{nodeFacePairs:e,sourcePersonId:t="",targetPersonId:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e=i(e)).length||!r)throw"moveFacesToPerson requires a list of nodeId/faceId pairs, and targetPersonId";return this.callService({url:"people/".concat(r,"/faces"),type:"POST",data:{faceList:e,sourcePersonId:t}})}}},1930:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(84684),n=r.n(o),i=r(18742),a=r(97463),s=r(38364);const c=new class GroupsOnboarding{get config(){return{endPoint:i.A.getProperty("urls.groupsOnboardingEndpoint"),customerId:a.A.getProperty("customerId"),authenticated:a.A.getProperty("authenticated")&&a.A.getProperty("isValidMarketplace"),language:a.A.getProperty("language"),applicationId:i.A.getProperty("applicationId")}}callService(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data=e.data||{};var t={"x-amz-clouddrive-appid":this.config.applicationId};return n()(e,{shouldShowUnauthDialog:!0,noCache:!0}),(0,s.A)(e,"".concat(this.config.endPoint),t)}createOnboardingContext(e){var{data:t,contextType:r}=e;if(!t||!r)throw new Error("CreateOnboardingContext missing contextType or data");return this.callService({url:"",type:"POST",data:{data:t,contextType:r,dataVersion:"1.0"}})}}},80298:(e,t,r)=>{r.d(t,{A:()=>getOutages});var o=r(46266),n="https://d1pn7lu0k05hpl.cloudfront.net/outage.json";function getOutages(){return o.A.get(n)}},20771:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(49709);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uuid=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid);const n=class PromptoClientInterface{get config(){return{}}callService(){throw new Error("callService not implemented")}batchAddNode(){var{groupIds:e,nodeIds:t,eventKey:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e&&e.length&&t&&t.length))throw new Error("batchAddNode missing groupIds or nodeIds");return this.callService({url:"/nodes",type:"POST",data:{nodeIds:t,groupIds:e,eventKey:r}})}batchRemoveNode(){var{groupId:e,nodeIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t||!t.length)throw new Error("batchRemoveNode missing groupId or nodeIds");return this.callService({url:"/nodes?operationType=REMOVE",type:"POST",data:{nodeIds:t,groupIds:[e]}})}batchCreateInvite(){var{groupId:e,invites:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t||!t.length)throw new Error("batchCreateInvite missing groupId or inviteAddresses");return this.callService({url:"/groups/".concat(e,"/invites"),type:"POST",data:{invites:t}})}createGroup(){var{name:e,kind:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService({url:"/groups",type:"POST",data:{featureFlags:o.Cs,kind:t,name:e}})}createShareLink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.createGroup(_objectSpread(_objectSpread({},e),{},{kind:"SHARE_LINK"}))}createMember(e){var{shareToken:t,referralToken:r,groupId:o,customerId:n,inviteTag:i}=e;if(!t&&!r||!o||!n)throw new Error("createMember missing shareToken or groupId or customerId");var a=t?"shareToken=".concat(t):"referralToken=".concat(r);return this.callService({url:"/groups/".concat(o,"/members?").concat(a),type:"POST",data:{customerId:n,inviteTag:i}})}deleteGroup(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("deleteGroup missing groupId");return this.callService({url:"/groups/".concat(e),type:"DELETE"})}deleteMember(){var{groupId:e,memberId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t)throw new Error("deleteMember missing groupId or memberId");return this.callService({url:"/groups/".concat(e,"/members/").concat(t),type:"DELETE"})}getGroup(){var{acceptableErrorCodes:e,groupId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t)throw new Error("getGroup missing groupId");return this.callService({acceptableErrorCodes:e,url:"/groups/".concat(t),type:"GET",data:{featureFlags:o.Cs}})}getGroupShare(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("getGroupShare missing groupId");return this.callService({url:"/groups/".concat(e,"/share"),type:"GET"})}refreshGroupShare(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("refreshGroupShare missing groupId");return this.callService({url:"/groups/".concat(e,"/share"),type:"POST"})}getGroupShareInfo(){var{shareToken:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("getGroupShareInfo missing shareToken");return this.callService({url:"/shares/".concat(e),type:"GET",shouldShowUnauthDialog:this.config.authenticated})}getProfile(){return this.callService({doNotAlertOnFatal:!0,url:"/profiles/me",type:"GET"})}listGroups(){var{direction:e,includeContentRestricted:t,kindFilter:r,kindSet:n,maxResults:i,nextToken:a,privacyLevelSet:s,sort:c,noCache:l=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService({url:"/groups",type:"GET",noCache:l,data:{direction:e,featureFlags:o.Cs,includeContentRestricted:t,kindFilter:r,kindSet:n,maxResults:i,nextToken:a,privacyLevelSet:s,sort:c}})}listShareLinks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.listGroups(_objectSpread(_objectSpread({},e),{},{kindFilter:"SHARE_LINK",includeContentRestricted:!0}))}listMembers(){var{nextToken:e,sort:t,direction:r,maxResults:o,groupId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n)throw new Error("listMembers missing groupId");return this.callService({url:"/groups/".concat(n,"/members"),type:"GET",data:{nextToken:e,maxResults:o,sort:t,direction:r}})}listGroupEvents(e){var{nextToken:t,previousToken:r,limit:o,groupId:n,addedBy:i,sort:a="CREATEDDATE",direction:s="DESC",kindSet:c,includeCounts:l=!0}=e;return this.callService({url:"/events",type:"GET",data:{nextToken:t,previousToken:r,maxResults:o,groupId:n,addedBy:i,sort:a,direction:s,kindSet:c,includeCounts:l}})}getGroupCollection(e){var{groupId:t,collectionId:r}=e;if(!t||!r)throw new Error("getGroupCollection missing groupId or collectionId");return this.callService({url:"/groups/".concat(t,"/collections/").concat(r),type:"GET"})}listCollectionNodes(e){var{groupId:t,collectionId:r,limit:o,nextToken:n}=e;if(!t||!r)throw new Error("listCollectionNodes missing groupId or collectionId");return this.callService({url:"/groups/".concat(t,"/collection/").concat(r,"/nodes"),type:"GET",data:{nextToken:n,maxResults:o,includeCounts:!0}})}updateProfile(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService({url:"/profiles/me",type:"PUT",data:e})}updateGroup(){var{id:e,groupId:t,name:r,coverNode:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;return!t&&e&&(n=e),this.callService({url:"/groups/".concat(n),type:"PATCH",data:{name:r,coverNode:o}})}getPrivacyPreferences(e){var{groupId:t,preferenceLevel:r}=e;if(!t)throw new Error("getPrivacyPreferences missing groupId");var o=this.config.language,n="/groups/".concat(t,"/preferences/privacy?lang=").concat(o);return r&&(n+="&preferenceLevel=".concat(r)),this.callService({url:n,type:"GET"})}patchPrivacyPreferences(e){var{groupId:t,preferenceSets:r}=e;if(!t||!r)throw new Error("patchPrivacyPreferences missing groupId or preferenceSets");return this.callService({url:"/groups/".concat(t,"/preferences/privacy"),type:"PATCH",data:{preferenceSets:r}})}getMemberNotificationPreferences(e){var{memberId:t,groupId:r}=e;if(!r||!t)throw new Error("getMemberPreferences missing memberId or groupId");var o=this.config.language;return this.callService({url:"/groups/".concat(r,"/members/").concat(t,"/preferences/notifications?lang=").concat(o),type:"GET"})}patchMemberNotificationPreferences(e){var{memberId:t,groupId:r,preferenceSets:o}=e;if(!r||!t)throw new Error("PatchMemberPreferences missing memberId or groupId");return this.callService({url:"/groups/".concat(r,"/members/").concat(t,"/preferences/notifications"),type:"PATCH",data:{preferenceSets:o}})}viewGroup(e){var{groupId:t}=e;if(!t)throw new Error("viewGroup missing groupId");var{customerId:r}=this.config;return this.callService({url:"/groups/".concat(t,"/members/").concat(r,"/views"),type:"POST",data:{featureFlags:o.Cs}})}createBetaJoinWelcomeNotification(){return this.callService({url:"/notifications/beta/welcome",type:"POST"})}getGroupCacheInfo(){var{groupId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("getGroupCacheInfo missing groupId");return this.callService({doNotAlertOnFatal:!0,url:"/groups/".concat(e,"/cache"),type:"GET"})}bulkGetReactionSummaries(){var{groupId:e,topics:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t||!t.length)throw new Error("bulkGetReactionSummaries missing groupId or topics");return this.callService({doNotAlertOnFatal:!0,url:"/groups/".concat(e,"/reaction-summaries"),type:"POST",data:{topics:t}})}listReactions(e){var{groupId:t,topic:r,limit:o,sort:n,direction:i,includeCoverPhotos:a,nextToken:s,doNotAlertOnFatal:c,kind:l,kindSet:u}=e;return 0===r.indexOf("groups")&&(r=void 0),this.callService({doNotAlertOnFatal:c,url:"/groups/".concat(t,"/reactions"),data:{maxResults:o,topic:r,sort:n,direction:i,includeCoverPhotos:a,nextToken:s,kind:l,kindSet:u}})}addReaction(e){var t,{groupId:r,body:n,topic:i,kind:a}=e;return a===o.ab.COMMENT&&(t=uuid()),this.callService({url:"/groups/".concat(r,"/reactions"),type:"POST",data:{body:n,kind:a,topic:i,reactionId:t}})}deleteBinaryReaction(e){var{groupId:t,topic:r,kind:o}=e;if(!t||!r||!o)throw new Error("deleteReactionKind missing required parameters");var n=["kind=".concat(encodeURIComponent(o)),"topic=".concat(encodeURIComponent(r))].join("&");return this.callService({url:"/groups/".concat(t,"/reactions?").concat(n),type:"DELETE"})}deleteReaction(e){var{groupId:t,reactionId:r}=e;return this.callService({url:"/groups/".concat(t,"/reactions/").concat(r),type:"DELETE"})}createContactBlock(){var{customerId:e,groupId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t)throw new Error("createContactBlock missing customerId or groupId");return this.callService({url:"/customers/me/contactBlocks/".concat(e,"/FULL"),type:"POST",data:{groupId:t}})}listContactBlocks(){var{nextToken:e,limit:t,customerId:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r)throw new Error("listContactBlocks missing customerId");return this.callService({url:"/customers/me/contactBlocks",type:"GET",data:{customerId:r,blockType:"FULL",nextToken:e,limit:t}})}deleteContactBlock(){var{customerId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("deleteContactBlock missing customerId");return this.callService({url:"/customers/me/contactBlocks/".concat(e,"/FULL"),type:"DELETE"})}batchGetGroup(){var{groupIds:e,customerId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!e.length)throw new Error("batchGetGroup missing groupIds or customerId");return this.callService({url:"/batch/groups",type:"POST",data:{customerId:t,featureFlags:o.Cs,groupIds:e}})}searchContacts(){var{term:e,kindFilter:t,groupFilter:r,memberFilter:o,inviteFilter:n,nextToken:i,limit:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.callService({url:"/searchContacts",type:"POST",data:{term:e,groupFilter:r,memberFilter:o,kindFilter:[t],inviteFilter:n,nextToken:i,limit:a}})}patchGroupCollection(e){var{groupId:t,collectionId:r,caption:o}=e;if(!t||!r)throw new Error("patchGrooupCollection missing groupId or collectionId");return this.callService({url:"/groups/".concat(t,"/collections/").concat(r),type:"PATCH",data:{caption:o}})}publicListReactions(e){var{shareToken:t,topic:r,limit:o,sort:n,direction:i,includeCounts:a,nextToken:s}=e;if(!t)throw new Error("publicListReactions missing shareToken");return this.callService({url:"/shares/".concat(t,"/reactions"),type:"GET",shouldShowUnauthDialog:this.config.authenticated,data:{topic:r,limit:o,nextToken:s,includeCounts:a,direction:i,sort:n}})}publicBulkGetMembers(e){var{shareToken:t,members:r}=e;if(!t||!r)throw new Error("PublicBulkGetMembers missing shareToken or members");return this.callService({url:"/shares/".concat(t,"/bulk-members"),type:"POST",shouldShowUnauthDialog:this.config.authenticated,data:{members:r,privacyLevel:"VISIBLE",privacyLevelSet:"UNHIDDEN"}})}publicListGroupEvents(e){var{shareToken:t,groupId:r,limit:o,kindSet:n,nextToken:i,previousToken:a,includeCounts:s}=e;if(!t||!r)throw new Error("PublicListGroupEvents missing shareToken or groupId");return this.callService({url:"/public/events",type:"GET",shouldShowUnauthDialog:this.config.authenticated,data:{shareToken:t,groupId:r,limit:o,kindSet:n,nextToken:i,previousToken:a,includeCounts:s,privacyLevel:"VISIBLE",privacyLevelSet:"UNHIDDEN"}})}}},96005:(e,t,r)=>{r.d(t,{A:()=>i});var o=["collection","maxResults"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var n={THIS_DAY_FILTERED:"this_day_filtered",THIS_DAY:"this_day"};const i=class SuliCallServiceInterface{get config(){return{limit:0}}call(){throw new Error("callService not implemented")}listCollections(e){var{day:t,month:r,contentsSize:o=this.config.limit,includeContents:i=!1,collectionType:a=n.THIS_DAY_FILTERED}=e,s={type:"GET",url:"".concat(this.getCollectionPrefix(),"/collections/").concat(a),data:{day:t,month:r,includeContents:i,contentsSize:o}};return this.call(s)}getCollectionContents(e){var{collectionId:t,offset:r="0",limit:n=this.config.limit,collectionType:i,day:a=0,month:s=0,year:c=0,precacheKey:l}=e,u={offset:r,limit:n};a&&s&&c&&(u.day=a,u.month=s,u.year=c);var d={type:"GET",url:"".concat(this.getCollectionPrefix(),"/collections/").concat(i,"/").concat(t,"/contents"),data:u,precacheKey:l};return this.call(d).then((e=>{var{collection:t,maxResults:r}=e;return _objectSpread(_objectSpread({},_objectWithoutProperties(e,o)),{},{data:t.nodes,count:r,collection:t})}))}listStories(e){var{limit:t,token:r}=e;if(!t)throw new Error("listStories missing limit");var o={type:"GET",url:"".concat(this.getCollectionPrefix(),"/stories"),data:{limit:t,token:r}};return this.call(o)}getStory(e){var{type:t,id:r}=e,o={type:"GET",url:"".concat(this.getCollectionPrefix(),"/stories/").concat(t,"/").concat(r,"/contents")};return this.call(o)}registerMultipleStoryEvents(e){var{collectionIds:t,eventType:r,startTime:o}=e,n={dataType:"text",type:"POST",url:"".concat(this.getCollectionPrefix(),"/events"),data:{collectionIds:t,eventType:r,startTime:o}};return this.call(n)}registerStoryEvent(e){var{id:t,eventType:r,startTime:o,endTime:n}=e,i={dataType:"text",type:"POST",url:"".concat(this.getCollectionPrefix(),"/stories/auto_album/").concat(t,"/event"),data:{id:t,eventType:r,startTime:o,endTime:n}};return this.call(i)}createStory(e){var{id:t,name:r,subtitle:o,nodeIds:n,coverPhotoId:i}=e,a={type:"POST",url:"".concat(this.getCollectionPrefix(),"/stories/").concat(t),data:{name:r,subtitle:o,nodeList:n,coverPhotoId:i}};return this.call(a)}createStoryVideo(e){var{id:t,clientRequestToken:r,resolution:o}=e,n={type:"POST",url:"".concat(this.getCollectionPrefix(),"/stories/auto_album/").concat(t,"/videos/").concat(r,"?resolution=").concat(o)};return this.call(n)}getStoryVideo(e){var{id:t,clientRequestToken:r}=e,o={type:"GET",url:"".concat(this.getCollectionPrefix(),"/stories/auto_album/").concat(t,"/videos/").concat(r),noCache:!0};return this.call(o)}getCollectionPrefix(){return"/drive/v2/memories/v1"}}},20888:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(62193),n=r.n(o),i=r(56449),a=r.n(i),s=r(39754),c=r.n(s),l=r(95950),u=r.n(l),d=r(44383),h=r.n(d),p=r(55488),v=r(97637);const g=function buildFilter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];!e.type&&t&&(e.type=["PHOTOS","VIDEOS"]);var o=h()(e,u()(p.Bj));return c()(o,((e,t)=>{if(a()(e)||(e=[e]),!n()(e[0])||Number.isFinite(e[0])){"favorite"===t&&(e=e.map((e=>{switch(e){case"1":return!0;case"0":return!1;default:return e}})));var o=p.Bj[t].joinOperator;e.length&&r.push(t+":("+(0,v.A)(e.join(o))+")")}})),r.join(" AND ")}},61365:(e,t,r)=>{r.d(t,{F4:()=>month,Ok:()=>year,Qh:()=>monthYear,RI:()=>timePeriod,eK:()=>monthDayYear,j_:()=>hourMinute,jr:()=>weekday,vd:()=>day,zT:()=>monthDay,zl:()=>isTwelveHourFormat});var o=r(95093),n=r.n(o),i="en",a=new Map([[i,"MMM YYYY"],["zh-cn","YYYYMMM"],["ja","YYYYM"],["de","MMMM YYYY"],["es","MMMM [de] YYYY"],["fr","MMMM YYYY"],["it","MMMM YYYY"],["pt","MMMM [de] YYYY"]]),s=new Map([[i,"MMM D"],["zh-cn","MMMD"],["ja","MD"],["de","D. MMMM"],["es","D [de] MMM"],["fr","D MMMM"],["it","D MMMM"],["pt","D [de] MMM"]]),getLocaleFormat=e=>e.get(n().locale())||e.get(i);function monthYear(e){return n()(e).format(getLocaleFormat(a))}function monthDay(e){return n()(e).format(getLocaleFormat(s))}function weekday(e){return n()(e).format("dddd")}function monthDayYear(e){var t,{abbreviateMonth:r=!0,numerical:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=o?"l":r?"ll":"LL",n()(e).format(t)}function day(e){return n()(e).format("DD")}function month(e){var{numerical:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?n()(e).format("MM"):n()(e).format("MMM")}function year(e){return n()(e).format("YYYY")}function hourMinute(e){var{hideTimePeriod:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&isTwelveHourFormat()?n()(e).format("hh:mm"):n()(e).format("LT")}function timePeriod(e){return n()(e).format("A")}function isTwelveHourFormat(){return"h:mm A"===n().localeData()._longDateFormat.LT||!1}},98366:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(82306),n=r.n(o),i=r(39754),a=r.n(i),s=r(56449),c=r.n(s);const l=class EventEmitter{constructor(){this.events={}}addListener(e,t,r,o){var n=this.getEventGroup(e);if(o=o||0,!e||"function"!=typeof t)throw"Listener must include a callback and an event";n||(n=this.events[e]=[]),n.unshift({method:t,parent:r,priority:o}),n.sorted=!1}listenOnce(e,t,r,o){var n=this;this.addListener(e,(function callback(){n.removeListener(e,callback,r),t.apply(arguments)}),r,o)}removeListener(e,t,r){var o,n;if(c()(e))for(n=0;n<e.length;n++)this.removeListener(e[n],c()(t)?t[n]:t,r);else for(o=this.getEventGroup(e),n=0;n<o.length;n++)(!r&&t&&o[n].method===t||!t&&r&&o[n].parent===r||r&&t&&o[n].parent===r&&o[n].method===t||!r&&!t)&&(o.splice(n,1),n--)}removeAllListeners(e){if(!e)throw"Must have a parent to remove all listeners";a()(this.events,((t,r)=>{this.removeListener(r,null,e)}))}getEventGroup(e){var t=this.events[e];return t||(t=this.events[e]=[]),t.length>1&&!t.sorted&&(t.sort(((e,t)=>t.priority-e.priority)),t.sorted=!0),t}emit(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getEventGroup(e),i=[r].concat(n()(arguments).slice(2));if(o&&o.length)for(o=o.slice(),t=0;t<o.length&&!1!==o[t].method.apply(o[t],i);t++);}}},55488:(e,t,r)=>{r.d(t,{Ay:()=>c,Bj:()=>s,Z9:()=>a});var o=r(95950),n=r.n(o);function FilterCategory(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" OR ";this.paramName=e,this.title=t,this.bufferResponse=r,this.joinOperator=o}var i={all:new FilterCategory("all","amazon-photos-filter-all",!0),type:new FilterCategory("type","amazon-photos-filters-media-type",!0),media:new FilterCategory("media","amazon-photos-filters-media",!0),location:new FilterCategory("location","amazon-photos-filter-location",!0),favorite:new FilterCategory("favorite",null,!0),familyMembers:new FilterCategory("familyMembers","amazon-photos-filter-members",!0),groupMembers:new FilterCategory("groupMembers","amazon-photos-filter-members",!0),name:new FilterCategory("name","amazon-photos-filter-name",!0),people:new FilterCategory("people","amazon-photos-filter-faces",!1," AND "),things:new FilterCategory("things","amazon-photos-filter-things",!1," AND "),time:new FilterCategory("time","amazon-photos-filter-histogram",!0),timeYear:new FilterCategory("time","amazon-photos-filter-histogram",!0),timeMonth:new FilterCategory("time","amazon-photos-filter-histogram",!0),timeDay:new FilterCategory("time","amazon-photos-filter-histogram",!0)},a=n()(i),s=i;const c={categoryNames:a,filterCategories:i}},35994:(e,t,r)=>{r.d(t,{A:()=>k});var o=r(35970),n=r.n(o),i=r(62193),a=r.n(i),s=r(44383),c=r.n(s),l=r(85015),u=r.n(l),d=r(1882),h=r.n(d),p=r(63950),v=r.n(p),g=r(90179),m=r.n(g),f=r(39729),b=r.n(f),S=r(56449),y=r.n(S),T=r(32629),_=r.n(T),C=r(39754),E=r.n(C),P=r(43346),I=r.n(P),w=r(96540),j=r(98366),A=["store","mapToProps"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=new j.A,O=[];class FluxStore{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty(this,"_mountedConnectedCount",0),this.disabled=!1,this.shared=!1,I()(this,e),this.boundEvents=this._makeBoundEventArrays(this.events,this),E()(e.mixins,(e=>this._addMixin(e))),this.eventEmitter=new j.A,this.resetData(),this.setListeners(),O.push(this),this.init&&this.init()}_makeBoundEventArrays(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e=_()(e),E()(e,((r,o)=>{var n;if(y()(r))for(n=0;n<r.length;n++){var i=this._getEventMethod(r[n],t);r[n]=b()(i,this)}else{var a=this._getEventMethod(r,t);e[o]=[b()(a,this)]}})),e}_addMixin(e){if(e){var{defaultData:t,events:r}=e;return this.defaultData=I()(this.defaultData||{},t),I()(this,m()(e,["defaultData","events"])),E()(this._makeBoundEventArrays(r,e),((e,t)=>{this.boundEvents[t]?this.boundEvents[t]=this.boundEvents[t].concat(e):this.boundEvents[t]=e})),this}}addMixin(e){return this._addMixin(e).suspend().restore()}resetData(e){return e=e||I()({},this.defaultData),this.data=e||{},this.emitChange(this.data),this}setInitialData(e){return this.setData(e),this}setData(e,t){if(!this.disabled)return e=e||{},void 0===t&&(t=!0),t?I()(this.data,e):this.data=e,this.emitChange(e),this}getProperty(e,t){var r,o=this.data;for(e=e.split("."),r=0;r<e.length;r++)if(void 0===(o=o[e[r]])){o=t;break}return o}_getEventMethod(e){return"string"==typeof e&&(e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e]),"function"!=typeof e&&(e=v()),e}setListeners(){if(this.boundEvents)return this.stopListeners(),E()(this.boundEvents,((e,t)=>{E()(e,(e=>{D.addListener(t,e,this)}))})),this}stopListeners(){return D.removeAllListeners(this),this}suspend(){if(!this._mountedConnectedCount)return this.stopListeners(),this.data={},this.disabled=!0,this}restore(){if(this.disabled)return this.setListeners(),this.resetData(),this.disabled=!1,this}listen(e,t){return this.eventEmitter.addListener("change",e,t),this}unListen(e,t){return this.eventEmitter.removeListener("change",e,t),this}emitChange(e){return this.eventEmitter.emit("change",e),this}componentState(e){return e.setState(this.data),this.listen((()=>{e.setState(this.data)}),e),this}connectComponent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{suspendOnUnmount:o,setup:n,teardown:i,onUpdate:a}=r,s=this,l=e._originalDisplayName||e.displayName||e.name||"Component",d="Connected".concat(l,"(").concat(this.constructor.name,")"),p=h()(t),v=y()(t)||u()(t);class Connected extends w.Component{constructor(){super(...arguments),_defineProperty(this,"onStoreUpdate",(()=>{this.forceUpdate()}))}UNSAFE_componentWillMount(){s.restore(),s._mountedConnectedCount+=1,n&&n(this.props,...arguments),v?s.onPickedStateChange(t,this.onStoreUpdate,this):s.listen(this.onStoreUpdate,this)}componentWillUnmount(){s._mountedConnectedCount-=1,s._mountedConnectedCount<0&&(s._mountedConnectedCount=0),s.unListen(null,this),o&&s.suspend(),i&&i(this.props,...arguments)}UNSAFE_componentWillReceiveProps(){a&&a(...arguments)}render(){var{data:r}=s;return p?r=t(_()(r)):v&&(r=c()(r,t)),w.createElement(e,_extends({},r,this.props))}}return _defineProperty(Connected,"displayName",d),_defineProperty(Connected,"_originalDisplayName",l),Connected}onPickedStateChange(e,t,r){var getPickedData=t=>c()(t,e);return t(getPickedData(this.data)),this.listen((e=>{var r=getPickedData(e);a()(r)||t(r)}),r),this}pickComponentState(e,t){return e.setState(c()(this.data,t)),this.onPickedStateChange(t,(t=>{e.setState(t)}),e),this}endComponentState(e){return this.unListen(null,e),this}notifyComponent(e,t,r){this.restore(),r=n()(arguments).slice(2);var listener=o=>{o=a()(r)?o:c()(o,r),a()(o)||e.setState(t?{[t]:I()({},c()(this.data,r),o)}:o)};return listener(this.data),this.listen(listener,e),this}endNotifications(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.unListen(null,e),t&&!this.shared&&this.suspend(),this}extend(e){if("FluxStore"!==this.constructor.name)throw"".concat(this.constructor.name,".extend may not be used because it is an es6 class definition. Use es6 class extend instead.");return new FluxStore(I()({},this,e))}}const k={Store:FluxStore,stores:O,createStore:e=>new FluxStore(e),connect:function connectComponentToStores(e,t){var r=e,o=0;for(y()(t)||(t=[t]),o=0;o<t.length;o++){var n=t[o],{store:i,mapToProps:a}=n,s=_objectWithoutProperties(n,A);r=i.connectComponent(r,a,s)}return r},emit:D.emit.bind(D),listen:D.addListener.bind(D),listenOnce:D.listenOnce.bind(D),unListen:D.removeListener.bind(D)}},20695:(e,t,r)=>{function getFocusableElements(e){if(!e)return[];return Array.from(e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'))}function focusFirstElement(e){var t=getFocusableElements(e);return t.length>0&&(t[0].focus(),!0)}r.d(t,{$G:()=>handleMenuKeyboardNavigation,Dy:()=>restoreFocus,Hm:()=>saveLastFocusedElement,Ry:()=>focusFirstElement,gL:()=>getMenuItems});var o=null;function saveLastFocusedElement(){o=document.activeElement}function restoreFocus(){o&&"function"==typeof o.focus&&o.focus()}function getMenuItems(e){return e?getFocusableElements(e):[]}function handleMenuKeyboardNavigation(e,t){if(t){var r=getMenuItems(t);if(0!==r.length){var o=r.indexOf(document.activeElement);switch(e.key){case"ArrowDown":e.preventDefault(),r[o<r.length-1?o+1:0].focus();break;case"ArrowUp":e.preventDefault(),r[o>0?o-1:r.length-1].focus();break;case"Home":e.preventDefault(),r[0].focus();break;case"End":e.preventDefault(),r[r.length-1].focus()}}}}},73256:(e,t,r)=>{r.d(t,{A:()=>formatCurrency});var o=r(97463);function formatCurrency(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=o.A.getProperty("language").replace("_","-"),i=new Intl.NumberFormat(n,{style:"currency",currency:t}).format(e);return r&&i.includes("$")?i.replace(/\$/gi,"$$$$"):i}},33218:(e,t,r)=>{r.d(t,{A:()=>formatSize});var o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=1024;function formatSize(e){var t=0;for(e=Number.isFinite(e)?e:0;e>=n;)e/=n,t++;return e.toFixed(1).replace(".0","")+" "+o[t]}},87791:(e,t,r)=>{r.d(t,{A:()=>getString});var o=r(55378),n=r.n(o),i=r(85015),a=r.n(i),s=r(23805),c=r.n(s),l=r(39754),u=r.n(l),d=r(62216),h=r.n(d),p=r(56449),v=r.n(p),g=r(73725),m=r(96540),f="-plural",b="-single";function getString(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=[],l=!1;return v()(o)||(o=h()(o)?[]:[o]),Number.isFinite(i)&&(r+=1===i?b:f),(e=t[r])?(u()(o,(function(t,r){if(c()(t))l=!0;else{var o=new RegExp("%"+(r+1)+"\\$[a-z]","gi");e=e.replace(o,t)}})),l?(s.push(e),u()(o,(function(e,t){if(c()(e)){var r=[],o=new RegExp("%"+(t+1)+"\\$[a-z]","gi");u()(s,(function(t){var n;a()(t)?(n=t.split(o),u()(n,(function(t,o){0!==o&&r.push(e),""!==t&&r.push(t)}))):r.push(t)})),s=r}})),n()(s,(function(e,t){return m.createElement("span",{key:t},e)}))):e):(g.A.fatal("Invalid string id: "+r),r)}},88842:(e,t,r)=>{r.d(t,{A:()=>getLocaleCollator});var o=/[^\w ]/g;function getLocaleCollator(){var{locale:e="en_US",dir:t="asc",usage:r="sort",ignorePunctuation:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=e.toLowerCase().replace("_","-"),"sort"===r&&window.Intl&&"function"==typeof window.Intl.Collator)try{var i=new window.Intl.Collator(e,{sensitivity:"base",numeric:!0,usage:"sort",ignorePunctuation:n});return"asc"===t?i.compare:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.compare(t,e)}}catch(e){}return"sort"===r?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e=e.toLowerCase(),r=r.toLowerCase(),"asc"===t?e<r?-1:e>r?1:0:r<e?-1:r>e?1:0}:"search"===r?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e=e.toLowerCase(),t=t.toLowerCase(),n&&(e=e.replace(o,""),t=t.replace(o,"")),e.indexOf(t)}:void 0}},73725:(e,t,r)=>{r.d(t,{A:()=>b});var o=r(82306),n=r.n(o),i=r(39754),a=r.n(i),s=r(79859),c=r.n(s),l=r(65606),u=r.n(l),d=r(50248),h=(0,r(60453).A)(window.location.search),p={debug:0,log:1,info:1,warn:2,error:3},v=(u(),p.warn),log=(e,t)=>{if(window.console&&p[e]>=v)try{window.console[e].apply(window.console,t),p[e]===p.warn&&window.console.trace&&window.console.trace("Trace:")}catch(e){window.console.error("Error logging: ".concat(e.message))}},g={},m={log(){log("log",arguments)},info(){log("info",arguments)},warn(){log("warn",arguments)},debug(){log("debug",arguments)},error(e,t,r){d.Yy({name:"error",message:e,attribution:t,err:r}),log("error",arguments)},fatal(e,t,r){log("error",arguments),d.jg(JSON.stringify({message:e,attribution:t,logLevel:"FATAL"}),r)},createLogger(e,t){var r=["log","debug","info"];if(e=e||"",t=t||"log",p.hasOwnProperty(e))throw"Logger.createLogger called with context that looks like a log level: ".concat(e);if(!c()(r,t))throw"Invalid log level: ".concat(t);function logger(){logger[t].apply(logger,arguments)}return a()(r,(t=>{logger[t]=function(){var r=n()(arguments);(g[e]||g["*"])&&(r[0]="".concat(e,"[").concat(Date.now()-(window.ue_t0||0),"] ").concat(r[0]),log(t,r))}})),logger.warn=m.warn,logger.error=m.error,logger.fatal=m.fatal,logger}},f=function setContexts(e){e?"true"===String(e)||"1"===String(e)?(v=p.debug,g={"*":!0}):(g={},a()([].concat(e),(e=>{p.hasOwnProperty(e)?v=p[e]:g[e]=!0}))):(g={},v=p.warn)};h.consoleLog?f(h.consoleLog):h.consoleConfig&&f(h.consoleConfig);const b=m},45591:(e,t,r)=>{r.d(t,{A:()=>parseUrl});var o=r(60453),n=window.document.createElement("a"),i=window.document.location.hostname,a=window.document.location.protocol;function parseUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.href=e;var{hostname:t=i,pathname:r="",search:s="",hash:c="",protocol:l=a}=n,u=t===i;return(r.length&&"/"!==r[0]||!r&&"/"===e)&&(r="/"+r),{hostname:t,pathname:r,search:s,hash:c,protocol:l,isLocal:u,queryMap:(0,o.A)(s)}}},59786:(e,t,r)=>{r.d(t,{A:()=>m});var o=r(56449),n=r.n(o),i=r(62216),a=r.n(i),s=r(55378),c=r.n(s),l=r(83673),u=r.n(l),d=r(68090),h=r.n(d),p=r(43346),v=r.n(p),g=r(45591);class PageURL{constructor(e,t){this._urlData=(0,g.A)(e);var{protocol:r}=this._urlData;this.isRelative=!r||0!==e.indexOf(r),v()(this._urlData.queryMap,t)}get base(){var{protocol:e,hostname:t,pathname:r}=this._urlData;return(this.isRelative?"":"".concat(e,"//").concat(t))+r}get query(){return this._urlData.queryMap}clone(){return new PageURL(this.base,this._urlData.queryMap)}setParam(e,t){return this._urlData.queryMap[e]=t,this}deleteParam(e){return delete this._urlData.queryMap[e],this}addPath(e){var t=this._urlData.pathname.split("/");return t.length>1&&!h()(t)&&t.pop(),"/"===e[0]&&(e=e.substring(1)),t.push(e),t=t.join("/"),this._urlData.pathname=t,this}toQueryString(){var e=this._urlData.queryMap,t=u()(c()(e,((e,t)=>{if(!a()(e))return n()(e)?"".concat(encodeURIComponent(t),"=").concat(c()(e,encodeURIComponent).join(",")):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))}))).join("&");return t.length?(/\?/.test(this.base)?"&":"?")+t:""}toString(){return this.base+this.toQueryString()+this._urlData.hash}}const m=PageURL},60453:(e,t,r)=>{r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=r(55378),n=r.n(o),i=r(39754),a=r.n(i);function __WEBPACK_DEFAULT_EXPORT__(e){var t=(e||"").split(/\?|&/),r={};return a()(t,(function(e){try{var t,o,i=e.split(/=/);2===i.length&&(t=i[0],(o=i[1].split(/,/)).length>1?r[t]=n()(o,decodeURIComponent):1===o.length&&(r[t]=decodeURIComponent(o[0])))}catch(e){}})),r}},89649:(e,t,r)=>{function preventBubbling(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e.preventDefault(),e.nativeEvent.preventDefault()),t&&(e.stopPropagation(),e.nativeEvent.stopPropagation())}r.d(t,{A:()=>preventBubbling})},14780:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(7309),n=r.n(o),i=r(1882),a=r.n(i),s=r(19747),c=r.n(s),l=r(62193),u=r.n(l),d=r(39754),h=r.n(d),p=r(74692),v=r.n(p);const g={activeCount:0,activeLimit:4,throttleDelay:0,priorities:[1,2,3],defaultPriority:2,callQueues:{},lastBatchId:0,batches:{},isPaused:!1,cancel:function cancel(e){h()(this.batches,((t,r)=>{e&&t.groupName!==e||this.abortBatch(r)}))},addBatch:function addBatch(e){var t=e.operation;if(!t)throw"Prioritizer.addBatch() called without operation specified";if(0===e.items.length)return v().Deferred().resolve().promise();e.activeLimit&&(this.activeLimit=e.activeLimit);var r=e.items||[],o=e.metadata||{},n=e.batchSize||r.length,i=e.priority||this.defaultPriority,a=Math.ceil(r.length/n),s=new(v().Deferred),c=this.lastBatchId++;this.batches[c]={operation:t,successCallback:e.successCallback,failCallback:e.failCallback,progressCallback:e.progressCallback,metadata:o,remaining:a,finale:s,failQueue:[],groupName:e.groupName};for(var l=0;l<a;l++){var u={items:r.slice(l*n,(l+1)*n),batchId:c,sliceIndex:l};this.callQueues.hasOwnProperty(i)||(this.callQueues[i]=[]),this.callQueues[i].push(u)}var d=s.promise();return this._proceed(),d},addBatchAndReturnMetadata:function addBatchAndReturnMetadata(e){return{promise:this.addBatch(e),batchId:this.lastBatchId-1}},pause:function pause(){this.isPaused=!0},resume:function resume(){this.isPaused=!1,this._processFailQueue(),this._proceedThrottled()},_proceedThrottled:function _proceedThrottled(){window.setTimeout(v().proxy(this._proceed,this),this.throttleDelay)},_proceed:function _proceed(){var e,t;if(!this.isPaused&&this.activeCount<this.activeLimit){for(var r=0;r<this.priorities.length;r++)if(t=this.callQueues[this.priorities[r]],!u()(t)&&(e=t.shift())&&this.batches[e.batchId]){this._makeCall(e.batchId,e.items,e.sliceIndex);break}c()(this.callQueues,u())||this._proceedThrottled()}},_makeCall:function _makeCall(e,t,r){this.activeCount++;var o=this.batches[e];o.operation(t,r).done(v().proxy(this._callDone,this,e,t,o)).fail(v().proxy(this._callFail,this,e,t,o)).progress(v().proxy(this._callProgress,this,e,t,o))},_callDone:function _callDone(e,t,r){r&&(a()(r.successCallback)&&r.successCallback(r.metadata,t),0==--r.remaining&&(r.finale.resolve(r.metadata),delete this.batches[e])),this.completeCall()},_callFail:function _callFail(e,t,r,o){r?a()(r.failCallback)?(r.failQueue.push({batchId:e,items:t,xhr:o}),this.isPaused||this._processFailQueue()):(r.finale.reject(),delete this.batches[e],this.completeCall()):this.completeCall()},_callProgress:function _callProgress(e,t,r,o){r&&a()(r.progressCallback)&&r.progressCallback(o)},completeCall:function completeCall(){this.activeCount=Math.max(this.activeCount-1,0),this._proceedThrottled()},abortBatch:function abortBatch(e){var t=this.batches[e];t&&(t.finale.reject(),h()(this.callQueues,(t=>{for(var r=t.length;r--;)t[r].batchId===Number(e)&&(t.splice(r,1),this.activeCount=Math.max(this.activeCount-1,0))})),delete this.batches[e])},failureResume:function failureResume(e){var t=this.batches[e];t&&0==--t.remaining&&(t.finale.resolve(t.metadata),delete this.batches[e]),this.activeCount=Math.max(this.activeCount-1,0),this.resume()},_processFailQueue:function _processFailQueue(){var e=n()(this.batches,(function(e){return!u()(e.failQueue)}));if(e){this.pause();var t=e.failQueue.pop();e.failCallback(t.items,t.batchId,e.metadata,t.xhr)}}}},5732:(e,t,r)=>{r.d(t,{A:()=>queryFilter});var o=r(97637),n="sortDateTaken";function queryFilter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{startDate:t,endDate:r="*",contentType:i,sortToken:a=n,type:s,category:c,keywords:l,hidden:u,previewableOnly:d=!1,name:h,folderId:p,isTrash:v}=e,g=[],m=[],f=[],b=-1!==a.indexOf(n)?"contentProperties.contentDate":"createdDate";return"album"===s?(m.push("kind:VISUAL_COLLECTION"),t=r=null):"folder"===s?m.push("kind:FOLDER"):"albumAndFolder"===s?(m.push("kind:VISUAL_COLLECTION"),m.push("kind:FOLDER")):"shares"===s?m.push("kind:SHARED_COLLECTION"):"file"===s?m.push("kind:FILE*"):"nonMedia"===s?(m.push("isMedia:false"),m.push("kind:FILE*")):"all"!==s&&m.push("kind:(FILE* OR FOLDER*)"),"photos"===i?g=["image*"]:"videos"===i?g=["video*"]:"files"===i||["album","folder","albumAndFolder"].includes(s)||(g=["image*","video*"]),v?f.push("TRASH*"):f.push("AVAILABLE*"),t&&m.push(b+":["+t+" TO "+r+"]"),g&&g.length&&m.push("contentProperties.contentType:("+g.join(" OR ")+")"),m.push("status:("+f.join(" OR ")+")"),c&&m.push("category:"+c),l&&m.push("keywords:"+(0,o.A)(l)+"*"),u?m.push("settings.hidden:true"):!1===u&&m.push("settings.hidden:false"),d&&m.push("transforms:IMAGE_THUMBNAIL"),h&&m.push('name:"'.concat((0,o.A)(h),'"')),p&&m.push("parents:".concat(p)),m.join(" AND ")}},53540:(e,t,r)=>{r.d(t,{Ay:()=>buildSort,Y5:()=>n,_6:()=>o,xB:()=>i});var o=function(e){return e.SortAlphaName="sortAlphaName",e.SortCount="sortCount",e.SortDate="sortDate",e.SortDateCreated="sortDateCreated",e.SortDateDeleted="sortDateDeleted",e.SortDateModified="sortDateModified",e.SortDateTaken="sortDateTaken",e.SortDateUploaded="sortDateUploaded",e.SortExtension="sortExtension",e.SortIntelligent="sortIntelligent",e.SortKind="sortKind",e.SortRelevance="sortRelevance",e.SortSize="sortSize",e}({}),n=function(e){return e.AddedToGroup="groupPermissions.groupModifiedDate",e.ContentDate="contentProperties.contentDate",e.Count="count",e.Date="date",e.DateCreated="createdDate",e.DateModified="modifiedDate",e.Extension="contentProperties.extension",e.Kind="kind",e.ModifiedDate="modifiedDate",e.Name="name",e.SemanticRelevance="semanticRelevance",e.Size="contentProperties.size",e}({}),i=function(e){return e.Ascending="asc",e.Descending="desc",e}({}),a={[o.SortKind]:{desc:"['".concat(n.Kind," DESC', '").concat(n.Name," ASC']"),asc:"['".concat(n.Kind," ASC', '").concat(n.Name," DESC']")},[o.SortDateTaken]:{asc:"['".concat(n.ContentDate," ASC']"),desc:"['".concat(n.ContentDate," DESC']")},[o.SortDateCreated]:{asc:"['".concat(n.DateCreated," ASC']"),desc:"['".concat(n.DateCreated," DESC']")},[o.SortRelevance]:{asc:"['".concat(n.SemanticRelevance," ASC']"),desc:"['".concat(n.SemanticRelevance," DESC']")},[o.SortIntelligent]:{asc:"",desc:""},[o.SortDateUploaded]:{asc:"['".concat(n.DateCreated," ASC']"),desc:"['".concat(n.DateCreated," DESC']")},[o.SortDateModified]:{asc:"['".concat(n.DateModified," ASC']"),desc:"['".concat(n.DateModified," DESC']")},[o.SortDateDeleted]:{asc:"['".concat(n.ModifiedDate," ASC']"),desc:"['".concat(n.ModifiedDate," DESC']")},[o.SortAlphaName]:{asc:"['".concat(n.Name," ASC']"),desc:"['".concat(n.Name," DESC']")},[o.SortCount]:{asc:"['".concat(n.Count," ASC']"),desc:"['".concat(n.Count," DESC']")},[o.SortDate]:{asc:"['".concat(n.Date," ASC']"),desc:"['".concat(n.Date," DESC']")},[o.SortSize]:{asc:"['".concat(n.Size," ASC']"),desc:"['".concat(n.Size," DESC']")},[o.SortExtension]:{asc:"['".concat(n.Extension," ASC']"),desc:"['".concat(n.Extension," DESC']")}};function buildSort(e){var t,r,n,i="asc"===(null==e?void 0:e.order)?"asc":"desc",s=null!==(t=null==e?void 0:e.sortToken)&&void 0!==t?t:o.SortDateTaken;return null!==(r=null===(n=a[s])||void 0===n?void 0:n[i])&&void 0!==r?r:a[o.SortDateTaken].desc}},90463:(e,t,r)=>{r.d(t,{Ay:()=>h,RI:()=>flushCache,iT:()=>setCacheLimit});var o=r(64112),n=r.n(o),i=r(74692),a=r.n(i);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=window.photosRequestPreCache,c=0,l=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},s),u={},d=[];function executeAndCacheRequest(e,t){var r=getRequestKey(e),o=t(e).done(((e,t)=>{u[r]={result:JSON.stringify(e),request:t},d.push(r),d.length>c&&delete u[d.shift()]})).always((()=>{delete l[r]}));return l[r]=o,o}const h=function requestCache(e,t){var r,o,i=getRequestKey(e);if(e.noCache||(o=u[i]),!o){if(l[e.precacheKey]){var s=l[e.precacheKey];l[i]=s,delete l[e.precacheKey]}if(function isPrecachedRequest(e){return e&&"function"==typeof e.catch}(l[i])){var c=a().Deferred();l[i].then((e=>{if(e instanceof Error)throw e;u[i]={result:JSON.stringify(e)},delete l[i],c.resolve(e)})).catch((()=>{delete l[i],executeAndCacheRequest(e,t).done(c.resolve).fail(c.reject)})),l[i]=c.promise()}return l[i]?l[i]:executeAndCacheRequest(e,t)}r=a().Deferred();try{var d=JSON.parse(o.result);return n()((()=>{r.resolve(d,o.request)})),r.promise()}catch(r){return t(e)}};function flushCache(){l={},u={},d=[]}function setCacheLimit(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Number.isFinite(e)&&(c=e)}function getRequestKey(e){return"".concat(e.url,"?").concat(a().param(e.data))}},97637:(e,t,r)=>{r.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var o=/[\-\\\/\!\?\*\"\(\)\{\}\[\]\^\:\~\&\|]/g;function __WEBPACK_DEFAULT_EXPORT__(e){return(e=String(e||"")).replace(o,"\\$&")}},21327:(e,t,r)=>{r.d(t,{A:()=>D});var o=r(58156),n=r.n(o),i=r(42426),a=r.n(i),s=r(34921),c=r.n(s),l=r(47091),u=r.n(l),d=r(35880),h=r.n(d),p=r(95950),v=r.n(p),g=r(47651),m=r.n(g),f=r(62193),b=r.n(f),S=r(87612),y=r.n(S),T=r(35970),_=r.n(T),C=r(40860),E=r.n(C),P=r(56449),I=r.n(P),w=r(39754),j=r.n(w);function _defineProperty(e,t,r){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=[{key:"isPhoto",countable:"photoCount"},{key:"isVideo",countable:"videoCount"},{key:"isAlbum",countable:"albumCount"},{key:"isShare",countable:"shareCount"},{key:"isFolder",countable:"folderCount"},{key:"isFaceCluster",countable:"faceClusterCount"},{key:"canRemoveFromFamilyArchive",countable:"removableFromFamilyArchiveCount"},{key:"canAddToFamilyArchive",countable:"addableToFamilyArchiveCount"},{key:"canDelete",countable:"deletableCount"},{key:"canHide",countable:"hideableCount"},{key:"canEdit",countable:"editableCount"},{key:"belongsToCurrentUser",countable:"belongsToUserCount"},{key:"canPrint",countable:"printableCount"},{key:"cannotPrint",countable:"unprintableCount"},{key:"canAmazonPrintsPrint",countable:"printableAmazonPrintsCount"},{key:"cannotAmazonPrintsPrint",countable:"unprintableAmazonPrintsCount"}];const D=class Selection{constructor(){_defineProperty(this,"counts",{}),this.selectionData={},this.preSelectionData={},this.singleSelect=!1,j()(A,(e=>{var{countable:t}=e;this[t]=0})),this.select.apply(this,arguments)}preSelect(e){return I()(e)&&(this.preSelectionData=E()(e,(function(e,t){return t.indexOf(":")>=0&&(e[t.split(":")[1]]=!0),e[t]=!0,e}),this.preSelectionData)),this}updateCounts(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t&&-1!==t)throw new Error("Invalid increment for updateCounts");for(var r=0;r<e.length;r++)for(var{countables:o=[]}=e[r],n=0;n<o.length;n++)void 0===this.counts[o[n]]&&(this.counts[o[n]]=0),this.counts[o[n]]+=t,this.counts[o[n]]<0&&(this.counts[o[n]]=0)}select(){var e,t=_()(arguments);I()(t[0])&&(t=t[0]),(t=y()(t,(e=>!this.isSelected(e.id)))).length&&(this.singleSelect?(e=t.pop(),b()(this.selectionData)&&this.photoCount++,this.selectionData={},this.selectionData[e.id]=e):j()(t,(e=>{void 0===e||this.preSelectionData[e.id]||this.isSelected(e.id)||(this.selectionData[e.id]=e,j()(A,(t=>{var{key:r,countable:o}=t;m()(e,r)&&this[o]++})))})),this.updateCounts(t,1))}deselect(){var e=_()(arguments);I()(e[0])&&(e=e[0]),(e=y()(e,(e=>this.isSelected(e.id)))).length&&(this.singleSelect&&e.length>1||(j()(e,(e=>{delete this.selectionData[e.id],j()(A,(t=>{var{key:r,countable:o}=t;m()(e,r)&&this[o]--}))})),this.updateCounts(e,-1)))}get(e){return this.selectionData[e]}isSelected(e){return Boolean(this.get(e))}isPreSelected(e){return Boolean(this.preSelectionData[e])}getIds(){return v()(this.selectionData)}getNodes(){return h()(this.selectionData)}getSize(){return u()(this.selectionData)}isEmpty(){return b()(this.selectionData)}getFirst(e){var t=c()(this.getNodes(),e);return void 0===e?t[0]:t}hasAlbums(){return this.albumCount>0}hasStories(){return void 0!==this.counts.story&&this.counts.story>0}hasShares(){return this.shareCount>0}isSharingDisabled(e){var{contentTypes:t=[],dataTypes:r=[]}=e;return!(!t.length&&!r.length)&&a()(this.selectionData,(e=>{var[o,i]=n()(e,"contentProperties.contentType","").split("/");return!(!o&&!i)&&(a()(t,(e=>e.toUpperCase()===o.toUpperCase()))||a()(r,(e=>e.toUpperCase()===i.toUpperCase())))}))}canRemoveFromFamilyArchive(){return this.removableFromFamilyArchiveCount>0}canAddToFamilyArchive(){return this.addableToFamilyArchiveCount>0}canRemoveAllFromFamilyArchive(){return this.removableFromFamilyArchiveCount===this.getSize()}canDelete(){return this.deletableCount>0}canHide(){return this.hideableCount>0}canEdit(){return this.editableCount>0}belongsToUser(){return this.belongsToUserCount===this.getSize()}}},21764:(e,t,r)=>{function splitNodeOwnerId(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=void 0;return r&&([e,t]=r.split(":")),t===o&&(t=e,e=o),{ownerId:e,nodeId:t}}r.d(t,{A:()=>splitNodeOwnerId})},63734:(e,t,r)=>{r.d(t,{N:()=>useFlux});var o=r(96540);function useFlux(e,t){var[r,n]=(0,o.useState)((()=>t(e.data)));return(0,o.useEffect)((()=>{e.restore(),e._mountedConnectedCount+=1;var onChangeCallback=()=>n(t(e.data));return e.listen(onChangeCallback,onChangeCallback),()=>{e.unListen(onChangeCallback,onChangeCallback),e._mountedConnectedCount=Math.max(0,e._mountedConnectedCount-1)}}),[]),r}},58992:(e,t,r)=>{r.d(t,{O:()=>isPhoneNumberValid,x:()=>isEmailValid});var o=r(18742);function isPhoneNumberValid(e){var t=o.A.getProperty("phoneNumberRegex");return!!t&&new RegExp(t).test(e)}function isEmailValid(e){var t=o.A.getProperty("emailRegex");return!!t&&new RegExp(t).test(e)}},40484:(e,t,r)=>{function calculateViewbox(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!e||!t)throw"Component dimensions not provided, can't calculate viewbox";if(t*=n,e*=n,!o||!r)return"".concat(Math.round(e),",").concat(Math.round(t));var i=r/o;if(1===i)return"".concat(Math.round(Math.max(t,e)));var a,s,c=e/t;if(1===c){var l=(i<1?1/i:i)*e;return"".concat(Math.round(l))}return c>i?(a=e,s=e/i):c<i?(s=t,a=t*i):(s=t,a=e),"".concat(Math.round(a),",").concat(Math.round(s))}r.d(t,{A:()=>calculateViewbox})}}]);
//# sourceMappingURL=clouddrive-41ddf3f2ef346239ce85.js.map